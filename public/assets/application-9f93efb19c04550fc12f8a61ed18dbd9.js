/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
function getDomId(e){return e.match(/\d+$/)[0]}function selectRelation(e){$("#permissions").html(""),$("#relation_customs_list div.options").hide(),$(e).siblings("div.options").show(),$.ajax({url:"../permissions",context:document.body,data:{relation_id:getDomId($(e).attr("id"))},dataType:"script"})}function selectPermission(e){var t=getDomId($(e).attr("id")),i=$('input[id="relation_custom_permission_ids_'+t+'"]'),n=$('label[for="relation_custom_permission_ids_'+t+'"]');$(e).is(":checked")?(i.attr("checked","checked"),n.parent().show()):(i.removeAttr("checked"),n.parent().hide())}function Boxy(e,t){this.boxy=jQuery(Boxy.WRAPPER),jQuery.data(this.boxy[0],"boxy",this),this.visible=!1,this.options=jQuery.extend({},Boxy.DEFAULTS,t||{}),this.options.modal&&(this.options=jQuery.extend(this.options,{center:!0,draggable:!1})),this.options.actuator&&jQuery.data(this.options.actuator,"active.boxy",this),this.setContent(e||"<div></div>"),this._setupTitleBar(),this.boxy.css("display","none").appendTo(document.body),this.toTop(),this.options.fixed&&(jQuery.browser.msie&&7>jQuery.browser.version?this.options.fixed=!1:this.boxy.addClass("fixed")),this.options.center&&Boxy._u(this.options.x,this.options.y)?this.center():this.moveTo(Boxy._u(this.options.x)?this.options.x:Boxy.DEFAULT_X,Boxy._u(this.options.y)?this.options.y:Boxy.DEFAULT_Y),this.options.show&&this.show()}/*!
 * OpenTok JavaScript Library v0.91.46
 * http://www.tokbox.com/
 *
 * Copyright (c) 2011 TokBox, Inc.
 *
 * Date: February 16 18:15:10 2012
 */
function getHostname(){return window.location.hostname}(function(e,t){function i(e){var t=pt[e]={};return Z.each(e.split(tt),function(e,i){t[i]=!0}),t}function n(e,i,n){if(n===t&&1===e.nodeType){var r="data-"+i.replace(gt,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:mt.test(n)?Z.parseJSON(n):n}catch(s){}Z.data(e,i,n)}else n=t}return n}function r(e){var t;for(t in e)if(("data"!==t||!Z.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(){return!1}function a(){return!0}function o(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,i){if(t=t||0,Z.isFunction(t))return Z.grep(e,function(e,n){var r=!!t.call(e,n,e);return r===i});if(t.nodeType)return Z.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=Z.grep(e,function(e){return 1===e.nodeType});if(Ot.test(t))return Z.filter(t,n,!i);t=Z.filter(t,n)}return Z.grep(e,function(e){return Z.inArray(e,t)>=0===i})}function u(e){var t=Lt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function h(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function d(e,t){if(1===t.nodeType&&Z.hasData(e)){var i,n,r,s=Z._data(e),a=Z._data(t,s),o=s.events;if(o){delete a.handle,a.events={};for(i in o)for(n=0,r=o[i].length;r>n;n++)Z.event.add(t,i,o[i][n])}a.data&&(a.data=Z.extend({},a.data))}}function f(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),Z.support.html5Clone&&e.innerHTML&&!Z.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Yt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Z.expando))}function p(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){Yt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,r=vi.length;r--;)if(t=vi[r]+i,t in e)return t;return n}function v(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)}function y(e,t){for(var i,n,r=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(r[s]=Z._data(i,"olddisplay"),t?(r[s]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&v(i)&&(r[s]=Z._data(i,"olddisplay",x(i.nodeName)))):(n=ii(i,"display"),r[s]||"none"===n||Z._data(i,"olddisplay",n)));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none"));return e}function b(e,t,i){var n=ui.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function _(e,t,i,n){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=Z.css(e,i+gi[r],!0)),n?("content"===i&&(s-=parseFloat(ii(e,"padding"+gi[r]))||0),"margin"!==i&&(s-=parseFloat(ii(e,"border"+gi[r]+"Width"))||0)):(s+=parseFloat(ii(e,"padding"+gi[r]))||0,"padding"!==i&&(s+=parseFloat(ii(e,"border"+gi[r]+"Width"))||0));return s}function w(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,r=!0,s=Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing");if(0>=n||null==n){if(n=ii(e,t),(0>n||null==n)&&(n=e.style[t]),hi.test(n))return n;r=s&&(Z.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+_(e,t,i||(s?"border":"content"),r)+"px"}function x(e){if(fi[e])return fi[e];var t=Z("<"+e+">").appendTo(q.body),i=t.css("display");return t.remove(),("none"===i||""===i)&&(ni=q.body.appendChild(ni||Z.extend(q.createElement("iframe"),{frameBorder:0,width:0,height:0})),ri&&ni.createElement||(ri=(ni.contentWindow||ni.contentDocument).document,ri.write("<!doctype html><html><body>"),ri.close()),t=ri.body.appendChild(ri.createElement(e)),i=ii(t,"display"),q.body.removeChild(ni)),fi[e]=i,i}function C(e,t,i,n){var r;if(Z.isArray(t))Z.each(t,function(t,r){i||_i.test(e)?n(e,r):C(e+"["+("object"==typeof r?t:"")+"]",r,i,n)});else if(i||"object"!==Z.type(t))n(e,t);else for(r in t)C(e+"["+r+"]",t[r],i,n)}function E(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r,s,a=t.toLowerCase().split(tt),o=0,l=a.length;if(Z.isFunction(i))for(;l>o;o++)n=a[o],s=/^\+/.test(n),s&&(n=n.substr(1)||"*"),r=e[n]=e[n]||[],r[s?"unshift":"push"](i)}}function S(e,i,n,r,s,a){s=s||i.dataTypes[0],a=a||{},a[s]=!0;for(var o,l=e[s],c=0,u=l?l.length:0,h=e===Oi;u>c&&(h||!o);c++)o=l[c](i,n,r),"string"==typeof o&&(!h||a[o]?o=t:(i.dataTypes.unshift(o),o=S(e,i,n,r,o,a)));return!h&&o||a["*"]||(o=S(e,i,n,r,"*",a)),o}function k(e,i){var n,r,s=Z.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((s[n]?e:r||(r={}))[n]=i[n]);r&&Z.extend(!0,e,r)}function I(e,i,n){var r,s,a,o,l=e.contents,c=e.dataTypes,u=e.responseFields;for(s in u)s in n&&(i[u[s]]=n[s]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("content-type"));if(r)for(s in l)if(l[s]&&l[s].test(r)){c.unshift(s);break}if(c[0]in n)a=c[0];else{for(s in n){if(!c[0]||e.converters[s+" "+c[0]]){a=s;break}o||(o=s)}a=a||o}return a?(a!==c[0]&&c.unshift(a),n[a]):void 0}function T(e,t){var i,n,r,s,a=e.dataTypes.slice(),o=a[0],l={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;r=a[++c];)if("*"!==r){if("*"!==o&&o!==r){if(i=l[o+" "+r]||l["* "+r],!i)for(n in l)if(s=n.split(" "),s[1]===r&&(i=l[o+" "+s[0]]||l["* "+s[0]])){i===!0?i=l[n]:l[n]!==!0&&(r=s[0],a.splice(c--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(u){return{state:"parsererror",error:i?u:"No conversion from "+o+" to "+r}}}o=r}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function N(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function P(){return setTimeout(function(){Vi=t},0),Vi=Z.now()}function D(e,t){Z.each(t,function(t,i){for(var n=(Ji[t]||[]).concat(Ji["*"]),r=0,s=n.length;s>r;r++)if(n[r].call(e,t,i))return})}function M(e,t,i){var n,r=0,s=Zi.length,a=Z.Deferred().always(function(){delete o.elem}),o=function(){for(var t=Vi||P(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,r=1-n,s=0,o=l.tweens.length;o>s;s++)l.tweens[s].run(r);return a.notifyWith(e,[l,r,i]),1>r&&o?i:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Vi||P(),duration:i.duration,tweens:[],createTween:function(t,i){var n=Z.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){for(var i=0,n=t?l.tweens.length:0;n>i;i++)l.tweens[i].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(R(c,l.opts.specialEasing);s>r;r++)if(n=Zi[r].call(l,e,c,l.opts))return n;return D(l,c),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(o,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(e,t){var i,n,r,s,a;for(i in e)if(n=Z.camelCase(i),r=t[n],s=e[i],Z.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),a=Z.cssHooks[n],a&&"expand"in a){s=a.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=r)}else t[n]=r}function F(e,t,i){var n,r,s,a,o,l,c,u,h,d=this,f=e.style,p={},m=[],g=e.nodeType&&v(e);i.queue||(u=Z._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,Z.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===Z.css(e,"display")&&"none"===Z.css(e,"float")&&(Z.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?f.zoom=1:f.display="inline-block")),i.overflow&&(f.overflow="hidden",Z.support.shrinkWrapBlocks||d.done(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],Yi.exec(s)){if(delete t[n],l=l||"toggle"===s,s===(g?"hide":"show"))continue;m.push(n)}if(a=m.length){o=Z._data(e,"fxshow")||Z._data(e,"fxshow",{}),"hidden"in o&&(g=o.hidden),l&&(o.hidden=!g),g?Z(e).show():d.done(function(){Z(e).hide()}),d.done(function(){var t;Z.removeData(e,"fxshow",!0);for(t in p)Z.style(e,t,p[t])});for(n=0;a>n;n++)r=m[n],c=d.createTween(r,g?o[r]:0),p[r]=o[r]||Z.style(e,r),r in o||(o[r]=c.start,g&&(c.end=c.start,c.start="width"===r||"height"===r?1:0))}}function O(e,t,i,n,r){return new O.prototype.init(e,t,i,n,r)}function j(e,t){var i,n={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)i=gi[r],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function H(e){return Z.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var L,B,q=e.document,z=e.location,W=e.navigator,$=e.jQuery,U=e.$,G=Array.prototype.push,V=Array.prototype.slice,Q=Array.prototype.indexOf,Y=Object.prototype.toString,X=Object.prototype.hasOwnProperty,K=String.prototype.trim,Z=function(e,t){return new Z.fn.init(e,t,L)},J=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,at=/(?:^|:|,)(?:\s*\[)+/g,ot=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,ut=/-([\da-z])/gi,ht=function(e,t){return(t+"").toUpperCase()},dt=function(){q.addEventListener?(q.removeEventListener("DOMContentLoaded",dt,!1),Z.ready()):"complete"===q.readyState&&(q.detachEvent("onreadystatechange",dt),Z.ready())},ft={};Z.fn=Z.prototype={constructor:Z,init:function(e,i,n){var r,s,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:nt.exec(e),!r||!r[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(r[1])return i=i instanceof Z?i[0]:i,a=i&&i.nodeType?i.ownerDocument||i:q,e=Z.parseHTML(r[1],a,!0),rt.test(r[1])&&Z.isPlainObject(i)&&this.attr.call(e,i,!0),Z.merge(this,e);if(s=q.getElementById(r[2]),s&&s.parentNode){if(s.id!==r[2])return n.find(e);this.length=1,this[0]=s}return this.context=q,this.selector=e,this}return Z.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=Z.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return Z.each(this,e,t)},ready:function(e){return Z.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(e){return this.pushStack(Z.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:[].sort,splice:[].splice},Z.fn.init.prototype=Z.fn,Z.extend=Z.fn.extend=function(){var e,i,n,r,s,a,o=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},l=2),"object"==typeof o||Z.isFunction(o)||(o={}),c===l&&(o=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(i in e)n=o[i],r=e[i],o!==r&&(u&&r&&(Z.isPlainObject(r)||(s=Z.isArray(r)))?(s?(s=!1,a=n&&Z.isArray(n)?n:[]):a=n&&Z.isPlainObject(n)?n:{},o[i]=Z.extend(u,a,r)):r!==t&&(o[i]=r));return o},Z.extend({noConflict:function(t){return e.$===Z&&(e.$=U),t&&e.jQuery===Z&&(e.jQuery=$),Z},isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){if(e===!0?!--Z.readyWait:!Z.isReady){if(!q.body)return setTimeout(Z.ready,1);Z.isReady=!0,e!==!0&&--Z.readyWait>0||(B.resolveWith(q,[Z]),Z.fn.trigger&&Z(q).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray||function(e){return"array"===Z.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):ft[Y.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==Z.type(e)||e.nodeType||Z.isWindow(e))return!1;try{if(e.constructor&&!X.call(e,"constructor")&&!X.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||X.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var n;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||q,(n=rt.exec(e))?[t.createElement(n[1])]:(n=Z.buildFragment([e],t,i?null:[]),Z.merge([],(n.cacheable?Z.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=Z.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):st.test(t.replace(ot,"@").replace(lt,"]").replace(at,""))?new Function("return "+t)():(Z.error("Invalid JSON: "+t),void 0)):null},parseXML:function(i){var n,r;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(s){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||Z.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(ut,ht)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,i,n){var r,s=0,a=e.length,o=a===t||Z.isFunction(e);if(n)if(o){for(r in e)if(i.apply(e[r],n)===!1)break}else for(;a>s&&i.apply(e[s++],n)!==!1;);else if(o){for(r in e)if(i.call(e[r],r,e[r])===!1)break}else for(;a>s&&i.call(e[s],s,e[s++])!==!1;);return e},trim:K&&!K.call("﻿ ")?function(e){return null==e?"":K.call(e)}:function(e){return null==e?"":(e+"").replace(it,"")},makeArray:function(e,t){var i,n=t||[];return null!=e&&(i=Z.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||Z.isWindow(e)?G.call(n,e):Z.merge(n,e)),n},inArray:function(e,t,i){var n;if(t){if(Q)return Q.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,r=e.length,s=0;if("number"==typeof n)for(;n>s;s++)e[r++]=i[s];else for(;i[s]!==t;)e[r++]=i[s++];return e.length=r,e},grep:function(e,t,i){var n,r=[],s=0,a=e.length;for(i=!!i;a>s;s++)n=!!t(e[s],s),i!==n&&r.push(e[s]);return r},map:function(e,i,n){var r,s,a=[],o=0,l=e.length,c=e instanceof Z||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||Z.isArray(e));if(c)for(;l>o;o++)r=i(e[o],o,n),null!=r&&(a[a.length]=r);else for(s in e)r=i(e[s],s,n),null!=r&&(a[a.length]=r);return a.concat.apply([],a)},guid:1,proxy:function(e,i){var n,r,s;return"string"==typeof i&&(n=e[i],i=e,e=n),Z.isFunction(e)?(r=V.call(arguments,2),s=function(){return e.apply(i,r.concat(V.call(arguments)))},s.guid=e.guid=e.guid||Z.guid++,s):t},access:function(e,i,n,r,s,a,o){var l,c=null==n,u=0,h=e.length;if(n&&"object"==typeof n){for(u in n)Z.access(e,i,u,n[u],1,a,r);s=1}else if(r!==t){if(l=o===t&&Z.isFunction(r),c&&(l?(l=i,i=function(e,t,i){return l.call(Z(e),i)}):(i.call(e,r),i=null)),i)for(;h>u;u++)i(e[u],n,l?r.call(e[u],u,i(e[u],n)):r,o);s=1}return s?e:c?i.call(e):h?i(e[0],n):a},now:function(){return(new Date).getTime()}}),Z.ready.promise=function(t){if(!B)if(B=Z.Deferred(),"complete"===q.readyState)setTimeout(Z.ready,1);else if(q.addEventListener)q.addEventListener("DOMContentLoaded",dt,!1),e.addEventListener("load",Z.ready,!1);else{q.attachEvent("onreadystatechange",dt),e.attachEvent("onload",Z.ready);var i=!1;try{i=null==e.frameElement&&q.documentElement}catch(n){}i&&i.doScroll&&function r(){if(!Z.isReady){try{i.doScroll("left")}catch(e){return setTimeout(r,50)}Z.ready()}}()}return B.promise(t)},Z.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){ft["[object "+t+"]"]=t.toLowerCase()}),L=Z(q);var pt={};Z.Callbacks=function(e){e="string"==typeof e?pt[e]||i(e):Z.extend({},e);var n,r,s,a,o,l,c=[],u=!e.once&&[],h=function(t){for(n=e.memory&&t,r=!0,l=a||0,a=0,o=c.length,s=!0;c&&o>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}s=!1,c&&(u?u.length&&h(u.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var t=c.length;(function i(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),s?o=c.length:n&&(a=t,h(n))}return this},remove:function(){return c&&Z.each(arguments,function(e,t){for(var i;(i=Z.inArray(t,c,i))>-1;)c.splice(i,1),s&&(o>=i&&o--,l>=i&&l--)}),this},has:function(e){return Z.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=u=n=t,this},disabled:function(){return!c},lock:function(){return u=t,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||r&&!u||(s?u.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(i){Z.each(t,function(t,n){var s=n[0],a=e[t];r[n[1]](Z.isFunction(a)?function(){var e=a.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s+"With"](this===r?i:this,[e])}:i[s])}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,n):n}},r={};return n.pipe=n.then,Z.each(t,function(e,s){var a=s[2],o=s[3];n[s[1]]=a.add,o&&a.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),r[s[0]]=a.fire,r[s[0]+"With"]=a.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,s=V.call(arguments),a=s.length,o=1!==a||e&&Z.isFunction(e.promise)?a:0,l=1===o?e:Z.Deferred(),c=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?V.call(arguments):r,n===t?l.notifyWith(i,n):--o||l.resolveWith(i,n)}};if(a>1)for(t=new Array(a),i=new Array(a),n=new Array(a);a>r;r++)s[r]&&Z.isFunction(s[r].promise)?s[r].promise().done(c(r,n,s)).fail(l.reject).progress(c(r,i,t)):--o;return o||l.resolveWith(n,s),l.promise()}}),Z.support=function(){var t,i,n,r,s,a,o,l,c,u,h,d=q.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*"),n=d.getElementsByTagName("a")[0],!i||!n||!i.length)return{};r=q.createElement("select"),s=r.appendChild(q.createElement("option")),a=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===a.value,optSelected:s.selected,getSetAttribute:"t"!==d.className,enctype:!!q.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==q.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===q.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!s.disabled;try{delete d.test}catch(f){t.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick"),d.detachEvent("onclick",h)),a=q.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),d.appendChild(a),o=q.createDocumentFragment(),o.appendChild(d.lastChild),t.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,o.removeChild(a),o.appendChild(d),d.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})l="on"+c,u=l in d,u||(d.setAttribute(l,"return;"),u="function"==typeof d[l]),t[c+"Bubbles"]=u;return Z(function(){var i,n,r,s,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=q.getElementsByTagName("body")[0];o&&(i=q.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(i,o.firstChild),n=q.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=n.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",t.reliableHiddenOffsets=u&&0===r[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===n.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(n,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,s=q.createElement("div"),s.style.cssText=n.style.cssText=a,s.style.marginRight=s.style.width="0",n.style.width="1px",n.appendChild(s),t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),"undefined"!=typeof n.style.zoom&&(n.innerHTML="",n.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),o.removeChild(i),i=n=r=s=null)}),o.removeChild(d),i=n=r=s=a=o=d=null,t}();var mt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;Z.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Z.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Z.cache[e[Z.expando]]:e[Z.expando],!!e&&!r(e)},data:function(e,i,n,r){if(Z.acceptData(e)){var s,a,o=Z.expando,l="string"==typeof i,c=e.nodeType,u=c?Z.cache:e,h=c?e[o]:e[o]&&o;if(h&&u[h]&&(r||u[h].data)||!l||n!==t)return h||(c?e[o]=h=Z.deletedIds.pop()||Z.guid++:h=o),u[h]||(u[h]={},c||(u[h].toJSON=Z.noop)),("object"==typeof i||"function"==typeof i)&&(r?u[h]=Z.extend(u[h],i):u[h].data=Z.extend(u[h].data,i)),s=u[h],r||(s.data||(s.data={}),s=s.data),n!==t&&(s[Z.camelCase(i)]=n),l?(a=s[i],null==a&&(a=s[Z.camelCase(i)])):a=s,a}},removeData:function(e,t,i){if(Z.acceptData(e)){var n,s,a,o=e.nodeType,l=o?Z.cache:e,c=o?e[Z.expando]:Z.expando;if(l[c]){if(t&&(n=i?l[c]:l[c].data)){Z.isArray(t)||(t in n?t=[t]:(t=Z.camelCase(t),t=t in n?[t]:t.split(" ")));for(s=0,a=t.length;a>s;s++)delete n[t[s]];if(!(i?r:Z.isEmptyObject)(n))return}(i||(delete l[c].data,r(l[c])))&&(o?Z.cleanData([e],!0):Z.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}},_data:function(e,t,i){return Z.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&Z.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Z.fn.extend({data:function(e,i){var r,s,a,o,l,c=this[0],u=0,h=null;if(e===t){if(this.length&&(h=Z.data(c),1===c.nodeType&&!Z._data(c,"parsedAttrs"))){for(a=c.attributes,l=a.length;l>u;u++)o=a[u].name,o.indexOf("data-")||(o=Z.camelCase(o.substring(5)),n(c,o,h[o]));Z._data(c,"parsedAttrs",!0)}return h}return"object"==typeof e?this.each(function(){Z.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",s=r[1]+"!",Z.access(this,function(i){return i===t?(h=this.triggerHandler("getData"+s,[r[0]]),h===t&&c&&(h=Z.data(c,e),h=n(c,e,h)),h===t&&r[1]?this.data(r[0]):h):(r[1]=i,this.each(function(){var t=Z(this);t.triggerHandler("setData"+s,r),Z.data(this,e,i),t.triggerHandler("changeData"+s,r)}),void 0)},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Z.removeData(this,e)})}}),Z.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=Z._data(e,t),i&&(!n||Z.isArray(i)?n=Z._data(e,t,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=Z.queue(e,t),n=i.length,r=i.shift(),s=Z._queueHooks(e,t),a=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,a,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Z._data(e,i)||Z._data(e,i,{empty:Z.Callbacks("once memory").add(function(){Z.removeData(e,t+"queue",!0),Z.removeData(e,i,!0)})})}}),Z.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),n>arguments.length?Z.queue(this[0],e):i===t?this:this.each(function(){var t=Z.queue(this,e,i);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},delay:function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,r=1,s=Z.Deferred(),a=this,o=this.length,l=function(){--r||s.resolveWith(a,[a])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";o--;)n=Z._data(a[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(l));return l(),s.promise(i)}});var vt,yt,bt,_t=/[\t\r\n]/g,wt=/\r/g,xt=/^(?:button|input)$/i,Ct=/^(?:button|input|object|select|textarea)$/i,Et=/^a(?:rea|)$/i,St=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,kt=Z.support.getSetAttribute;Z.fn.extend({attr:function(e,t){return Z.access(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})},prop:function(e,t){return Z.access(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Z.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,r,s,a,o;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),i=0,n=this.length;n>i;i++)if(r=this[i],1===r.nodeType)if(r.className||1!==t.length){for(s=" "+r.className+" ",a=0,o=t.length;o>a;a++)0>s.indexOf(" "+t[a]+" ")&&(s+=t[a]+" ");r.className=Z.trim(s)}else r.className=e;return this},removeClass:function(e){var i,n,r,s,a,o,l;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(tt),o=0,l=this.length;l>o;o++)if(r=this[o],1===r.nodeType&&r.className){for(n=(" "+r.className+" ").replace(_t," "),s=0,a=i.length;a>s;s++)for(;n.indexOf(" "+i[s]+" ")>=0;)n=n.replace(" "+i[s]+" "," ");r.className=e?Z.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return Z.isFunction(e)?this.each(function(i){Z(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var r,s=0,a=Z(this),o=t,l=e.split(tt);r=l[s++];)o=n?o:!a.hasClass(r),a[o?"addClass":"removeClass"](r);else("undefined"===i||"boolean"===i)&&(this.className&&Z._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Z._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(_t," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,r,s=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(n){var s,a=Z(this);1===this.nodeType&&(s=r?e.call(this,n,a.val()):e,null==s?s="":"number"==typeof s?s+="":Z.isArray(s)&&(s=Z.map(s,function(e){return null==e?"":e+""})),i=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,s,"value")!==t||(this.value=s))});if(s)return i=Z.valHooks[s.type]||Z.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(wt,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,a=s?null:[],o=s?r+1:n.length,l=0>r?o:s?r:0;o>l;l++)if(i=n[l],!(!i.selected&&l!==r||(Z.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(t=Z(i).val(),s)return t;a.push(t)}return a},set:function(e,t){var i=Z.makeArray(t);return Z(e).find("option").each(function(){this.selected=Z.inArray(Z(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,n,r){var s,a,o,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r&&Z.isFunction(Z.fn[i])?Z(e)[i](n):"undefined"==typeof e.getAttribute?Z.prop(e,i,n):(o=1!==l||!Z.isXMLDoc(e),o&&(i=i.toLowerCase(),a=Z.attrHooks[i]||(St.test(i)?yt:vt)),n!==t?null===n?(Z.removeAttr(e,i),void 0):a&&"set"in a&&o&&(s=a.set(e,n,i))!==t?s:(e.setAttribute(i,n+""),n):a&&"get"in a&&o&&null!==(s=a.get(e,i))?s:(s=e.getAttribute(i),null===s?t:s))},removeAttr:function(e,t){var i,n,r,s,a=0;if(t&&1===e.nodeType)for(n=t.split(tt);n.length>a;a++)r=n[a],r&&(i=Z.propFix[r]||r,s=St.test(r),s||Z.attr(e,r,""),e.removeAttribute(kt?r:i),s&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)Z.error("type property can't be changed");else if(!Z.support.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return vt&&Z.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,i){return vt&&Z.nodeName(e,"button")?vt.set(e,t,i):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var r,s,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!Z.isXMLDoc(e),a&&(i=Z.propFix[i]||i,s=Z.propHooks[i]),n!==t?s&&"set"in s&&(r=s.set(e,n,i))!==t?r:e[i]=n:s&&"get"in s&&null!==(r=s.get(e,i))?r:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Ct.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,i){var n,r=Z.prop(e,i);return r===!0||"boolean"!=typeof r&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?Z.removeAttr(e,i):(n=Z.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},kt||(bt={name:!0,id:!0,coords:!0},vt=Z.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(bt[i]?""!==n.value:n.specified)?n.value:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=q.createAttribute(i),e.setAttributeNode(n)),n.value=t+""}},Z.each(["width","height"],function(e,t){Z.attrHooks[t]=Z.extend(Z.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),Z.attrHooks.contenteditable={get:vt.get,set:function(e,t,i){""===t&&(t="false"),vt.set(e,t,i)}}),Z.support.hrefNormalized||Z.each(["href","src","width","height"],function(e,i){Z.attrHooks[i]=Z.extend(Z.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),Z.support.style||(Z.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Z.support.optSelected||(Z.propHooks.selected=Z.extend(Z.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Z.support.enctype||(Z.propFix.enctype="encoding"),Z.support.checkOn||Z.each(["radio","checkbox"],function(){Z.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value
}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]=Z.extend(Z.valHooks[this],{set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}})});var It=/^(?:textarea|input|select)$/i,Tt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Nt=/^key/,Pt=/^(?:mouse|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,Mt=function(e){return Z.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Z.event={add:function(e,i,n,r,s){var a,o,l,c,u,h,d,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(a=Z._data(e))){for(n.handler&&(p=n,n=p.handler,s=p.selector),n.guid||(n.guid=Z.guid++),l=a.events,l||(a.events=l={}),o=a.handle,o||(a.handle=o=function(e){return"undefined"==typeof Z||e&&Z.event.triggered===e.type?t:Z.event.dispatch.apply(o.elem,arguments)},o.elem=e),i=Z.trim(Mt(i)).split(" "),c=0;i.length>c;c++)u=Tt.exec(i[c])||[],h=u[1],d=(u[2]||"").split(".").sort(),g=Z.event.special[h]||{},h=(s?g.delegateType:g.bindType)||h,g=Z.event.special[h]||{},f=Z.extend({type:h,origType:u[1],data:r,handler:n,guid:n.guid,selector:s,needsContext:s&&Z.expr.match.needsContext.test(s),namespace:d.join(".")},p),m=l[h],m||(m=l[h]=[],m.delegateCount=0,g.setup&&g.setup.call(e,r,d,o)!==!1||(e.addEventListener?e.addEventListener(h,o,!1):e.attachEvent&&e.attachEvent("on"+h,o))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),s?m.splice(m.delegateCount++,0,f):m.push(f),Z.event.global[h]=!0;e=null}},global:{},remove:function(e,t,i,n,r){var s,a,o,l,c,u,h,d,f,p,m,g=Z.hasData(e)&&Z._data(e);if(g&&(d=g.events)){for(t=Z.trim(Mt(t||"")).split(" "),s=0;t.length>s;s++)if(a=Tt.exec(t[s])||[],o=l=a[1],c=a[2],o){for(f=Z.event.special[o]||{},o=(n?f.delegateType:f.bindType)||o,p=d[o]||[],u=p.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0;p.length>h;h++)m=p[h],!r&&l!==m.origType||i&&i.guid!==m.guid||c&&!c.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(p.splice(h--,1),m.selector&&p.delegateCount--,f.remove&&f.remove.call(e,m));0===p.length&&u!==p.length&&(f.teardown&&f.teardown.call(e,c,g.handle)!==!1||Z.removeEvent(e,o,g.handle),delete d[o])}else for(o in d)Z.event.remove(e,o+t[s],i,n,!0);Z.isEmptyObject(d)&&(delete g.handle,Z.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,r,s){if(!r||3!==r.nodeType&&8!==r.nodeType){var a,o,l,c,u,h,d,f,p,m,g=i.type||i,v=[];if(!Dt.test(g+Z.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),o=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),r&&!Z.event.customEvent[g]||Z.event.global[g]))if(i="object"==typeof i?i[Z.expando]?i:new Z.Event(g,i):new Z.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=o,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0>g.indexOf(":")?"on"+g:"",r){if(i.result=t,i.target||(i.target=r),n=null!=n?Z.makeArray(n):[],n.unshift(i),d=Z.event.special[g]||{},!d.trigger||d.trigger.apply(r,n)!==!1){if(p=[[r,d.bindType||g]],!s&&!d.noBubble&&!Z.isWindow(r)){for(m=d.delegateType||g,c=Dt.test(m+g)?r:r.parentNode,u=r;c;c=c.parentNode)p.push([c,m]),u=c;u===(r.ownerDocument||q)&&p.push([u.defaultView||u.parentWindow||e,m])}for(l=0;p.length>l&&!i.isPropagationStopped();l++)c=p[l][0],i.type=p[l][1],f=(Z._data(c,"events")||{})[i.type]&&Z._data(c,"handle"),f&&f.apply(c,n),f=h&&c[h],f&&Z.acceptData(c)&&f.apply&&f.apply(c,n)===!1&&i.preventDefault();return i.type=g,s||i.isDefaultPrevented()||d._default&&d._default.apply(r.ownerDocument,n)!==!1||"click"===g&&Z.nodeName(r,"a")||!Z.acceptData(r)||h&&r[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!Z.isWindow(r)&&(u=r[h],u&&(r[h]=null),Z.event.triggered=g,r[g](),Z.event.triggered=t,u&&(r[h]=u)),i.result}}else{a=Z.cache;for(l in a)a[l].events&&a[l].events[g]&&Z.event.trigger(i,n,a[l].handle.elem,!0)}}},dispatch:function(i){i=Z.event.fix(i||e.event);var n,r,s,a,o,l,c,u,h,d=(Z._data(this,"events")||{})[i.type]||[],f=d.delegateCount,p=V.call(arguments),m=!i.exclusive&&!i.namespace,g=Z.event.special[i.type]||{},v=[];if(p[0]=i,i.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(s=i.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||"click"!==i.type){for(o={},c=[],n=0;f>n;n++)u=d[n],h=u.selector,o[h]===t&&(o[h]=u.needsContext?Z(h,this).index(s)>=0:Z.find(h,this,null,[s]).length),o[h]&&c.push(u);c.length&&v.push({elem:s,matches:c})}for(d.length>f&&v.push({elem:this,matches:d.slice(f)}),n=0;v.length>n&&!i.isPropagationStopped();n++)for(l=v[n],i.currentTarget=l.elem,r=0;l.matches.length>r&&!i.isImmediatePropagationStopped();r++)u=l.matches[r],(m||!i.namespace&&!u.namespace||i.namespace_re&&i.namespace_re.test(u.namespace))&&(i.data=u.data,i.handleObj=u,a=((Z.event.special[u.origType]||{}).handle||u.handler).apply(l.elem,p),a!==t&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,r,s,a=i.button,o=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||q,r=n.documentElement,s=n.body,e.pageX=i.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),e.pageY=i.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?i.toElement:o),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,i,n=e,r=Z.event.fixHooks[e.type]||{},s=r.props?this.props.concat(r.props):this.props;for(e=Z.Event(n),t=s.length;t;)i=s[--t],e[i]=n[i];return e.target||(e.target=n.srcElement||q),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,n):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){Z.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var r=Z.extend(new Z.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},Z.event.handle=Z.event.dispatch,Z.removeEvent=q.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&("undefined"==typeof e[n]&&(e[n]=null),e.detachEvent(n,i))},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(e,t)},Z.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return s.selector,(!r||r!==n&&!Z.contains(n,r))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),Z.support.submitBubbles||(Z.event.special.submit={setup:function(){return Z.nodeName(this,"form")?!1:(Z.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=Z.nodeName(i,"input")||Z.nodeName(i,"button")?i.form:t;n&&!Z._data(n,"_submit_attached")&&(Z.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),Z._data(n,"_submit_attached",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Z.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return Z.nodeName(this,"form")?!1:(Z.event.remove(this,"._submit"),void 0)}}),Z.support.changeBubbles||(Z.event.special.change={setup:function(){return It.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(Z.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Z.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Z.event.simulate("change",this,e,!0)})),!1):(Z.event.add(this,"beforeactivate._change",function(e){var t=e.target;It.test(t.nodeName)&&!Z._data(t,"_change_attached")&&(Z.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Z.event.simulate("change",this.parentNode,e,!0)}),Z._data(t,"_change_attached",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return Z.event.remove(this,"._change"),!It.test(this.nodeName)}}),Z.support.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){0===i++&&q.addEventListener(e,n,!0)},teardown:function(){0===--i&&q.removeEventListener(e,n,!0)}}}),Z.fn.extend({on:function(e,i,n,r,a){var o,l;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(l in e)this.on(l,i,n,e[l],a);return this}if(null==n&&null==r?(r=i,n=i=t):null==r&&("string"==typeof i?(r=n,n=t):(r=n,n=i,i=t)),r===!1)r=s;else if(!r)return this;return 1===a&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,i,e[a]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=s),this.each(function(){Z.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return Z(this.context).on(e,this.selector,t,i),this},die:function(e,t){return Z(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?Z.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||Z.guid++,n=0,r=function(i){var r=(Z._data(this,"lastToggle"+e.guid)||0)%n;return Z._data(this,"lastToggle"+e.guid,r+1),i.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=i;t.length>n;)t[n++].guid=i;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},Nt.test(t)&&(Z.event.fixHooks[t]=Z.event.keyHooks),Pt.test(t)&&(Z.event.fixHooks[t]=Z.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){function i(e,t,i,n){i=i||[],t=t||P;var r,s,a,o,l=t.nodeType;if(!e||"string"!=typeof e)return i;if(1!==l&&9!==l)return[];if(a=w(t),!a&&!n&&(r=it.exec(e)))if(o=r[1]){if(9===l){if(s=t.getElementById(o),!s||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&x(t,s)&&s.id===o)return i.push(s),i}else{if(r[2])return O.apply(i,j.call(t.getElementsByTagName(e),0)),i;if((o=r[3])&&dt&&t.getElementsByClassName)return O.apply(i,j.call(t.getElementsByClassName(o),0)),i}return m(e.replace(K,"$1"),t,i,n,a)}function n(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function r(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function s(e){return L(function(t){return t=+t,L(function(i,n){for(var r,s=e([],i.length,t),a=s.length;a--;)i[r=s[a]]&&(i[r]=!(n[r]=i[r]))})})}function a(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}function o(e,t){var n,r,s,a,o,l,c,u=z[A][e+" "];if(u)return t?0:u.slice(0);for(o=e,l=[],c=b.preFilter;o;){(!n||(r=J.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),n=!1,(r=et.exec(o))&&(s.push(n=new N(r.shift())),o=o.slice(n.length),n.type=r[0].replace(K," "));for(a in b.filter)!(r=ot[a].exec(o))||c[a]&&!(r=c[a](r))||(s.push(n=new N(r.shift())),o=o.slice(n.length),n.type=a,n.matches=r);if(!n)break}return t?o.length:o?i.error(e):z(e,l).slice(0)}function l(e,t,i){var n=t.dir,r=i&&"parentNode"===t.dir,s=R++;return t.first?function(t,i,s){for(;t=t[n];)if(r||1===t.nodeType)return e(t,i,s)}:function(t,i,a){if(a){for(;t=t[n];)if((r||1===t.nodeType)&&e(t,i,a))return t}else for(var o,l=M+" "+s+" ",c=l+v;t=t[n];)if(r||1===t.nodeType){if((o=t[A])===c)return t.sizset;if("string"==typeof o&&0===o.indexOf(l)){if(t.sizset)return t}else{if(t[A]=c,e(t,i,a))return t.sizset=!0,t;t.sizset=!1}}}}function c(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function u(e,t,i,n,r){for(var s,a=[],o=0,l=e.length,c=null!=t;l>o;o++)(s=e[o])&&(!i||i(s,n,r))&&(a.push(s),c&&t.push(o));return a}function h(e,t,i,n,r,s){return n&&!n[A]&&(n=h(n)),r&&!r[A]&&(r=h(r,s)),L(function(s,a,o,l){var c,h,d,f=[],m=[],g=a.length,v=s||p(t||"*",o.nodeType?[o]:o,[]),y=!e||!s&&t?v:u(v,f,e,o,l),b=i?r||(s?e:g||n)?[]:a:y;if(i&&i(y,b,o,l),n)for(c=u(b,m),n(c,[],o,l),h=c.length;h--;)(d=c[h])&&(b[m[h]]=!(y[m[h]]=d));if(s){if(r||e){if(r){for(c=[],h=b.length;h--;)(d=b[h])&&c.push(y[h]=d);r(null,b=[],c,l)}for(h=b.length;h--;)(d=b[h])&&(c=r?H.call(s,d):f[h])>-1&&(s[c]=!(a[c]=d))}}else b=u(b===a?b.splice(g,b.length):b),r?r(null,a,b,l):O.apply(a,b)})}function d(e){for(var t,i,n,r=e.length,s=b.relative[e[0].type],a=s||b.relative[" "],o=s?1:0,u=l(function(e){return e===t},a,!0),f=l(function(e){return H.call(t,e)>-1},a,!0),p=[function(e,i,n){return!s&&(n||i!==k)||((t=i).nodeType?u(e,i,n):f(e,i,n))}];r>o;o++)if(i=b.relative[e[o].type])p=[l(c(p),i)];else{if(i=b.filter[e[o].type].apply(null,e[o].matches),i[A]){for(n=++o;r>n&&!b.relative[e[n].type];n++);return h(o>1&&c(p),o>1&&e.slice(0,o-1).join("").replace(K,"$1"),i,n>o&&d(e.slice(o,n)),r>n&&d(e=e.slice(n)),r>n&&e.join(""))}p.push(i)}return c(p)}function f(e,t){var n=t.length>0,r=e.length>0,s=function(a,o,l,c,h){var d,f,p,m=[],g=0,y="0",_=a&&[],w=null!=h,x=k,C=a||r&&b.find.TAG("*",h&&o.parentNode||o),E=M+=null==x?1:Math.E;for(w&&(k=o!==P&&o,v=s.el);null!=(d=C[y]);y++){if(r&&d){for(f=0;p=e[f];f++)if(p(d,o,l)){c.push(d);break}w&&(M=E,v=++s.el)}n&&((d=!p&&d)&&g--,a&&_.push(d))}if(g+=y,n&&y!==g){for(f=0;p=t[f];f++)p(_,m,o,l);if(a){if(g>0)for(;y--;)_[y]||m[y]||(m[y]=F.call(c));m=u(m)}O.apply(c,m),w&&!a&&m.length>0&&g+t.length>1&&i.uniqueSort(c)}return w&&(M=E,k=x),_};return s.el=0,n?L(s):s}function p(e,t,n){for(var r=0,s=t.length;s>r;r++)i(e,t[r],n);return n}function m(e,t,i,n,r){var s,a,l,c,u,h=o(e);if(h.length,!n&&1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(l=a[0]).type&&9===t.nodeType&&!r&&b.relative[a[1].type]){if(t=b.find.ID(l.matches[0].replace(at,""),t,r)[0],!t)return i;e=e.slice(a.shift().length)}for(s=ot.POS.test(e)?-1:a.length-1;s>=0&&(l=a[s],!b.relative[c=l.type]);s--)if((u=b.find[c])&&(n=u(l.matches[0].replace(at,""),nt.test(a[0].type)&&t.parentNode||t,r))){if(a.splice(s,1),e=n.length&&a.join(""),!e)return O.apply(i,j.call(n,0)),i;break}}return C(e,h)(n,t,r,i,nt.test(e)),i}function g(){}var v,y,b,_,w,x,C,E,S,k,I=!0,T="undefined",A=("sizcache"+Math.random()).replace(".",""),N=String,P=e.document,D=P.documentElement,M=0,R=0,F=[].pop,O=[].push,j=[].slice,H=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},L=function(e,t){return e[A]=null==t||t,e},B=function(){var e={},t=[];return L(function(i,n){return t.push(i)>b.cacheLength&&delete e[t.shift()],e[i+" "]=n},e)},q=B(),z=B(),W=B(),$="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",G=U.replace("w","w#"),V="([*^$|!~]?=)",Q="\\["+$+"*("+U+")"+$+"*(?:"+V+$+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+G+")|)|)"+$+"*\\]",Y=":("+U+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+Q+")|[^:]|\\\\.)*|.*))\\)|)",X=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$+"*((?:-\\d)?\\d*)"+$+"*\\)|)(?=[^-]|$)",K=new RegExp("^"+$+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$+"+$","g"),J=new RegExp("^"+$+"*,"+$+"*"),et=new RegExp("^"+$+"*([\\x20\\t\\r\\n\\f>+~])"+$+"*"),tt=new RegExp(Y),it=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,nt=/[\x20\t\r\n\f]*[+~]/,rt=/h\d/i,st=/input|select|textarea|button/i,at=/\\(?!\\)/g,ot={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),NAME:new RegExp("^\\[name=['\"]?("+U+")['\"]?\\]"),TAG:new RegExp("^("+U.replace("w","w*")+")"),ATTR:new RegExp("^"+Q),PSEUDO:new RegExp("^"+Y),POS:new RegExp(X,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+$+"*(even|odd|(([+-]|)(\\d*)n|)"+$+"*(?:([+-]|)"+$+"*(\\d+)|))"+$+"*\\)|)","i"),needsContext:new RegExp("^"+$+"*[>+~]|"+X,"i")},lt=function(e){var t=P.createElement("div");try{return e(t)}catch(i){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(P.createComment("")),!e.getElementsByTagName("*").length}),ut=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==T&&"#"===e.firstChild.getAttribute("href")}),ht=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),dt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),ft=lt(function(e){e.id=A+0,e.innerHTML="<a name='"+A+"'></a><div name='"+A+"'></div>",D.insertBefore(e,D.firstChild);var t=P.getElementsByName&&P.getElementsByName(A).length===2+P.getElementsByName(A+0).length;return y=!P.getElementById(A),D.removeChild(e),t});try{j.call(D.childNodes,0)[0].nodeType}catch(pt){j=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){return i(t,null,null,[e]).length>0},_=i.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=_(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n];n++)i+=_(t);return i},w=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=i.contains=D.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:D.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},i.attr=function(e,t){var i,n=w(e);return n||(t=t.toLowerCase()),(i=b.attrHandle[t])?i(e):n||ht?e.getAttribute(t):(i=e.getAttributeNode(t),i?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null)},b=i.selectors={cacheLength:50,createPseudo:L,match:ot,attrHandle:ut?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,i){if(typeof t.getElementById!==T&&!i){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}}:function(e,i,n){if(typeof i.getElementById!==T&&!n){var r=i.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==T&&r.getAttributeNode("id").value===e?[r]:t:[]}},TAG:ct?function(e,t){return typeof t.getElementsByTagName!==T?t.getElementsByTagName(e):void 0}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var n,r=[],s=0;n=i[s];s++)1===n.nodeType&&r.push(n);return r}return i},NAME:ft&&function(e,t){return typeof t.getElementsByName!==T?t.getElementsByName(name):void 0},CLASS:dt&&function(e,t,i){return typeof t.getElementsByClassName===T||i?void 0:t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||i.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&i.error(e[0]),e},PSEUDO:function(e){var t,i;return ot.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(i=o(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=t),e.slice(0,3))}},filter:{ID:y?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var i=typeof t.getAttributeNode!==T&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=q[A][e+" "];return t||(t=new RegExp("(^|"+$+")"+e+"("+$+"|$)"))&&q(e,function(e){return t.test(e.className||typeof e.getAttribute!==T&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var s=i.attr(r,e);return null==s?"!="===t:t?(s+="","="===t?s===n:"!="===t?s!==n:"^="===t?n&&0===s.indexOf(n):"*="===t?n&&s.indexOf(n)>-1:"$="===t?n&&s.substr(s.length-n.length)===n:"~="===t?(" "+s+" ").indexOf(n)>-1:"|="===t?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n){return"nth"===e?function(e){var t,r,s=e.parentNode;if(1===i&&0===n)return!0;if(s)for(r=0,t=s.firstChild;t&&(1!==t.nodeType||(r++,e!==t));t=t.nextSibling);return r-=n,r===i||0===r%i&&r/i>=0}:function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var n,r=b.pseudos[e]||b.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return r[A]?r(t):r.length>1?(n=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?L(function(e,i){for(var n,s=r(e,t),a=s.length;a--;)n=H.call(e,s[a]),e[n]=!(i[n]=s[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:L(function(e){var t=[],i=[],n=C(e.replace(K,"$1"));return n[A]?L(function(e,t,i,r){for(var s,a=n(e,null,r,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,r,s){return t[0]=e,n(t,null,s,i),!i.pop()}}),has:L(function(e){return function(t){return i(e,t).length>0}}),contains:L(function(e){return function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return rt.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:n("radio"),checkbox:n("checkbox"),file:n("file"),password:n("password"),image:n("image"),submit:r("submit"),reset:r("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return st.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,i){return[0>i?i+t:i]}),even:s(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:s(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:s(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:s(function(e,t,i){for(var n=0>i?i+t:i;t>++n;)e.push(n);return e})}},E=D.compareDocumentPosition?function(e,t){return e===t?(S=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return S=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,r=[],s=[],o=e.parentNode,l=t.parentNode,c=o;if(o===l)return a(e,t);if(!o)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)s.unshift(c),c=c.parentNode;i=r.length,n=s.length;for(var u=0;i>u&&n>u;u++)if(r[u]!==s[u])return a(r[u],s[u]);return u===i?a(e,s[u],-1):a(r[u],t,1)},[0,0].sort(E),I=!S,i.uniqueSort=function(e){var t,i=[],n=1,r=0;if(S=I,e.sort(E),S){for(;t=e[n];n++)t===e[n-1]&&(r=i.push(n));for(;r--;)e.splice(i[r],1)}return e},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C=i.compile=function(e,t){var i,n=[],r=[],s=W[A][e+" "];if(!s){for(t||(t=o(e)),i=t.length;i--;)s=d(t[i]),s[A]?n.push(s):r.push(s);s=W(e,f(r,n))}return s},P.querySelectorAll&&function(){var e,t=m,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],a=[":active"],l=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||s.push("\\["+$+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||s.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&s.push("[*^$]="+$+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=new RegExp(s.join("|")),m=function(e,i,r,a,l){if(!a&&!l&&!s.test(e)){var c,u,h=!0,d=A,f=i,p=9===i.nodeType&&e;if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){for(c=o(e),(h=i.getAttribute("id"))?d=h.replace(n,"\\$&"):i.setAttribute("id",d),d="[id='"+d+"'] ",u=c.length;u--;)c[u]=d+c[u].join("");f=nt.test(e)&&i.parentNode||i,p=c.join(",")}if(p)try{return O.apply(r,j.call(f.querySelectorAll(p),0)),r}catch(m){}finally{h||i.removeAttribute("id")}}return t(e,i,r,a,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),a.push("!=",Y)}catch(i){}}),a=new RegExp(a.join("|")),i.matchesSelector=function(t,n){if(n=n.replace(r,"='$1']"),!w(t)&&!a.test(n)&&!s.test(n))try{var o=l.call(t,n);if(o||e||t.document&&11!==t.document.nodeType)return o}catch(c){}return i(n,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,i.attr=Z.attr,Z.find=i,Z.expr=i.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=i.uniqueSort,Z.text=i.getText,Z.isXMLDoc=i.isXML,Z.contains=i.contains}(e);var Rt=/Until$/,Ft=/^(?:parents|prev(?:Until|All))/,Ot=/^.[^:#\[\.,]*$/,jt=Z.expr.match.needsContext,Ht={children:!0,contents:!0,next:!0,prev:!0};Z.fn.extend({find:function(e){var t,i,n,r,s,a,o=this;if("string"!=typeof e)return Z(e).filter(function(){for(t=0,i=o.length;i>t;t++)if(Z.contains(o[t],this))return!0});for(a=this.pushStack("","find",e),t=0,i=this.length;i>t;t++)if(n=a.length,Z.find(e,this[t],a),t>0)for(r=n;a.length>r;r++)for(s=0;n>s;s++)if(a[s]===a[r]){a.splice(r--,1);break}return a},has:function(e){var t,i=Z(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(Z.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?jt.test(e)?Z(e,this.context).index(this[0])>=0:Z.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,r=this.length,s=[],a=jt.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(a?a.index(i)>-1:Z.find.matchesSelector(i,e)){s.push(i);break}i=i.parentNode}return s=s.length>1?Z.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?"string"==typeof e?Z.inArray(this[0],Z(e)):Z.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?Z(e,t):Z.makeArray(e&&e.nodeType?[e]:e),n=Z.merge(this.get(),i);return this.pushStack(o(i[0])||o(n[0])?n:Z.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.fn.andSelf=Z.fn.addBack,Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Z.dir(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Z.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Z.dir(e,"previousSibling",i)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return Z.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(i,n){var r=Z.map(this,t,i);return Rt.test(e)||(n=i),n&&"string"==typeof n&&(r=Z.filter(n,r)),r=this.length>1&&!Ht[e]?Z.unique(r):r,this.length>1&&Ft.test(e)&&(r=r.reverse()),this.pushStack(r,e,V.call(arguments).join(","))}}),Z.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?Z.find.matchesSelector(t[0],e)?[t[0]]:[]:Z.find.matches(e,t)},dir:function(e,i,n){for(var r=[],s=e[i];s&&9!==s.nodeType&&(n===t||1!==s.nodeType||!Z(s).is(n));)1===s.nodeType&&r.push(s),s=s[i];return r},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Lt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Bt=/ jQuery\d+="(?:null|\d+)"/g,qt=/^\s+/,zt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Wt=/<([\w:]+)/,$t=/<tbody/i,Ut=/<|&#?\w+;/,Gt=/<(?:script|style|link)/i,Vt=/<(?:script|object|embed|option|style)/i,Qt=new RegExp("<(?:"+Lt+")[\\s/>]","i"),Yt=/^(?:checkbox|radio)$/,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Kt=/\/(java|ecma)script/i,Zt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ei=u(q),ti=ei.appendChild(q.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,Z.support.htmlSerialize||(Jt._default=[1,"X<div>","</div>"]),Z.fn.extend({text:function(e){return Z.access(this,function(e){return e===t?Z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||q).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Z.isFunction(e))return this.each(function(t){Z(this).wrapAll(e.call(this,t))});if(this[0]){var t=Z(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(i){Z(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Z.clean(arguments);return this.pushStack(Z.merge(e,this),"before",this.selector)}},after:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Z.clean(arguments);return this.pushStack(Z.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||Z.filter(e,[i]).length)&&(t||1!==i.nodeType||(Z.cleanData(i.getElementsByTagName("*")),Z.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&Z.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return Z.access(this,function(e){var i=this[0]||{},n=0,r=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Bt,""):t;if(!("string"!=typeof e||Gt.test(e)||!Z.support.htmlSerialize&&Qt.test(e)||!Z.support.leadingWhitespace&&qt.test(e)||Jt[(Wt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(zt,"<$1></$2>");try{for(;r>n;n++)i=this[n]||{},1===i.nodeType&&(Z.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(s){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return o(this[0])?this.length?this.pushStack(Z(Z.isFunction(e)?e():e),"replaceWith",e):this:Z.isFunction(e)?this.each(function(t){var i=Z(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=Z(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;Z(this).remove(),t?Z(t).before(e):Z(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){e=[].concat.apply([],e);var r,s,a,o,l=0,c=e[0],u=[],d=this.length;if(!Z.support.checkClone&&d>1&&"string"==typeof c&&Xt.test(c))return this.each(function(){Z(this).domManip(e,i,n)});if(Z.isFunction(c))return this.each(function(r){var s=Z(this);e[0]=c.call(this,r,i?s.html():t),s.domManip(e,i,n)});if(this[0]){if(r=Z.buildFragment(e,this,u),a=r.fragment,s=a.firstChild,1===a.childNodes.length&&(a=s),s)for(i=i&&Z.nodeName(s,"tr"),o=r.cacheable||d-1;d>l;l++)n.call(i&&Z.nodeName(this[l],"table")?h(this[l],"tbody"):this[l],l===o?a:Z.clone(a,!0,!0));a=s=null,u.length&&Z.each(u,function(e,t){t.src?Z.ajax?Z.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Z.error("no ajax"):Z.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Zt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Z.buildFragment=function(e,i,n){var r,s,a,o=e[0];return i=i||q,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,!(1===e.length&&"string"==typeof o&&512>o.length&&i===q&&"<"===o.charAt(0))||Vt.test(o)||!Z.support.checkClone&&Xt.test(o)||!Z.support.html5Clone&&Qt.test(o)||(s=!0,r=Z.fragments[o],a=r!==t),r||(r=i.createDocumentFragment(),Z.clean(e,i,r,n),s&&(Z.fragments[o]=a&&r)),{fragment:r,cacheable:s}},Z.fragments={},Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(i){var n,r=0,s=[],a=Z(i),o=a.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===o)return a[t](this[0]),this;for(;o>r;r++)n=(r>0?this.clone(!0):this).get(),Z(a[r])[t](n),s=s.concat(n);return this.pushStack(s,e,a.selector)}}),Z.extend({clone:function(e,t,i){var n,r,s,a;if(Z.support.html5Clone||Z.isXMLDoc(e)||!Qt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ti.innerHTML=e.outerHTML,ti.removeChild(a=ti.firstChild)),!(Z.support.noCloneEvent&&Z.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(f(e,a),n=p(e),r=p(a),s=0;n[s];++s)r[s]&&f(n[s],r[s]);if(t&&(d(e,a),i))for(n=p(e),r=p(a),s=0;n[s];++s)d(n[s],r[s]);return n=r=null,a},clean:function(e,t,i,n){var r,s,a,o,l,c,h,d,f,p,g,v=t===q&&ei,y=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=q),r=0;null!=(a=e[r]);r++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(Ut.test(a)){for(v=v||u(t),h=t.createElement("div"),v.appendChild(h),a=a.replace(zt,"<$1></$2>"),o=(Wt.exec(a)||["",""])[1].toLowerCase(),l=Jt[o]||Jt._default,c=l[0],h.innerHTML=l[1]+a+l[2];c--;)h=h.lastChild;if(!Z.support.tbody)for(d=$t.test(a),f="table"!==o||d?"<table>"!==l[1]||d?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes,s=f.length-1;s>=0;--s)Z.nodeName(f[s],"tbody")&&!f[s].childNodes.length&&f[s].parentNode.removeChild(f[s]);!Z.support.leadingWhitespace&&qt.test(a)&&h.insertBefore(t.createTextNode(qt.exec(a)[0]),h.firstChild),a=h.childNodes,h.parentNode.removeChild(h)}else a=t.createTextNode(a);a.nodeType?y.push(a):Z.merge(y,a)}if(h&&(a=h=v=null),!Z.support.appendChecked)for(r=0;null!=(a=y[r]);r++)Z.nodeName(a,"input")?m(a):"undefined"!=typeof a.getElementsByTagName&&Z.grep(a.getElementsByTagName("input"),m);if(i)for(p=function(e){return!e.type||Kt.test(e.type)?n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):void 0},r=0;null!=(a=y[r]);r++)Z.nodeName(a,"script")&&p(a)||(i.appendChild(a),"undefined"!=typeof a.getElementsByTagName&&(g=Z.grep(Z.merge([],a.getElementsByTagName("script")),p),y.splice.apply(y,[r+1,0].concat(g)),r+=g.length));return y},cleanData:function(e,t){for(var i,n,r,s,a=0,o=Z.expando,l=Z.cache,c=Z.support.deleteExpando,u=Z.event.special;null!=(r=e[a]);a++)if((t||Z.acceptData(r))&&(n=r[o],i=n&&l[n])){if(i.events)for(s in i.events)u[s]?Z.event.remove(r,s):Z.removeEvent(r,s,i.handle);l[n]&&(delete l[n],c?delete r[o]:r.removeAttribute?r.removeAttribute(o):r[o]=null,Z.deletedIds.push(n))}}}),function(){var e,t;Z.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Z.uaMatch(W.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Z.browser=t,Z.sub=function(){function e(t,i){return new e.fn.init(t,i)}Z.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof Z&&!(n instanceof e)&&(n=e(n)),Z.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(q);return e}}();var ii,ni,ri,si=/alpha\([^)]*\)/i,ai=/opacity=([^)]*)/,oi=/^(top|right|bottom|left)$/,li=/^(none|table(?!-c[ea]).+)/,ci=/^margin/,ui=new RegExp("^("+J+")(.*)$","i"),hi=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),di=new RegExp("^([-+])=("+J+")","i"),fi={BODY:"block"},pi={position:"absolute",visibility:"hidden",display:"block"},mi={letterSpacing:0,fontWeight:400},gi=["Top","Right","Bottom","Left"],vi=["Webkit","O","Moz","ms"],yi=Z.fn.toggle;Z.fn.extend({css:function(e,i){return Z.access(this,function(e,i,n){return n!==t?Z.style(e,i,n):Z.css(e,i)},e,i,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var i="boolean"==typeof e;return Z.isFunction(e)&&Z.isFunction(t)?yi.apply(this,arguments):this.each(function(){(i?e:v(this))?Z(this).show():Z(this).hide()})}}),Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ii(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Z.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,a,o,l=Z.camelCase(i),c=e.style;if(i=Z.cssProps[l]||(Z.cssProps[l]=g(c,l)),o=Z.cssHooks[i]||Z.cssHooks[l],n===t)return o&&"get"in o&&(s=o.get(e,!1,r))!==t?s:c[i];if(a=typeof n,"string"===a&&(s=di.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(Z.css(e,i)),a="number"),!(null==n||"number"===a&&isNaN(n)||("number"!==a||Z.cssNumber[l]||(n+="px"),o&&"set"in o&&(n=o.set(e,n,r))===t)))try{c[i]=n}catch(u){}}},css:function(e,i,n,r){var s,a,o,l=Z.camelCase(i);return i=Z.cssProps[l]||(Z.cssProps[l]=g(e.style,l)),o=Z.cssHooks[i]||Z.cssHooks[l],o&&"get"in o&&(s=o.get(e,!0,r)),s===t&&(s=ii(e,i)),"normal"===s&&i in mi&&(s=mi[i]),n||r!==t?(a=parseFloat(s),n||Z.isNumeric(a)?a||0:s):s},swap:function(e,t,i){var n,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];n=i.call(e);for(r in t)e.style[r]=s[r];return n}}),e.getComputedStyle?ii=function(t,i){var n,r,s,a,o=e.getComputedStyle(t,null),l=t.style;return o&&(n=o.getPropertyValue(i)||o[i],""!==n||Z.contains(t.ownerDocument,t)||(n=Z.style(t,i)),hi.test(n)&&ci.test(i)&&(r=l.width,s=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=o.width,l.width=r,l.minWidth=s,l.maxWidth=a)),n}:q.documentElement.currentStyle&&(ii=function(e,t){var i,n,r=e.currentStyle&&e.currentStyle[t],s=e.style;return null==r&&s&&s[t]&&(r=s[t]),hi.test(r)&&!oi.test(t)&&(i=s.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":r,r=s.pixelLeft+"px",s.left=i,n&&(e.runtimeStyle.left=n)),""===r?"auto":r}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&li.test(ii(e,"display"))?Z.swap(e,pi,function(){return w(e,t,n)}):w(e,t,n):void 0},set:function(e,i,n){return b(e,i,n?_(e,t,n,Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing")):0)}}}),Z.support.opacity||(Z.cssHooks.opacity={get:function(e,t){return ai.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=Z.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===Z.trim(s.replace(si,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=si.test(s)?s.replace(si,r):s+" "+r)}}),Z(function(){Z.support.reliableMarginRight||(Z.cssHooks.marginRight={get:function(e,t){return Z.swap(e,{display:"inline-block"},function(){return t?ii(e,"marginRight"):void 0})}}),!Z.support.pixelPosition&&Z.fn.position&&Z.each(["top","left"],function(e,t){Z.cssHooks[t]={get:function(e,i){if(i){var n=ii(e,t);return hi.test(n)?Z(e).position()[t]+"px":n}}}})}),Z.expr&&Z.expr.filters&&(Z.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!Z.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ii(e,"display"))},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(i){var n,r="string"==typeof i?i.split(" "):[i],s={};for(n=0;4>n;n++)s[e+gi[n]+t]=r[n]||r[n-2]||r[0];return s}},ci.test(e)||(Z.cssHooks[e+t].set=b)});var bi=/%20/g,_i=/\[\]$/,wi=/\r?\n/g,xi=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ci=/^(?:select|textarea)/i;Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Z.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ci.test(this.nodeName)||xi.test(this.type))}).map(function(e,t){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(e){return{name:t.name,value:e.replace(wi,"\r\n")}}):{name:t.name,value:i.replace(wi,"\r\n")}}).get()}}),Z.param=function(e,i){var n,r=[],s=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)
};if(i===t&&(i=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){s(this.name,this.value)});else for(n in e)C(n,e[n],i,s);return r.join("&").replace(bi,"+")};var Ei,Si,ki=/#.*$/,Ii=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ti=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ai=/^(?:GET|HEAD)$/,Ni=/^\/\//,Pi=/\?/,Di=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Mi=/([?&])_=[^&]*/,Ri=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Fi=Z.fn.load,Oi={},ji={},Hi=["*/"]+["*"];try{Si=z.href}catch(Li){Si=q.createElement("a"),Si.href="",Si=Si.href}Ei=Ri.exec(Si.toLowerCase())||[],Z.fn.load=function(e,i,n){if("string"!=typeof e&&Fi)return Fi.apply(this,arguments);if(!this.length)return this;var r,s,a,o=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l,e.length),e=e.slice(0,l)),Z.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(s="POST"),Z.ajax({url:e,type:s,dataType:"html",data:i,complete:function(e,t){n&&o.each(n,a||[e.responseText,t,e])}}).done(function(e){a=arguments,o.html(r?Z("<div>").append(e.replace(Di,"")).find(r):e)}),this},Z.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.each(["get","post"],function(e,i){Z[i]=function(e,n,r,s){return Z.isFunction(n)&&(s=s||r,r=n,n=t),Z.ajax({type:i,url:e,data:n,success:r,dataType:s})}}),Z.extend({getScript:function(e,i){return Z.get(e,t,i,"script")},getJSON:function(e,t,i){return Z.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?k(e,Z.ajaxSettings):(t=e,e=Z.ajaxSettings),k(e,t),e},ajaxSettings:{url:Si,isLocal:Ti.test(Ei[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Hi},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:E(Oi),ajaxTransport:E(ji),ajax:function(e,i){function n(e,i,n,a){var c,h,y,b,w,C=i;2!==_&&(_=2,l&&clearTimeout(l),o=t,s=a||"",x.readyState=e>0?4:0,n&&(b=I(d,x,n)),e>=200&&300>e||304===e?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Z.lastModified[r]=w),w=x.getResponseHeader("Etag"),w&&(Z.etag[r]=w)),304===e?(C="notmodified",c=!0):(c=T(d,b),C=c.state,h=c.data,y=c.error,c=!y)):(y=C,(!C||e)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(i||C)+"",c?m.resolveWith(f,[h,C,x]):m.rejectWith(f,[x,C,y]),x.statusCode(v),v=t,u&&p.trigger("ajax"+(c?"Success":"Error"),[x,d,c?h:y]),g.fireWith(f,[x,C]),u&&(p.trigger("ajaxComplete",[x,d]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var r,s,a,o,l,c,u,h,d=Z.ajaxSetup({},i),f=d.context||d,p=f!==d&&(f.nodeType||f instanceof Z)?Z(f):Z.event,m=Z.Deferred(),g=Z.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!_){var i=e.toLowerCase();e=b[i]=b[i]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===_?s:null},getResponseHeader:function(e){var i;if(2===_){if(!a)for(a={};i=Ii.exec(s);)a[i[1].toLowerCase()]=i[2];i=a[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return _||(d.mimeType=e),this},abort:function(e){return e=e||w,o&&o.abort(e),n(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>_)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},d.url=((e||d.url)+"").replace(ki,"").replace(Ni,Ei[1]+"//"),d.dataTypes=Z.trim(d.dataType||"*").toLowerCase().split(tt),null==d.crossDomain&&(c=Ri.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===Ei[1]&&c[2]===Ei[2]&&(c[3]||("http:"===c[1]?80:443))==(Ei[3]||("http:"===Ei[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Z.param(d.data,d.traditional)),S(Oi,d,i,x),2===_)return x;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Ai.test(d.type),u&&0===Z.active++&&Z.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Pi.test(d.url)?"&":"?")+d.data,delete d.data),r=d.url,d.cache===!1)){var C=Z.now(),E=d.url.replace(Mi,"$1_="+C);d.url=E+(E===d.url?(Pi.test(d.url)?"&":"?")+"_="+C:"")}(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(r=r||d.url,Z.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&x.setRequestHeader("If-None-Match",Z.etag[r])),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Hi+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)x.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(f,x,d)===!1||2===_))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](d[h]);if(o=S(ji,d,i,x)){x.readyState=1,u&&p.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,o.send(y,n)}catch(k){if(!(2>_))throw k;n(-1,k)}}else n(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var Bi=[],qi=/\?/,zi=/(=)\?(?=&|$)|\?\?/,Wi=Z.now();Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bi.pop()||Z.expando+"_"+Wi++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(i,n,r){var s,a,o,l=i.data,c=i.url,u=i.jsonp!==!1,h=u&&zi.test(c),d=u&&!h&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&zi.test(l);return"jsonp"===i.dataTypes[0]||h||d?(s=i.jsonpCallback=Z.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,a=e[s],h?i.url=c.replace(zi,"$1"+s):d?i.data=l.replace(zi,"$1"+s):u&&(i.url+=(qi.test(c)?"&":"?")+i.jsonp+"="+s),i.converters["script json"]=function(){return o||Z.error(s+" was not called"),o[0]},i.dataTypes[0]="json",e[s]=function(){o=arguments},r.always(function(){e[s]=a,i[s]&&(i.jsonpCallback=n.jsonpCallback,Bi.push(s)),o&&Z.isFunction(a)&&a(o[0]),o=a=t}),"script"):void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=q.head||q.getElementsByTagName("head")[0]||q.documentElement;return{send:function(r,s){i=q.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,r||s(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var $i,Ui=e.ActiveXObject?function(){for(var e in $i)$i[e](0,1)}:!1,Gi=0;Z.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||N()}:A,function(e){Z.extend(Z.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Z.ajaxSettings.xhr()),Z.support.ajax&&Z.ajaxTransport(function(i){if(!i.crossDomain||Z.support.cors){var n;return{send:function(r,s){var a,o,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(o in i.xhrFields)l[o]=i.xhrFields[o];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(o in r)l.setRequestHeader(o,r[o])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,r){var o,c,u,h,d;try{if(n&&(r||4===l.readyState))if(n=t,a&&(l.onreadystatechange=Z.noop,Ui&&delete $i[a]),r)4!==l.readyState&&l.abort();else{o=l.status,u=l.getAllResponseHeaders(),h={},d=l.responseXML,d&&d.documentElement&&(h.xml=d);try{h.text=l.responseText}catch(f){}try{c=l.statusText}catch(f){c=""}o||!i.isLocal||i.crossDomain?1223===o&&(o=204):o=h.text?200:404}}catch(p){r||s(-1,p)}h&&s(o,c,h,u)},i.async?4===l.readyState?setTimeout(n,0):(a=++Gi,Ui&&($i||($i={},Z(e).unload(Ui)),$i[a]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var Vi,Qi,Yi=/^(?:toggle|show|hide)$/,Xi=new RegExp("^(?:([-+])=|)("+J+")([a-z%]*)$","i"),Ki=/queueHooks$/,Zi=[F],Ji={"*":[function(e,t){var i,n,r=this.createTween(e,t),s=Xi.exec(t),a=r.cur(),o=+a||0,l=1,c=20;if(s){if(i=+s[2],n=s[3]||(Z.cssNumber[e]?"":"px"),"px"!==n&&o){o=Z.css(r.elem,e,!0)||i||1;do l=l||".5",o/=l,Z.style(r.elem,e,o+n);while(l!==(l=r.cur()/a)&&1!==l&&--c)}r.unit=n,r.start=o,r.end=s[1]?o+(s[1]+1)*i:i}return r}]};Z.Animation=Z.extend(M,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],Ji[i]=Ji[i]||[],Ji[i].unshift(t)},prefilter:function(e,t){t?Zi.unshift(e):Zi.push(e)}}),Z.Tween=O,O.prototype={constructor:O,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(Z.cssNumber[i]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,i=O.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.each(["toggle","show","hide"],function(e,t){var i=Z.fn[t];Z.fn[t]=function(n,r,s){return null==n||"boolean"==typeof n||!e&&Z.isFunction(n)&&Z.isFunction(r)?i.apply(this,arguments):this.animate(j(t,!0),n,r,s)}}),Z.fn.extend({fadeTo:function(e,t,i,n){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=Z.isEmptyObject(e),s=Z.speed(t,i,n),a=function(){var t=M(this,Z.extend({},e),s);r&&t.stop(!0)};return r||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(e,i,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=Z.timers,a=Z._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Ki.test(i)&&r(a[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&Z.dequeue(this,e)})}}),Z.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),Z.speed=function(e,t,i){var n=e&&"object"==typeof e?Z.extend({},e):{complete:i||!i&&t||Z.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Z.isFunction(t)&&t};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.timers=[],Z.fx=O.prototype.init,Z.fx.tick=function(){var e,i=Z.timers,n=0;for(Vi=Z.now();i.length>n;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||Z.fx.stop(),Vi=t},Z.fx.timer=function(e){e()&&Z.timers.push(e)&&!Qi&&(Qi=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.interval=13,Z.fx.stop=function(){clearInterval(Qi),Qi=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fx.step={},Z.expr&&Z.expr.filters&&(Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length});var en=/^(?:body|html)$/i;Z.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var i,n,r,s,a,o,l,c={top:0,left:0},u=this[0],h=u&&u.ownerDocument;if(h)return(n=h.body)===u?Z.offset.bodyOffset(u):(i=h.documentElement,Z.contains(i,u)?("undefined"!=typeof u.getBoundingClientRect&&(c=u.getBoundingClientRect()),r=H(h),s=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,o=r.pageYOffset||i.scrollTop,l=r.pageXOffset||i.scrollLeft,{top:c.top+o-s,left:c.left+l-a}):c)},Z.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return Z.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Z.css(e,"marginTop"))||0,i+=parseFloat(Z.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=Z.css(e,"position");"static"===n&&(e.style.position="relative");var r,s,a=Z(e),o=a.offset(),l=Z.css(e,"top"),c=Z.css(e,"left"),u=("absolute"===n||"fixed"===n)&&Z.inArray("auto",[l,c])>-1,h={},d={};u?(d=a.position(),r=d.top,s=d.left):(r=parseFloat(l)||0,s=parseFloat(c)||0),Z.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(h.top=t.top-o.top+r),null!=t.left&&(h.left=t.left-o.left+s),"using"in t?t.using.call(e,h):a.css(h)}},Z.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),n=en.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(Z.css(e,"marginTop"))||0,i.left-=parseFloat(Z.css(e,"marginLeft"))||0,n.top+=parseFloat(Z.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(Z.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||q.body;e&&!en.test(e.nodeName)&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||q.body})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);Z.fn[e]=function(r){return Z.access(this,function(e,r,s){var a=H(e);return s===t?a?i in a?a[i]:a.document.documentElement[r]:e[r]:(a?a.scrollTo(n?Z(a).scrollLeft():s,n?s:Z(a).scrollTop()):e[r]=s,void 0)},e,r,arguments.length,null)}}),Z.each({Height:"height",Width:"width"},function(e,i){Z.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,r){Z.fn[r]=function(r,s){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||s===!0?"margin":"border");return Z.access(this,function(i,n,r){var s;return Z.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(s=i.documentElement,Math.max(i.body["scroll"+e],s["scroll"+e],i.body["offset"+e],s["offset"+e],s["client"+e])):r===t?Z.css(i,n,r,o):Z.style(i,n,r,o)},i,a?r:t,a,null)}})}),e.jQuery=e.$=Z,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Z})})(window),function(e,t){var i=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};i()&&e.error("jquery-ujs has already been loaded!");var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},fire:function(t,i,n){var r=e.Event(i);return t.trigger(r,n),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var r,s,a,o,l,c,u,h;if(n.fire(i,"ajax:before")){if(o=i.data("cross-domain"),l=o===t?null:o,c=i.data("with-credentials")||null,u=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),s=i.attr("action"),a=i.serializeArray();var d=i.data("ujs:submit-button");d&&(a.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),s=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),s=n.href(i),a=i.data("params")||null);h={type:r||"GET",data:a,dataType:u,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},xhrFields:{withCredentials:c},crossDomain:l},s&&(h.url=s);var f=n.ajax(h);return i.trigger("ajax:send",f),f}return!1},handleMethod:function(i){var r=n.href(i),s=i.data("method"),a=i.attr("target"),o=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+s+'" type="hidden" />';l!==t&&o!==t&&(u+='<input name="'+l+'" value="'+o+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with",t[i]()),t[i](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[i](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,i,n){var r,s,a=e(),o=i||"input,textarea",l=t.find(o);return l.each(function(){if(r=e(this),s=r.is(":checkbox,:radio")?r.is(":checked"):r.val(),!s==!n){if(r.is(":radio")&&l.filter('input:radio:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var r=i.data("events"),s=!0;return r!==t&&r.submit!==t&&e.each(r.submit,function(e,t){return"function"==typeof t.handler?s=t.handler(n):void 0}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},n.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),s=r.data("method"),a=r.data("params");if(!n.allowAction(r))return n.stopEverything(i);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(!(!i.metaKey&&!i.ctrlKey||s&&"GET"!==s||a))return!0;var o=n.handleRemote(r);return o===!1?n.enableElement(r):o.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var r=e(this),s=r.data("remote")!==t,a=n.blankInputs(r,n.requiredInputSelector),o=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(a&&r.attr("novalidate")==t&&n.fire(r,"ajax:aborted:required",[a]))return n.stopEverything(i);if(s){if(o){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return!e.support.submitBubbles&&"1.7">e().jquery&&n.callFormSubmitBindings(r,i)===!1?n.stopEverything(i):(n.handleRemote(r),!1)}setTimeout(function(){n.disableFormElements(r)},13)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),s=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",s)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
function(e,t){function i(t,i){var r,s,a,o=t.nodeName.toLowerCase();return"area"===o?(r=t.parentNode,s=r.name,t.href&&s&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap=#"+s+"]")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,s=e(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function r(t,i,n,r){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?o["inner"+n].call(this):this.each(function(){e(this).css(a,r(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,i)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,s=e.ui[t].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;r.length>n;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0?!0:(t[n]=1,r=t[n]>0,t[n]=0,r)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,r,s,a){return e.ui.isOverAxis(t,n,s)&&e.ui.isOverAxis(i,r,a)}}))}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(s){}r(t)},e.widget=function(t,i,n){var r,s,a,o,l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},s=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new a(e,t)},e.extend(a,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(n,function(t,r){e.isFunction(r)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=n,t=r.apply(this,arguments),this._super=i,this._superApply=s,t}}())}),a.prototype=e.widget.extend(o,{widgetEventPrefix:s?o.widgetEventPrefix:t},n,{constructor:a,namespace:l,widgetName:t,widgetBaseClass:r,widgetFullName:r}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete s._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(i){for(var r,s,a=n.call(arguments,1),o=0,l=a.length;l>o;o++)for(r in a[o])s=a[o][r],a[o].hasOwnProperty(r)&&s!==t&&(i[r]=e.isPlainObject(s)?e.isPlainObject(i[r])?e.widget.extend({},i[r],s):e.widget.extend({},s):s);return i},e.widget.bridge=function(i,r){var s=r.prototype.widgetFullName||i;e.fn[i]=function(a){var o="string"==typeof a,l=n.call(arguments,1),c=this;return a=!o&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,o?this.each(function(){var n,r=e.data(this,s);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(n=r[a].apply(r,l),n!==r&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+a+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(a||{})._init():e.data(this,s,new r(a,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var r,s,a,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},r=i.split("."),i=r.shift(),r.length){for(s=o[i]=e.widget.extend({},this.options[i]),a=0;r.length-1>a;a++)s[r[a]]=s[r[a]]||{},s=s[r[a]];if(i=r.pop(),n===t)return s[i]===t?null:s[i];s[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];o[i]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var r,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,function(n,a){function o(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):void 0}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?r.delegate(u,c,o):i.bind(c,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,s,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(r in s)r in i||(i[r]=s[r]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,s){"string"==typeof r&&(r={effect:r});var a,o=r?r===!0||"number"==typeof r?i:r.effect||i:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),a&&e.effects&&(e.effects.effect[o]||e.uiBackCompat!==!1&&e.effects[o])?n[t](r):o!==t&&n[o]?n[o](r.duration,r.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,r=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],r=!1;n&&(n=n.parentNode);)n==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;i.offset();var r="hidden"!=e(n).css("overflow");this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName),s=t.pageX,a=t.pageY;if(this.originalPosition){var o;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();o=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else o=this.containment;t.pageX-this.offset.click.left<o[0]&&(s=o[0]+this.offset.click.left),t.pageY-this.offset.click.top<o[1]&&(a=o[1]+this.offset.click.top),t.pageX-this.offset.click.left>o[2]&&(s=o[2]+this.offset.click.left),t.pageY-this.offset.click.top>o[3]&&(a=o[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;a=o?c-this.offset.click.top<o[1]||c-this.offset.click.top>o[3]?c-this.offset.click.top<o[1]?c+i.grid[1]:c-i.grid[1]:c:c;var u=i.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;s=o?u-this.offset.click.left<o[0]||u-this.offset.click.left>o[2]?u-this.offset.click.left<o[0]?u+i.grid[0]:u-i.grid[0]:u:u}}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),r=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(r.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i){var n=e(this).data("draggable"),r=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,i){var n=e(this).data("draggable"),r=this;e.each(n.sortables,function(){var s=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=a&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(a.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),r=e(this).data("draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),n=i.options,r=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),r=n.options,s=r.snapTolerance,a=i.offset.left,o=a+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,u=n.snapElements.length-1;u>=0;u--){var h=n.snapElements[u].left,d=h+n.snapElements[u].width,f=n.snapElements[u].top,p=f+n.snapElements[u].height;if(a>h-s&&d+s>a&&l>f-s&&p+s>l||a>h-s&&d+s>a&&c>f-s&&p+s>c||o>h-s&&d+s>o&&l>f-s&&p+s>l||o>h-s&&d+s>o&&c>f-s&&p+s>c){if("inner"!=r.snapMode){var m=s>=Math.abs(f-c),g=s>=Math.abs(p-l),v=s>=Math.abs(h-o),y=s>=Math.abs(d-a);m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left)}var b=m||g||v||y;if("outer"!=r.snapMode){var m=s>=Math.abs(f-l),g=s>=Math.abs(p-c),v=s>=Math.abs(h-a),y=s>=Math.abs(d-o);m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[u].snapping&&(m||g||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=m||g||v||y||b}else n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,i=e.makeArray(e(t.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),r=e(this).data("draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;t.length>i;i++)t[i]==this&&t.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)
}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var r=(t.positionAbs||t.position.absolute).left,s=r+t.helperProportions.width,a=(t.positionAbs||t.position.absolute).top,o=a+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,u=i.offset.top,h=u+i.proportions.height;switch(n){case"fit":return r>=l&&c>=s&&a>=u&&h>=o;case"intersect":return r+t.helperProportions.width/2>l&&c>s-t.helperProportions.width/2&&a+t.helperProportions.height/2>u&&h>o-t.helperProportions.height/2;case"pointer":var d=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,p=e.ui.isOver(f,d,u,l,i.proportions.height,i.proportions.width);return p;case"touch":return(a>=u&&h>=a||o>=u&&h>=o||u>a&&o>h)&&(r>=l&&c>=r||s>=l&&c>=s||l>r&&s>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var a=0;n.length>a;a++)if(!(n[a].options.disabled||t&&!n[a].accept.call(n[a].element[0],t.currentItem||t.element))){for(var o=0;s.length>o;o++)if(s[o]==n[a].element[0]){n[a].proportions.height=0;continue e}n[a].visible="none"!=n[a].element.css("display"),n[a].visible&&("mousedown"==r&&n[a]._activate.call(n[a],i),n[a].offset=n[a].element.offset(),n[a].proportions={width:n[a].element[0].offsetWidth,height:n[a].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),r=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(r){var s;if(this.options.greedy){var a=this.options.scope,o=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===a});o.length&&(s=e.data(o[0],"droppable"),s.greedyChild="isover"==r?1:0)}s&&"isover"==r&&(s.isover=0,s.isout=1,s._out.call(s,i)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,i),s&&"isout"==r&&(s.isout=0,s.isover=1,s._over.call(s,i))}}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var r=0;n.length>r;r++){var s=e.trim(n[r]),a="ui-resizable-"+s,o=e('<div class="ui-resizable-handle '+a+'"></div>');o.css({zIndex:i.zIndex}),"se"==s&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(o)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=e(this.handles[i],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(s,r),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())}).mouseleave(function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var n=this.options,r=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var a=t(this.helper.css("left")),o=t(this.helper.css("top"));n.containment&&(a+=e(n.containment).scrollLeft()||0,o+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:o},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:a,top:o},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),s.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var t=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,r=e.pageX-i.left||0,s=e.pageY-i.top||0,a=this._change[n];if(!a)return!1;var o=a.apply(this,[e,r,s]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(o=this._updateRatio(o,e)),o=this._respectSize(o,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(o),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var r=this._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),a=s&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,o=s?0:n.sizeDiff.width,l={width:n.helper.width()-o,height:n.helper.height()-a},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:u,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,r,s,a,o=this.options;a={minWidth:i(o.minWidth)?o.minWidth:0,maxWidth:i(o.maxWidth)?o.maxWidth:1/0,minHeight:i(o.minHeight)?o.minHeight:0,maxHeight:i(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,n=a.maxHeight*this.aspectRatio,s=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),a.maxWidth>n&&(a.maxWidth=n),a.maxHeight>s&&(a.maxHeight=s)),this._vBoundaries=a},_updateCache:function(e){this.options,this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),n=this.size,r=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"==r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e,t){var n=(this.helper,this._vBoundaries),r=(this._aspectRatio||t.shiftKey,this.axis),s=i(e.width)&&n.maxWidth&&n.maxWidth<e.width,a=i(e.height)&&n.maxHeight&&n.maxHeight<e.height,o=i(e.width)&&n.minWidth&&n.minWidth>e.width,l=i(e.height)&&n.minHeight&&n.minHeight>e.height;o&&(e.width=n.minWidth),l&&(e.height=n.minHeight),s&&(e.width=n.maxWidth),a&&(e.height=n.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,h=/sw|nw|w/.test(r),d=/nw|ne|n/.test(r);o&&h&&(e.left=c-n.minWidth),s&&h&&(e.left=c-n.maxWidth),l&&d&&(e.top=u-n.minHeight),a&&d&&(e.top=u-n.maxHeight);var f=!e.width&&!e.height;return f&&!e.left&&e.top?e.top=null:f&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;this._proportionallyResizeElements.length>i;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(r,function(e,t){var i=parseInt(e,10)||0,n=parseInt(s[t],10)||0;return i+n})}n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.ui.ie6?1:0,r=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("resizable"),r=n.options,s=n.originalSize,a=n.originalPosition,o={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0},l=function(t,n){e(t).each(function(){var t=e(this),r=e(this).data("resizable-alsoresize"),s={},a=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(r[t]||0)+(o[t]||0);i&&i>=0&&(s[t]=i||null)}),t.css(s)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),n=i.options,r=i._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),a=s&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,o=s?0:i.sizeDiff.width,l={width:i.size.width-o,height:i.size.height-a},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),n=i.options,r=i.element,s=n.containment,a=s instanceof e?s.get(0):/parent/.test(s)?r.parent().get(0):s;if(a)if(i.containerElement=e(a),/document/.test(s)||s==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var o=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){l[e]=t(o.css("padding"+i))}),i.containerOffset=o.offset(),i.containerPosition=o.position(),i.containerSize={height:o.innerHeight()-l[3],width:o.innerWidth()-l[1]};var c=i.containerOffset,u=i.containerSize.height,h=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:h,f=e.ui.hasScroll(a)?a.scrollHeight:u;i.parentData={element:a,left:c.left,top:c.top,width:d,height:f}}},resize:function(t){var i=e(this).data("resizable"),n=i.options,r=(i.containerSize,i.containerOffset),s=(i.size,i.position),a=i._aspectRatio||t.shiftKey,o={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(o=r),s.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-o.left),a&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=n.helper?r.left:0),s.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),a&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?r.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var c=Math.abs((i._helper?i.offset.left-o.left:i.offset.left-o.left)+i.sizeDiff.width),u=Math.abs((i._helper?i.offset.top-o.top:i.offset.top-r.top)+i.sizeDiff.height),h=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));h&&d&&(c-=i.parentData.left),c+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-c,a&&(i.size.height=i.size.width/i.aspectRatio)),u+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-u,a&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,n=(t.position,t.containerOffset),r=t.containerPosition,s=t.containerElement,a=e(t.helper),o=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:o.left-r.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:o.left-r.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){var i=e(this).data("resizable"),n=i.options,r=i.size,s=i.originalSize,a=i.originalPosition,o=i.axis;n._aspectRatio||t.shiftKey,n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var l=Math.round((r.width-s.width)/(n.grid[0]||1))*(n.grid[0]||1),c=Math.round((r.height-s.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(o)?(i.size.width=s.width+l,i.size.height=s.height+c):/^(ne)$/.test(o)?(i.size.width=s.width+l,i.size.height=s.height+c,i.position.top=a.top-c):/^(sw)$/.test(o)?(i.size.width=s.width+l,i.size.height=s.height+c,i.position.left=a.left-l):(i.size.width=s.width+l,i.size.height=s.height+c,i.position.top=a.top-c,i.position.left=a.left-l)}});var t=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().andSelf().each(function(){var n=e.data(this,"selectable-item");if(n){var r=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),n.unselecting=!r,n.selecting=r,n.selected=r,r?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,r=this.opos[0],s=this.opos[1],a=t.pageX,o=t.pageY;if(r>a){var l=a;a=r,r=l}if(s>o){var l=o;o=s,s=l}return this.helper.css({left:r,top:s,width:a-r,height:o-s}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>a||r>l.right||l.top>o||s>l.bottom):"fit"==n.tolerance&&(c=l.left>r&&a>l.right&&l.top>s&&o>l.bottom),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var r=null;if(e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==n?(r=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")==n&&(r=e(t.target)),!r)return!1;if(this.options.handle&&!i){var s=!1;if(e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(s=!0)}),!s)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var s=this.items[r],a=s.item[0],o=this._intersectsWithPointer(s);if(o&&s.instance===this.currentContainer&&a!=this.currentItem[0]&&this.placeholder[1==o?"next":"prev"]()[0]!=a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],a):!0)){if(this.direction=1==o?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this
},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,s=e.left,a=s+e.width,o=e.top,l=o+e.height,c=this.offset.click.top,u=this.offset.click.left,h=n+c>o&&l>n+c&&t+u>s&&a>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:t+this.helperProportions.width/2>s&&a>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>o&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=i&&n,s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return r?this.floating?a&&"right"==a||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&n||"left"==s&&!n:r&&("down"==r&&i||"up"==r&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],r=this._connectWith();if(r&&t)for(var s=r.length-1;s>=0;s--)for(var a=e(r[s]),o=a.length-1;o>=0;o--){var l=e.data(a[o],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=n.length-1;s>=0;s--)n[s][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var s=r.length-1;s>=0;s--)for(var a=e(r[s]),o=a.length-1;o>=0;o--){var l=e.data(a[o],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var s=n.length-1;s>=0;s--)for(var c=n[s][1],u=n[s][0],o=0,h=u.length;h>o;o++){var d=e(u[o]);d.data(this.widgetName+"-item",c),i.push({item:d,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=r.outerWidth(),n.height=r.outerHeight());var s=r.offset();n.left=s.left,n.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var s=this.containers[i].element.offset();this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var i=t.options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var i=null,n=null,r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(i&&e.contains(this.containers[r].element[0],i.element[0]))continue;i=this.containers[r],n=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var s=1e4,a=null,o=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",c=this.positionAbs[o]+this.offset.click[o],u=this.items.length-1;u>=0;u--)if(e.contains(this.containers[n].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){var h=this.items[u].item.offset()[o],d=!1;Math.abs(h-c)>Math.abs(h+this.items[u][l]-c)&&(d=!0,h+=this.items[u][l]),s>Math.abs(h-c)&&(s=Math.abs(h-c),a=this.items[u],this.direction=d?"up":"down")}if(!a&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),r="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var s=t.pageX,a=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid)){var o=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1];a=this.containment?o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3]?o-this.offset.click.top<this.containment[1]?o+i.grid[1]:o-i.grid[1]:o:o;var l=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0];s=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l:l}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r==this.counter&&this.refreshPositions(!n)})},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var r=this.containers.length-1;r>=0;r--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var r=0;n.length>r;r++)n[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var r=0;n.length>r;r++)n[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var i=e.uiBackCompat!==!1,n="ui-effects-";e.effects={effect:{}},/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
function(t,i){function n(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function r(e){var i=u(),n=i._rgba=[];return e=e.toLowerCase(),m(c,function(t,r){var s,a=r.re.exec(e),o=a&&r.parse(a),l=r.space||"rgba";return o?(s=i[l](o),i[h[l].cache]=s[h[l].cache],n=i._rgba=s._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),i):a[e]}function s(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=t.Color=function(e,i,n,r){return new t.Color.fn.parse(e,i,n,r)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=u.support={},p=t("<p>")[0],m=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=p.style.backgroundColor.indexOf("rgba")>-1,m(h,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(s,o,l,c){if(s===i)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(o),o=i);var d=this,f=t.type(s),p=this._rgba=[];return o!==i&&(s=[s,o,l,c],f="array"),"string"===f?this.parse(r(s)||a._default):"array"===f?(m(h.rgba.props,function(e,t){p[t.idx]=n(s[t.idx],t)}),this):"object"===f?(s instanceof u?m(h,function(e,t){s[t.cache]&&(d[t.cache]=s[t.cache].slice())}):m(h,function(t,i){var r=i.cache;m(i.props,function(e,t){if(!d[r]&&i.to){if("alpha"===e||null==s[e])return;d[r]=i.to(d._rgba)}d[r][t.idx]=n(s[e],t,!0)}),d[r]&&0>e.inArray(null,d[r].slice(0,3))&&(d[r][3]=1,i.from&&(d._rgba=i.from(d[r])))}),this):void 0},is:function(e){var t=u(e),i=!0,n=this;return m(h,function(e,r){var s,a=t[r.cache];return a&&(s=n[r.cache]||r.to&&r.to(n._rgba)||[],m(r.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===s[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return m(h,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=u(e),r=i._space(),s=h[r],a=0===this.alpha()?u("transparent"):this,o=a[s.cache]||s.to(a._rgba),l=o.slice();return i=i[s.cache],m(s.props,function(e,r){var s=r.idx,a=o[s],c=i[s],u=d[r.type]||{};null!==c&&(null===a?l[s]=c:(u.mod&&(c-a>u.mod/2?a+=u.mod:a-c>u.mod/2&&(a-=u.mod)),l[s]=n((c-a)*t+a,r)))}),this[r](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=u(e)._rgba;return u(t.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,s=e[2]/255,a=e[3],o=Math.max(n,r,s),l=Math.min(n,r,s),c=o-l,u=o+l,h=.5*u;return t=l===o?0:n===o?60*(r-s)/c+360:r===o?60*(s-n)/c+120:60*(n-r)/c+240,i=0===h||1===h?h:.5>=h?c/u:c/(2-u),[Math.round(t)%360,i,h,null==a?1:a]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],a=.5>=n?n*(1+i):n+i-n*i,o=2*n-a;return[Math.round(255*s(o,a,t+1/3)),Math.round(255*s(o,a,t)),Math.round(255*s(o,a,t-1/3)),r]},m(h,function(e,r){var s=r.props,a=r.cache,o=r.to,c=r.from;u.fn[e]=function(e){if(o&&!this[a]&&(this[a]=o(this._rgba)),e===i)return this[a].slice();var r,l=t.type(e),h="array"===l||"object"===l?e:arguments,d=this[a].slice();return m(s,function(e,t){var i=h["object"===l?e:t.idx];null==i&&(i=d[t.idx]),d[t.idx]=n(i,t)}),c?(r=u(c(d)),r[a]=d,r):u(d)},m(s,function(i,n){u.fn[i]||(u.fn[i]=function(r){var s,a=t.type(r),o="alpha"===i?this._hsla?"hsla":"rgba":e,c=this[o](),u=c[n.idx];return"undefined"===a?u:("function"===a&&(r=r.call(this,u),a=t.type(r)),null==r&&n.empty?this:("string"===a&&(s=l.exec(r),s&&(r=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[n.idx]=r,this[o](c)))})})}),m(o,function(e,i){t.cssHooks[i]={set:function(e,n){var s,a,o="";if("string"!==t.type(n)||(s=r(n))){if(n=u(s||n),!f.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===o||"transparent"===o)&&a&&a.style;)try{o=t.css(a,"backgroundColor"),a=a.parentNode}catch(l){}n=n.blend(o&&"transparent"!==o?o:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(c){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=u(e.elem,i),e.end=u(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)t=n[i],"string"==typeof n[t]&&(r[e.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(r[t]=n[t]);return r}function n(t,i){var n,r,a={};for(n in i)r=i[n],t[n]!==r&&(s[n]||(e.fx.step[n]||!isNaN(parseFloat(r)))&&(a[n]=r));return a}var r=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,s,a,o){var l=e.speed(s,a,o);return this.queue(function(){var s,a=e(this),o=a.attr("class")||"",c=l.children?a.find("*").andSelf():a;c=c.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),s=function(){e.each(r,function(e,i){t[i]&&a[i+"Class"](t[i])})},s(),c=c.map(function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this}),a.attr("class",o),c=c.map(function(){var t=this,i=e.Deferred(),n=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,r){return i?e.effects.animateClass.call(this,{add:t},i,n,r):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,r){return i?e.effects.animateClass.call(this,{remove:t},i,n,r):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,r,s,a){return"boolean"==typeof n||n===t?r?e.effects.animateClass.call(this,n?{add:i}:{remove:i},r,s,a):this._toggleClass(i,n):e.effects.animateClass.call(this,{toggle:i},n,r,s)},switchClass:function(t,i,n,r,s){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,s)}})}(),function(){function r(t,i,n,r){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(r=n,n=i,i={}),e.isFunction(n)&&(r=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=r||i.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:i&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,s;for(s=0;i.length>s;s++)null!==i[s]&&(r=e.data(n+i[s]),r===t&&(r=""),e.css(i[s],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(a){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,r){return r=r||{},e.each(i,function(e,i){var s=t.cssUnit(i);s[0]>0&&(r[i]=s[0]*n+s[1])}),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(s)&&s.call(r[0]),e.isFunction(t)&&t()}var r=e(this),s=n.complete,a=n.mode;(r.is(":hidden")?"hide"===a:"show"===a)?i():o.call(r[0],n,i)}var n=r.apply(this,arguments),s=n.mode,a=n.queue,o=e.effects.effect[n.effect],l=!o&&i&&e.effects[n.effect];return e.fx.off||!o&&!l?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o?a===!1?this.each(t):this.queue(a||"fx",t):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var i=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t),n=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),n.collapsible||n.active!==!1&&null!=n.active||(n.active=0),0>n.active&&(n.active+=this.headers.length),this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),s=n.next(),a=s.attr("id");r||(r=i+"-header-"+t,n.attr("id",r)),a||(a=i+"-panel-"+t,s.attr("id",a)),n.attr("aria-controls",a),s.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(n.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),s=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,i,n=this.options.heightStyle,r=this.element.parent();"fill"===n?(e.support.minHeight||(i=r.css("overflow"),r.css("overflow","hidden")),t=r.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),i&&r.css("overflow",i),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={};t&&(e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),s=r[0]===n[0],a=s&&i.collapsible,o=a?e():r.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:a?e():r,newPanel:o};t.preventDefault(),s&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=a?!1:this.headers.index(r),this.active=s?e():r,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,r){var s,a,o,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},d=u&&h.down||h,f=function(){l._toggleComplete(r)};return"number"==typeof d&&(o=d),"string"==typeof d&&(a=d),a=a||d.easing||h.easing,o=o||d.duration||h.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(i,{duration:o,easing:a,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(n,{duration:o,easing:a,complete:f,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-c),c=0)}}),void 0):t.animate(i,o,a,f):e.animate(n,o,a,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=t._create;t._create=function(){if(this.options.navigation){var t=this,n=this.element.find(this.options.header),r=n.next(),s=n.add(r).find("a").filter(this.options.navigationFilter)[0];s&&n.add(r).each(function(i){return e.contains(this,s)?(t.options.active=Math.floor(i/2),!1):void 0})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=t._create,n=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(e){("autoHeight"===e||"clearStyle"===e||"fillSpace"===e)&&(this.options.heightStyle=this._mergeHeightStyle()),n.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(e=this.headers.index(this.headers.filter(e)),-1===e&&(e=!1)),i.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var i=t._trigger;t._trigger=function(e,t,n){var r=i.apply(this,arguments);return r?("beforeActivate"===e?r=i.call(this,"changestart",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel}):"activate"===e&&(r=i.call(this,"change",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel})),r):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var i=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animate=e.animated?"slide"===e.animated?300:"bounceslide"===e.animated?{duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animated:!1),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(r.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",r);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case s.UP:t=!0,this._keyEvent("previous",r);break;case s.DOWN:t=!0,this._keyEvent("next",r);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case s.TAB:this.menu.active&&this.menu.select(r);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(t)return t=!1,n.preventDefault(),void 0;if(!i){var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i,n,r,s="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var i=t.name,n=t.form,r=e([]);return i&&(r=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),r};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,o=this.options,u="checkbox"===this.type||"radio"===this.type,h=u?"":"ui-state-active",d="ui-state-focus";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(d)}),u&&(this.element.bind("change"+this.eventNamespace,function(){r||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){o.disabled||(r=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){o.disabled||(i!==e.pageX||n!==e.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return o.disabled||r?!1:(e(this).toggleClass("ui-state-active"),a.buttonElement.attr("aria-pressed",a.element[0].checked),void 0)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled||r)return!1;
e(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var t=a.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return o.disabled?!1:(e(this).addClass("ui-state-active"),t=this,a.document.one("mouseup",function(){t=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return o.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return o.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" "+a+" "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(o),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,s=[];n.primary||n.secondary?(this.options.text&&s.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(s.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var r=this._get(t,"showOn");if(("focus"==r||"both"==r)&&e.focus(this._showDatepicker),"button"==r||"both"==r){var s=this._get(t,"buttonText"),a=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:a,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==a?s:$("<img/>").attr({src:a,alt:s,title:s}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;e.length>n;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,r){var s=this._dialogInst;if(!s){this.uuid+=1;var a="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+a+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}if(extendRemove(s.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,!this._pos){var o=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[o/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var r=t.children("."+this._inlineClass);r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var r=t||{};if("string"==typeof t&&(r={},r[t]=i),n){this._curInst==n&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max");extendRemove(n.settings,r),null!==a&&r.dateFormat!==undefined&&r.minDate===undefined&&(n.settings.minDate=this._formatDate(n,a)),null!==o&&r.dateFormat!==undefined&&r.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,o)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,s),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);r[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,r[0]);var s=$.datepicker._get(t,"onSelect");if(s){var a=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[a,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(n){$.datepicker.log(n)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n!==!1){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var r=!1;$(e).parents().each(function(){return r|="fixed"==$(this).css("position"),!r});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,r),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var a=$.datepicker._get(t,"showAnim"),o=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[a]||$.effects[a])?t.dpDiv.show(a,$.datepicker._get(t,"showOptions"),o,l):t.dpDiv[a||"show"](a?o:null,l),a&&o||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),r=n[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout(function(){a===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),a=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-s:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+a?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>o&&o>n?Math.abs(t.left+n-o):0),t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+a):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),r=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,r):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),r=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(r,t+("M"==i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),r=this._getInst(n[0]);r["selected"+("M"==i?"Month":"Year")]=r["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(n)},_selectDay:function(e,t,i,n){var r=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(r[0])){var s=this._getInst(r[0]);s.selectedDay=s.currentDay=$("a",n).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=i,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var r=this._get(n,"onSelect");r?r.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),r=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(r)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,h=-1,d=!1,f=function(t){var i=e.length>y+1&&e.charAt(y+1)==t;return i&&y++,i},p=function(e){var i=f(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,r=new RegExp("^\\d{1,"+n+"}"),s=t.substring(v).match(r);if(!s)throw"Missing number at position "+v;return v+=s[0].length,parseInt(s[0],10)},m=function(e,i,n){var r=$.map(f(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;if($.each(r,function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(s=i[0],v+=n.length,!1):void 0}),-1!=s)return s+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;e.length>y;y++)if(d)"'"!=e.charAt(y)||f("'")?g():d=!1;else switch(e.charAt(y)){case"d":u=p("d");break;case"D":m("D",r,s);break;case"o":h=p("o");break;case"m":c=p("m");break;case"M":c=m("M",a,o);break;case"y":l=p("y");break;case"@":var b=new Date(p("@"));l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((p("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"'":f("'")?g():d=!0;break;default:g()}if(t.length>v){var _=t.substr(v);if(!/^\s+/.test(_))throw"Extra/unparsed characters found in date: "+_}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),h>-1)for(c=1,u=h;;){var w=this._getDaysInMonth(l,c-1);if(w>=u)break;c++,u-=w}var b=this._daylightSavingAdjust(new Date(l,c-1,u));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,o=function(t){var i=e.length>d+1&&e.charAt(d+1)==t;return i&&d++,i},l=function(e,t,i){var n=""+t;if(o(e))for(;i>n.length;)n="0"+n;return n},c=function(e,t,i,n){return o(e)?n[t]:i[t]},u="",h=!1;if(t)for(var d=0;e.length>d;d++)if(h)"'"!=e.charAt(d)||o("'")?u+=e.charAt(d):h=!1;else switch(e.charAt(d)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),n,r);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),s,a);break;case"y":u+=o("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":o("'")?u+="'":h=!0;break;default:u+=e.charAt(d)}return u},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=e.length>r+1&&e.charAt(r+1)==t;return i&&r++,i},r=0;e.length>r;r++)if(i)"'"!=e.charAt(r)||n("'")?t+=e.charAt(r):i=!1;else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,r=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var a=this._getFormatConfig(e);try{i=this.parseDate(r,s,a)||n}catch(o){this.log(o),s=t?"":s}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=s?i.getDate():0,e.currentMonth=s?i.getMonth():0,e.currentYear=s?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,r=n.getFullYear(),s=n.getMonth(),a=n.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=o.exec(t);l;){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(l[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(r,s))}l=o.exec(t)}return new Date(r,s,a)},s=null==t||""===t?i:"string"==typeof t?r(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return s=s&&"Invalid Date"==s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,s=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),r==e.selectedMonth&&s==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),r=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),a=this._getNumberOfMonths(e),o=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=a[0]||1!=a[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(e,"min"),d=this._getMinMaxDate(e,"max"),f=e.drawMonth-o,p=e.drawYear;if(0>f&&(f+=12,p--),d){var m=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-a[0]*a[1]+1,d.getDate()));
for(m=h&&h>m?h:m;this._daylightSavingAdjust(new Date(p,f,1))>m;)f--,0>f&&(f=11,p--)}e.drawMonth=f,e.drawYear=p;var g=this._get(e,"prevText");g=s?this.formatDate(g,this._daylightSavingAdjust(new Date(p,f-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,p,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(p,f+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,p,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>",_=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?u:t;_=s?this.formatDate(_,w,this._getFormatConfig(e)):_;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+_+"</button>":"")+(i?"":x)+"</div>":"",E=parseInt(this._get(e,"firstDay"),10);E=isNaN(E)?0:E;var S=this._get(e,"showWeek"),k=this._get(e,"dayNames");this._get(e,"dayNamesShort");var I=this._get(e,"dayNamesMin"),T=this._get(e,"monthNames"),A=this._get(e,"monthNamesShort"),N=this._get(e,"beforeShowDay"),P=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var M=this._getDefaultDate(e),R="",F=0;a[0]>F;F++){var O="";this.maxRows=4;for(var j=0;a[1]>j;j++){var H=this._daylightSavingAdjust(new Date(p,f,e.selectedDay)),L=" ui-corner-all",B="";if(c){if(B+='<div class="ui-datepicker-group',a[1]>1)switch(j){case 0:B+=" ui-datepicker-group-first",L=" ui-corner-"+(i?"right":"left");break;case a[1]-1:B+=" ui-datepicker-group-last",L=" ui-corner-"+(i?"left":"right");break;default:B+=" ui-datepicker-group-middle",L=""}B+='">'}B+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+L+'">'+(/all|left/.test(L)&&0==F?i?b:v:"")+(/all|right/.test(L)&&0==F?i?v:b:"")+this._generateMonthYearHeader(e,f,p,h,d,F>0||j>0,T,A)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var q=S?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var W=(z+E)%7;q+="<th"+((z+E+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+k[W]+'">'+I[W]+"</span></th>"}B+=q+"</tr></thead><tbody>";var U=this._getDaysInMonth(p,f);p==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,U));var G=(this._getFirstDayOfMonth(p,f)-E+7)%7,V=Math.ceil((G+U)/7),Q=c?this.maxRows>V?this.maxRows:V:V;this.maxRows=Q;for(var Y=this._daylightSavingAdjust(new Date(p,f,1-G)),X=0;Q>X;X++){B+="<tr>";for(var K=S?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Y)+"</td>":"",z=0;7>z;z++){var Z=N?N.apply(e.input?e.input[0]:null,[Y]):[!0,""],J=Y.getMonth()!=f,et=J&&!D||!Z[0]||h&&h>Y||d&&Y>d;K+='<td class="'+((z+E+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(Y.getTime()==H.getTime()&&f==e.selectedMonth&&e._keyEvent||M.getTime()==Y.getTime()&&M.getTime()==H.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!P?"":" "+Z[1]+(Y.getTime()==u.getTime()?" "+this._currentClass:"")+(Y.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(J&&!P||!Z[2]?"":' title="'+Z[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(J&&!P?"&#xa0;":et?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==t.getTime()?" ui-state-highlight":"")+(Y.getTime()==u.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}B+=K+"</tr>"}f++,f>11&&(f=0,p++),B+="</tbody></table>"+(c?"</div>"+(a[0]>0&&j==a[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),O+=B}R+=O}return R+=C+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,R},_generateMonthYearHeader:function(e,t,i,n,r,s,a,o){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',d="";if(s||!l)d+='<span class="ui-datepicker-month">'+a[t]+"</span>";else{var f=n&&n.getFullYear()==i,p=r&&r.getFullYear()==i;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=n.getMonth())&&(!p||r.getMonth()>=m)&&(d+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+o[m]+"</option>");d+="</select>"}if(u||(h+=d+(!s&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!c)h+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),_=Math.max(b,y(g[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,_=r?Math.min(_,r.getFullYear()):_,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';_>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",h+=e.yearshtml,e.yearshtml=null}return h+=this._get(e,"yearSuffix"),u&&(h+=(!s&&l&&c?"":"&#xa0;")+d),h+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),r=e.drawMonth+("M"==i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"==i?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,s)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&i>t?i:t;return r=n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(0>t?t:r[0]*r[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,n,r,s,a,o=this,l=this.options,c=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(o.close(t),t.preventDefault())}).mousedown(function(e){o.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),n=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){t.focus()}).prependTo(t),r=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),o.close(e)}).appendTo(n),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(r),s=e("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n),a=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(a),t.attr({role:"dialog","aria-labelledby":s.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(r),this._focusable(r),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(i){if(l.modal&&i.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",t),r=n.filter(":first"),s=n.filter(":last");return i.target!==s[0]||i.shiftKey?i.target===r[0]&&i.shiftKey?(s.focus(1),!1):void 0:(r.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var i,n,r=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==r.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),e.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,r=this.options;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",i):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var t,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=n)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(n=!0)}),n?(e.each(t,function(t,n){var r,s;n=e.isFunction(n)?{click:n,text:t}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(i.element[0],arguments)},r=e("<button></button>",n).appendTo(i.uiButtonSet),e.fn.button&&r.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){e(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,t(r))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(r,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",r,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var r=this,s=this.options,a=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,i){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,n(i))},resize:function(e,t){r._trigger("resize",e,n(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),s.height=e(this).height(),s.width=e(this).width(),r._trigger("resizeStop",t,n(i)),e.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(0>r[0]?r[0]:"+"+r[0])+" "+n[1]+(0>r[1]?r[1]:"+"+r[1]),at:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,s={},a=!1;e.each(t,function(e,t){i._setOption(e,t),e in n&&(a=!0),e in r&&(s[e]=t)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,n){var r,s,a=this.uiDialog;switch(t){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":a.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":r=a.is(":data(draggable)"),r&&!n&&a.draggable("destroy"),!r&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":s=a.is(":data(resizable)"),s&&!n&&a.resizable("destroy"),s&&"string"==typeof n&&a.resizable("option","handles",n),s||n===!1||this._makeResizable(n);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(t,n)},_size:function(){var t,i,n,r=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),r.minWidth>r.width&&(r.width=r.minWidth),t=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),i=Math.max(0,r.minHeight-t),"auto"===r.height?e.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(r.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(n){var r=e.ui.dialog.overlay.instances;0!==r.length&&r[r.length-1]===i&&t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances),n=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var t,i;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,r){var s,a,o,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,n.mode||"hide"),h=n.direction||"up",d=t.test(h),f=d?"height":"width",p=d?"top":"left",m=i.test(h),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),s=e.effects.createWrapper(l).css({overflow:"hidden"}),a=s[f](),o=parseFloat(s.css(p))||0,g[f]=v?a:0,m||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[p]=v?o:a+o),v&&(s.css(f,0),m||s.css(p,o+a)),s.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,r,s,a=e(this),o=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),c="hide"===l,u="show"===l,h=t.direction||"up",d=t.distance,f=t.times||5,p=2*f+(u||c?1:0),m=t.duration/p,g=t.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=a.queue(),_=b.length;for((u||c)&&o.push("opacity"),e.effects.save(a,o),a.show(),e.effects.createWrapper(a),d||(d=a["top"===v?"outerHeight":"outerWidth"]()/3),u&&(s={opacity:1},s[v]=0,a.css("opacity",0).css(v,y?2*-d:2*d).animate(s,m,g)),c&&(d/=Math.pow(2,f-1)),s={},s[v]=0,n=0;f>n;n++)r={},r[v]=(y?"-=":"+=")+d,a.animate(r,m,g).animate(s,m,g),d=c?2*d:d/2;c&&(r={opacity:0},r[v]=(y?"-=":"+=")+d,a.animate(r,m,g)),a.queue(function(){c&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,p+1))),a.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,r,s,a=e(this),o=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",h="vertical"===u,d=h?"height":"width",f=h?"top":"left",p={};e.effects.save(a,o),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),r="IMG"===a[0].tagName?n:a,s=r[d](),c&&(r.css(d,0),r.css(f,s/2)),p[d]=c?s:0,p[f]=c?0:s/2,r.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,r=e(this),s=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(r,t.mode||"hide"),o="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",h={opacity:o?1:0};e.effects.save(r,s),r.show(),e.effects.createWrapper(r),n=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(c,"pos"===u?-n:n),h[c]=(o?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===h*d&&r()}function r(){f.css({visibility:"visible"}),e(b).remove(),m||f.hide(),i()}var s,a,o,l,c,u,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=h,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/d),y=Math.ceil(f.outerHeight()/h),b=[];for(s=0;h>s;s++)for(l=g.top+s*y,u=s-(h-1)/2,a=0;d>a;a++)o=g.left+a*v,c=a-(d-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-s*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:o+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:o+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,r,s=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(s,t.mode||"hide"),l="show"===o,c="hide"===o,u=t.size||15,h=/([0-9]+)%/.exec(u),d=!!t.horizFirst,f=l!==d,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(s,a),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),r=f?[n.width(),n.height()]:[n.height(),n.width()],h&&(u=parseInt(h[1],10)/100*r[c?0:1]),l&&n.css(d?{height:0,width:u}:{height:u,width:0}),g[p[0]]=l?r[0]:u,v[p[1]]=l?r[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(n,t.mode||"show"),a={backgroundColor:n.css("backgroundColor")};"hide"===s&&(a.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&n.hide(),e.effects.restore(n,r),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,r=e(this),s=e.effects.setMode(r,t.mode||"show"),a="show"===s,o="hide"===s,l=a||"hide"===s,c=2*(t.times||5)+(l?1:0),u=t.duration/c,h=0,d=r.queue(),f=d.length;for((a||!r.is(":visible"))&&(r.css("opacity",0).show(),h=1),n=1;c>n;n++)r.animate({opacity:h},u,t.easing),h=1-h;r.animate({opacity:h},u,t.easing),r.queue(function(){o&&r.hide(),i()}),f>1&&d.splice.apply(d,[1,0].concat(d.splice(f,c+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"hide"),s="hide"===r,a=parseInt(t.percent,10)||150,o=a/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:i,percent:s?a:100,from:s?l:{height:l.height*o,width:l.width*o,outerHeight:l.outerHeight*o,outerWidth:l.outerWidth*o}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),r=e.extend(!0,{},t),s=e.effects.setMode(n,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),o=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==o?a/100:1,x:"vertical"!==o?a/100:1};r.effect="size",r.queue=!1,r.complete=i,"effect"!==s&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),r.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},r.fade&&("show"===s&&(r.from.opacity=0,r.to.opacity=1),"hide"===s&&(r.from.opacity=1,r.to.opacity=0)),n.effect(r)},e.effects.effect.size=function(t,i){var n,r,s,a=e(this),o=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(a,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=a.css("position"),y=p?o:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&a.show(),n={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===f?(a.from=t.to||b,a.to=t.from||n):(a.from=t.from||("show"===f?b:n),a.to=t.to||("hide"===f?b:n)),s={from:{y:a.from.height/n.height,x:a.from.width/n.width},to:{y:a.to.height/n.height,x:a.to.width/n.width}},("box"===m||"both"===m)&&(s.from.y!==s.to.y&&(y=y.concat(h),a.from=e.effects.setTransition(a,h,s.from.y,a.from),a.to=e.effects.setTransition(a,h,s.to.y,a.to)),s.from.x!==s.to.x&&(y=y.concat(d),a.from=e.effects.setTransition(a,d,s.from.x,a.from),a.to=e.effects.setTransition(a,d,s.to.x,a.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(y=y.concat(u).concat(c),a.from=e.effects.setTransition(a,u,s.from.y,a.from),a.to=e.effects.setTransition(a,u,s.to.y,a.to)),e.effects.save(a,y),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(r=e.effects.getBaseline(g,n),a.from.top=(n.outerHeight-a.outerHeight())*r.y,a.from.left=(n.outerWidth-a.outerWidth())*r.x,a.to.top=(n.outerHeight-a.to.outerHeight)*r.y,a.to.left=(n.outerWidth-a.to.outerWidth)*r.x),a.css(a.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),c=o.concat(h).concat(d),a.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,c),i.from={height:n.height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},i.to={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x},s.from.y!==s.to.y&&(i.from=e.effects.setTransition(i,h,s.from.y,i.from),i.to=e.effects.setTransition(i,h,s.to.y,i.to)),s.from.x!==s.to.x&&(i.from=e.effects.setTransition(i,d,s.from.x,i.from),i.to=e.effects.setTransition(i,d,s.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,c)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===f&&a.hide(),e.effects.restore(a,y),p||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,i){var n=parseInt(i,10),r=e?a.to.left:a.to.top;return"auto"===i?r+"px":n+r+"px"})})),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,r=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,h=Math.round(t.duration/u),d="up"===o||"down"===o?"top":"left",f="up"===o||"left"===o,p={},m={},g={},v=r.queue(),y=v.length;for(e.effects.save(r,s),r.show(),e.effects.createWrapper(r),p[d]=(f?"-=":"+=")+l,m[d]=(f?"+=":"-=")+2*l,g[d]=(f?"-=":"+=")+2*l,r.animate(p,h,t.easing),n=1;c>n;n++)r.animate(m,h,t.easing).animate(g,h,t.easing);r.animate(m,h,t.easing).animate(p,h/2,t.easing).queue(function(){"hide"===a&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,r=e(this),s=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(r,t.mode||"show"),o="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h={};e.effects.save(r,s),r.show(),n=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(c,u?isNaN(n)?"-"+n:-n:n),h[c]=(o?u?"+=":"-=":u?"-=":"+=")+n,r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),r=e(t.to),s="fixed"===r.css("position"),a=e("body"),o=s?a.scrollTop():0,l=s?a.scrollLeft():0,c=r.offset(),u={top:c.top-o,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},h=n.offset(),d=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:h.top-o,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){d.remove(),i()})}}(jQuery),function(e){var t=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()
},"click .ui-menu-item:has(a)":function(i){var n=e(i.target).closest(".ui-menu-item");!t&&n.not(".ui-state-disabled").length&&(t=!0,this.select(i),n.has(".ui-menu").length?this.expand(i):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(i){e(i.target).closest(".ui-menu").length||this.collapseAll(i),t=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,s,a,o,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",s=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),s===r?a=!0:s=r+s,o=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(t.keyCode),o=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,s,a,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),a=this.activeMenu.height(),o=t.height(),0>r?this.activeMenu.scrollTop(s+r):r+o>a&&this.activeMenu.scrollTop(s+r-a+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,r;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-n-r}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,n,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+r>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseInt(e[0],10)*(d.test(e[0])?t/100:1),parseInt(e[1],10)*(d.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var r,s=Math.max,a=Math.abs,o=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,d=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(r!==t)return r;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),i=a.offsetWidth,s.css("overflow","scroll"),n=a.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),r=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var r,d,p,m,g,v=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),_=v[0],w=(t.collision||"flip").split(" "),x={};return 9===_.nodeType?(d=v.width(),p=v.height(),m={top:0,left:0}):e.isWindow(_)?(d=v.width(),p=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):_.preventDefault?(t.at="left top",d=p=0,m={top:_.pageY,left:_.pageX}):(d=v.outerWidth(),p=v.outerHeight(),m=v.offset()),g=e.extend({},m),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?g.left+=d:"center"===t.at[0]&&(g.left+=d/2),"bottom"===t.at[1]?g.top+=p:"center"===t.at[1]&&(g.top+=p/2),r=i(x.at,d,p),g.left+=r[0],g.top+=r[1],this.each(function(){var l,c,u=e(this),h=u.outerWidth(),f=u.outerHeight(),_=n(this,"marginLeft"),C=n(this,"marginTop"),E=h+_+n(this,"marginRight")+b.width,S=f+C+n(this,"marginBottom")+b.height,k=e.extend({},g),I=i(x.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?k.left-=h:"center"===t.my[0]&&(k.left-=h/2),"bottom"===t.my[1]?k.top-=f:"center"===t.my[1]&&(k.top-=f/2),k.left+=I[0],k.top+=I[1],e.support.offsetFractions||(k.left=o(k.left),k.top=o(k.top)),l={marginLeft:_,marginTop:C},e.each(["left","top"],function(i,n){e.ui.position[w[i]]&&e.ui.position[w[i]][n](k,{targetWidth:d,targetHeight:p,elemWidth:h,elemHeight:f,collisionPosition:l,collisionWidth:E,collisionHeight:S,offset:[r[0]+I[0],r[1]+I[1]],my:t.my,at:t.at,within:y,elem:u})}),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var i=m.left-k.left,n=i+d-h,r=m.top-k.top,o=r+p-f,l={target:{element:v,left:m.left,top:m.top,width:d,height:p},element:{element:u,left:k.left,top:k.top,width:h,height:f},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};h>d&&d>a(i+n)&&(l.horizontal="center"),f>p&&p>a(r+o)&&(l.vertical="middle"),l.important=s(a(i),a(n))>s(a(r),a(o))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(k,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,o=e.left-t.collisionPosition.marginLeft,l=r-o,c=o+t.collisionWidth-a-r;t.collisionWidth>a?l>0&&0>=c?(i=e.left+l+t.collisionWidth-a-r,e.left+=l-i):e.left=c>0&&0>=l?r:l>c?r+a-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-o,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,o=e.top-t.collisionPosition.marginTop,l=r-o,c=o+t.collisionHeight-a-r;t.collisionHeight>a?l>0&&0>=c?(i=e.top+l+t.collisionHeight-a-r,e.top+=l-i):e.top=c>0&&0>=l?r:l>c?r+a-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-o,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,s=r.offset.left+r.scrollLeft,o=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,h=c+t.collisionWidth-o-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>u?(i=e.left+d+f+p+t.collisionWidth-o-s,(0>i||a(u)>i)&&(e.left+=d+f+p)):h>0&&(n=e.left-t.collisionPosition.marginLeft+d+f+p-l,(n>0||h>a(n))&&(e.left+=d+f+p))},top:function(e,t){var i,n,r=t.within,s=r.offset.top+r.scrollTop,o=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,h=c+t.collisionHeight-o-l,d="top"===t.my[1],f=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+f+p+m+t.collisionHeight-o-s,e.top+f+p+m>u&&(0>n||a(u)>n)&&(e.top+=f+p+m)):h>0&&(i=e.top-t.collisionPosition.marginTop+f+p+m-l,e.top+f+p+m>h&&(i>0||h>a(i))&&(e.top+=f+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,r,s,a=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(o),i=a||document.documentElement,i.insertBefore(t,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",r=e(o).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",i.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var i=e.fn.position;e.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var r=n.offset.split(" "),s=n.at.split(" ");return 1===r.length&&(r[1]=r[0]),/^\d/.test(r[0])&&(r[0]="+"+r[0]),/^\d/.test(r[1])&&(r[1]="+"+r[1]),1===s.length&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),i.call(this,e.extend(n,{at:s[0]+r[0]+" "+s[1]+r[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,n,r=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&2!==r.values.length&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===r.range||"max"===r.range?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1,i=s.length;n>i;i++)o.push(a);this.handles=s.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(i){var n,r,s,a,o=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,o),n===!1))return}switch(a=this.options.step,r=s=this.options.values&&this.options.values.length?this.values(o):this.value(),i.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;s=this._trimAlignValue(r+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;s=this._trimAlignValue(r-a)}this._slide(i,o,s)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,s,a,o,l,c,u=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));r>i&&(r=i,s=e(this),a=t)}),h.range===!0&&this.values(1)===h.min&&(a+=1,s=e(this.handles[a])),o=this._start(t,a),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,s.addClass("ui-state-active").focus(),l=s.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),s=this._valueMin()+n*r,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,s;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(r=this.values(),r[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),n=this.values(t?0:1),s!==!1&&this.values(t,i,!0))):i!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:i}),s!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,r,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,r=arguments[0],s=0;n.length>s;s+=1)n[s]=this._trimAlignValue(r[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;r>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,r,s,a=this.options.range,o=this.options,l=this,c=this._animateOff?!1:o.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,o.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},o.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:o.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},o.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:o.animate}))),t=i}):(n=this.value(),r=this._valueMin(),s=this._valueMax(),i=s!==r?100*((n-r)/(s-r)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:o.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var r=i.attr(n);void 0!==r&&r.length&&(t[n]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&n.min>e?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++r}function n(e){return e.hash.length>1&&e.href.replace(s,"")===location.href.replace(s,"").replace(/\s/g,"%20")}var r=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options,n=i.active,r=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()
}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===n&&(r&&this.tabs.each(function(t,i){return e(i).attr("aria-controls")===r?(n=t,!1):void 0}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=this.tabs.length?0:!1)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),-1===n&&(n=i.collapsible?!1:0)),i.active=n,!i.collapsible&&i.active===!1&&this.anchors.length&&(i.active=0),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(n),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,r),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,r){var s,a,o,l=e(r).uniqueId().attr("id"),c=e(r).closest("li"),u=c.attr("aria-controls");n(r)?(s=r.hash,a=t.element.find(t._sanitizeSelector(s))):(o=t._tabId(c),s="#"+o,a=t.element.find(s),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n,r=this.element.parent();"fill"===t?(e.support.minHeight||(n=r.css("overflow"),r.css("overflow","hidden")),i=r.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),n&&r.css("overflow",n),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),s=r.closest("li"),a=s[0]===n[0],o=a&&i.collapsible,l=o?e():this._getPanelForTab(s),c=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:c,newTab:o?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=o?!1:this.tabs.index(s),this.active=a?e():s,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,u))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function r(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&s.options.show?s._show(a,s.options.show,n):(a.show(),n())}var s=this,a=i.newPanel,o=i.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),r()),o.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&o.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var r=this,s=this.tabs.eq(t),a=s.find(".ui-tabs-anchor"),o=this._getPanelForTab(s),l={tab:s,panel:o};n(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),r._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&r.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,s){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(i,n){return e.data(n.tab[0],"cache.tabs")?(i.preventDefault(),void 0):(n.jqXHR.success(function(){t.options.cache&&e.data(n.tab[0],"cache.tabs",!0)}),void 0)}})},_ajaxSettings:function(t,i,n){var r=this.options.ajaxOptions;return e.extend({},r,{error:function(e,t){try{r.error(e,t,n.tab.closest("li").index(),n.tab[0])}catch(i){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var i=t.tab.find("span"),n=i.html();i.html(this.options.spinner),t.jqXHR.complete(function(){i.html(n)})}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var i,n=this.options;(t&&n.disabled===!0||e.isArray(n.disabled)&&-1!==e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var i,n=this.options;(t&&n.disabled===!1||e.isArray(n.disabled)&&-1===e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,r){r===t&&(r=this.anchors.length);var s,a,o=this.options,l=e(o.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),c=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),s=r>=this.tabs.length,a=this.element.find("#"+c),a.length||(a=this._createPanel(c),s?r>0?a.insertAfter(this.panels.eq(-1)):a.appendTo(this.element):a.insertBefore(this.panels[r])),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?l.appendTo(this.tablist):l.insertBefore(this.tabs[r]),o.disabled=e.map(o.disabled,function(e){return e>=r?++e:e}),this.refresh(),1===this.tabs.length&&o.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.tabs.eq(t).remove(),r=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(this.anchors.length>t+1?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],r[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1===e.selected?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var i=this.options;this._super("active",-1===t?!1:t),i.selected=i.active,i.selected===!1&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,i){var n,r,s=this._superApply(arguments);return s?("beforeActivate"===e?(n=i.newTab.length?i.newTab:i.oldTab,r=i.newPanel.length?i.newPanel:i.oldPanel,s=this._super("select",t,{tab:n.find(".ui-tabs-anchor")[0],panel:r[0],index:n.closest("li").index()})):"activate"===e&&i.newTab.length&&(s=this._super("show",t,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),s):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(e=this._getIndex(e),-1===e){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(e=parseInt(this._cookie(),10),-1===e&&(e=!1),t.active=e),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(n.push(i===!1?-1:i),n.push(this.options.cookie)),e.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,i,n){var r=e.extend({},n);return"load"===t&&(r.panel=r.panel[0],r.tab=r.tab.find(".ui-tabs-anchor")[0]),this._super(t,i,r)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,i,n=this.options.fx;return n&&(e.isArray(n)?(t=n[0],i=n[1]):t=i=n),n?{show:i,hide:t}:null},_toggle:function(e,t){function i(){r.running=!1,r._trigger("activate",e,t)}function n(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&o.show?s.animate(o.show,o.show.duration,function(){i()}):(s.show(),i())}var r=this,s=t.newPanel,a=t.oldPanel,o=this._getFx();return o?(r.running=!0,a.length&&o.hide?a.animate(o.hide,o.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),n()),void 0):this._super(e,t)}}))}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);-1!==r&&n.splice(r,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,r=this,s=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&r._delay(function(){t&&(t.type=s),this._open(t,e,i)})}),i&&this._open(t,e,i),void 0)},_open:function(i,n,r){function s(e){c.of=e,a.is(":hidden")||a.position(c)}var a,o,l,c=e.extend({},this.options.position);if(r){if(a=this._find(n),a.length)return a.find(".ui-tooltip-content").html(r),void 0;n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),a=this._tooltip(n),t(n,a.attr("id")),a.find(".ui-tooltip-content").html(r),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:s}),s(i)):a.position(e.extend({of:n},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){a.is(":visible")&&(s(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:a}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(o.mouseleave="close"),i&&"focusin"!==i.type||(o.focusout="close"),this._on(!0,n,o)}},close:function(t){var n=this,r=e(t?t.currentTarget:this.element),s=this._find(r);this.closing||(r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,r=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),e.fn.bgiframe&&r.bgiframe(),this.tooltips[i]=t,r},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),window.Modernizr=function(e,t,i){function n(){f.input=function(e){for(var t=0,i=e.length;i>t;t++)I[e[t]]=e[t]in b;return I}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var n,r,s,a=0,o=e.length;o>a;a++)b.setAttribute("type",r=e[a]),n="text"!==b.type,n&&(b.value=_,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&b.style.WebkitAppearance!==i?(m.appendChild(b),s=t.defaultView,n=s.getComputedStyle&&"textfield"!==s.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,m.removeChild(b)):/^(search|tel)$/.test(r)||(/^(url|email)$/.test(r)?n=b.checkValidity&&b.checkValidity()===!1:/^color$/.test(r)?(m.appendChild(b),m.offsetWidth,n=b.value!=_,m.removeChild(b)):n=b.value!=_)),k[e[a]]=!!n;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function r(e,t){var i=e.charAt(0).toUpperCase()+e.substr(1),n=(e+" "+C.join(i+" ")+i).split(" ");return s(n,t)}function s(e,t){for(var n in e)if(y[e[n]]!==i)return"pfx"==t?e[n]:!0;return!1}function a(e,t){return!!~(""+e).indexOf(t)}function o(e,t){return typeof e===t}function l(e,t){return c(x.join(e+";")+(t||""))}function c(e){y.cssText=e}var u,h,d="2.0.6",f={},p=!0,m=t.documentElement,g=(t.head||t.getElementsByTagName("head")[0],"modernizr"),v=t.createElement(g),y=v.style,b=t.createElement("input"),_=":)",w=Object.prototype.toString,x=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),C="Webkit Moz O ms Khtml".split(" "),E={svg:"http://www.w3.org/2000/svg"},S={},k={},I={},T=[],A=function(e,i,n,r){var s,a,o,l=t.createElement("div");if(parseInt(n,10))for(;n--;)o=t.createElement("div"),o.id=r?r[n]:g+(n+1),l.appendChild(o);return s=["&shy;","<style>",e,"</style>"].join(""),l.id=g,l.innerHTML+=s,m.appendChild(l),a=i(l,e),l.parentNode.removeChild(l),!!a},N=function(t){if(e.matchMedia)return matchMedia(t).matches;var i;return A("@media "+t+" { #"+g+" { position: absolute; } }",function(t){i="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),i},P=function(){function e(e,r){r=r||t.createElement(n[e]||"div"),e="on"+e;var s=e in r;return s||(r.setAttribute||(r=t.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(e,""),s=o(r[e],"function"),o(r[e],i)||(r[e]=i),r.removeAttribute(e))),r=null,s}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),D={}.hasOwnProperty;h=o(D,i)||o(D.call,i)?function(e,t){return t in e&&o(e.constructor.prototype[t],i)}:function(e,t){return D.call(e,t)},function(i,n){var r=i.join(""),s=n.length;A(r,function(i,n){for(var r=t.styleSheets[t.styleSheets.length-1],a=r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"",o=i.childNodes,l={};s--;)l[o[s].id]=o[s];f.touch="ontouchstart"in e||9===l.touch.offsetTop,f.csstransforms3d=9===l.csstransforms3d.offsetLeft,f.generatedcontent=l.generatedcontent.offsetHeight>=1,f.fontface=/src/i.test(a)&&0===a.indexOf(n.split(" ")[0])},s,n)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",x.join("touch-enabled),("),g,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",x.join("transform-3d),("),g,")","{#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',_,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]),S.flexbox=function(){function e(e,t,i,n){e.style.cssText=x.join(t+":"+i+";")+(n||"")}function i(e,t,i,n){t+=":",e.style.cssText=(t+x.join(i+";"+t)).slice(0,-t.length)+(n||"")}var n=t.createElement("div"),r=t.createElement("div");i(n,"display","box","width:42px;padding:0;"),e(r,"box-flex","1","width:10px;"),n.appendChild(r),m.appendChild(n);var s=42===r.offsetWidth;return n.removeChild(r),m.removeChild(n),s},S.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},S.canvastext=function(){return!!f.canvas&&!!o(t.createElement("canvas").getContext("2d").fillText,"function")},S.webgl=function(){return!!e.WebGLRenderingContext},S.touch=function(){return f.touch},S.geolocation=function(){return!!navigator.geolocation},S.postmessage=function(){return!!e.postMessage},S.websqldatabase=function(){var t=!!e.openDatabase;return t},S.indexedDB=function(){for(var t=-1,i=C.length;i>++t;)if(e[C[t].toLowerCase()+"IndexedDB"])return!0;return!!e.indexedDB},S.hashchange=function(){return P("hashchange",e)&&(t.documentMode===i||t.documentMode>7)},S.history=function(){return!!e.history&&!!history.pushState},S.draganddrop=function(){return P("dragstart")&&P("drop")},S.websockets=function(){for(var t=-1,i=C.length;i>++t;)if(e[C[t]+"WebSocket"])return!0;return"WebSocket"in e},S.rgba=function(){return c("background-color:rgba(150,255,150,.5)"),a(y.backgroundColor,"rgba")},S.hsla=function(){return c("background-color:hsla(120,40%,100%,.5)"),a(y.backgroundColor,"rgba")||a(y.backgroundColor,"hsla")},S.multiplebgs=function(){return c("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},S.backgroundsize=function(){return r("backgroundSize")},S.borderimage=function(){return r("borderImage")},S.borderradius=function(){return r("borderRadius")},S.boxshadow=function(){return r("boxShadow")},S.textshadow=function(){return""===t.createElement("div").style.textShadow},S.opacity=function(){return l("opacity:.55"),/^0.55$/.test(y.opacity)},S.cssanimations=function(){return r("animationName")},S.csscolumns=function(){return r("columnCount")},S.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return c((e+x.join(t+e)+x.join(i+e)).slice(0,-e.length)),a(y.backgroundImage,"gradient")},S.cssreflections=function(){return r("boxReflect")},S.csstransforms=function(){return!!s(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},S.csstransforms3d=function(){var e=!!s(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return e&&"webkitPerspective"in m.style&&(e=f.csstransforms3d),e},S.csstransitions=function(){return r("transitionProperty")},S.fontface=function(){return f.fontface},S.generatedcontent=function(){return f.generatedcontent},S.video=function(){var e=t.createElement("video"),i=!1;try{if(i=!!e.canPlayType){i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"');var n='video/mp4; codecs="avc1.42E01E';i.h264=e.canPlayType(n+'"')||e.canPlayType(n+', mp4a.40.2"'),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(r){}return i},S.audio=function(){var e=t.createElement("audio"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('audio/ogg; codecs="vorbis"'),i.mp3=e.canPlayType("audio/mpeg;"),i.wav=e.canPlayType('audio/wav; codecs="1"'),i.m4a=e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;"))}catch(n){}return i},S.localstorage=function(){try{return!!localStorage.getItem}catch(e){return!1}},S.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(e){return!1}},S.webworkers=function(){return!!e.Worker},S.applicationcache=function(){return!!e.applicationCache},S.svg=function(){return!!t.createElementNS&&!!t.createElementNS(E.svg,"svg").createSVGRect},S.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==E.svg},S.smil=function(){return!!t.createElementNS&&/SVG/.test(w.call(t.createElementNS(E.svg,"animate")))},S.svgclippaths=function(){return!!t.createElementNS&&/SVG/.test(w.call(t.createElementNS(E.svg,"clipPath")))};for(var M in S)h(S,M)&&(u=M.toLowerCase(),f[u]=S[M](),T.push((f[u]?"":"no-")+u));return f.input||n(),f.addTest=function(e,t){if("object"==typeof e)for(var n in e)h(e,n)&&f.addTest(n,e[n]);else{if(e=e.toLowerCase(),f[e]!==i)return;t="boolean"==typeof t?t:!!t(),m.className+=" "+(t?"":"no-")+e,f[e]=t}return f},c(""),v=b=null,e.attachEvent&&function(){var e=t.createElement("div");return e.innerHTML="<elem></elem>",1!==e.childNodes.length}()&&function(e,t){function n(e){for(var t=-1;l>++t;)e.createElement(o[t])}e.iepp=e.iepp||{};var r,s=e.iepp,a=s.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",o=a.split("|"),l=o.length,c=new RegExp("(^|\\s)("+a+")","gi"),u=new RegExp("<(/*)("+a+")","gi"),h=/^\s*[\{\}]\s*$/,d=new RegExp("(^|[^\\n]*?\\s)("+a+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),f=t.createDocumentFragment(),p=t.documentElement,m=p.firstChild,g=t.createElement("body"),v=t.createElement("style"),y=/print|all/;s.getCSS=function(e,t){if(e+""===i)return"";for(var n,r=-1,a=e.length,o=[];a>++r;)n=e[r],n.disabled||(t=n.media||t,y.test(t)&&o.push(s.getCSS(n.imports,t),n.cssText),t="all");return o.join("")},s.parseCSS=function(e){for(var t,i=[];null!=(t=d.exec(e));)i.push(((h.exec(t[1])?"\n":t[1])+t[2]+t[3]).replace(c,"$1.iepp_$2")+t[4]);return i.join("\n")},s.writeHTML=function(){var e=-1;for(r=r||t.body;l>++e;)for(var i=t.getElementsByTagName(o[e]),n=i.length,s=-1;n>++s;)0>i[s].className.indexOf("iepp_")&&(i[s].className+=" iepp_"+o[e]);f.appendChild(r),p.appendChild(g),g.className=r.className,g.id=r.id,g.innerHTML=r.innerHTML.replace(u,"<$1font")},s._beforePrint=function(){v.styleSheet.cssText=s.parseCSS(s.getCSS(t.styleSheets,"all")),s.writeHTML()},s.restoreHTML=function(){g.innerHTML="",p.removeChild(g),p.appendChild(r)},s._afterPrint=function(){s.restoreHTML(),v.styleSheet.cssText=""},n(t),n(f),s.disablePP||(m.insertBefore(v,m.firstChild),v.media="print",v.className="iepp-printshim",e.attachEvent("onbeforeprint",s._beforePrint),e.attachEvent("onafterprint",s._afterPrint))}(e,t),f._version=d,f._prefixes=x,f._domPrefixes=C,f.mq=N,f.hasEvent=P,f.testProp=function(e){return s([e])},f.testAllProps=r,f.testStyles=A,f.prefixed=function(e){return r(e,"pfx")},m.className=m.className.replace(/\bno-js\b/,"")+(p?" js "+T.join(" "):""),f}(this,this.document),function(e,t){function i(){y(!0)}if(e.respond={},respond.update=function(){},respond.mediaQueriesSupported=t,!t){var n,r,s=e.document,a=s.documentElement,o=[],l=[],c=[],u={},h=30,d=s.getElementsByTagName("head")[0]||a,f=d.getElementsByTagName("link"),p=[],m=function(){for(var t,i,n,r,s=f,a=s.length,o=0;a>o;o++)t=s[o],i=t.href,n=t.media,r=t.rel&&"stylesheet"===t.rel.toLowerCase(),!!i&&r&&!u[i]&&(/^([a-zA-Z]+?:(\/\/)?(www\.)?)/.test(i)&&i.replace(RegExp.$1,"").split("/")[0]!==e.location.host?u[i]=!0:p.push({href:i,media:n}));
g()},g=function(){if(p.length){var e=p.shift();b(e.href,function(t){v(t,e.href,e.media),u[e.href]=!0,g()})}},v=function(e,t,i){var n,r,s,a,c,u=e.match(/@media[^\{]+\{([^\{\}]+\{[^\}\{]+\})+/gi),h=u&&u.length||0,t=t.substring(0,t.lastIndexOf("/")),d=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},f=!h&&i,p=0;for(t.length&&(t+="/"),f&&(h=1);h>p;p++)for(n=0,f?(r=i,l.push(d(e))):(r=u[p].match(/@media ([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,l.push(RegExp.$2&&d(RegExp.$2))),a=r.split(","),c=a.length;c>n;n++)s=a[n],o.push({media:s.match(/(only\s+)?([a-zA-Z]+)(\sand)?/)&&RegExp.$2,rules:l.length-1,minw:s.match(/\(min\-width:[\s]*([\s]*[0-9]+)px[\s]*\)/)&&parseFloat(RegExp.$1),maxw:s.match(/\(max\-width:[\s]*([\s]*[0-9]+)px[\s]*\)/)&&parseFloat(RegExp.$1)});y()},y=function(e){var t="clientWidth",i=a[t],u="CSS1Compat"===s.compatMode&&i||s.body[t]||i,p={},m=s.createDocumentFragment(),g=f[f.length-1],v=(new Date).getTime();if(e&&n&&h>v-n)clearTimeout(r),r=setTimeout(y,h);else{n=v;for(var b in o){var _=o[b];(!_.minw&&!_.maxw||(!_.minw||_.minw&&u>=_.minw)&&(!_.maxw||_.maxw&&_.maxw>=u))&&(p[_.media]||(p[_.media]=[]),p[_.media].push(l[_.rules]))}for(var b in c)c[b]&&c[b].parentNode===d&&d.removeChild(c[b]);for(var b in p){var w=s.createElement("style"),x=p[b].join("\n");w.type="text/css",w.media=b,w.styleSheet?w.styleSheet.cssText=x:w.appendChild(s.createTextNode(x)),m.appendChild(w),c.push(w)}d.insertBefore(m,g.nextSibling)}},b=function(e,t){var i=_();if(i){if(i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(200==i.status||304==i.status)&&t(i.responseText)},4==i.readyState)return;i.send()}},_=function(){for(var e=!1,t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new XMLHttpRequest}],i=t.length;i--;){try{e=t[i]()}catch(n){continue}break}return function(){return e}}();m(),respond.update=m,e.addEventListener?e.addEventListener("resize",i,!1):e.attachEvent&&e.attachEvent("onresize",i)}}(this,Modernizr.mq("only all")),function(e,t,i){function n(e){return!e||"loaded"==e||"complete"==e}function r(){for(var e=1,t=-1;v.length-++t&&(!v[t].s||(e=v[t].r)););e&&o()}function s(e){var i,s=t.createElement("script");s.src=e.s,s.onreadystatechange=s.onload=function(){!i&&n(s.readyState)&&(i=1,r(),s.onload=s.onreadystatechange=null)},p(function(){i||(i=1,r())},d.errorTimeout),e.e?s.onload():m.parentNode.insertBefore(s,m)}function a(e){var i,n=t.createElement("link");if(n.href=e.s,n.rel="stylesheet",n.type="text/css",e.e||!C&&!b)n.onload=function(){i||(i=1,p(function(){r()},0))},e.e&&n.onload();else{var s=function(e){p(function(){if(!i)try{e.sheet.cssRules.length?(i=1,r()):s(e)}catch(t){1e3==t.code||"security"==t.message||"denied"==t.message?(i=1,p(function(){r()},0)):s(e)}},0)};s(n)}p(function(){i||(i=1,r())},d.errorTimeout),!e.e&&m.parentNode.insertBefore(n,m)}function o(){var e=v.shift();y=1,e?e.t?p(function(){"c"==e.t?a(e):s(e)},0):(e(),r()):y=0}function l(e,i,s,a,l,c){function u(){!f&&n(h.readyState)&&(g.r=f=1,!y&&r(),h.onload=h.onreadystatechange=null,p(function(){w.removeChild(h)},0))}var h=t.createElement(e),f=0,g={t:s,s:i,e:c};h.src=h.data=i,!_&&(h.style.display="none"),h.width=h.height="0","object"!=e&&(h.type=s),h.onload=h.onreadystatechange=u,"img"==e?h.onerror=u:"script"==e&&(h.onerror=function(){g.e=g.r=1,o()}),v.splice(a,0,g),w.insertBefore(h,_?null:m),p(function(){f||(w.removeChild(h),g.r=g.e=f=1,r())},d.errorTimeout)}function c(e,t,i){var n="c"==t?k:S;return y=0,t=t||"j",A(e)?l(n,e,t,this.i++,f,i):(v.splice(this.i++,0,e),1==v.length&&o()),this}function u(){var e=d;return e.loader={load:c,i:0},e}var h,d,f=t.documentElement,p=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,b="MozAppearance"in f.style,_=b&&!!t.createRange().compareNode,w=_?f:m.parentNode,x=e.opera&&"[object Opera]"==g.call(e.opera),C="webkitAppearance"in f.style,E=C&&"async"in t.createElement("script"),S=b?"object":x||E?"img":"script",k=C?"img":S,I=Array.isArray||function(e){return"[object Array]"==g.call(e)},T=function(e){return Object(e)===e},A=function(e){return"string"==typeof e},N=function(e){return"[object Function]"==g.call(e)},P=[],D={};d=function(e){function t(e){var t,i,n=e.split("!"),r=P.length,s=n.pop(),a=n.length,o={url:s,origUrl:s,prefixes:n};for(i=0;a>i;i++)t=D[n[i]],t&&(o=t(o));for(i=0;r>i;i++)o=P[i](o);return o}function n(e,n,r,s,a){var o=t(e),l=o.autoCallback;if(!o.bypass){if(n&&(n=N(n)?n:n[e]||n[s]||n[e.split("/").pop().split("?")[0]]),o.instead)return o.instead(e,n,r,s,a);r.load(o.url,o.forceCSS||!o.forceJS&&/css$/.test(o.url)?"c":i,o.noexec),(N(n)||N(l))&&r.load(function(){u(),n&&n(o.origUrl,a,s),l&&l(o.origUrl,a,s)})}}function r(e,t){function i(e){if(A(e))n(e,l,t,0,s);else if(T(e))for(r in e)e.hasOwnProperty(r)&&n(e[r],l,t,r,s)}var r,s=!!e.test,a=s?e.yep:e.nope,o=e.load||e.both,l=e.callback;i(a),i(o),e.complete&&t.load(e.complete)}var s,a,o=this.yepnope.loader;if(A(e))n(e,0,o,0);else if(I(e))for(s=0;e.length>s;s++)a=e[s],A(a)?n(a,0,o,0):I(a)?d(a):T(a)&&r(a,o);else T(e)&&r(e,o)},d.addPrefix=function(e,t){D[e]=t},d.addFilter=function(e){P.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",h=function(){t.removeEventListener("DOMContentLoaded",h,0),t.readyState="complete"},0)),e.yepnope=u()}(this,this.document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},/**
 * jQuery lightBox plugin
 * This jQuery plugin was inspired and based on Lightbox 2 by Lokesh Dhakar (http://www.huddletogether.com/projects/lightbox2/)
 * and adapted to me for use like a plugin from jQuery.
 * @name jquery-lightbox-0.5.js
 * @author Leandro Vieira Pinho - http://leandrovieira.com
 * @version 0.5
 * @date April 11, 2008
 * @category jQuery plugin
 * @copyright (c) 2008 Leandro Vieira Pinho (leandrovieira.com)
 * @license CCAttribution-ShareAlike 2.5 Brazil - http://creativecommons.org/licenses/by-sa/2.5/br/deed.en_US
 * @example Visit http://leandrovieira.com/projects/jquery/lightbox/ for more informations about this jQuery plugin
 */
function(e){e.fn.lightBox=function(t){function i(){return n(this,y),!1}function n(i,n){if(e("embed, object, select").css({visibility:"hidden"}),r(),t.imageArray.length=0,t.activeImage=0,1==n.length)t.imageArray.push(new Array(i.getAttribute("href"),i.getAttribute("title")));else for(var a=0;n.length>a;a++)t.imageArray.push(new Array(n[a].getAttribute("href"),n[a].getAttribute("title")));for(;t.imageArray[t.activeImage][0]!=i.getAttribute("href");)t.activeImage++;s()}function r(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+t.imageBtnClose+'"></a></div></div></div></div>');var i=m();e("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:i[0],height:i[1]}).fadeIn();var n=g();e("#jquery-lightbox").css({top:n[1]+i[3]/10,left:n[0]}).show(),e("#jquery-overlay,#jquery-lightbox").click(function(){p()}),e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return p(),!1}),e(window).resize(function(){var t=m();e("#jquery-overlay").css({width:t[0],height:t[1]});var i=g();e("#jquery-lightbox").css({top:i[1]+t[3]/10,left:i[0]})})}function s(){e("#lightbox-loading").show(),t.fixedNavigation?e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var i=new Image;i.onload=function(){e("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]),a(i.width,i.height),i.onload=function(){}},i.src=t.imageArray[t.activeImage][0]}function a(i,n){if(null!=t.maxWidth&&null!=t.maxHeight&&(i>t.maxWidth||n>t.maxHeight)){var r=i>n,s=r?t.maxWidth/i:t.maxHeight/n;i*=s,n*=s}e("#lightbox-image").height(n),e("#lightbox-image").width(i);var a=e("#lightbox-container-image-box").width(),l=e("#lightbox-container-image-box").height(),c=i+2*t.containerBorderSize,u=n+2*t.containerBorderSize,h=a-c,d=l-u;e("#lightbox-container-image-box").animate({width:c,height:u},t.containerResizeSpeed,function(){o()}),0==h&&0==d&&(e.browser.msie?v(250):v(100)),e("#lightbox-container-image-data-box").css({width:i}),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:n+2*t.containerBorderSize})}function o(){e("#lightbox-loading").hide(),e("#lightbox-image").fadeIn(function(){l(),c()}),f()}function l(){e("#lightbox-container-image-data-box").slideDown("fast"),e("#lightbox-image-details-caption").hide(),t.imageArray[t.activeImage][1]&&e("#lightbox-image-details-caption").html(t.imageArray[t.activeImage][1]).show(),t.imageArray.length>1&&e("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}function c(){e("#lightbox-nav").show(),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"}),0!=t.activeImage&&(t.fixedNavigation?e("#lightbox-nav-btnPrev").css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){return t.activeImage=t.activeImage-1,s(),!1}):e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){return t.activeImage=t.activeImage-1,s(),!1})),t.activeImage!=t.imageArray.length-1&&(t.fixedNavigation?e("#lightbox-nav-btnNext").css({background:"url("+t.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){return t.activeImage=t.activeImage+1,s(),!1}):e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){return t.activeImage=t.activeImage+1,s(),!1})),u()}function u(){e(document).keydown(function(e){d(e)})}function h(){e(document).unbind()}function d(e){null==e?(keycode=event.keyCode,escapeKey=27):(keycode=e.keyCode,escapeKey=e.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),(key==t.keyToClose||"x"==key||keycode==escapeKey)&&p(),(key==t.keyToPrev||37==keycode)&&0!=t.activeImage&&(t.activeImage=t.activeImage-1,s(),h()),(key==t.keyToNext||39==keycode)&&t.activeImage!=t.imageArray.length-1&&(t.activeImage=t.activeImage+1,s(),h())}function f(){t.imageArray.length-1>t.activeImage&&(objNext=new Image,objNext.src=t.imageArray[t.activeImage+1][0]),t.activeImage>0&&(objPrev=new Image,objPrev.src=t.imageArray[t.activeImage-1][0])}function p(){e("#jquery-lightbox").remove(),e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()}),e("embed, object, select").css({visibility:"visible"})}function m(){var e,t;window.innerHeight&&window.scrollMaxY?(e=window.innerWidth+window.scrollMaxX,t=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,t=document.body.scrollHeight):(e=document.body.offsetWidth,t=document.body.offsetHeight);var i,n;return self.innerHeight?(i=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,n=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(i=document.documentElement.clientWidth,n=document.documentElement.clientHeight):document.body&&(i=document.body.clientWidth,n=document.body.clientHeight),pageHeight=n>t?n:t,pageWidth=i>e?e:i,arrayPageSize=new Array(pageWidth,pageHeight,i,n)}function g(){var e,t;return self.pageYOffset?(t=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(t=document.body.scrollTop,e=document.body.scrollLeft),arrayPageScroll=new Array(e,t)}function v(e){var t=new Date;i=null;do var i=new Date;while(e>i-t)}t=jQuery.extend({maxWidth:null,maxHeight:null,overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var y=this;return this.unbind("click").click(i)}}(jQuery),function(e){e.fn.extend({screw:function(t){var i={loadingHTML:"Loading ... "},n=e.extend(i,t);return e(this),this.each(function(){e(window).scroll(function(){t(e(this))});var t=function(t){var r=e(window).height(),s=e(window).width(),a=t.scrollTop(),o=r+a;e(".screw-image").each(function(){var t=e(this).offset(),i=Math.round(1e3*Math.random());if(o>=t.top&&s>=t.left&&!e(this).hasClass("screw-loaded")&&!e(this).hasClass("screw-loading")){e(this).addClass("screw-loading").html('<div id="screw-loading-'+i+'">'+n.loadingHTML+"</div>");var r=e(this).attr("rel"),a=/&/g;r+=a.test(r)?"&screw_rand="+i:"?screw_rand="+i,objImage=new Image,objImage.src=r;var l=e(this);objImage.onload=function(){l.append('<img style="display:none" id="screw-content-'+i+'" class="screw-content" src="'+r+'" />'),e("#screw-loading-"+i).fadeOut("slow",function(){e("#screw-content-"+i).fadeIn("slow"),l.removeClass("screw-loading").addClass("screw-loaded")})}}}),e(".screw").each(function(){var t=e(this).offset(),r=e(this),a=Math.round(1e3*Math.random()),l="html";o>=t.top&&s>=t.left&&(e(this).hasClass("screw-xml")?l="xml":e(this).hasClass("screw-json")?l="json":e(this).hasClass("screw-script")&&(l="script"),(!e(this).hasClass("screw-loaded")||e(this).hasClass("screw-repeat")&&!e(this).hasClass("screw-loading"))&&(r.addClass("screw-loading"),n.loadingHTML&&r.html('<div id="screw-loading-'+a+'">'+n.loadingHTML+"</div>"),r.hasClass("screw-replace")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.replaceWith(e)},l):e(this).attr("rev")&&r.replaceWith(e(this).attr("rev")):r.hasClass("screw-append")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.append('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e+"</div>"),i(a)},l):e(this).attr("rev")&&(r.append('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e(this).attr("rev")+"</div>"),i(a)):r.hasClass("screw-prepend")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.prepend('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e+"</div>"),i(a)},l):e(this).attr("rev")&&(r.prepend('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e(this).attr("rev")+"</div>"),i(a)):r.hasClass("screw-before")?(e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.before('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e+"</div>"),i(a)},l):e(this).attr("rev")&&(r.before('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e(this).attr("rev")+"</div>"),i(a)),r.hasClass("screw-repeat")&&t.top<e(window).height()&&t.left<e(window).width()&&(e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.before('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e+"</div>"),i(a)},l):e(this).attr("rev")&&(r.before('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e(this).attr("rev")+"</div>"),i(a)))):r.hasClass("screw-after")?e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.after('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e+"</div>"),i(a)},l):e(this).attr("rev")&&(r.after('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e(this).attr("rev")+"</div>"),i(a)):e(this).attr("rel")?e.get(e(this).attr("rel"),{screwrand:Math.round(1e3*Math.random())},function(e){r.append('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e+"</div>"),i(a)},l):e(this).attr("rev")&&(r.append('<div style="display:none" id="screw-content-'+a+'" class="screw-content">'+e(this).attr("rev")+"</div>"),i(a)),r.removeClass("screw-loading").addClass("screw-loaded")))}),e(".screw-remove").each(function(){if(e(this).hasClass("screw-loaded")){var t=e(this).position();(a>t.top||t.left>s)&&e(this).is(":visible")&&e(this).fadeOut("slow")}})},i=function(t){n.loadingHTML?e("#screw-loading-"+t).fadeOut("slow",function(){e("#screw-content-"+t).fadeIn("slow")}):e("#screw-content-"+t).fadeIn("slow")};t(e(window))})}})}(jQuery);var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(e,t,i){return null!==e[t]&&e[t]!==i},I18n.lookup=function(e,t){var i,t=t||{},n=e,r=this.prepareOptions(I18n.translations),s=r[t.locale||I18n.currentLocale()],t=this.prepareOptions(t);if(s){for("object"==typeof e&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);e.length>0;)if(i=e.shift(),s=s[i],!s){I18n.fallbacks&&!t.fallback&&(s=I18n.lookup(n,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},t)));break}return!s&&this.isValidNode(t,"defaultValue")&&(s=t.defaultValue),s}},I18n.prepareOptions=function(){for(var e,t={},i=arguments.length,n=0;i>n;n++)if(e=arguments[n])for(var r in e)this.isValidNode(t,r)||(t[r]=e[r]);return t},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var i,n,r,s=e.match(this.PLACEHOLDER);if(!s)return e;for(var a=0;i=s[a];a++)r=i.replace(this.PLACEHOLDER,"$1"),n=t[r],this.isValidNode(t,r)||(n="[missing "+i+" value]"),regex=new RegExp(i.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,n);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var i=this.lookup(e,t);try{return"object"==typeof i?"number"==typeof t.count?this.pluralize(t.count,e,t):i:this.interpolate(i,t)}catch(n){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,i;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var n=1;6>=n;n++)t[n]=parseInt(t[n],10)||0;t[2]-=1,i=t[7]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else"number"==typeof e?(i=new Date,i.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(i=new Date,i.setTime(Date.parse(e))):(i=new Date,i.setTime(Date.parse(e)));return i},I18n.toTime=function(e,t){var i=this.parseDate(t),n=this.lookup(e);return i.toString().match(/invalid/i)?i.toString():n?this.strftime(i,n):i.toString()},I18n.strftime=function(e,t){var i=this.lookup("date");if(!i)return e.toString();i.meridian=i.meridian||["AM","PM"];var n=e.getDay(),r=e.getDate(),s=e.getFullYear(),a=e.getMonth()+1,o=e.getHours(),l=o,c=o>11?1:0,u=e.getSeconds(),h=e.getMinutes(),d=e.getTimezoneOffset(),f=Math.floor(Math.abs(d/60)),p=Math.abs(d)-60*f,m=(d>0?"-":"+")+(2>f.toString().length?"0"+f:f)+(2>p.toString().length?"0"+p:p);l>12?l-=12:0===l&&(l=12);var g=function(e){var t="0"+e.toString();return t.substr(t.length-2)},v=t;return v=v.replace("%a",i.abbr_day_names[n]),v=v.replace("%A",i.day_names[n]),v=v.replace("%b",i.abbr_month_names[a]),v=v.replace("%B",i.month_names[a]),v=v.replace("%d",g(r)),v=v.replace("%e",r),v=v.replace("%-d",r),v=v.replace("%H",g(o)),v=v.replace("%-H",o),v=v.replace("%I",g(l)),v=v.replace("%-I",l),v=v.replace("%m",g(a)),v=v.replace("%-m",a),v=v.replace("%M",g(h)),v=v.replace("%-M",h),v=v.replace("%p",i.meridian[c]),v=v.replace("%S",g(u)),v=v.replace("%-S",u),v=v.replace("%w",n),v=v.replace("%y",g(s)),v=v.replace("%-y",g(s).replace(/^0+/,"")),v=v.replace("%Y",s),v=v.replace("%z",m)},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var i,n,r=0>e,s=Math.abs(e).toFixed(t.precision).toString(),a=s.split("."),o=[];for(e=a[0],i=a[1];e.length>0;)o.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);if(n=o.join(t.delimiter),t.precision>0&&(n+=t.separator+a[1]),r&&(n="-"+n),t.strip_insignificant_zeros){var l={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};n=n.replace(l.zeros,"").replace(l.separator,"")}return n},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e)},I18n.toHumanSize=function(e,t){for(var i,n,r=1024,s=e,a=0;s>=r&&4>a;)s/=r,a+=1;return 0===a?(i=this.t("number.human.storage_units.units.byte",{count:s}),n=0):(i=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][a]),n=0===s-Math.floor(s)?0:1),t=this.prepareOptions(t,{precision:n,format:"%n%u",delimiter:""}),e=this.toNumber(s,t),e=t.format.replace("%u",i).replace("%n",e)},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralize=function(e,t,i){var n;try{n=this.lookup(t,i)}catch(r){}if(!n)return this.missingTranslation(t);var s;switch(i=this.prepareOptions(i),i.count=e.toString(),Math.abs(e)){case 0:s=this.isValidNode(n,"zero")?n.zero:this.isValidNode(n,"none")?n.none:this.isValidNode(n,"other")?n.other:this.missingTranslation(t,"zero");break;case 1:s=this.isValidNode(n,"one")?n.one:this.missingTranslation(t,"one");break;default:s=this.isValidNode(n,"other")?n.other:this.missingTranslation(t,"other")}return this.interpolate(s,i)},I18n.missingTranslation=function(){for(var e='[missing "'+this.currentLocale(),t=arguments.length,i=0;t>i;i++)e+="."+arguments[i];return e+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;var I18n=I18n||{};I18n.translations={en:{date:{formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],order:["year","month","day"]},time:{formats:{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},am:"am",pm:"pm",ago:"%{time} ago"},support:{array:{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "}},errors:{format:"%{attribute} %{message}",messages:{inclusion:"is not included in the list",exclusion:"is reserved",invalid:"is invalid",confirmation:"doesn't match confirmation",accepted:"must be accepted",empty:"can't be empty",blank:"can't be blank",too_long:"is too long (maximum is %{count} characters)",too_short:"is too short (minimum is %{count} characters)",wrong_length:"is the wrong length (should be %{count} characters)",not_a_number:"is not a number",not_an_integer:"must be an integer",greater_than:"must be greater than %{count}",greater_than_or_equal_to:"must be greater than or equal to %{count}",equal_to:"must be equal to %{count}",less_than:"must be less than %{count}",less_than_or_equal_to:"must be less than or equal to %{count}",odd:"must be odd",even:"must be even",carrierwave_processing_error:"failed to be processed",carrierwave_integrity_error:"is not of an allowed file type",carrierwave_download_error:"could not be downloaded",extension_white_list_error:"You are not allowed to upload %{extension} files, allowed types: %{allowed_types}",extension_black_list_error:"You are not allowed to upload %{extension} files, prohibited types: %{prohibited_types}",rmagick_processing_error:"Failed to manipulate with rmagick, maybe it is not an image? Original Error: %{e}",mime_types_processing_error:"Failed to process file with MIME::Types, maybe not valid content-type? Original Error: %{e}",mini_magick_processing_error:"Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: %{e}",in_between:"must be in between %{min} and %{max}",expired:"has expired, please request a new one",not_found:"not found",already_confirmed:"was already confirmed, please try signing in",not_locked:"was not locked",not_saved:{one:"1 error prohibited this %{resource} from being saved:",other:"%{count} errors prohibited this %{resource} from being saved:"}}},activerecord:{errors:{messages:{taken:"has already been taken",record_invalid:"Validation failed: %{errors}"},models:{room:{attributes:{name:{taken:"is taken"}}}}},attributes:{contact:{relation_ids:"Contact type"},"relation/custom":{name:"Name"},user:{email:"Email",name:"Name",password:"Password",password_confirmation:"Confirm password",remember_me:"Remember me"},document:{title:"Title"},event:{title:"Title",room:"Room",frequency:"Frequency"},room:{name:"Name"}},models:{event:"event",room:"room"}},number:{format:{separator:".",delimiter:",",precision:3,significant:!1,strip_insignificant_zeros:!1},currency:{format:{format:"%u%n",unit:"$",separator:".",delimiter:",",precision:2,significant:!1,strip_insignificant_zeros:!1}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}},human:{format:{delimiter:"",precision:3,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},kb:"KB",mb:"MB",gb:"GB",tb:"TB"}},decimal_units:{format:"%n %u",units:{unit:"",thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion"}}}},datetime:{distance_in_words:{half_a_minute:"half a minute",less_than_x_seconds:{one:"less than 1 second",other:"less than %{count} seconds"},x_seconds:{one:"1 second",other:"%{count} seconds"},less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},x_minutes:{one:"1 minute",other:"%{count} minutes"},about_x_hours:{one:"about 1 hour",other:"about %{count} hours"},x_days:{one:"1 day",other:"%{count} days"},about_x_months:{one:"about 1 month",other:"about %{count} months"},x_months:{one:"1 month",other:"%{count} months"},about_x_years:{one:"about 1 year",other:"about %{count} years"},over_x_years:{one:"over 1 year",other:"over %{count} years"},almost_x_years:{one:"almost 1 year",other:"almost %{count} years"}},prompts:{year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Seconds"}},helpers:{select:{prompt:"Please select"},submit:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}",relation_custom:{create:"Save",update:"Update"}},button:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}"}},flash:{actions:{create:{notice:"%{resource_name} was successfully created."},update:{notice:"%{resource_name} was successfully updated."},destroy:{notice:"%{resource_name} was successfully destroyed.",alert:"%{resource_name} could not be destroyed."}}},mailboxer:{message_mailer:{subject_new:"%{subject}",subject_reply:"%{subject}",has_sent_new:{event:"has sent a new message to %{receiver}",group:"has sent a new message to %{receiver}",user:"has sent you a new message"},has_sent_reply:{event:"has sent a reply to %{receiver}",group:"has sent a reply to %{receiver}",user:"has sent you a reply"}},notification_mailer:{subject:"%{subject}"},"delete":"Delete",delete_confirm:"Do you want to move '%{object}' to trash?",form:{body:"Body",recipients:"Recipients",subject:"Subject"},mark_as_read:"Mark as read",reply:"Reply",send:"Send message",sent:"Your message was sent"},devise:{failure:{already_authenticated:"You are already signed in.",unauthenticated:"You need to sign in or sign up before continuing.",unconfirmed:"You have to confirm your account before continuing.",locked:"Your account is locked.",invalid:"Invalid email or password.",invalid_token:"Invalid authentication token.",timeout:"Your session expired, please sign in again to continue.",inactive:"Your account was not activated yet."},sessions:{signed_in:"Signed in successfully.",signed_out:"Signed out successfully."},passwords:{send_instructions:"You will receive an email with instructions about how to reset your password in a few minutes.",updated:"Your password was changed successfully. You are now signed in.",updated_not_active:"Your password was changed successfully.",send_paranoid_instructions:"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.",no_token:"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.",confirm:"Confirm password",forgot:"Forgot your password?",instructions:"Type the email address bound to your account and we will sent you instructions to change it:",update:"Change your password"},confirmations:{send_instructions:"You will receive an email with instructions about how to confirm your account in a few minutes.",send_paranoid_instructions:"If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes.",confirmed:"Your account was successfully confirmed. You are now signed in."},registrations:{signed_up:"Welcome! You have signed up successfully.",signed_up_but_unconfirmed:"A message with a confirmation link has been sent to your email address. Please open the link to activate your account.",signed_up_but_inactive:"You have signed up successfully. However, we could not sign you in because your account is not yet activated.",signed_up_but_locked:"You have signed up successfully. However, we could not sign you in because your account is locked.",updated:"You updated your account successfully.",update_needs_confirmation:"You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address.",destroyed:"Bye! Your account was successfully cancelled. We hope to see you again soon."},unlocks:{send_instructions:"You will receive an email with instructions about how to unlock your account in a few minutes.",unlocked:"Your account has been unlocked successfully. Please sign in to continue.",send_paranoid_instructions:"If your account exists, you will receive an email with instructions about how to unlock it in a few minutes."},omniauth_callbacks:{success:"Successfully authenticated from %{kind} account.",failure:'Could not authenticate you from %{kind} because "%{reason}".'},mailer:{confirmation_instructions:{subject:"Confirmation instructions"},reset_password_instructions:{subject:"Reset password instructions"},unlock_instructions:{subject:"Unlock Instructions"}},links:{sign_in:"Sign in",sign_up:"Sign up",forgot_password:"Forgot you password?",confirmation_instructions:"Didn't receive confirmation instructions?",unlock_instructions:"Didn't receive unlock instructions?",sign_in_with:"Sign in with %{provider}"}},actor:{name:"Name"},avatar:{crop_image:"Crop the uploaded image",crop_submit:"Crop image",destroy:"Delete avatar",destroy_sure:"Are you sure you wan't to delete the selected avatar?",error:{no_file:"You have to select a file",no_image_file:"The file you uploaded isn't valid, it must be an image file"},list:"You have these avatars","new":"Create a new avatar",new_short:"New avatar",no_avatars:"You haven't any avatar, plesase create a new one.",one:"Avatar",other:"Avatars",original:"Original image",preview:"Preview",profile_change:"Change your avatar",set_default:"Set as default",set_default_sure:"Are you sure you wan't to set this avatar as default?",text:{"new":"... or upload a new one",use:"Use your saved avatars ..."},upload:"Upload"},views:{pagination:{first:"&laquo; First",last:"Last &raquo;",previous:"&lsaquo; Prev",next:"Next &rsaquo;",truncate:"..."}},language_name:"English",action:{send:"Send",accept:"Accept"},account:{cancel:"Cancel account",edit:"Edit account",email:{change:"Change email address"},lang:{change:"Change language"},one:"Account",password:{change:"Change password","new":"New password",retype:"Retype new password"},privacy:"Privacy"},activity:{audience:{hidden:{summary:"Restricted",full:"Shared with contacts of %{audience}"},"public":{summary:"Public",full:"Shared with all the Internet"},show:"Show",visible:{summary:"Restricted",full:"Shared with %{audience}"}},confirm_delete:"Delete activity?","delete":"Delete",last:"Last Activities",like:"I like",like_sentence:{one:"%{likers} likes this",other:"%{likers} like this",more:null},one:"Activity",other:"Activities",privacy:{myself:{contacts:{group:"All members",user:"Your contacts"}},outside:{contacts:{group:"Members of %{receiver}",user:"Contacts of %{receiver}"}}},sending:"Sending",stream:{atom_title:"Activity Stream from %{subject}",title:{follow:"%{author} added %{activity_object} as contact",like:"%{author} likes %{activity_object}","make-friend":"%{author} also added %{activity_object} as contact",post:"%{author} posted %{activity_object}",updated:"%{author} posted %{activity_object}"}},title:"Activities",to_comment:"Comment",unlike:"I do not like anymore",verb:{follow:{User:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},Group:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},RemoteSubject:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact.",notification:{subject:"%{name} added you as contact.",body:"%{name} added you as contact."}}},like:{User:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan."},Group:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan."},RemoteSubject:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan.",notification:{subject:"%{name} is now your fan.",body:"%{name} is now your fan."}}},join:{one:"%{sender} joined the %{title} %{thing}."},"make-friend":{User:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact."},Group:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},RemoteSubject:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact.",notification:{subject:"%{name} also added you as contact.",body:"%{name} also added you as contact."}}},post:{title:{other_wall:"%{sender} → %{receiver}"},RemoteSubject:{notification:{subject:"%{name} has posted something(%{direct_object}) in your wall",body:"%{name} has posted something(%{direct_object}) in your wall"}}},update:{RemoteSubject:{notification:{subject:"%{name} has updated %{direct_object} in your wall",body:"%{name} has updated something(%{direct_object}) in your wall"}}}}},activity_action:{follow:"Follow",sentence:{follow:{one:"%{followers} follows this",other:"%{followers} follow this"},more:{one:"%{count} more person",other:"%{count} more people"}},unfollow:"Unfollow"},browse:"Browse",button:{cancel:"Cancel",create:"Create",save:"Save",update:"Update"},cheesecake:{changes:{details:"Change details",none:"No changes",save:"Save changes",saving:"Saving..."},form:{editing:"Editing",fields:{color:"Color",name:"Name",permissions:"Permissions",subsector:"Subsector"}},select:{hint:"Select by clicking the portraits"}},comment:{input:"Write a comment...",confirm_delete:"Delete comment?",name:"comment",one:"a comment",title:{one:"Comment",other:"Comments"},view_all:"View all comments"},contact:{addressbook:"Addressbook",all_n:"All contacts (%{count})",confirm_delete:"Delete contact?",current:"Current","delete":"Delete",edit:{title:"Edit contact to %{name}",submit:"Edit contact"},error_count:{one:"1 error prohibited this contact from being saved:",other:"%{count} errors prohibited this contact from being saved:"},follow:"Follow",following:"Following",graph:{one:"Graph",empty:"We're sorry but you don't have any contacts yet. You can try the search box to look for somebody!"},in_common:{one:"1 contact in common",other:"%{count} contacts in common"},"new":{link:"+ Add contact",title:"Add %{name} to your contacts",menu:"Add contact",submit:"Add Contact"},one:"Contact",other:"Contacts",pending:{other:"Pending",all:"All",all_n:"See all pending requests (%{count})"},relation:{one:"Contact type","new":"New type"},reply:{link:"+ Reply contact",title:"Reply contact request to %{name}",submit:"Reply contact"},suggestion:{one:"Suggestion",other:"Suggestions",all:"All"},type:{"new":"+ New type"},unfollow:"Unfollow"},copyright:"2010 Copyright - All rights reserved","delete":{confirm:"Delete %{element}}?"},follower:{follower:{title:"Followers"},following:{title:"Followings"},n:{one:"1 follower",other:"%{count} followers"}},forgot_password:"Forgot you password?",frontpage:{collaborate:{"default":"Collaborate",sentence1:"Organize your projects and activities",sentence2:"Participate in conferences and events",sentence3:"Create your own group and conferences"},elements:{comments:"Comments",conferences:"Conferences",networks:"Social Networks",organizers:"Organizers",participants:"Participants",groups:"Groups",tags:"Tags"},main_title:"Retail Net is the next-gen networking app for retail distributors.",meet:{"default":"Meet",sentence1:"Meet interesting people and groups",sentence2:"Find last activity of your contacts"},register:"Register now!",share:{"default":"Share",sentence1:"Your projects and activities",sentence2:"Posts, photos, audio and videos"},stats:"%{users} users and %{groups} groups registered"},group:{one:"Group",other:"Groups",all:"All groups",all_n:"All groups (%{count})",by:"By groups",destroy:{one:"Destroy group",explanation:"All the activities, information and contacts of this group will be destroyed!",go_ahead:"Yes, I am sure. Destroy all!",last_confirm:"This is your last chance. Are you really sure?"},form:{title:"Group"},input:"What is the name of the group?",last:"Last groups",my:"My groups","new":{action:"New group",name:"Name",description:"Description",participants:"Participants"},cloud:"Group tag cloud",most:{followed:"Most followed",liked:"Most liked"},tags:"Tags",title:{one:"Group",other:"Groups"}},help:"Help",home:"Home",inbox:{one:"Inbox"},invitation:{"e-mails":"E-mail addresses",error:"Your request was unprocessable. Make sure you wrote correct e-mail addresses.",invited:"%{sender} has invited you to %{site}!",join:"Invite other people to join %{site}!",join_me:"Join me at %{site}!",one:"Invitation",other:"Invitations",toolbar:"Invite",success:"Your invitations have successfully been sent",text:"Write your own message"},like:{n:{one:"1 fan",other:"%{count} fans"}},location:{message:"You are here > %{location}",base:"You are here",separator:" > "},menu:{options:"Menu Options",information:"Information",wall:"Wall"},message:{answer:"Write your answer",inbox:"Inbox",look:"Take a look at this conversation","new":"New Message",one:"Message",other:"Messages",participants:"Participants",send:"Send a message",sentbox:"Sentbox",trash:"Trash"},notification:{all_text:"Read the whole text at %{url}",confirm:"Confirm %{sender} as contact?","default":"You have a new notification",destroy_sure:"Do you want to delete this notification?",fan:"%{sender} is now %{whose} fan.",follow:{group:"%{sender} added %{who} as contact.",user:"%{sender} added %{who} as contact."},hello:"Hi %{receiver},",like:{group:"%{sender} likes %{whose} %{thing}.",user:"%{sender} likes %{whose} %{thing}."},look:"Take a look at %{sender}'s wall",makefriend:{group:"%{sender} also added %{who} as contact.",user:"%{sender} also added %{who} as contact."},one:"Notification",other:"Notifications",post:{group:"%{title} -- by %{sender} in %{whose} wall",user:"%{title} -- by %{sender} in %{whose} wall"},read:"Mark as read",read_all:"Mark all as read",unread:"Mark as unread",update:{group:"%{sender} updated %{thing} in %{whose} wall.",user:"%{sender} updated %{thing} in %{whose} wall."},visit:"Visit %{url} and check all your notifications.",watch:"Watch it at %{url}",watch_it:"Watch it!",who:{group:"%{name}",user:"you"},whose:{group:"%{receiver}'s",user:"your"}},post:{confirm_delete:"Delete post?",form:{title:"Post"},input:"What are you doing?",name:"post",one:"a post",title:{one:"Post",other:"Posts"}},preposition:{and:"and","true":"on"},profile:{one:"Profile",age:"Age",is_on:"is on",must_be_signed_id:"You must be signed in",group:{about:"About us",birthday:"Anniversary",experience:"Area of expertise",info:"Group information",tags:"Group tags"},user:{about:"About me",birthday:"Birthday",experience:"Experience",info:"Personal information",tags:"User tags"},actualcity:"Actual City",address:"Address",contact:"Contact information",country:"Country",email:"E-mail",empty:"These fields are empty. Please, update them.",fax:"Fax",mobile:"Mobile",organization:"Organization",phone:"Phone",profile:"Edit profile",tags:{"default":"social, stream,",other:"Tags"},website:"Website",update:{error:"Please, check the format of your profile:",success:"Your profile has been updated"}},"public":{other:"Everybody"},permission:{description:{"default":{brief:{create:{activity:"Post to your wall"},follow:{nil:"Follow their activity"},read:{activity:"Read your wall"},represent:{nil:"Administrate"},notify:{nil:"Notify"}},detailed:{create:{activity:{positive:"They WILL BE ABLE to post new activities to your wall",negative:"They WILL NOT BE ABLE to post new activities to your wall"}},follow:{nil:{positive:"Activities of the contacts at %{relation} WILL APPEAR in your home wall",negative:"Activities of the contacts at %{relation} WILL APPEAR in your home wall"}},read:{activity:{positive:"They WILL BE ABLE to read posts in your wall, except those shared with specific contacts",negative:"They WILL NOT BE ABLE to read posts in your wall, except those marked as public"}},represent:{nil:{positive:"They WILL BE ABLE to change session and act as %{subject}",negative:"They WILL NOT BE ABLE to change session and act as %{subject}"}},notify:{nil:{positive:"Activities WILL BE notified to contacts at %{name}",negative:"Activities WILL NOT BE notified to contacts at %{name}"}}}}},of_relation:{choose:"2. Permissions in <strong>%{name}</strong> sphere"}},privacy:{intro:"Contacts at <strong>%{relation}</strong> level are only allowed to:",rule:{add:"Add",title:"Privacy rules",saved:"Privacy rules saved"}},relation_custom:{choose:"1. Choose sphere",confirm_delete:"Delete this sphere?","delete":"Delete",edit:"Change name","new":"+ New sphere",title:"Privacy & context"},relation_public:{name:"Public"},representation:{notice:"Your session has changed. Now you are acting on behalf of %{subject}. Use the top-right menu to return to your session","switch":"Switch session"},required:"(*) These fields are required",search:{all_results:"Search all %{subject} (%{count})",at_least:"Write at least two characters",global:{name:"Global search",first_result:{more:"Showing the first %{count} results.",one:"Showing the first result."},query:"See more results for %{query} >"},name:"Search",no_subject_found:"No %{subject} was found.",nothing:"Nothing found",searching:"Searching: %{query}",show_all:"All",write:"Write your query ...",wrong:"There seems to be a problem with the search engine"},settings:{api_key:{briefing:"Manage your API key",confirm:"Are you sure?",empty:"Empty Token",explanation:"This is your API key",name:"API Key",regenerate:"Regenerate API key"},cancel_account:{briefing:"Lets you cancel your account"},email_change:{briefing:"Change your email"},lang_change:{briefing:"Change your language",name:"Change your language"},error:"Some errors raised when saving your changes","for":"Settings for",main:"Settings",manage:{name:"Admin Contacs",briefing:"Settings for contacts",explanation:"Change contacts permissions"},notifications:{briefing:"Settings about notifications behaviour and mail alerts",name:"Notifications",by_email:{name:"Send me an email when I receive a notification",always:"Always",never:"Never"}},one:"Settings",password_change:{briefing:"Change your password"},success:"Your settings where correctly changed"},share:"Share",sign_in:"Sign in",sign_out:"Sign out",sign_up:"Sign up",site:{name:"Channelyst"},subject:{this_is_you:"This is you!"},sure:"Are you sure?",unknown:"Unknown",user:{all:"All users",all_n:"All users (%{count})",by:"By Users",one:"User",other:"Users",title:{one:"User",other:"Users"}},welcome:"Welcome to %{site}!",lang:{browser:"Auto-detect browser language",none:"Language independent content"},chat:{connecting:"Chat Connecting",reconnecting:"Chat Reconnecting",disconnected:"Chat Disconnected",unableconnect:"Chat Out of Service",title:"Chat",password:"Password",zerousers:"No users connected",search:"Search contacts",zerocontacts:"No contacts found",status:{choose:"Choose status",available:"Available",away:"Away",dnd:"Busy",offline:"Offline"},settings:{title:"Enable and configure Social Stream Chat",checkbox:"Enable or disable Social Stream Chat",update:"Update Settings"},notify:{offline:"You are offline",guestOffline:"{{name}} is offline"},videochat:{disconnected:"Videochat disconnected",disconnecting:"Videochat disconnecting...",negotiating:"Negotiating...",connectingWait:"Connecting...",connecting:"Connecting to the server...",waiting:"Waiting for response...",establishing:"Establishing...",connnected:"Videochat connected.",unable:"Unable to init videochat.",serverIssue:"Server Error: Invalid response",call:"{{name}} wants to start a video call",rejected:"{{name}} has rejected your call",rejectedBusy:"{{name}} is busy",accept:"Accept",deny:"Deny",clientIssue:"{{name}}'s client not support videochat",guestOffline:"Unable to connect. {{name}} is offline",offline:"Unable to connect. You are offline",cancel:"{{name}} cancel the videocall",requirements:"You don't have the minimum requirements to run videocall application. Please upgrade to the latest version of Flash."},muc:{group:"{{group}} group",join:"{{nick}} joined in the room.",leave:"{{nick}} has left the room.",occupants:"Occupants",joining:"Joining...",joinError:"You can't join in the room \n {{errorMsg}}",offline:"You are offline"},game:{call:"{{name}} wants to play a {{game}} game",accept:"Accept",deny:"Deny",offline:"Unable to connect. You are offline",guestOffline:"Unable to connect. {{name}} is offline",unable:"Unable to init game.",rejected:"{{name}} has rejected your invitation",rejectedBusy:"{{name}} is busy",cancel:"{{name}} cancel the invitation",finish:"{{name}} close the game",waiting:"Waiting for response...",unknown:"Unknown response",clientIssue:"{{name}}'s client not support games"}},audio:{confirm_delete:"Delete audio?",title:{one:"Audio",other:"Audios"},mine:"My audios",name:"audio",not_mine:"Audios",one:"an audio",processing:"Processing audio clip. Please wait..."},details:{msg:"See details..."},document:{actions:{"delete":"Delete",details:"Details",download:"Download",edit:"Edit"},all:"All files",confirm_delete:"Delete file?",form:{title:"File"},info:{date:{created_at:"Created at",updated_at:"Updated at"},description:{title:"Description"},file:{title:"Upload"},title:{title:"Title"}},mine:"My files",name:"file",not_mine:"Files",one:"a file",simple_all:"All",title:{one:"File",other:"Files"}},picture:{confirm_delete:"Delete picture?",mine:"My pictures",name:"picture",not_mine:"Pictures",one:"a picture",title:{one:"Picture",other:"Pictures"}},repository:{title:"Files",order:{by:"Order by",last_modified:"Last modified",most_popular:"Most popular"}},resource:{all:"All Resources",confirm_delete:"Delete resource?",title:"Resources",mine:"My resources",not_mine:"Resources"},video:{confirm_delete:"Delete video?",mine:"My videos",name:"video",not_mine:"Videos",one:"a video",processing:"Processing video. Please, wait...",title:{one:"Video",other:"Videos"}},scheduler:{frequency:{one_off:{form:{message:"Event does not have recurrence",option:"one-off"}},daily:{description:{one:"Every day",other:"Every %{count} days"},form:{option:"daily"}},weekly:{description:{one:"Every %{week_days}",other:"Every %{week_days} on %{count} weeks"},form:{every_week:"Every %{form_field} week(s) on the following days:",option:"weekly"}},monthly:{description:{one:"The %{week_day_order} %{week_day} of the month",other:"The %{week_day_order} %{week_day} of every %{count} months",week_day_order:{1:"first",2:"second",3:"third","-1":"last"}},form:{option:"monthly",week_day:"The %{order_field} %{week_field} of every %{interval_field} month(s)",week_day_order_option:{1:"first",2:"second",3:"third","-1":"last"}}}}},boxy:{close_text:"[close]"},event:{activity_action:{follow:"Follow",sentence:{one:"%{followers} follows this",other:"%{followers} follow this"},unfollow:"Unfollow"},calendar:"Calendar",confirm_delete:"Delete event?",name:"event","new":{title:"New event"},one:"an event",poster:{update:"Upload poster"},title:{one:"Event",other:"Events"},wall_post:"Published an event: %{title}"},room:{confirm_delete:"Delete room?","delete":"Delete",settings:{title:"Rooms",description:"Rooms available for event celebration"},watermark:{name:"New room"}},linkser:{title:"Linkser"},link:{confirm_delete:"Delete link?",errors:{loading:"Error loading",only_webs:"Only webpages are supported"},form:{title:"Link"},input:"Write the web address",name:"link",one:"a link",title:"Links"}},es:{actor:{name:"Nombre"},avatar:{crop_image:"Recorta la imagen",crop_submit:"Recortar",destroy:"Borrar avatar",destroy_sure:"¿Borrar el avatar seleccionado?",error:{no_file:"Tienes que seleccionar un fichero",no_image_file:"El fichero no es válido, tiene que ser una imagen"},list:"Tienes estos avatars","new":"Crear un nuevo avatar",new_short:"Nuevo avatar",no_avatars:"No tienes ningún avatar, ¡crea uno!",one:"Avatar",other:"Avatares",original:"Imagen original",preview:"Vista previa",profile_change:"Cambia tu avatar",set_default:"Seleccionar",set_default_sure:"¿Seleccionar este avatar?",text:{"new":"... o sube uno nuevo",use:"Usa uno de tus avatares..."},upload:"Subir"},language_name:"Español",action:{send:"Enviar",accept:"Aceptar"},account:{cancel:"Cancelar lar cuenta",edit:"Editar cuenta",email:{change:"Cambiar dirección de correo"},lang:{change:"Cambiar idioma"},one:"Cuenta",password:{change:"Cambiar contraseña","new":"Nueva contraseña",retype:"Repetir nueva contraseña"},privacy:"Privacidad"},activerecord:{attributes:{contact:{relation_ids:"El tipo de contacto"},"relation/custom":{name:"Nombre"},user:{email:"Correo",name:"Nombre",password:"Contraseña",password_confirmation:"Confirmar contraseña",remember_me:"Recuérdame"},document:{title:"Título"},event:{title:"Título",room:"Espacio",frequency:"Repetición"},room:{name:"Nombre"}},errors:{models:{room:{attributes:{name:{taken:"está repetido"}}}}},models:{event:"evento",room:"espacio"}},activity:{audience:{hidden:{summary:"Restringido",full:"Compartido con contactos de %{audience}"},"public":{summary:"Público",full:"Accesible por toda Internet"},show:"Mostrar",visible:{summary:"Restringido",full:"Compartido con %{audience}"}},confirm_delete:"¿Borrar actividad?","delete":"Borrar",last:"Últimas actividades",like:"Me gusta",like_sentence:{one:"A %{likers} le gusta esto",other:"A %{likers} les gusta esto"},one:"Actividad",other:"Actividades",privacy:{myself:{contacts:{group:"Todos los integrantes",user:"Tus contactos"}},outside:{contacts:{group:"Integrantes de %{receiver}",user:"Contactos de %{receiver}"}}},sending:"Enviando",stream:{atom_title:"Actividades de %{subject}",title:{follow:"%{author} añadió a %{activity_object} como contacto",unfollow:"%{author} eliminó a %{activity_object} como contacto",like:"A %{author} le gusta %{activity_object}","make-friend":"%{author} también añadió a %{activity_object} como contacto",post:"%{author} publicó %{activity_object}",updated:"%{author} actualizó %{activity_object}"}},title:"Actividades",to_comment:"Comentar",unlike:"Ya no me gusta",verb:{follow:{User:{title:"%{subject} añadió %{contact} como contacto.",message:"%{name} te añadió como contacto."},Group:{title:"%{subject} se unió al grupo %{contact}.",message:"%{name} te añadió como contacto."}},like:{User:{title:"%{subject} es fan de %{contact}.",message:"%{name} es tu fan."},Group:{title:"%{subject} es fan de %{contact}.",message:"%{name} es tu fan."}},"make-friend":{User:{title:"%{subject} y %{contact} ahora están conectados.",message:"%{name} también te añadió como su contacto."},Group:{title:"%{subject} añadió a %{contact}.",message:"%{name} te añadió."}},post:{title:{other_wall:"%{sender} → %{receiver}"}}}},activity_action:{follow:"Seguir",sentence:{follow:{one:"%{count} sigue esto",other:"%{count} siguen esto"},more:{one:"%{count} persona más",other:"%{count} personas más"}},unfollow:"Dejar de seguir"},browse:"Descubrir",button:{cancel:"Cancelar",create:"Crear",save:"Guardar",update:"Actualizar"},cheesecake:{changes:{details:"Cambios detallados",none:"Sin cambios",save:"Guardar cambios",saving:"Guardando..."},form:{editing:"Editando",fields:{color:"Color",name:"Nombre",permissions:"Permisos",subsector:"Subsector"}},select:{hint:"Selecciona haciendo click en los retratos"}},comment:{input:"Comentar...",confirm_delete:"¿Borrar commentario?",name:"comentario",one:"un comentario",view_all:"Ver todos los comentarios",title:{one:"Comentario",other:"Comentarios"}},contact:{addressbook:"Libreta de direcciones",all_n:"Todos los contactos (%{count})",confirm_delete:"¿Borrar contacto?",current:"Actuales","delete":"Borrar",edit:{title:"Editar contacto con %{name}",submit:"Editar contacto"},error_count:{one:"1 error impidió que se guardara este contacto:",other:"%{count} errores impidieron que se guardara este contacto"},follow:"Seguir",following:"Siguiendo",graph:{one:"Gráfico",empty:"Lo sentimos pero aún no tienes contactos, pero ¡puedes probar a buscar en la caja de búsqueda!"},in_common:{one:"1 contacto en común",other:"%{count} contactos en común"},"new":{link:"+ Añadir contacto",title:"Añadir a %{name} como contacto",menu:"Añadir contacto",submit:"Añadir"},one:"Contacto",other:"Contactos",pending:{other:"Pendientes",all:"Todos",all_n:"Ver todas los contactos pendientes (%{count})"},relation:{one:"Tipo de contacto","new":"Nuevo tipo"},reply:{link:"+ Responder contacto",title:"Responder contacto con %{name}",submit:"Responder contacto"},suggestion:{one:"Sugerencia",other:"Sugerencias",all:"Todas"},type:{"new":"+ Nuevo tipo"},unfollow:"Dejar de seguir"},copyright:"2011 Copyright - Derechos reservados","delete":{confirm:"¿Borrar %{element}}?"},devise:{links:{sign_in:"Entrar",sign_up:"Registrarse",forgot_password:"¿Olvidaste tu contraseña?",confirmation_instructions:"¿No recibiste instrucciones de confirmación?",unlock_instructions:"¿No recibiste instrucciones de desbloqueo?",sign_in_with:"Entrar con %{provider}"},passwords:{confirm:"Confirmar contraseña",forgot:"¿Olvidaste tu contraseña?",instructions:"Introduce el correo electrónico y te mandaremos instrucciones para cambiarlo",update:"Cambiar contraseña"}},follower:{follower:{title:"Seguidores"},following:{title:"Siguiendo"}},n:{one:"1 seguidor/a",other:"%{count} seguidores"},forgot_password:"¿Olvidaste tu contraseña?",frontpage:{collaborate:{"default":"Colabora",sentence1:"Organice sus proyectos y actividades",sentence2:"Participe en grupos y conferencias",sentence3:"Cree sus propios grupos y conferencias"},elements:{comments:"Comentarios",conferences:"Conferencias",networks:"Redes sociales",organizers:"Organizadores",participants:"Participantes",groups:"Grupos",tags:"Etiquetas"},main_title:"Social Stream es un núcleo para construir webs con características de red social",meet:{"default":"Encuentra",sentence1:"Descubre grupos y gente interesante",sentence2:"Encuentra la última actividad de tus contactos"},register:"¡Regístrate ahora!",share:{"default":"Comparte",sentence1:"Tus proyectos y actividades",sentence2:"Comentarios, fotos, audio y vídeo"},stats:"%{users} personas and %{groups} grupos registrados"},group:{one:"Grupo",other:"Grupos",all:"Todos los grupos",all_n:"Todos los grupos (%{count})",by:"Por grupos",destroy:{one:"Destruir grupo",explanation:"¡Todas las actividades, información y contactos de este grupo serán destruídos!",go_ahead:"Sí, estoy seguro/a. ¡Destruirlo todo!",last_confirm:"Es tu última oportunidad. ¿Realmente estás seguro/a?"},form:{title:"Grupo"},input:"¿Cuál es el nombre del grupo?",last:"Últimos grupos",my:"Mis grupos","new":{action:"Nuevo grupo",name:"Nombre",description:"Descripción",participants:"Participantes"},cloud:"Nube de etiquetas de grupos",most:{followed:"Más seguidos",liked:"Más populares"},tags:"Etiquetas",title:{one:"Grupo",other:"Grupos"}},help:"Ayuda",helpers:{submit:{relation_custom:{create:"Guardar",update:"Guardar"},create:"Crear %{model}",submit:"Guardar %{model}",update:"Actualizar %{model}"},select:{prompt:"Por favor seleccione"}},home:"Inicio",inbox:{one:"Entrada"},invitation:{"e-mails":"Correo electrónico",error:"No se pudo atender a la petición. Asegurate de haber escrito una dirección de correo correcta",invited:"%{sender} te ha invitado a %{site}",join:"¡Invita a otras personas a unirse a %{site}!",join_me:"¡Únete a mi en %{site}!",one:"Invitación",other:"Invitaciones",toolbar:"Invitar",success:"Se han enviado tus invitaciones",text:"Escribe tu mensaje"},like:{n:{one:"1 fan",other:"%{count} fans"}},location:{message:"Estás aquí > %{location}",base:"Estás aquí",separator:" > "},mailboxer:{"delete":"Borrar",delete_confirm:"¿Quieres enviar '%{object}' a la papelera?",form:{body:"Mensaje",recipients:"Para",subject:"Asunto"},mark_as_read:"Marcar como leido",message_mailer:{has_sent_new:{event:"ha mandado un nuevo mensaje a %{receiver}",group:"ha mandado un nuevo mensaje a %{receiver}",user:"te ha mandado un nuevo mensaje"},has_sent_reply:{event:"ha mandado una respuesta a %{receiver}",group:"ha mandado una respuesta a %{receiver}",user:"te ha mandado una respuesta"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"Contestar",send:"Enviar mensaje",sent:"Tu mensaje fue enviado"},menu:{options:"Opciones",information:"Información",wall:"Muro"},message:{answer:"Responder",inbox:"Entrada",look:"Échale un vistazo a esta conversación","new":"Nuevo mensaje",one:"Mensaje",other:"Mensajes",participants:"Participantes",send:"Enviar un mensaje",sentbox:"Salida",trash:"Papelera"},notification:{all_text:"Lee el texto entero en %{url}",confirm:"¿Confirmar contacto con %{sender}?","default":"Tienes una nueva notificación",destroy_sure:"¿Borrar notificación?",fan:"%{sender} es ahora fan %{whose}.",follow:{group:"%{sender} añadió a %{who} como contacto.",user:"%{sender} te añadió como contacto."},hello:"Hola %{receiver},",like:{group:"A %{sender} le gusta el %{thing} %{whose}.",user:"A %{sender} le gusta tu %{thing}."},look:"Echa un vistazo al muro de %{sender}",makefriend:{group:"%{sender} también añadió a %{who} como contacto.",user:"%{sender} también te añadió como contacto."},one:"Notificación",other:"Notificaciones",post:{group:"%{title} -- por %{sender} en el muro %{whose}",user:"%{title} -- por %{sender} en tu muro"},read:"Marcar como leída",read_all:"Marcar todas como leídas",unread:"Marcar como no leídas",update:{group:"%{sender} actualizó %{thing} en el muro %{whose}.",user:"%{sender} actualizó %{thing} en tu muro."},visit:"Visita %{url} y comprueba todas tus notificaciones.",watch:"Échale un vistazo en %{url}",watch_it:"¡Échale un vistazo!",who:{group:"%{name}",user:"tú"},whose:{group:"de %{receiver}",user:"tuyo"}},post:{confirm_delete:"¿Borrar texto?",form:{title:"Texto"},input:"¿Qué quieres compartir?",name:"publicación",one:"una publicación",title:{one:"Texto",other:"Textos"}},preposition:{and:"y"},profile:{one:"Perfil",age:"Edad",is_on:"esta en",must_be_signed_id:"Debes identificarte",group:{about:"Sobre nosotros/as",birthday:"Aniversario",experience:"Temas que se trabajan",info:"Información sobre el grupo",tags:"Etiquetas del grupo"},user:{about:"Sobre mí",birthday:"Cumpleaños",experience:"Intereses",info:"Información personal",tags:"Etiquetas"},actualcity:"Ciudad actual",address:"Dirección",contact:"Información de contacto",country:"País",email:"Correo electrónico",empty:"Estos campos están vacíos. ¡Actualízalos!",fax:"Fax",mobile:"Móvil",organization:"Organización",phone:"Teléfono",profile:"Editar perfil",tags:{"default":"social, stream,",other:"Etiquetas"},website:"Sitio web",update:{error:"Por favor, comprueba el formato de tu perfil:",success:"Tu perfil se ha actualizado"}},"public":{other:"Todo el mundo"},permission:{description:{"default":{brief:{create:{activity:"Publicar en vuestro muro"},follow:{nil:"Seguir su actividad"},read:{activity:"Leer vuestro muro"},represent:{nil:"Administrar"},notify:{nil:"Notificar"}},detailed:{create:{activity:{positive:"PODRÁN publicar actividades en vuestro muro",negative:"NO PODRÁN publicar actividades en vuestro muro"}},follow:{nil:{positive:"Las actividades de los contactos en %{relation} APARECERÁN en vuestra página de inicio",negative:"Las actividades de los contactos en %{relation} NO APARECERÁN en vuestra página de inicio"}},read:{activity:{positive:"PODRÁN leer las publicaciones que aparezcan en vuestro muro, salvo las que compartas solo ciertas personas",negative:"NO PODRÁN leer las publicaciones que aparezcan en vuestro muro, salvo las que marques como públicas"}},represent:{nil:{positive:"PODRÁN cambiar sesión para actuar en nombre de %{name}",negative:"NO PODRÁN cambiar sesión para actuar en nombre de %{name}"}},notify:{nil:{positive:"Las actividades SE NOTIFICARÁN a los contactos en %{relation}",negative:"Las actividades NO SE NOTIFICARÁN a los contactos en %{relation}"}}}},user:{brief:{create:{activity:"Publicar en tu muro"},read:{activity:"Leer tu muro"}},detailed:{create:{activity:{positive:"PODRÁN publicar actividades en tu muro",negative:"NO PODRÁN publicar actividades en tu muro"}},follow:{nil:{positive:"Las actividades de los contactos en %{relation} APARECERÁN en tu página de inicio",negative:"Las actividades de los contactos en %{relation} NO APARECERÁN en tu página de inicio"}},read:{activity:{positive:"PODRÁN leer las publicaciones que aparezcan en tu muro, salvo las que compartas solo con ciertas personas",negative:"NO PODRÁN leer las publicaciones que aparezcan en tu muro, salvo las que marques como públicas"}}}}},of_relation:{choose:"2. Permisos para <strong>%{name}</strong>"}},privacy:{intro:"Los contactos en <strong>%{relation}</strong>:",rule:{add:"Añadir",title:"Reglas de privacidad",saved:"Reglas de privacidad guardadas"}},relation_custom:{choose:"1. Elegir tipo de relación",confirm_delete:"¿Borrar este tipo de relación?","delete":"Borrar",edit:"Cambiar nombre","new":"+ Nuevo tipo",title:"Privacidad y contexto"},relation_public:{name:"Público"},representation:{notice:"Tu sesión ha cambiado. Ahora actúas en nombre de %{subject}. Para regresar a tu sessión, utiliza el menú de arriba a la derecha","switch":"Cambiar sessión"},required:"(*) Estos campos son obligatorios",search:{all_subject_results:"Ver todos %{subject} (%{count})",at_least:"Escribe al menos 2 letras",global:{name:"Búsqueda global",first_result:{more:"Mostrando los primeros %{count} resultados.",one:"Mostrando el primer resultado"},query:"Más resultados para %{query} >"},name:"Buscar",no_subject_found:"No se encontró a %{subject}.",nothing:"No se ha econtrado nada.",searching:"Buscando: %{query}",show_all:"Todos",write:"Escribe tu búsqueda...",wrong:"Parece que hay un problema con el motor de búsqueda"},settings:{api_key:{briefing:"Gestiona tu clave API",confirm:"¿Estás seguro?",empty:"Token vacío",explanation:"Ésta es tu clave API",name:"Clave API",regenerate:"Regenerar clave API"},cancel_account:{briefing:"Te permite cancelar tu cuenta"},email_change:{briefing:"Cambia tu email"},lang_change:{briefing:"Cambia tu idioma",name:"Cambia tu idioma"},error:"Hubo errores al guardar los cambios","for":"Ajustes para",main:"Ajustes",manage:{name:"Administrar contactos",briefing:"Ajustes de contactos",explanation:"Cambiar los permisos de contactos"},notifications:{briefing:"Ajustes sobre notificaciones y alertas por correo",name:"Notificaciones",by_email:{name:"Mandarme un correo cuando me llega una notificación",always:"Siempre",never:"Nunca"}},one:"Ajustes",password_change:{briefing:"Cambia tu contraseña"},success:"Ajustes guardados con éxito"},share:"Compartir",sign_in:"Ingresar",sign_out:"Salir",sign_up:"Registrarse",site:{name:"Social Stream"},subject:{this_is_you:"¡Eres tú!"},sure:"¿Confirmar?",time:{ago:"hace %{time}",am:"am",formats:{"default":"%A, %d de %B de %Y %H:%M:%S %z","long":"%d de %B de %Y %H:%M","short":"%d de %b %H:%M"},pm:"pm"},unknown:"Desconocido",user:{all:"Todos los usuarios",all_n:"Todos los usuarios (%{count})",by:"Por usuarios",one:"Usuario",other:"Usuarios",title:{one:"Usuario",other:"Usuarios"}},welcome:"¡Bienvenid@ a %{site}!",lang:{browser:"Autodetectar el idioma del navegador",none:"Contenido independiente del idioma"},date:{abbr_day_names:["dom","lun","mar","mié","jue","vie","sáb"],abbr_month_names:[null,"ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],day_names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],formats:{"default":"%d/%m/%Y","long":"%d de %B de %Y","short":"%d de %b"},month_names:[null,"enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],order:["day","month","year"]},datetime:{distance_in_words:{about_x_hours:{one:"alrededor de 1 hora",other:"alrededor de %{count} horas"},about_x_months:{one:"alrededor de 1 mes",other:"alrededor de %{count} meses"},about_x_years:{one:"alrededor de 1 año",other:"alrededor de %{count} años"},almost_x_years:{one:"casi 1 año",other:"casi %{count} años"},half_a_minute:"medio minuto",less_than_x_minutes:{one:"menos de 1 minuto",other:"menos de %{count} minutos"},less_than_x_seconds:{one:"menos de 1 segundo",other:"menos de %{count} segundos"},over_x_years:{one:"más de 1 año",other:"más de %{count} años"},x_days:{one:"1 día",other:"%{count} días"},x_minutes:{one:"1 minuto",other:"%{count} minutos"},x_months:{one:"1 mes",other:"%{count} meses"},x_seconds:{one:"1 segundo",other:"%{count} segundos"}},prompts:{day:"Día",hour:"Hora",minute:"Minutos",month:"Mes",second:"Segundos",year:"Año"}},errors:{format:"%{attribute} %{message}",messages:{accepted:"debe ser aceptado",blank:"no puede estar en blanco",confirmation:"no coincide con la confirmación",empty:"no puede estar vacío",equal_to:"debe ser igual a %{count}",even:"debe ser par",exclusion:"está reservado",greater_than:"debe ser mayor que %{count}",greater_than_or_equal_to:"debe ser mayor que o igual a %{count}",inclusion:"no está incluido en la lista",invalid:"no es válido",less_than:"debe ser menor que %{count}",less_than_or_equal_to:"debe ser menor que o igual a %{count}",not_a_number:"no es un número",not_an_integer:"debe ser un entero",odd:"debe ser impar",record_invalid:"La validación falló: %{errors}",taken:"ya está en uso",too_long:"es demasiado largo (%{count} caracteres máximo)",too_short:"es demasiado corto (%{count} caracteres mínimo)",wrong_length:"no tiene la longitud correcta (%{count} caracteres exactos)"},template:{body:"Se encontraron problemas con los siguientes campos:",header:{one:"No se pudo guardar este/a %{model} porque se encontró 1 error",other:"No se pudo guardar este/a %{model} porque se encontraron %{count} errores"}}},number:{currency:{format:{delimiter:".",format:"%n %u",precision:2,separator:",",significant:!1,strip_insignificant_zeros:!1,unit:"€"}},format:{delimiter:".",precision:3,separator:",",significant:!1,strip_insignificant_zeros:!1},human:{decimal_units:{format:"%n %u",units:{billion:"mil millones",million:"millón",quadrillion:"mil billones",thousand:"mil",trillion:"billón",unit:""}},format:{delimiter:"",precision:1,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", y ",two_words_connector:" y ",words_connector:", "}},chat:{connecting:"Chat Conectando",reconnecting:"Chat Reconectando",disconnected:"Chat Desconectado",unableconnect:"Chat Fuera de servicio",title:"Chat",password:"Contraseña",zerousers:"No hay contactos conectados",search:"Buscar contactos",zerocontacts:"No se encontró ningún contacto",status:{choose:"Establecer estado",available:"Disponible",away:"Ausente",dnd:"No molestar",offline:"Desconectado"},settings:{title:"Activación y configuración del chat de Social Stream",checkbox:"Activar o desactivar chat",update:"Guardar configuración"},notify:{offline:"Estás desconectado",guestOffline:"{{name}} está desconectado"},videochat:{disconnected:"Videochat desconectado",disconnecting:"Videochat desconectando...",negotiating:"Negociando...",connectingWait:"Conectando...",connecting:"Conectando con el servidor...",waiting:"Esperando respuesta...",establishing:"Estableciendo conexión...",connnected:"Videochat conectado",unable:"Imposible iniciar videochat",serverIssue:"Error del servidor: Respuesta inválida",call:"{{name}} quiere iniciar una videollamada",rejected:"{{name}} ha rechazado tu llamada",rejectedBusy:"{{name}} está ocupado",accept:"Aceptar",deny:"Rechazar",clientIssue:"El cliente de {{name}} no soporta videochat",guestOffline:"Imposible conectar. {{name}} está desconectado",offline:"Imposible conectar. Estás desconectado",cancel:"{{name}} canceló la videollamada",requirements:"No tienes los requisitos minimos para iniciar la aplicación de videoconferencia. Por favor, actualiza a la última versión de Flash."},muc:{group:"Grupo {{group}}",join:"{{nick}} ha entrado en la sala.",leave:"{{nick}} se ha ido de la sala.",occupants:"Miembros",joining:"Accediendo...",joinError:"No se pudo acceder a la sala.  \n {{errorMsg}}",offline:"Estás desconectado"},game:{call:"{{name}} quiere iniciar una partida de {{game}}",accept:"Aceptar",deny:"Rechazar",offline:"Imposible conectar. Estás desconectado",guestOffline:"Imposible conectar. {{name}} está desconectado",unable:"Imposible iniciar partida.",rejected:"{{name}} ha rechazado tu invitación",rejectedBusy:"{{name}} está ocupado",cancel:"{{name}} canceló la partida",finish:"{{name}} ha cerrado el juego",waiting:"Esperando respuesta...",unknown:"Respuesta desconocida",clientIssue:"El cliente de {{name}} no tiene juegos"}},audio:{confirm_delete:"¿Borrar audios?",mine:"Mis audios",name:"archivo de audio",not_mine:"Audios",one:"un archivo de audio",processing:"Procesando fichero de audio. Espere, por favor...",title:{one:"Audio",other:"Audios"}},details:{msg:"Ver detalles..."},document:{actions:{"delete":"Borrar",details:"Detalles",download:"Descargar",edit:"Editar"},all:"Todos los ficheros",confirm_delete:"¿Borrar fichero?",form:{title:"Fichero"},info:{date:{created_at:"Creado",updated_at:"Última modificación"},description:{title:"Descripción"},file:{title:"Subir"},title:{title:"Título"}},mine:"Mis ficheros",name:"fichero",not_mine:"Ficheros",one:"un fichero",simple_all:"Todos",title:{one:"Fichero",other:"Ficheros"}},picture:{confirm_delete:"¿Borrar imagen?",mine:"Mis imágenes",name:"imagen",not_mine:"Imágenes",one:"una imagen",title:{one:"Imagen",other:"Imágenes"}},repository:{title:"Ficheros",order:{by:"Ordenar por",last_modified:"Última modificación",most_popular:"Popularidad"}},resource:{all:"Todos los recursos",confirm_delete:"¿Borrar recursos?",title:"Recursos",mine:"Mis recursos",not_mine:"Recursos"},video:{confirm_delete:"¿Borrar vídeo?",mine:"Mis vídeos",name:"vídeo",not_mine:"Vídeos",one:"un vídeo",processing:"Procesando vídeo. Espere, por favor...",title:{one:"Vídeo",other:"Vídeos"}},scheduler:{frequency:{one_off:{form:{message:"La actividad no se volverá a repetir",option:"ninguna"}},daily:{description:{one:"Todos los días",other:"Cada %{count} días"},form:{option:"diaria"}},weekly:{description:{one:"Todos los %{week_days}",other:"Los %{week_days} de cada %{count} semanas"},form:{every_week:"Cada %{form_field} semana(s) en los siguientes días:",option:"semanal"}},monthly:{description:{one:"El %{week_day_order} %{week_day} del mes",other:"El %{week_day_order} %{week_day} de cada %{count} meses",week_day_order:{1:"primer",2:"segundo",3:"tercer","-1":"último"}},form:{option:"mensual",week_day:"El %{order_field} %{week_field} de cada %{interval_field} mes(es)",week_day_order_option:{1:"primer",2:"segundo",3:"tercer","-1":"último"}}}}},boxy:{close_text:"[cerrar]"},event:{activity_action:{follow:"Me lo apunto",sentence:{follow:{one:"%{followers} se ha apuntado esto",other:"%{followers} se han apuntado esto"}},unfollow:"Desapuntar"},calendar:"Calendario",confirm_delete:"¿Borrar evento?",name:"evento","new":{title:"Nuevo evento"},one:"un evento",poster:{update:"Subir cartel"},title:{one:"Evento",other:"Eventos"},wall_post:"Publicó un evento: %{title}"},room:{confirm_delete:"¿Borrar espacio?","delete":"Borrar",settings:{title:"Espacios",description:"Salas disponibles para la realización de eventos"},watermark:{name:"Nuevo espacio"}},linkser:{title:"Linkser"},link:{confirm_delete:"¿Borrar enlace?",errors:{loading:"Error cargando",only_webs:"Solo puedes compartir págnas web"},form:{title:"Enlace"},input:"Escribe una dirección",name:"enlace",one:"una enlace",title:"Enlaces"}},pt:{language_name:"Português",actor:{name:"Nome"},action:{send:"Enviar",accept:"Aceitar"},account:{cancel:"Cancelar a conta",edit:"Editar a conta",email:{change:"Mudar endereço de email"},lang:{change:"Mudar idioma"},one:"Conta",password:{change:"Mudar senha","new":"Nova senha",retype:"Repetir nova senha"},privacy:"Privacidade"},activerecord:{attributes:{contact:{relation_ids:"Tipo de contato"},"relation/custom":{name:"Nome"},user:{email:"Email",name:"Nome",password:"Senha",password_confirmation:"Confirmar senha",remember_me:"Lembrar-me"}}},activity:{audience:{hidden:{summary:"Restrito",full:"Compartilhado com contatos de %{audience}"},"public":{summary:"Público",full:"Acessível por toda Internet"},visible:{summary:"Restrito",full:"Compartilhado com %{audience}"}},confirm_delete:"Apagar atividade?","delete":"Apagar",last:"Últimas Atividades",like:"Curtir",one:"Atividade",other:"Atividades",privacy:{myself:{contacts:{group:"Todos os integrantes",user:"Seus contatos"}},outside:{contacts:{group:"Membros de %{receiver}",user:"Contatos de %{receiver}"}}},sending:"Enviando",title:"Atividades",to_comment:"Comentário",unlike:"Curtir (desfazer)",verb:{follow:{User:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."},Group:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."}},like:{User:{title:"%{subject} é fã de %{contact}.",message:"%{name} agora é seu fã."},Group:{title:"%{subject} é fã de %{contact}.",message:"%{name} agora é seu fã."}},"make-friend":{User:{title:"%{subject} e %{contact} estão agora conectados.",message:"%{name} também adicionou você como contato."},Group:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."}},post:{title:{other_wall:"%{sender} → %{receiver}"}}}},browse:"Browse",button:{cancel:"Cancelar",create:"Criar",save:"Salvar",update:"Atualizar"},cheesecake:{changes:{details:"Alterar detalhes",none:"Sem alterações",save:"Salvar alterações",saving:"Salvando..."},form:{editing:"Editando",fields:{color:"Cor",name:"Nome",permissions:"Permissões",subsector:"Segmento"}},select:{hint:"Selecione clicando nos retratos"}},comment:{input:"Escreva um comentário...",confirm_delete:"Excluir comentário?",name:"comentário",one:"um comentário",view_all:"Veja todos comentários"},contact:{addressbook:"Catálogo de endereços",all_n:"Todos os contatos (%{count})",confirm_delete:"Excluir contato?",current:"Atual","delete":"Excluir",edit:{title:"Editar contato com %{name}",submit:"Editar contato"},error_count:{one:"1 erro impediu que este contato fosse salvo:",other:"%{count} erros impediram que este contato fosse salvo:"},graph:{one:"Gráfico",empty:"Lamentamos, mas você não tem nenhum contato ainda. Você pode tentar a caixa de pesquisa para procurar alguém!"},in_common:{one:"1 contato em comum",other:"%{count} contatos em comum"},"new":{link:"+ Adicionar contato",title:"Adicionar %{name} aos seus contatos",menu:"Adicionar contato",submit:"Adicionar"},one:"Contato",other:"Contatos",pending:{other:"Pendente",all:"Todos",all_n:"Veja todos os contatos pendentes (%{count})"},relation:{one:"Tipo de contato","new":"Novo tipo"},reply:{link:"+ Responder contato",title:"Responder pedido de contato para %{name}",submit:"Responder contato"},suggestion:{one:"Sugestão",other:"Sugestões",all:"Todas"},type:{"new":"+ Novo tipo"}},copyright:"2010 Copyright - todos direitos reservados","delete":{confirm:"Apagar %{element}}?"},devise:{links:{sign_in:"Entrar",sign_up:"Registrar",forgot_password:"Esqueceu sua senha?",confirmation_instructions:"Não recebeu instruções de confirmação?",unlock_instructions:"Não recebeu instruções para desbloquear?",sign_in_with:"Entrar com %{provider}"},passwords:{confirm:"Confirmar senha",forgot:"Esqueceu sua senha?",instructions:"Digite o endereço de e-mail vinculado a sua conta e nós lhe enviaremos instruções para alterá-la:",update:"Mude sua senha"}},follower:{n:{one:"1 seguidor",other:"%{count} seguidores"}},forgot_password:"Esqueceu sua senha?",frontpage:{collaborate:{"default":"Colaborar",sentence1:"Organize seus projetos e atividades",sentence2:"Participar de congressos e eventos",sentence3:"Crie seu próprio grupo e conferências"},elements:{comments:"Comentários",conferences:"Conferências",networks:"Redes Sociais",organizers:"Organizadores",participants:"Participantes",groups:"Grupos",tags:"Tags"},main_title:"Social Stream é a base para a construção de sites de rede social.",meet:{"default":"Encontrar",sentence1:"Descubra grupos e pessoas interessantes",sentence2:"Encontre a última atividade dos seus contatos"},register:"Registre agora!",share:{"default":"Compartilhar",sentence1:"Seus projetos e atividades",sentence2:"Comentários, fotos, audio e vídeos"},stats:"%{users} usuários e %{groups} grupos registrados"},group:{one:"Grupo",other:"Grupos",all:"Todos os grupos",all_n:"Todos os grupos (%{count})",by:"Por grupos",destroy:{one:"Excluir grupo",explanation:"Todas as atividades, informações e contatos deste grupo serão excluídos!",go_ahead:"Sim, tenho certeza. Excluir tudo!",last_confirm:"Esta é sua última chance. Você realmente tem certeza?"},form:{title:"Grupo"},input:"Qual o nome do grupo?",last:"Últimos grupos",my:"Meus grupos","new":{action:"Novo grupo",name:"Nome",description:"Descrição",participants:"Participantes"},cloud:"Nuvem de tags de grupos",most:{followed:"Mais seguidos",liked:"Mais populares"},tags:"Tags"},help:"Ajuda",helpers:{submit:{relation_custom:{create:"Salvar",update:"Atualizar"},create:"Criar %{model}",submit:"Salvar %{model}",update:"Atualizar %{model}"},select:{prompt:"Por favor selecione"}},home:"Página inicial",inbox:{one:"Entrada"},invitation:{"e-mails":"Correio eletrônico",error:"Sua solicitação não foi processada. Certifique-se de que você escreveu os endereços de correio eletrônico corretamente.",invited:"%{sender} convidou você para %{site}!",join:"Convide outras pessoas para se juntar ao %{site}!",join_me:"Junte-se a mim no %{site}!",one:"Convite",other:"Convites",toolbar:"Convidar",success:"Seus convites foram enviados com sucesso",text:"Escreva sua mensagem"},like:{n:{one:"1 fã",other:"%{count} fãs"}},location:{message:"Você está aqui > %{location}",base:"Você está aqui",separator:" > "},mailboxer:{"delete":"Excluir",delete_confirm:"Você quer mover '%{object}' para o lixo?",form:{body:"Mensagem",recipients:"Para",subject:"Assunto"},mark_as_read:"Marcar como lido",message_mailer:{has_sent_new:{event:"enviou uma nova mensagem para %{receiver}",group:"enviou uma nova mensagem para %{receiver}",user:"enviou-lhe uma nova mensagem"},has_sent_reply:{event:"enviou uma resposta para %{receiver}",group:"enviou uma resposta para %{receiver}",user:"enviou-lhe uma resposta"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"Responder",send:"Enviar mensagem",sent:"Sua mensagem foi enviada"},menu:{options:"Opções",information:"Informação",wall:"Mural"},message:{answer:"Escreva sua resposta",inbox:"Entrada",look:"Dê uma olhada nesta conversa","new":"Nova mensagem",one:"Mensagem",other:"Mensagens",participants:"Participantes",send:"Enviar uma mensagem",sentbox:"Enviadas",trash:"Lixeira"},notification:{all_text:"Leia o texto todo em %{url}",confirm:"Confirmar %{sender} como contato?","default":"Você tem uma nova notificação",destroy_sure:"Você deseja excluir esta notificação?",fan:"%{sender} é agora %{whose} fã.",follow:{group:"%{sender} adicionado %{who} como contato.",user:"%{sender} adicionado %{who} como contato."},hello:"Olá %{receiver},",like:{group:"%{sender} curte %{whose} %{thing}.",user:"%{sender} curte %{whose} %{thing}."},look:"Dê uma olhada no mural de %{sender}",makefriend:{group:"%{sender} também adicionou %{who} como contato.",user:"%{sender} também adicionou %{who} como contato."},one:"Notificação",other:"Notificações",post:{group:"%{title} -- por %{sender} no mural %{whose}",user:"%{title} -- por %{sender} no seu mural"},read:"Marcar como lida",read_all:"Marcar todas como lidas",unread:"Marcar como não lida",update:{group:"%{sender} atualizou %{thing} no mural %{whose}.",user:"%{sender} atualizou %{thing} no seu mural."},visit:"Visite %{url} e confira todas as suas notificações.",watch:"Dê uma olhada em %{url}",watch_it:"Confira!",who:{group:"%{name}",user:"você"},whose:{group:"%{receiver}'s",user:"seu"}},post:{confirm_delete:"Excluir postagem?",form:{title:"Postagem"},input:"O que você está fazendo?",name:"postagem",one:"uma postagem",title:"Postagens"},preposition:{and:"e","true":"em"},profile:{one:"Perfil",age:"Idade",is_on:"está em",must_be_signed_id:"Você precisa efetuar login",group:{about:"Sobre nós",birthday:"Anniversary",experience:"Área de especialização",info:"Informação sobre o grupo",tags:"Tags do grupo"},user:{about:"Sobre mim",birthday:"Aniversário",experience:"Interesses",info:"Informação pessoal",tags:"Tags do usuário"},actualcity:"Cidade atual",address:"Enderesso",contact:"Informção de contato",country:"País",email:"E-mail",empty:"Estes campos estão vazios. Por favor, atualize-os.",fax:"Fax",mobile:"Celular",organization:"Organização",phone:"Telefone",profile:"Editar perfil",tags:{"default":"social, stream,",other:"Tags"},website:"Website",update:{error:"Por favor, verifique o formato do seu perfil",success:"Seu perfil foi atualizado"}},"public":{other:"Todos"},permission:{description:{"default":{brief:{create:{activity:"Publicar em seu mural"},follow:{nil:"Seguir atividade deles"},read:{activity:"Ler seu mural"},represent:{nil:"Administrar"},notify:{nil:"Notificar"}},detailed:{create:{activity:{positive:"SERÃO CAPAZES DE postar novas atividades em seu mural",negative:"NÃO SERÃO CAPAZES DE postar novas atividades em seu mural"}},follow:{nil:{positive:"As atividades dos contatos em %{relation} IRÃO APARECER em seu mural",negative:"As atividades dos contatos em %{relation} NÃO IRÃO APARECER em seu mural"}},read:{activity:{positive:"SERÃO CAPAZES de ler as mensagens em seu mural, exceto aquelas compartilhadas com contatos específicos",negative:"NÃO SERÃO CAPAZES de ler as mensagens em seu mural, exceto aquelas compartilhadas com contatos específicos"}},represent:{nil:{positive:"SERÃO CAPAZES de mudar de sessão e agir como %{subject}",negative:"NÃO SERÃO CAPAZES de mudar de sessão e agir como %{subject}"}},notify:{nil:{positive:"As atividades SERÃO notificados para contatos em %{name}",negative:"As atividades NÃO SERÃO notificados para contatos em %{name}"}}}}},of_relation:{choose:"2. Permissões para <strong>%{name}</strong>"}},privacy:{intro:"Os contatos em <strong>%{relation}</strong>:",rule:{add:"Adicionar",title:"Regras de privacidade",saved:"Regras de privacidade salvas"}},relation_custom:{choose:"1. Escolha o tipo de relação",confirm_delete:"Excluir esse relação?","delete":"Excluir",edit:"Mudar nome","new":"+ Nova relação",title:"Privacidade & contexto"},relation_public:{name:"Publico"},representation:{notice:"Sua sessão foi alterada. Agora você está agindo em nome de %{subject}. Use o menu superior direito para retornar à sua sessão","switch":"Alterne sessão"},required:"(*) Estes campos são obrigatórios",search:{all_results:"Pesquisar todos os %{subject} (%{count})",at_least:"Escrever pelo menos dois caracteres",global:{name:"Pesquisa global",first_result:{more:"Mostrando os primeiros %{count} resultados.",one:"Mostrando o primeiro resultado."},query:"Veja mais resultados para %{query} >"},name:"Search",no_subject_found:"Nenhum %{subject} foi encontrado.",nothing:"Nada foi encontrado",searching:"Pesquisando: %{query}",show_all:"Todos",write:"Escreva sua pesquisa ...",wrong:"Parece haver um problema com o mecanismo de pesquisa"},settings:{api_key:{briefing:"Gerenciar a sua chave da API",confirm:"Você tem certeza?",empty:"Token vazio",explanation:"Esta é sua chave da API",name:"Chave da API",regenerate:"Regerar chave da API"},cancel_account:{briefing:"Permite que você cancele sua conta"},email_change:{briefing:"Mude o seu e-mail"},lang_change:{briefing:"Alterar o idioma",name:"Alterar o idioma"},error:"Alguns erros gerados ao salvar suas alterações","for":"Configurações para",main:"Configurações",manage:{name:"Administrar Contatos",briefing:"Configuração para contatos",explanation:"Mudar as permissões dos contatos"},notifications:{briefing:"Configurações de notificações alertas de email",name:"Notificaões",by_email:{name:"Envie-me um email quando eu receber uma notificação",always:"Sempre",never:"Nunca"}},one:"Configurações",password_change:{briefing:"Mude sua senha"},success:"Suas configurações foram alteradas corretamente"},share:"Compartilhar",sign_in:"Entrar",sign_out:"Sair",sign_up:"Cadastrar-se",site:{name:"Social Stream"},subject:{this_is_you:"Este é você!"},sure:"Você tem certeza?",time:{ago:"%{time} atrás",am:"",formats:{"default":"%A, %d de %B de %Y, %H:%M h","long":"%A, %d de %B de %Y, %H:%M h","short":"%d/%m, %H:%M h"},pm:""},unknown:"Desconhecido",user:{by:"Por usuários",one:"Usuário",other:"Usuários",all:"Todos os usuários",all_n:"Todos os usuários (%{count})"},welcome:"Bem-vindo ao %{site}!",lang:{browser:"Auto-detecção do idioma do navegador",none:"Conteúdo independente da linguagem"},date:{abbr_day_names:["dom","seg","ter","qua","qui","sex","sáb"],abbr_month_names:[null,"jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],day_names:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],formats:{"default":"%d/%m/%Y","long":"%d de %B de %Y","short":"%d de %b"},month_names:[null,"janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],order:["dia","mês","ano"]},datetime:{distance_in_words:{about_x_hours:{one:"aproximadamente 1 hora",other:"aproximadamente %{count} horas"},about_x_months:{one:"aproximadamente 1 mês",other:"aproximadamente %{count} meses"},about_x_years:{one:"aproximadamente 1 ano",other:"aproximadamente %{count} anos"},almost_x_years:{one:"quase 1 ano",other:"quase %{count} anos"},half_a_minute:"meio minuto",less_than_x_minutes:{one:"menos de 1 minuto",other:"menos de %{count} minutos"},less_than_x_seconds:{one:"menos de 1 segundo",other:"menos de %{count} segundos"},over_x_years:{one:"mais de 1 ano",other:"mais de %{count} anos"},x_days:{one:"1 dia",other:"%{count} dias"},x_minutes:{one:"1 minuto",other:"%{count} minutos"},x_months:{one:"1 mês",other:"%{count} meses"},x_seconds:{one:"1 segundo",other:"%{count} segundos"}},prompts:{day:"Dia",hour:"Hora",minute:"Minuto",month:"Mês",second:"Segundo",year:"Ano"}},errors:{format:"%{attribute} %{message}",messages:{accepted:"deve ser aceito",blank:"não pode ficar em branco",confirmation:"não está de acordo com a confirmação",empty:"não pode ficar vazio",equal_to:"deve ser igual a %{count}",even:"deve ser par",exclusion:"não está disponível",greater_than:"deve ser maior que %{count}",greater_than_or_equal_to:"deve ser maior ou igual a %{count}",inclusion:"não está incluído na lista",invalid:"não é válido",less_than:"deve ser menor que %{count}",less_than_or_equal_to:"deve ser menor ou igual a %{count}",not_a_number:"não é um número",not_an_integer:"não é um número inteiro",odd:"deve ser ímpar",record_invalid:"A validação falhou: %{errors}",taken:"já está em uso",too_long:"é muito longo (máximo: %{count} caracteres)",too_short:"é muito curto (mínimo: %{count} caracteres)",wrong_length:"não possui o tamanho esperado (%{count} caracteres)"},template:{body:"Por favor, verifique o(s) seguinte(s) campo(s):",header:{one:"Não foi possível gravar %{model}: 1 erro",other:"Não foi possível gravar %{model}: %{count} erros."}}},number:{currency:{format:{delimiter:".",format:"%u %n",precision:2,separator:",",significant:!1,strip_insignificant_zeros:!1,unit:"R$"}},format:{delimiter:".",precision:3,separator:",",significant:!1,strip_insignificant_zeros:!1},human:{decimal_units:{format:"%n %u",units:{billion:"bilhão",million:"milhão",quadrillion:"quatrilhão",thousand:"mil",trillion:"trilhão",unit:""}},format:{delimiter:"",precision:2,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", e ",two_words_connector:" e",words_connector:", "}}},zh:{language_name:"中文",actor:{name:"姓名"},action:{send:"送出",accept:"接收"},account:{cancel:"取消帐号",edit:"编辑帐号",email:{change:"更改邮箱地址"},lang:{change:"切换语言"},one:"帐号",password:{change:"修改密码","new":"新密码",retype:"再次输入新密码"},privacy:"私隐"},activerecord:{attributes:{contact:{relation_ids:"联系方式"},"relation/custom":{name:"姓名"},user:{email:"邮箱",name:"姓名",password:"密码",password_confirmation:"确定密码",remember_me:"记住我"}}},activity:{audience:{hidden:{summary:"禁止",full:"连接分享 %{audience}"},"public":{summary:"公开",full:"分享给网络"},show:"展示",visible:{summary:"禁止",full:"分享 %{audience}"}},confirm_delete:"刪除活动?","delete":"删除",last:"次前活动",like:"我喜爱",like_sentence:{one:"%{likers} 喜欢这个",other:"%{likers} 喜欢这个",more:null},one:"一个活动",other:"很多活动",privacy:{myself:{contacts:{group:"所有会员",user:"发送给"}},outside:{contacts:{group:"会员的 %{receiver}",user:"联系的 %{receiver}"}}},sending:"传送中",stream:{atom_title:"%{subject}的活动流",title:{follow:"%{author}已加了%{activity_object}為关连",like:"%{author}喜欢%{activity_object}","make-friend":"%{author}还加了%{activity_object}为关连",post:"%{author}发布了%{activity_object}",updated:"%{author}更新了%{activity_object}"}},title:"活动",to_comment:"评论",unlike:"我不再喜欢了",verb:{follow:{User:{title:"%{subject} 已加 %{contact} 作为联络.",message:"%{name} 已加您作为联系人."},Group:{title:"%{subject} 已加 %{contact} 作为联络.",message:"%{name} 已加您作为联络."}},like:{User:{title:"%{subject} 已成为粉丝 %{contact}.",message:"%{name} 已成为你的粉丝."},Group:{title:"%{subject} 已成为粉丝 %{contact}.",message:"%{name} 已成为你的粉丝."}},"make-friend":{User:{title:"%{subject} 和 %{contact} 现已連结.",message:"%{姓名} 已加您作为联系人."},Group:{title:"%{subject} 已加 %{contact} 联络.",message:"%{name} 已加您作为联系人."}},post:{title:{other_wall:"%{sender} → %{receiver}"}}}},activity_action:{follow:"关注",sentence:{follow:{one:"%{followers} 关注这个",other:"%{followers} 关注这个"},more:{one:"%{count} 一个人",other:"%{count} 再多些人"}},unfollow:"不再关注"},browse:"浏览",button:{cancel:"取消",create:"创建",save:"保存",update:"更新"},cheesecake:{changes:{details:"更改详情",none:"沒有更改",save:"保存更改",saving:"保存中..."},form:{editing:"编辑中...",fields:{color:"颜色",name:"姓名",permissions:"权限",subsector:"界别分组"}},select:{hint:"点击图片以便选择"}},comment:{input:"请填写评论...",confirm_delete:"删除评论?",name:"评论",one:"一篇评论",title:{one:"评论",other:"所有评论"},view_all:"查看所有评论 "},contact:{addressbook:"我的通讯录",all_n:"所有联系(%{count})",confirm_delete:"刪除联系?",current:"近期","delete":"刪除",edit:{title:"编辑联络 %{name}",submit:"编辑联络"},error_count:{one:"一个错误导致不能保存这个联络 :",other:"%{count} 有一些错误导致不能保存这个联络:"},follow:"关注",following:"关注中",graph:{one:"图片",empty:"对不起, 您沒有任何联系人. 您可以通过查找功能去查找可能认识的朋友!"},in_common:{one:"一个共同联系人",other:"%{count} 共同联系人"},"new":{link:"+ 加入联络",title:"加入 %{name} 到您的联系人列表",menu:"加入联络",submit:"加入联络"},one:"联络",other:"联系",pending:{other:"暂缓",all:"所有",all_n:"查看所有暂缓申请 (%{count})"},relation:{one:"联络类别","new":"新类别"},reply:{link:"+ 回复联系人",title:"回复联络申请至 %{name}",submit:"回复"},suggestion:{one:"建议",other:"建议",all:"所有"},type:{"new":"+ 新类别"},unfollow:"不再关注"},copyright:"2010 版权 - 版权所有","delete":{confirm:"刪除 %{element}}?"},devise:{links:{sign_in:"登录",sign_up:"注册",forgot_password:"忘了您的密码?",confirmation_instructions:"还没收到激活指引吗?",unlock_instructions:"还没收到解锁指引吗?",sign_in_with:"以 %{provider} 登录"},passwords:{confirm:"确认密码",forgot:"忘了?",instructions:"请输入你的帐号关联的邮箱, 以便我们给您发送更改指示:",update:"更改您的密码"}},follower:{follower:{title:"粉丝"},following:{title:"关注"},n:{one:"一个粉丝",other:"%{count} 粉丝"}},forgot_password:"忘了您的密码吗?",frontpage:{collaborate:{"default":"合作",sentence1:"组织您的习作和活动",sentence2:"参与会议和活动",sentence3:"创建您的群组和会议"},elements:{comments:"评论",conferences:"发布会",networks:"社交网络",organizers:"主办单位",participants:"参加者",groups:"群组",tags:"标记"},main_title:"社交视频互动是我们建立社交网的核心.",meet:{"default":"认识",sentence1:"认识有趣的人和群组",sentence2:" 寻找于你相关的最新活动"},register:"请注册!",share:{"default":"分享",sentence1:" 您的习作和活动",sentence2:"近况, 照片, 音频 和 视频"},stats:"%{users} 用户 和 %{groups} 已注册的群组"},group:{one:"群组",other:"群组",all:"所有群组",all_n:"所有群组 (%{count})",by:"被群组",destroy:{one:"删除群组",explanation:"所有和这个群组相关的活动的资料和联系会被删除!",go_ahead:"是, 我肯定. 删除所有東西!",last_confirm:"这是您最后机会. 您肯定吗?"},form:{title:"群组"},input:"这个群组叫什么名称?",last:"最後的群组",my:"我的群组","new":{action:"新群组",name:"名称",description:"描述",participants:"参与者"},cloud:"群组标记云",most:{followed:"最多人关注",liked:"最受欢迎"},tags:"标记",title:{one:"群组",other:"群组们"}},help:"帮助",helpers:{submit:{relation_custom:{create:"保存",update:"更新"}}},home:"主页",inbox:{one:"收件箱"},invitation:{"e-mails":"电子邮箱",error:"您的申请未能被处理. 请确定您的邮箱地址是否正确无误.",invited:"%{sender} 已邀请您到 %{site}!",join:"邀请其他人加入 %{site}!",join_me:"跟我一起在 %{site}!",one:"邀请",other:"邀请",toolbar:"邀请",success:"您的邀请已成功发送",text:"写上您的讯息"},like:{n:{one:"一个粉丝",other:"%{count} 粉丝们"}},location:{message:"您在此 > %{location}",base:"您在此",separator:" > "},mailboxer:{"delete":"刪除",delete_confirm:"您要把 '%{object}' 移除到垃圾桶?",form:{body:"主体",recipients:"收件人",subject:"主题"},mark_as_read:"标记已读",message_mailer:{has_sent_new:{event:"己发送新讯息 %{receiver}",group:"己发送新讯息 %{receiver}",user:"己给您发送新讯息"},has_sent_reply:{event:"已给您回复 %{receiver}",group:"已给您回复 %{receiver}",user:"已给您回复"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"回复",send:"发送讯息",sent:"您的讯息已发送"},menu:{options:"菜單选择",information:"个人资料",wall:"最新發佈"},message:{answer:"写上答案",inbox:"收件箱",look:"请留意这个对话","new":"新讯息",one:"讯息",other:"讯息",participants:"参与者",send:"发送讯息",sentbox:"寄件备份",trash:"垃圾桶"},notification:{all_text:"在 %{url} 阅读所有內容",confirm:"确定 %{sender} 作为联络?","default":"您有新通知",destroy_sure:"您是否想删除这个通知?",fan:"%{sender} 现在是 %{whose} 粉丝.",follow:{chamber:"%{sender} 已加入 %{name}.",group:"%{sender} 已加到 %{who} 作为联络.",user:"%{sender} 已加到 %{who} 作为联络."},hello:"您好 %{receiver},",join:{one:"%{sender}參加了%{thing}%{title}."},like:{group:"%{sender} 喜欢 %{whose} %{thing}.",user:"%{sender} 喜欢 %{whose} %{thing}."},look:"请看看这个 %{sender} 的最新发布",makefriend:{group:"%{sender} 另加至 %{who} 作为联络.",user:"%{sender} 另加至 %{who} 作为联络."},one:"通知",other:"通知",post:{group:"%{title} -- %{sender} 發佈給 %{whose} ",user:"%{title} -- %{sender} 發佈給 %{whose} "},read:"标记已读",read_all:"标记全部已读",unread:"标记未读",update:{group:"%{sender} 在 %{whose} 的最新发布已更新 %{thing} ",user:"%{sender} 在 %{whose} 的最新发布已更新 %{thing}"},visit:"浏览 %{url} 和检查您的所有通知.",watch:"在这里 %{url}查看这里",watch_it:"查看这里!",who:{group:"%{name}",user:"您"},whose:{group:"%{receiver} 的",user:"您的"}},post:{confirm_delete:"删除近況吗?",form:{title:"近況"},input:"您有什么近況?",name:"近況",one:"一条近況",title:{one:"近況",other:"近況"}},preposition:{and:"和","true":"在上"},profile:{one:"个人背景资料",age:"年齡",is_on:"有效",must_be_signed_id:"您必须持有有效证件",group:{about:"关于我们",birthday:"周年",experience:"经验范畴",info:"群组资料",tags:"群组标记"},user:{about:"关于我",birthday:"生日",experience:"经验",info:"个人资料",tags:"标记"},actualcity:"上课城市",address:"地址",contact:"联络资料",country:"国家",email:"邮箱",empty:"这些空格未填上. 请更新.",fax:"传真",mobile:"手机",organization:"组织",phone:"电话",profile:"编辑个人背景资料",tags:{"default":"社交, 视频,",other:"标记"},website:"网站",update:{error:"请重组您的个人背景资料:",success:"您的个人背景资料已更新"}},"public":{other:"大家"},permission:{description:{"default":{brief:{create:{activity:"贴到您的最新发布"},follow:{nil:"关注他们的活动"},read:{activity:"阅读您的最新发布"},represent:{nil:"管理"},notify:{nil:"通知"}},detailed:{create:{activity:{positive:"他们将会在您的最新发布标贴新的活动",negative:"他们不能在您的最新发布标贴新的活动"}},follow:{nil:{positive:"已有联系的活动 %{relation} 将出现在您主页的最新发布上",negative:"已有联系的活动 %{relation} 将不会出现在您主页的最新发布上"}},read:{activity:{positive:"他们能夠阅读在您的最新发布的內容, 除了那些有特別联系的分享",negative:"他们能夠阅读在您的最新发布的內容, 除了那些被标识为公开"}},represent:{nil:{positive:"他们将更改环节及作为 %{subject}",negative:"他们不能更改环节及作为 %{subject}"}},notify:{nil:{positive:"活动将会通知 %{name} 的联系",negative:"活动将不会通知 %{name} 的联系"}}}}},of_relation:{choose:"2. <strong>%{name}</strong>圈內的权限"}},privacy:{intro:"拥有 <strong>%{relation}</strong>级别的联系只容许作出以下行为:",rule:{add:"加上",title:"私隐规则",saved:"私隐规则己保存"}},relation_custom:{choose:"1. 选择圈子",confirm_delete:"删除这个圈子?","delete":"刪除",edit:"更改名称","new":"+ 新圈子",title:"私隐和內容"},relation_public:{name:"公众"},representation:{notice:"您的环节已更改. 现在您以%{subject}的身份行动. 请使用右上角菜单回到您的环节","switch":"转换环节"},required:"(*) 以上空格必須填写",search:{all_results:"查找所有 %{subject} (%{count})",at_least:"写下最少两个字符",global:{name:"全球搜查",first_result:{more:"展示首回 %{count} 结果.",one:"首回结果展示中."},query:"查看更多结果 %{query} >"},name:"搜索",no_subject_found:"沒有搜索到关于 %{subject} 的结果.",nothing:"沒有查询到任何结果",searching:"查找中: %{query}",show_all:"所有",write:"写下您的问题 ...",wrong:"搜查器发生了问题"},settings:{api_key:{briefing:"管理您的API钥匙",confirm:"您肯定吗?",empty:"沒有",explanation:"这是您的的 API 钥匙",name:"API 钥匙",regenerate:"重新获取 API 钥匙"},cancel_account:{briefing:"让您注销帐号"},email_change:{briefing:"更改您的邮箱"},lang_change:{briefing:"更改您的语言",name:"更改您的语言"},error:"当您保存更改时, 出现一些错误","for":"为....设定",main:"设定",manage:{name:"行政联络",briefing:"联系设定",explanation:"更改联系允许"},notifications:{briefing:"关于通知行为和邮件提示的设定",name:"通知",by_email:{name:"当我收到通知时发邮件给我",always:"经常",never:"永不"}},one:"设定",password_change:{briefing:"更改密码"},success:"您的设定已成功更改"},share:"Share",sign_in:"登录",sign_out:"退出",sign_up:"注册",site:{name:"Gocess.com"},subject:{this_is_you:"这是您!"},sure:"您肯定吗?",time:{ago:"%{time} 之前"},unknown:"不明",user:{all:"所有用户",all_n:"所有用户 (%{count})",by:"被用户",one:"用户",other:"用户们",title:{one:"用户",other:"用户们"}},welcome:"欢迎来到 %{site}!",lang:{browser:"自动搜查浏览器语言",none:"语言自主內容"}}},function(e){e.Jcrop=function(t,n){function r(e){return""+parseInt(e)+"px"
}function s(e){return""+parseInt(e)+"%"}function a(e){return O.baseClass+"-"+e}function o(t){var i=e(t).offset();return[i.left,i.top]}function l(e){return[e.pageX-rt[0],e.pageY-rt[1]]}function c(e){e!=Y&&(ot.setCursor(e),Y=e)}function u(e,t){if(rt=o(H),ot.setCursor("move"==e?e:e+"-resize"),"move"==e)return ot.activateHandlers(f(t),y);var i=st.getFixed(),n=p(e),r=st.getCorner(p(n));st.setPressed(st.getCorner(n)),st.setCurrent(r),ot.activateHandlers(d(e,i),y)}function d(e,t){return function(i){if(O.aspectRatio)switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}st.setCurrent(i),at.update()}}function f(e){var t=e;return lt.watchKeys(),function(e){st.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,at.update()}}function p(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function m(e){return function(t){return O.disabled?!1:"move"!=e||O.allowMove?(Q=!0,u(e,l(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function g(e,t,i){var n=e.width(),r=e.height();n>t&&t>0&&(n=t,r=t/e.width()*e.height()),r>i&&i>0&&(r=i,n=i/e.height()*e.width()),G=e.width()/n,V=e.height()/r,e.width(n).height(r)}function v(e){return{x:parseInt(e.x*G),y:parseInt(e.y*V),x2:parseInt(e.x2*G),y2:parseInt(e.y2*V),w:parseInt(e.w*G),h:parseInt(e.h*V)}}function y(){var e=st.getFixed();e.w>O.minSelect[0]&&e.h>O.minSelect[1]?(at.enableHandles(),at.done()):at.release(),ot.setCursor(O.allowSelect?"crosshair":"default")}function b(e){if(O.disabled)return!1;if(!O.allowSelect)return!1;Q=!0,rt=o(H),at.disableHandles(),c("crosshair");var t=l(e);return st.setPressed(t),ot.activateHandlers(_,y),lt.watchKeys(),at.update(),e.stopPropagation(),e.preventDefault(),!1}function _(e){st.setCurrent(e),at.update()}function x(){var t=e("<div></div>").addClass(a("tracker"));return e.browser.msie&&t.css({opacity:0,backgroundColor:"white"}),t}function C(e){function t(){window.setTimeout(y,c)}var i=e[0]/G,n=e[1]/V,r=e[2]/G,s=e[3]/V;if(!X){var a=st.flipCoords(i,n,r,s),o=st.getFixed(),l=initcr=[o.x,o.y,o.x2,o.y2],c=O.animationDelay,u=l[0],h=l[1],r=l[2],s=l[3],d=a[0]-initcr[0],f=a[1]-initcr[1],p=a[2]-initcr[2],m=a[3]-initcr[3],g=0,v=O.swingSpeed;at.animMode(!0);var y=function(){return function(){g+=(100-g)/v,l[0]=u+g/100*d,l[1]=h+g/100*f,l[2]=r+g/100*p,l[3]=s+g/100*m,100>g?t():at.done(),g>=99.8&&(g=100),S(l)}}();t()}}function E(e){S([e[0]/G,e[1]/V,e[2]/G,e[3]/V])}function S(e){st.setPressed([e[0],e[1]]),st.setCurrent([e[2],e[3]]),at.update()}function k(t){"object"!=typeof t&&(t={}),O=e.extend(O,t),"function"!=typeof O.onChange&&(O.onChange=function(){}),"function"!=typeof O.onSelect&&(O.onSelect=function(){})}function I(){return v(st.getFixed())}function T(){return st.getFixed()}function A(e){k(e),R()}function N(){O.disabled=!0,at.disableHandles(),at.setCursor("default"),ot.setCursor("default")}function P(){O.disabled=!1,R()}function D(){at.done(),ot.activateHandlers(null,null)}function M(){q.remove(),j.show()}function R(e){O.allowResize?e?at.enableOnly():at.enableHandles():at.disableHandles(),ot.setCursor(O.allowSelect?"crosshair":"default"),at.setCursor(O.allowMove?"move":"default"),q.css("backgroundColor",O.bgColor),"setSelect"in O&&(E(n.setSelect),at.done(),delete O.setSelect),"trueSize"in O&&(G=O.trueSize[0]/L,V=O.trueSize[1]/B),z=O.maxSize[0]||0,W=O.maxSize[1]||0,$=O.minSize[0]||0,U=O.minSize[1]||0,"outerImage"in O&&(H.attr("src",O.outerImage),delete O.outerImage),at.refresh()}var t=t,n=n;"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),"trackDocument"in n||(n.trackDocument=e.browser.msie?!1:!0,e.browser.msie&&"8"==e.browser.version.split(".")[0]&&(n.trackDocument=!0)),"keySupport"in n||(n.keySupport=e.browser.msie?!1:!0);var F={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}},O=F;k(n);var j=e(t),H=j.clone().removeAttr("id").css({position:"absolute"});H.width(j.width()),H.height(j.height()),j.after(H).hide(),g(H,O.boxWidth,O.boxHeight);var L=H.width(),B=H.height(),q=e("<div />").width(L).height(B).addClass(a("holder")).css({position:"relative",backgroundColor:O.bgColor}).insertAfter(j).append(H);O.addClass&&q.addClass(O.addClass);var z,W,$,U,G,V,Q,Y,X,K,Z=e("<img />").attr("src",H.attr("src")).css("position","absolute").width(L).height(B),J=e("<div />").width(s(100)).height(s(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(Z),et=e("<div />").width(s(100)).height(s(100)).css("zIndex",320),tt=e("<div />").css({position:"absolute",zIndex:300}).insertBefore(H).append(J,et),it=O.boundary,nt=x().width(L+2*it).height(B+2*it).css({position:"absolute",top:r(-it),left:r(-it),zIndex:290}).mousedown(b),rt=o(H),st=function(){function e(e){var e=a(e);m=f=e[0],g=p=e[1]}function t(e){var e=a(e);u=e[0]-m,d=e[1]-g,m=e[0],g=e[1]}function i(){return[u,d]}function n(e){var t=e[0],i=e[1];0>f+t&&(t-=t+f),0>p+i&&(i-=i+p),g+i>B&&(i+=B-(g+i)),m+t>L&&(t+=L-(m+t)),f+=t,m+=t,p+=i,g+=i}function r(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!O.aspectRatio)return l();var e,t,i=O.aspectRatio,n=O.minSize[0]/G,r=(O.minSize[1]/V,O.maxSize[0]/G),s=O.maxSize[1]/V,a=m-f,u=g-p,d=Math.abs(a),v=Math.abs(u),y=d/v;return 0==r&&(r=10*L),0==s&&(s=10*B),i>y?(t=g,w=v*i,e=0>a?f-w:w+f,0>e?(e=0,h=Math.abs((e-f)/i),t=0>u?p-h:h+p):e>L&&(e=L,h=Math.abs((e-f)/i),t=0>u?p-h:h+p)):(e=m,h=d/i,t=0>u?p-h:p+h,0>t?(t=0,w=Math.abs((t-p)*i),e=0>a?f-w:w+f):t>B&&(t=B,w=Math.abs(t-p)*i,e=0>a?f-w:w+f)),e>f?(n>e-f?e=f+n:e-f>r&&(e=f+r),t=t>p?p+(e-f)/i:p-(e-f)/i):f>e&&(n>f-e?e=f-n:f-e>r&&(e=f-r),t=t>p?p+(f-e)/i:p-(f-e)/i),0>e?(f-=e,e=0):e>L&&(f-=e-L,e=L),0>t?(p-=t,t=0):t>B&&(p-=t-B,t=B),last=c(o(f,p,e,t))}function a(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>L&&(e[0]=L),e[1]>B&&(e[1]=B),[e[0],e[1]]}function o(e,t,i,n){var r=e,s=i,a=t,o=n;return e>i&&(r=i,s=e),t>n&&(a=n,o=t),[Math.round(r),Math.round(a),Math.round(s),Math.round(o)]}function l(){var e=m-f,t=g-p;if(z&&Math.abs(e)>z&&(m=e>0?f+z:f-z),W&&Math.abs(t)>W&&(g=t>0?p+W:p-W),U&&U>Math.abs(t)&&(g=t>0?p+U:p-U),$&&$>Math.abs(e)&&(m=e>0?f+$:f-$),0>f&&(m-=f,f-=f),0>p&&(g-=p,p-=p),0>m&&(f-=m,m-=m),0>g&&(p-=g,g-=g),m>L){var i=m-L;f-=i,m-=i}if(g>B){var i=g-B;p-=i,g-=i}if(f>L){var i=f-B;g-=i,p-=i}if(p>B){var i=p-B;g-=i,p-=i}return c(o(f,p,m,g))}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var u,d,f=0,p=0,m=0,g=0;return{flipCoords:o,setPressed:e,setCurrent:t,getOffset:i,moveOffset:n,getCorner:r,getFixed:s}}(),at=function(){function t(t){var i=e("<div />").css({position:"absolute",opacity:O.borderOpacity}).addClass(a(t));return J.append(i),i}function n(t,i){var n=e("<div />").mousedown(m(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i});return et.append(n),n}function o(e){return n(e,I++).css({top:r(-P+1),left:r(-P+1),opacity:O.handleOpacity}).addClass(a("handle"))}function l(e){var t=O.handleSize,i=P,a=t,o=t,l=i,c=i;switch(e){case"n":case"s":o=s(100);break;case"e":case"w":a=s(100)}return n(e,I++).width(o).height(a).css({top:r(-l+1),left:r(-c+1)})}function c(e){for(i in e)A[e[i]]=o(e[i])}function u(e){var t=Math.round(e.h/2-P),i=Math.round(e.w/2-P),n=(west=-P+1,e.w-P),s=e.h-P;"e"in A&&A.e.css({top:r(t),left:r(n)})&&A.w.css({top:r(t)})&&A.s.css({top:r(s),left:r(i)})&&A.n.css({left:r(i)}),"ne"in A&&A.ne.css({left:r(n)})&&A.se.css({top:r(s),left:r(n)})&&A.sw.css({top:r(s)}),"b"in A&&A.b.css({top:r(s)})&&A.r.css({left:r(n)})}function h(e,t){Z.css({top:r(-t),left:r(-e)}),tt.css({top:r(t),left:r(e)})}function d(e,t){tt.width(e).height(t)}function f(){var e=st.getFixed();st.setPressed([e.x,e.y]),st.setCurrent([e.x2,e.y2]),p()}function p(){return k?g():void 0}function g(){var e=st.getFixed();d(e.w,e.h),h(e.x,e.y),O.drawBorders&&T.right.css({left:r(e.w-1)})&&T.bottom.css({top:r(e.h-1)}),N&&u(e),k||y(),O.onChange(v(e))}function y(){tt.show(),H.css("opacity",O.bgOpacity),k=!0}function b(){C(),tt.hide(),H.css("opacity",1),k=!1}function _(){N&&(u(st.getFixed()),et.show())}function w(){return N=!0,O.allowResize?(u(st.getFixed()),et.show(),!0):void 0}function C(){N=!1,et.hide()}function E(e){(X=e)?C():w()}function S(){E(!1),f()}var k,I=370,T={},A={},N=!1,P=O.handleOffset;O.drawBorders&&(T={top:t("hline").css("top",e.browser.msie?r(-1):r(0)),bottom:t("hline"),left:t("vline"),right:t("vline")}),O.dragEdges&&(A.t=l("n"),A.b=l("s"),A.r=l("e"),A.l=l("w")),O.sideHandles&&c(["n","s","e","w"]),O.cornerHandles&&c(["sw","nw","ne","se"]);var D=x().mousedown(m("move")).css({cursor:"move",position:"absolute",zIndex:360});return J.append(D),C(),{updateVisible:p,update:g,release:b,refresh:f,setCursor:function(e){D.css("cursor",e)},enableHandles:w,enableOnly:function(){N=!0},showHandles:_,disableHandles:C,animMode:E,done:S}}(),ot=function(){function t(){nt.css({zIndex:450}),u&&e(document).mousemove(n).mouseup(r)}function i(){nt.css({zIndex:290}),u&&e(document).unbind("mousemove",n).unbind("mouseup",r)}function n(e){o(l(e))}function r(e){return e.preventDefault(),e.stopPropagation(),Q&&(Q=!1,c(l(e)),O.onSelect(v(st.getFixed())),i(),o=function(){},c=function(){}),!1}function s(e,i){return Q=!0,o=e,c=i,t(),!1}function a(e){nt.css("cursor",e)}var o=function(){},c=function(){},u=O.trackDocument;return u||nt.mousemove(n).mouseup(r).mouseout(r),H.before(nt),{activateHandlers:s,setCursor:a}}(),lt=function(){function t(){O.keySupport&&(s.show(),s.focus())}function i(){s.hide()}function n(e,t,i){O.allowMove&&(st.moveOffset([t,i]),at.updateVisible()),e.preventDefault(),e.stopPropagation()}function r(e){if(e.ctrlKey)return!0;K=e.shiftKey?!0:!1;var t=K?10:1;switch(e.keyCode){case 37:n(e,-t,0);break;case 39:n(e,t,0);break;case 38:n(e,0,-t);break;case 40:n(e,0,t);break;case 27:at.release();break;case 9:return!0}return nothing(e)}var s=e('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(r).blur(i),a=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return O.keySupport&&a.insertBefore(H),{watchKeys:t}}();et.hide(),R(!0);var ct={animateTo:C,setSelect:E,setOptions:A,tellSelect:I,tellScaled:T,disable:N,enable:P,cancel:D,focus:lt.watchKeys,getBounds:function(){return[L*G,B*V]},getWidgetSize:function(){return[L,B]},release:at.release,destroy:M};return j.data("Jcrop",ct),ct},e.fn.Jcrop=function(t){function i(i){var n=t.useImg||i.src,r=new Image;r.onload=function(){e.Jcrop(i,t)},r.src=n}return"object"!=typeof t&&(t={}),this.each(function(){if(e(this).data("Jcrop")){if("api"==t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else i(this)}),this}}(jQuery),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(i){function n(){function n(){var t=d.attr("target"),i=d.attr("action");s.setAttribute("target",o),"POST"!=s.getAttribute("method")&&s.setAttribute("method","POST"),s.getAttribute("action")!=a.url&&s.setAttribute("action",a.url),a.skipEncodingOverride||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),a.timeout&&setTimeout(function(){f=!0,r()},a.timeout);var n=[];try{if(a.extraData)for(var u in a.extraData)n.push(e('<input type="hidden" name="'+u+'" value="'+a.extraData[u]+'" />').appendTo(s)[0]);l.appendTo("body"),c.attachEvent?c.attachEvent("onload",r):c.addEventListener("load",r,!1),s.submit()}finally{s.setAttribute("action",i),t?s.setAttribute("target",t):d.removeAttr("target"),e(n).remove()}}function r(){if(!u.aborted){var i=c.contentWindow?c.contentWindow.document:c.contentDocument?c.contentDocument:c.document;if(i&&i.location.href!=a.iframeSrc||f){c.detachEvent?c.detachEvent("onload",r):c.removeEventListener("load",r,!1);var n=!0;try{if(f)throw"timeout";var s="xml"==a.dataType||i.XMLDocument||e.isXMLDoc(i);if(t("isXml="+s),!s&&window.opera&&(null==i.body||""==i.body.innerHTML)&&--v)return t("requeing onLoad callback, DOM not available"),setTimeout(r,250),void 0;u.responseText=i.body?i.body.innerHTML:i.documentElement?i.documentElement.innerHTML:null,u.responseXML=i.XMLDocument?i.XMLDocument:i,u.getResponseHeader=function(e){var t={"content-type":a.dataType};return t[e]};var o=/(json|script)/.test(a.dataType);if(o||a.textarea){var d=i.getElementsByTagName("textarea")[0];if(d)u.responseText=d.value;else if(o){var p=i.getElementsByTagName("pre")[0],m=i.getElementsByTagName("body")[0];p?u.responseText=p.textContent:m&&(u.responseText=m.innerHTML)}}else"xml"!=a.dataType||u.responseXML||null==u.responseText||(u.responseXML=y(u.responseText));g=_(u,a.dataType,a)}catch(b){t("error caught:",b),n=!1,u.error=b,a.error&&a.error.call(a.context,u,"error",b),h&&e.event.trigger("ajaxError",[u,a,b])}u.aborted&&(t("upload aborted"),n=!1),n&&(a.success&&a.success.call(a.context,g,"success",u),h&&e.event.trigger("ajaxSuccess",[u,a])),h&&e.event.trigger("ajaxComplete",[u,a]),h&&!--e.active&&e.event.trigger("ajaxStop"),a.complete&&a.complete.call(a.context,u,n?"success":"error"),setTimeout(function(){l.removeData("form-plugin-onload"),l.remove(),u.responseXML=null},100)}}}var s=d[0];if(e(":input[name=submit],:input[id=submit]",s).length)return alert('Error: Form elements must not have name or id of "submit".'),void 0;var a=e.extend(!0,{},e.ajaxSettings,i);a.context=a.context||a;var o="jqFormIO"+(new Date).getTime(),l=e('<iframe id="'+o+'" name="'+o+'" src="'+a.iframeSrc+'" />'),c=l[0];l.css({position:"absolute",top:"-1000px",left:"-1000px"});var u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){t("aborting upload...");var i="aborted";this.aborted=1,l.attr("src",a.iframeSrc),u.error=i,a.error&&a.error.call(a.context,u,"error",i),h&&e.event.trigger("ajaxError",[u,a,i]),a.complete&&a.complete.call(a.context,u,"error")}},h=a.global;if(h&&!e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[u,a]),a.beforeSend&&a.beforeSend.call(a.context,u,a)===!1)return a.global&&e.active--,void 0;if(!u.aborted){var f=0,p=s.clk;if(p){var m=p.name;m&&!p.disabled&&(a.extraData=a.extraData||{},a.extraData[m]=p.value,"image"==p.type&&(a.extraData[m+".x"]=s.clk_x,a.extraData[m+".y"]=s.clk_y))}a.forceSync?n():setTimeout(n,10);var g,v=50,y=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},b=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,i,n){var r=t.getResponseHeader("content-type")||"",s="xml"===i||!i&&r.indexOf("xml")>=0,a=s?t.responseXML:t.responseText;return s&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(a=n.dataFilter(a,i)),"string"==typeof a&&("json"===i||!i&&r.indexOf("json")>=0?a=b(a):("script"===i||!i&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof i&&(i={success:i});var r=this.attr("action"),s="string"==typeof r?e.trim(r):"";s&&(s=(s.match(/^([^#]+)/)||[])[1]),s=s||window.location.href||"",i=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var a={};if(this.trigger("form-pre-serialize",[this,i,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&i.beforeSerialize(this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var o,l,c=this.formToArray(i.semantic);if(i.data){i.extraData=i.data;for(o in i.data)if(i.data[o]instanceof Array)for(var u in i.data[o])c.push({name:o,value:i.data[o][u]});else l=i.data[o],l=e.isFunction(l)?l():l,c.push({name:o,value:l})}if(i.beforeSubmit&&i.beforeSubmit(c,this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[c,this,i,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var h=e.param(c);"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+h,i.data=null):i.data=h;var d=this,f=[];if(i.resetForm&&f.push(function(){d.resetForm()}),i.clearForm&&f.push(function(){d.clearForm()}),!i.dataType&&i.target){var p=i.success||function(){};f.push(function(t){var n=i.replaceTarget?"replaceWith":"html";e(i.target)[n](t).each(p,arguments)})}else i.success&&f.push(i.success);i.success=function(e,t,n){for(var r=i.context||i,s=0,a=f.length;a>s;s++)f[s].apply(r,[e,t,n||d,d])};var m=e("input:file",this).length>0,g="multipart/form-data",v=d.attr("enctype")==g||d.attr("encoding")==g;return i.iframe!==!1&&(m||i.iframe||v)?i.closeKeepAlive?e.get(i.closeKeepAlive,n):n():e.ajax(i),this.trigger("form-submit-notify",[this,i]),this},e.fn.ajaxForm=function(i){if(0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(i))}).bind("click.form-plugin",function(t){var i=t.target,n=e(i);if(!n.is(":submit,input:image")){var r=n.closest(":submit");if(0==r.length)return;i=r[0]}var s=this;if(s.clk=i,"image"==i.type)if(void 0!=t.offsetX)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=n.offset();s.clk_x=t.pageX-a.left,s.clk_y=t.pageY-a.top}else s.clk_x=t.pageX-i.offsetLeft,s.clk_y=t.pageY-i.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var i=[];if(0===this.length)return i;var n=this[0],r=t?n.getElementsByTagName("*"):n.elements;if(!r)return i;var s,a,o,l,c,u,h;for(s=0,u=r.length;u>s;s++)if(c=r[s],o=c.name)if(t&&n.clk&&"image"==c.type)c.disabled||n.clk!=c||(i.push({name:o,value:e(c).val()}),i.push({name:o+".x",value:n.clk_x},{name:o+".y",value:n.clk_y}));else if(l=e.fieldValue(c,!0),l&&l.constructor==Array)for(a=0,h=l.length;h>a;a++)i.push({name:o,value:l[a]});else null!==l&&"undefined"!=typeof l&&i.push({name:o,value:l});if(!t&&n.clk){var d=e(n.clk),f=d[0];o=f.name,o&&!f.disabled&&"image"==f.type&&(i.push({name:o,value:d.val()}),i.push({name:o+".x",value:n.clk_x},{name:o+".y",value:n.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var n=this.name;if(n){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var s=0,a=r.length;a>s;s++)i.push({name:n,value:r[s]});else null!==r&&"undefined"!=typeof r&&i.push({name:this.name,value:r})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,r=this.length;r>n;n++){var s=this[n],a=e.fieldValue(s,t);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(i,a):i.push(a))}return i},e.fieldValue=function(t,i){var n=t.name,r=t.type,s=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==s&&-1==t.selectedIndex))return null;if("select"==s){var a=t.selectedIndex;if(0>a)return null;for(var o=[],l=t.options,c="select-one"==r,u=c?a+1:l.length,h=c?a:0;u>h;h++){var d=l[h];if(d.selected){var f=d.value;if(f||(f=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return f;o.push(f)}}return o}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}})}}(jQuery),/*
 * jQuery File Upload Plugin 4.4.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */
function(e){"use strict";var t,i,n="file_upload",r="undefined",s="function",a=function(e,t){var i=0,n=[];t&&(t.length?n=t:n[t-1]=null),this.complete=function(){i+=1,i===n.length&&(e(n),i=0,n=[])},this.push=function(e){n.push(e)},this.getList=function(){return n}},o=function(){var e=[];this.push=function(t){e.push(t),1===e.length&&t()},this.next=function(){e.shift(),e.length&&e[0]()}};t=function(t){var i,l,c,u=this,h={namespace:n,uploadFormFilter:function(){return!0},fileInputFilter:function(){return!0},cssClass:n,dragDropSupport:!0,dropZone:t,url:function(e){return e.attr("action")},method:function(e){return e.attr("method")},fieldName:function(e){return e.attr("name")},formData:function(e){return e.serializeArray()},requestHeaders:null,multipart:!0,multiFileRequest:!1,withCredentials:!1,forceIframeUpload:!1,sequentialUploads:!1,maxChunkSize:null,maxFileReaderSize:5e7},d={},f={},p=/^http(s)?:\/\//,m=new a(function(e){typeof h.onLoadAll===s&&h.onLoadAll(e)}),g=new o,v=function(){m.complete(),g.next()},y=function(){return typeof XMLHttpRequest!==r&&typeof XMLHttpRequestUpload!==r&&typeof File!==r&&(!h.multipart||typeof FormData!==r||typeof FileReader!==r&&typeof XMLHttpRequest.prototype.sendAsBinary===s)},b=function(){h.dragDropSupport&&(typeof h.onDocumentDragEnter===s&&(d["dragenter."+h.namespace]=function(e){h.onDocumentDragEnter(e)}),typeof h.onDocumentDragLeave===s&&(d["dragleave."+h.namespace]=function(e){h.onDocumentDragLeave(e)}),d["dragover."+h.namespace]=u.onDocumentDragOver,d["drop."+h.namespace]=u.onDocumentDrop,e(document).bind(d),typeof h.onDragEnter===s&&(f["dragenter."+h.namespace]=function(e){h.onDragEnter(e)}),typeof h.onDragLeave===s&&(f["dragleave."+h.namespace]=function(e){h.onDragLeave(e)}),f["dragover."+h.namespace]=u.onDragOver,f["drop."+h.namespace]=u.onDrop,h.dropZone.bind(f)),l.bind("change."+h.namespace,u.onChange)},_=function(){e.each(d,function(t,i){e(document).unbind(t,i)}),e.each(f,function(e,t){h.dropZone.unbind(e,t)}),l.unbind("change."+h.namespace)},w=function(e){return typeof e.uploadedBytes!==r},x=function(e,t,i){var n;return typeof document.createEvent===s&&typeof ProgressEvent!==r?(n=document.createEvent("ProgressEvent"),n.initProgressEvent("progress",!1,!1,e,t,i)):n={lengthComputable:!0,loaded:t,total:i},n},C=function(e,t,i){var n,s;if(typeof i.progressTotal===r)if(e[t])s=e[t].size,i.progressTotal=s?s:1;else{for(s=0,n=0;e.length>n;n+=1)s+=e[n].size;i.progressTotal=s}return i.progressTotal},E=function(t,i,n,r,a){var o,l,c=0,u=0;t.lengthComputable&&typeof a.onProgressAll===s&&(a.progressLoaded=parseInt(t.loaded/t.total*C(i,n,a),10),l=m.getList(),e.each(l,function(e,t){c+=t[3].progressLoaded||0,u+=C(t[0],t[1],t[3])}),o=x(!0,c,u),a.onProgressAll(o,l))},S=function(e,t,i,n,r){var a;return w(r)&&(r.uploadedBytes+=r.chunkSize,a=x(!0,r.uploadedBytes,t[i].size),typeof r.onProgress===s&&r.onProgress(a,t,i,n,r),E(a,t,i,n,r),r.uploadedBytes<t[i].size)?(typeof r.resumeUpload===s?r.resumeUpload(e,t,i,n,r,function(){B(e,t,i,n,r,!0)}):B(e,t,i,n,r,!0),void 0):(r.progressLoaded=C(t,i,r),typeof r.onLoad===s&&r.onLoad(e,t,i,n,r),v(),void 0)},k=function(e,t,i,n,r){var a=e;w(r)&&e.lengthComputable&&(a=x(!0,r.uploadedBytes+parseInt(e.loaded/e.total*r.chunkSize,10),t[i].size)),typeof r.onProgress===s&&r.onProgress(a,t,i,n,r),E(a,t,i,n,r)},I=function(e,t,i,n){i.upload&&(i.upload.onprogress=function(r){k(r,e,t,i,n)}),i.onload=function(r){S(r,e,t,i,n)},i.onabort=function(r){n.progressTotal=n.progressLoaded,typeof n.onAbort===s&&n.onAbort(r,e,t,i,n),v()},i.onerror=function(r){n.progressTotal=n.progressLoaded,typeof n.onError===s&&n.onError(r,e,t,i,n),v()}},T=function(e){return typeof e.url===s?e.url(e.uploadForm||i):e.url},A=function(e){return typeof e.method===s?e.method(e.uploadForm||i):e.method},N=function(e){return typeof e.fieldName===s?e.fieldName(e.fileInput||l):e.fieldName},P=function(t){var n;return typeof t.formData===s?t.formData(t.uploadForm||i):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},D=function(t){if(p.test(t)){var i=location.host,n=location.protocol.length+2,r=t.indexOf(i,n),s=r+i.length;return r!==n&&r!==t.indexOf("@",n)+1||t.length!==s&&-1===e.inArray(t.charAt(s),["/","?","#"])?!1:!0}return!0},M=function(t,i,n,r){var s=t[i],a=T(r),o=D(a);n.open(A(r),a,!0),o?(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),(!r.multipart||w(r))&&(n.setRequestHeader("X-File-Name",s.name),n.setRequestHeader("X-File-Type",s.type),n.setRequestHeader("X-File-Size",s.size),w(r)?r.multipart||n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type",s.type))):r.withCredentials&&(n.withCredentials=!0),e.isArray(r.requestHeaders)?e.each(r.requestHeaders,function(e,t){n.setRequestHeader(t.name,t.value)}):r.requestHeaders&&e.each(r.requestHeaders,function(e,t){n.setRequestHeader(e,t)})},R=function(t,i,n){var r,s=new FormData;for(e.each(P(n),function(e,t){s.append(t.name,t.value)}),r=0;t.length>r;r+=1)s.append(N(n),t[r]);i.send(s)},F=function(e,t){e.reader=new FileReader,e.reader.onload=t,e.reader.readAsBinaryString(e)},O=function(e){return unescape(encodeURIComponent(e))},j=function(t,i,n,r){var s="--",a="\r\n",o="",l=[];return e.each(r,function(e,i){o+=s+t+a+'Content-Disposition: form-data; name="'+O(i.name)+'"'+a+a+O(i.value)+a}),e.each(i,function(e,i){o+=s+t+a+'Content-Disposition: form-data; name="'+O(n)+'"; filename="'+O(i.name)+'"'+a+"Content-Type: "+O(i.type)+a+a,l.push(o),l.push(i.reader.result),delete i.reader,o=a}),o+=s+t+s+a,l.push(o),l.join("")},H=function(e,t,i){var n,r,s="----MultiPartFormBoundary"+(new Date).getTime();for(t.setRequestHeader("Content-Type","multipart/form-data; boundary="+s),n=new a(function(){t.sendAsBinary(j(s,e,N(i),P(i)))},e.length),r=0;e.length>r;r+=1)F(e[r],n.complete)},L=function(e,t){var i,n=t.uploadedBytes,r=t.maxChunkSize;return e&&typeof e.slice===s&&(n||r&&e.size>r)?(t.uploadedBytes=n=n||0,i=e.slice(n,r||e.size-n),t.chunkSize=i.size,i):e},B=function(t,i,n,a,o,l){var c;return c=function(){if(!l&&typeof o.onSend===s&&o.onSend(t,i,n,a,o)===!1)return v(),void 0;var c,u=L(i[n],o);I(i,n,a,o),M(i,n,a,o),o.multipart?(c="number"==typeof n?[u]:i,typeof FormData!==r?R(c,a,o):typeof FileReader!==r&&typeof a.sendAsBinary===s?H(c,a,o):e.error("Browser does not support multipart/form-data XHR file uploads")):a.upload?a.send(u):e.error("Browser does not support XHR file uploads")},!l&&(m.push(Array.prototype.slice.call(arguments,1)),o.sequentialUploads)?(g.push(c),void 0):(c(),void 0)},q=function(t,i,n,r,a){var o=new XMLHttpRequest,l=e.extend({},h);l.fileInput=n,l.uploadForm=r,typeof l.initUpload===s?l.initUpload(t,i,a,o,l,function(){B(t,i,a,o,l)}):B(t,i,a,o,l)},z=function(t,i,n,s,a){var o,l=0;typeof n===r?e.each(i,function(e,t){l+=t.size?t.size:1}):l=i[n].size?i[n].size:1,o=x(!0,l,l),a.progressLoaded=l,E(o,i,n,s,a)},W=function(t,i,n){var r=P(n);i.find(":input").not(":disabled").attr("disabled",!0).addClass(n.namespace+"_disabled"),e.each(r,function(t,r){e('<input type="hidden"/>').attr("name",r.name).val(r.value).addClass(n.namespace+"_form_data").appendTo(i)}),t.attr("name",N(n)).appendTo(i)},$=function(e,t,i){e.detach(),t.find("."+i.namespace+"_disabled").removeAttr("disabled").removeClass(i.namespace+"_disabled"),t.find("."+i.namespace+"_form_data").remove()},U=function(t,i,n,r,a,o,l){var c;c=function(){if(typeof o.onSend===s&&o.onSend(t,i,l,a,o)===!1)return v(),void 0;var c=r.attr("action"),u=r.attr("method"),h=r.attr("target");a.unbind("abort").bind("abort",function(e){a.readyState=0,a.unbind("load").attr("src","javascript".concat(":false;")),z(e,i,l,a,o),typeof o.onAbort===s&&o.onAbort(e,i,l,a,o),v()}).unbind("load").bind("load",function(t){a.readyState=4,z(t,i,l,a,o),typeof o.onLoad===s&&o.onLoad(t,i,l,a,o),e('<iframe src="javascript:false;" style="display:none;"></iframe>').appendTo(r).remove(),v()}),r.attr("action",T(o)).attr("method",A(o)).attr("target",a.attr("name")),W(n,r,o),a.readyState=2,r.get(0).submit(),$(n,r,o),r.attr("action",c).attr("method",u).attr("target",h)},m.push([i,l,a,o]),o.sequentialUploads?g.push(c):c()},G=function(t,i,n,r){if(!(t&&i&&n))return e.error("Iframe based File Upload requires a file input change event"),void 0;var a=e('<iframe src="javascript:false;" style="display:none;" name="iframe_'+h.namespace+"_"+(new Date).getTime()+'"></iframe>'),o=e.extend({},h),l=t.target&&t.target.files;l=l?Array.prototype.slice.call(l,0):[{name:i.val(),type:null,size:null}],r=1===l.length?0:r,o.fileInput=i,o.uploadForm=n,a.readyState=0,a.abort=function(){a.trigger("abort")},a.bind("load",function(){a.unbind("load"),typeof o.initUpload===s?o.initUpload(t,l,r,a,o,function(){U(t,l,i,n,a,o,r)}):U(t,l,i,n,a,o,r)}).appendTo(n)},V=function(e){var t,i=0,n=0;if(h.multipart&&typeof FormData===r){for(t=0;e.length>t;t+=1){if(i=e[t].size,i>h.maxFileReaderSize)return!1;n+=i}if(h.multiFileRequest&&n>h.maxFileReaderSize)return!1}return!0},Q=function(e,t,i,n){if(!V(t))return G(e,i,n),void 0;var r;if(t=Array.prototype.slice.call(t,0),h.multiFileRequest&&h.multipart&&t.length)q(e,t,i,n);else for(r=0;t.length>r;r+=1)q(e,t,i,n,r)},Y=function(){i=(t.is("form")?t:t.find("form")).filter(h.uploadFormFilter)},X=function(){l=(i.length?i:t).find("input:file").filter(h.fileInputFilter)},K=function(t){var i=t.clone(!0);e("<form/>").append(i).get(0).reset(),t.after(i).detach(),X()};this.onDocumentDragOver=function(e){return typeof h.onDocumentDragOver===s&&h.onDocumentDragOver(e)===!1?!1:(e.preventDefault(),void 0)},this.onDocumentDrop=function(e){return typeof h.onDocumentDrop===s&&h.onDocumentDrop(e)===!1?!1:(e.preventDefault(),void 0)},this.onDragOver=function(e){if(typeof h.onDragOver===s&&h.onDragOver(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&(t.dropEffect=t.effectAllowed="copy",e.preventDefault())},this.onDrop=function(e){if(typeof h.onDrop===s&&h.onDrop(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&y()&&Q(e,t.files),e.preventDefault()},this.onChange=function(t){if(typeof h.onChange===s&&h.onChange(t)===!1)return!1;var i=e(t.target),r=e(t.target.form);1===r.length?(i.data(n+"_form",r),K(i)):r=i.data(n+"_form"),!h.forceIframeUpload&&t.target.files&&y()?Q(t,t.target.files,i,r):G(t,i,r)},this.init=function(i){return i&&(e.extend(h,i),c=i),Y(),X(),t.data(h.namespace)?(e.error('FileUpload with namespace "'+h.namespace+'" already assigned to this element'),void 0):(t.data(h.namespace,u).addClass(h.cssClass),h.dropZone.not(t).addClass(h.cssClass),b(),typeof h.init===s&&h.init(),void 0)},this.options=function(i){var n,s,a,o;return typeof i===r?e.extend({},h):(c&&e.extend(c,i),_(),e.each(i,function(t,i){switch(t){case"namespace":return e.error("The FileUpload namespace cannot be updated."),void 0;case"uploadFormFilter":a=!0,o=!0;break;case"fileInputFilter":o=!0;break;case"cssClass":n=h.cssClass;break;case"dropZone":s=h.dropZone}h[t]=i}),a&&Y(),o&&X(),typeof n!==r?(t.removeClass(n).addClass(h.cssClass),(s?s:h.dropZone).not(t).removeClass(n),h.dropZone.not(t).addClass(h.cssClass)):s&&(s.not(t).removeClass(h.cssClass),h.dropZone.not(t).addClass(h.cssClass)),b(),void 0)},this.option=function(e,t){var i;return typeof t===r?h[e]:(i={},i[e]=t,u.options(i),void 0)},this.destroy=function(){typeof h.destroy===s&&h.destroy(),_(),t.removeData(h.namespace).removeClass(h.cssClass),h.dropZone.not(t).removeClass(h.cssClass)},this.upload=function(e){typeof e.length===r&&(e=[e]),Q(null,e)}},i={init:function(i){return this.each(function(){new t(e(this)).init(i)})},option:function(t,i,s){s=s?s:n;var a=e(this).data(s);if(a){if(!t)return a.options();if("string"==typeof t&&typeof i===r)return a.option(t)}else e.error('No FileUpload with namespace "'+s+'" assigned to this element');return this.each(function(){var n=e(this).data(s);n?"string"==typeof t?n.option(t,i):n.options(t):e.error('No FileUpload with namespace "'+s+'" assigned to this element')})},destroy:function(t){return t=t?t:n,this.each(function(){var i=e(this).data(t);i?i.destroy():e.error('No FileUpload with namespace "'+t+'" assigned to this element')})},upload:function(t,i){return i=i?i:n,this.each(function(){var n=e(this).data(i);n?n.upload(t):e.error('No FileUpload with namespace "'+i+'" assigned to this element')})}},e.fn.fileUpload=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error('Method "'+t+'" does not exist on jQuery.fileUpload'),void 0):i.init.apply(this,arguments)}}(jQuery),/*
 * jQuery File Upload User Interface Plugin 4.4
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */
function(e){"use strict";var t,i,n="undefined",r="function",s=function(e){var t=0,i=[];this.complete=function(){t+=1,t===i.length+1&&(e(i),t=0,i=[])},this.push=function(e){i.push(e)},this.getList=function(){return i}};t=function(t,i){var a,o,l=this,c=new s(function(e){l.hideProgressBarAll(function(){l.resetProgressBarAll(),typeof l.onCompleteAll===r&&l.onCompleteAll(e)})}),u=function(e){return typeof e.uploadTable===r?e.uploadTable(e):e.uploadTable},h=function(e){return typeof e.downloadTable===r?e.downloadTable(e):e.downloadTable};this.requestHeaders={Accept:"application/json, text/javascript, */*; q=0.01"},this.dropZone=t,this.imageTypes=/^image\/(gif|jpeg|png)$/,this.previewMaxWidth=this.previewMaxHeight=80,this.previewLoadDelay=100,this.previewAsCanvas=!0,this.previewSelector=".file_upload_preview",this.progressSelector=".file_upload_progress div",this.cancelSelector=".file_upload_cancel button",this.cssClassSmall="file_upload_small",this.cssClassLarge="file_upload_large",this.cssClassHighlight="file_upload_highlight",this.dropEffect="highlight",this.uploadTable=this.downloadTable=null,this.buildUploadRow=this.buildDownloadRow=null,this.progressAllNode=null,this.loadImage=function(e,t,i,s,a,o){var l,c,u,h;return a&&!a.test(e.type)?null:(c=function(e){var t=document.createElement("canvas"),n=Math.min((i||e.width)/e.width,(s||e.height)/e.height);return n>1&&(n=1),e.width=parseInt(e.width*n,10),e.height=parseInt(e.height*n,10),o||typeof t.getContext!==r?e:(t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t)},l=document.createElement("img"),u=typeof URL!==n?URL:typeof webkitURL!==n?webkitURL:null,u&&typeof u.createObjectURL===r?(l.onload=function(){u.revokeObjectURL(this.src),t(c(l))},l.src=u.createObjectURL(e)):typeof FileReader!==n&&typeof FileReader.prototype.readAsDataURL===r?(l.onload=function(){t(c(l))},h=new FileReader,h.onload=function(e){l.src=e.target.result},h.readAsDataURL(e)):t(null),void 0)},this.addNode=function(e,t,i){e&&e.length&&t&&t.length?t.css("display","none").appendTo(e).fadeIn(function(){if(typeof i===r)try{i()}catch(e){throw t.stop(),e}}):typeof i===r&&i()},this.removeNode=function(e,t){e&&e.length?e.fadeOut(function(){if(e.remove(),typeof t===r)try{t()}catch(i){throw e.stop(),i}}):typeof t===r&&t()},this.replaceNode=function(e,t,i){e&&t?e.fadeOut(function(){t.css("display","none"),e.replaceWith(t),t.fadeIn(function(){if(typeof i===r)try{i()}catch(n){throw e.stop(),t.stop(),n}})}):typeof i===r&&i()},this.resetProgressBarAll=function(){l.progressbarAll&&l.progressbarAll.progressbar("value",0)},this.hideProgressBarAll=function(t){l.progressbarAll&&!e(u(l)).find(l.progressSelector+":visible:first").length?l.progressbarAll.fadeOut(t):typeof t===r&&t()},this.onAbort=function(e,t,i,n,r){r.removeNode(r.uploadRow,r.hideProgressBarAll)},this.cancelUpload=function(e,t,i,n,r){var s=n.readyState;n.abort(),("number"!=typeof s||2>s)&&r.onAbort(e,t,i,n,r)},this.initProgressBar=function(t,i){return t&&t.length?typeof t.progressbar===r?t.progressbar({value:i}):(t.addClass("progressbar").append(e("<div/>").css("width",i+"%")).progressbar=function(t,i){return this.each(function(){"destroy"===t?e(this).removeClass("progressbar").empty():e(this).children().css("width",i+"%")})},t):null},this.destroyProgressBar=function(e){return e&&e.length?e.progressbar("destroy"):null},this.initUploadProgress=function(e,t){!e.upload&&t.progressbar&&t.progressbar.progressbar("value",100)},this.initUploadProgressAll=function(){l.progressbarAll&&l.progressbarAll.is(":hidden")&&l.progressbarAll.fadeIn()},this.onSend=function(e,t,i,n,r){r.initUploadProgress(n,r)},this.onProgress=function(e,t,i,n,r){r.progressbar&&e.lengthComputable&&r.progressbar.progressbar("value",parseInt(100*(e.loaded/e.total),10))},this.onProgressAll=function(e){l.progressbarAll&&e.lengthComputable&&l.progressbarAll.progressbar("value",parseInt(100*(e.loaded/e.total),10))},this.onLoadAll=function(){c.complete()},this.initProgressBarAll=function(){l.progressbarAll||(l.progressbarAll=l.initProgressBar(typeof l.progressAllNode===r?l.progressAllNode(l):l.progressAllNode,0))},this.destroyProgressBarAll=function(){l.destroyProgressBar(l.progressbarAll)},this.loadPreviewImage=function(t,i,n){i=i||0,n.uploadRow.find(n.previewSelector).each(function(){var r=e(this),s=t[i];setTimeout(function(){n.loadImage(s,function(t){n.addNode(r,e(t))},n.previewMaxWidth,n.previewMaxHeight,n.imageTypes,!n.previewAsCanvas)},n.previewLoadDelay),i+=1})},this.initUploadRow=function(e,t,i,n,s){var a=s.uploadRow=typeof s.buildUploadRow===r?s.buildUploadRow(t,i,s):null;a&&(s.progressbar=s.initProgressBar(a.find(s.progressSelector),0),a.find(s.cancelSelector).click(function(e){s.cancelUpload(e,t,i,n,s),e.preventDefault()}),s.loadPreviewImage(t,i,s))},this.initUpload=function(e,t,i,n,s,a){s.initUploadRow(e,t,i,n,s),s.addNode(u(s),s.uploadRow,function(){typeof s.beforeSend===r?s.beforeSend(e,t,i,n,s,a):a()}),s.initUploadProgressAll()},this.parseResponse=function(t){return typeof t.responseText!==n?e.parseJSON(t.responseText):e.parseJSON(t.contents().text())},this.initDownloadRow=function(e,t,i,n,s){var a,o;try{a=s.response=s.parseResponse(n,s)}catch(l){if(typeof s.onError!==r)throw l;s.originalEvent=e,s.onError(l,t,i,n,s)}o=s.downloadRow=typeof s.buildDownloadRow===r?s.buildDownloadRow(a,s):null},this.onLoad=function(e,t,i,n,s){var a=u(s),o=h(s),l=function(){typeof s.onComplete===r&&s.onComplete(e,t,i,n,s),c.complete()};c.push(Array.prototype.slice.call(arguments,1)),s.initDownloadRow(e,t,i,n,s),!a||o&&a.get(0)!==o.get(0)?s.removeNode(s.uploadRow,function(){s.addNode(o,s.downloadRow,l)}):s.replaceNode(s.uploadRow,s.downloadRow,l)},this.dropZoneEnlarge=function(){o||(typeof l.dropZone.switchClass===r?l.dropZone.switchClass(l.cssClassSmall,l.cssClassLarge):(l.dropZone.addClass(l.cssClassLarge),l.dropZone.removeClass(l.cssClassSmall)),o=!0)},this.dropZoneReduce=function(){typeof l.dropZone.switchClass===r?l.dropZone.switchClass(l.cssClassLarge,l.cssClassSmall):(l.dropZone.addClass(l.cssClassSmall),l.dropZone.removeClass(l.cssClassLarge)),o=!1},this.onDocumentDragEnter=function(){l.dropZoneEnlarge()},this.onDocumentDragOver=function(){a&&clearTimeout(a),a=setTimeout(function(){l.dropZoneReduce()},200)},this.onDragEnter=this.onDragLeave=function(){l.dropZone.toggleClass(l.cssClassHighlight)},this.onDrop=function(){a&&clearTimeout(a),l.dropEffect&&typeof l.dropZone.effect===r?l.dropZone.effect(l.dropEffect,function(){l.dropZone.removeClass(l.cssClassHighlight),l.dropZoneReduce()}):(l.dropZone.removeClass(l.cssClassHighlight),l.dropZoneReduce())},this.init=function(){l.initProgressBarAll(),typeof l.initExtended===r&&l.initExtended()},this.destroy=function(){typeof l.destroyExtended===r&&l.destroyExtended(),l.destroyProgressBarAll()},e.extend(this,i)},i={init:function(i){return this.each(function(){e(this).fileUpload(new t(e(this),i))})},option:function(t,i,r){return!t||"string"==typeof t&&typeof i===n?e(this).fileUpload("option",t,i,r):this.each(function(){e(this).fileUpload("option",t,i,r)})},destroy:function(t){return this.each(function(){e(this).fileUpload("destroy",t)})},upload:function(t,i){return this.each(function(){e(this).fileUpload("upload",t,i)})}},e.fn.fileUploadUI=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error('Method "'+t+'" does not exist on jQuery.fileUploadUI'),void 0):i.init.apply(this,arguments)}}(jQuery),$(document).ready(function(){$(".boxgrid.captionfull").hover(function(){$(".cover",this).stop().animate({top:"61px"},{queue:!1,duration:160})},function(){$(".cover",this).stop().animate({top:"104px"},{queue:!1,duration:160})})});/**
 * KineticJS JavaScript Library v3.8.1
 * http://www.kineticjs.com/
 * Copyright 2012, Eric Rowell
 * Licensed under the MIT or GPL Version 2 licenses.
 * Date: Feb 26 2012
 *
 * Copyright (C) 2011 - 2012 by Eric Rowell
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Kinetic={};Kinetic.GlobalObject={stages:[],idCounter:0,isAnimating:!1,frame:{time:0,timeDiff:0,lastTime:0},extend:function(e,t){for(var i in t.prototype)t.prototype.hasOwnProperty(i)&&(e.prototype[i]=t.prototype[i])},_isaCanvasAnimating:function(){for(var e=0;this.stages.length>e;e++)if(this.stages[e].isAnimating)return!0;return!1},_runFrames:function(){for(var e=0;this.stages.length>e;e++)this.stages[e].isAnimating&&this.stages[e].onFrameFunc(this.frame)},_updateFrameObject:function(){var e=new Date,t=e.getTime();0===this.frame.lastTime?this.frame.lastTime=t:(this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff)},_animationLoop:function(){if(this.isAnimating){this._updateFrameObject(),this._runFrames();var e=this;requestAnimFrame(function(){e._animationLoop()})}},_handleAnimation:function(){var e=this;!this.isAnimating&&this._isaCanvasAnimating()?(this.isAnimating=!0,e._animationLoop()):this.isAnimating&&!this._isaCanvasAnimating()&&(this.isAnimating=!1)}},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Kinetic.Node=function(e){if(this.visible=!0,this.isListening=!0,this.name=void 0,this.alpha=1,this.x=0,this.y=0,this.scale={x:1,y:1},this.rotation=0,this.centerOffset={x:0,y:0},this.eventListeners={},this.drag={x:!1,y:!1,moving:!1},e)for(var t in e)"draggable"===t?this.draggable(e[t]):"draggableX"===t?this.draggableX(e[t]):"draggableY"===t?this.draggableY(e[t]):"listen"===t?this.listen(e[t]):this[t]=e[t]},Kinetic.Node.prototype={on:function(e,t){for(var i=e.split(" "),n=0;i.length>n;n++){var r=i[n],s=-1===r.indexOf("touch")?"on"+r:r,a=s.split("."),o=a[0],l=a.length>1?a[1]:"";this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:l,handler:t})}},off:function(e){for(var t=e.split(" "),i=0;t.length>i;i++){var n=t[i],r=-1===n.indexOf("touch")?"on"+n:n,s=r.split("."),a=s[0];if(this.eventListeners[a]&&s.length>1){for(var o=s[1],l=0;this.eventListeners[a].length>l;l++)if(this.eventListeners[a][l].name===o){this.eventListeners[a].splice(l,1),0===this.eventListeners[a].length&&(this.eventListeners[a]=void 0);break}}else this.eventListeners[a]=void 0}},show:function(){this.visible=!0},hide:function(){this.visible=!1},getZIndex:function(){return this.index},setScale:function(e,t){t?(this.scale.x=e,this.scale.y=t):(this.scale.x=e,this.scale.y=e)},getScale:function(){return this.scale},setPosition:function(e,t){this.x=e,this.y=t},getPosition:function(){return{x:this.x,y:this.y}},getAbsolutePosition:function(){for(var e=this.x,t=this.y,i=this.getParent();"Stage"!==i.className;)e+=i.x,t+=i.y,i=i.parent;return{x:e,y:t}},move:function(e,t){this.x+=e,this.y+=t},setRotation:function(e){this.rotation=e},getRotation:function(){return this.rotation},rotate:function(e){this.rotation+=e},listen:function(e){this.isListening=e},moveToTop:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices()},moveUp:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices()},moveDown:function(){var e=this.index;e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices())},moveToBottom:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices()},setZIndex:function(e){var t=this.index;this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices()},setAlpha:function(e){this.alpha=e},getAlpha:function(){return this.alpha},getAbsoluteAlpha:function(){for(var e=1,t=this;"Stage"!==t.className;)e*=t.alpha,t=t.parent;return e},_initDrag:function(){var e=this;this.on("mousedown.initdrag touchstart.initdrag",function(){var t=e.getStage(),i=t.getUserPosition();i&&(t.nodeDragging=e,t.nodeDragging.offset={},t.nodeDragging.offset.x=i.x-e.x,t.nodeDragging.offset.y=i.y-e.y)})},_dragCleanup:function(){this.drag.x||this.drag.y||(this.off("mousedown.initdrag"),this.off("touchstart.initdrag"))},draggable:function(e){if(e){var t=!this.drag.x&&!this.drag.y;this.drag.x=!0,this.drag.y=!0,t&&this._initDrag()}else this.drag.x=!1,this.drag.y=!1,this._dragCleanup()},draggableX:function(e){if(e){var t=!this.drag.x&&!this.drag.y;this.drag.x=!0,t&&this._initDrag()}else this.drag.x=!1,this._dragCleanup()},draggableY:function(e){if(e){var t=!this.drag.x&&!this.drag.y;this.drag.y=!0,t&&this._initDrag()}else this.drag.y=!1,this._dragCleanup()},isDragging:function(){return this.drag.moving},_handleEvents:function(e,t){function i(n){var r=n.eventListeners;if(r[e])for(var s=r[e],a=0;s.length>a;a++)s[a].handler.apply(n,[t]);"Stage"!==n.parent.className&&i(n.parent)}i(this)},moveTo:function(e){var t=this.parent;t.children.splice(this.index,1),t._setChildrenIndices(),e.children.push(this),this.index=e.children.length-1,this.parent=e,e._setChildrenIndices(),this.name&&(t.childrenNames[this.name]=void 0,e.childrenNames[this.name]=this)},getParent:function(){return this.parent},getLayer:function(){return"Layer"===this.className?this:this.getParent().getLayer()},getStage:function(){return this.getParent().getStage()},getName:function(){return this.name}},Kinetic.Container=function(){this.children=[],this.childrenNames={}},Kinetic.Container.prototype={_setChildrenIndices:function(){if("Stage"===this.className){var e=this.container.childNodes,t=e[0],i=e[1];this.container.innerHTML="",this.container.appendChild(t),this.container.appendChild(i)}for(var n=0;this.children.length>n;n++)this.children[n].index=n,"Stage"===this.className&&this.container.appendChild(this.children[n].canvas)},_drawChildren:function(){for(var e=this.children,t=0;e.length>t;t++){var i=e[t];"Shape"===i.className?i._draw(i.getLayer()):i._draw()}},getChildren:function(){return this.children},getChild:function(e){return this.childrenNames[e]},_add:function(e){e.name&&(this.childrenNames[e.name]=e),e.id=Kinetic.GlobalObject.idCounter++,e.index=this.children.length,e.parent=this,this.children.push(e)},_remove:function(e){void 0!==e.name&&(this.childrenNames[e.name]=void 0),this.children.splice(e.index,1),this._setChildrenIndices(),e=void 0}},Kinetic.Stage=function(e,t,i){this.className="Stage",this.container="string"==typeof e?document.getElementById(e):e,this.width=t,this.height=i,this.scale={x:1,y:1},this.dblClickWindow=400,this.targetShape=void 0,this.clickStart=!1,this.mousePos=void 0,this.mouseDown=!1,this.mouseUp=!1,this.touchPos=void 0,this.touchStart=!1,this.touchEnd=!1,this.bufferLayer=new Kinetic.Layer,this.backstageLayer=new Kinetic.Layer,this.bufferLayer.parent=this,this.backstageLayer.parent=this;var n=this.backstageLayer;this._stripLayer(n),this.bufferLayer.getCanvas().style.display="none",this.backstageLayer.getCanvas().style.display="none",this.bufferLayer.canvas.width=this.width,this.bufferLayer.canvas.height=this.height,this.container.appendChild(this.bufferLayer.canvas),this.backstageLayer.canvas.width=this.width,this.backstageLayer.canvas.height=this.height,this.container.appendChild(this.backstageLayer.canvas),this._listen(),this._prepareDrag();var r=Kinetic.GlobalObject.stages;r.push(this),this.id=Kinetic.GlobalObject.idCounter++,this.isAnimating=!1,this.onFrameFunc=void 0,Kinetic.Container.apply(this,[])},Kinetic.Stage.prototype={onFrame:function(e){this.onFrameFunc=e},start:function(){this.isAnimating=!0,Kinetic.GlobalObject._handleAnimation()},stop:function(){this.isAnimating=!1,Kinetic.GlobalObject._handleAnimation()},draw:function(){this._drawChildren()},_stripLayer:function(e){e.context.stroke=function(){},e.context.fill=function(){},e.context.fillRect=function(t,i,n,r){e.context.rect(t,i,n,r)},e.context.strokeRect=function(t,i,n,r){e.context.rect(t,i,n,r)},e.context.drawImage=function(){},e.context.fillText=function(){},e.context.strokeText=function(){}},_endDrag:function(e){this.nodeDragging&&this.nodeDragging.drag.moving&&(this.nodeDragging.drag.moving=!1,this.nodeDragging._handleEvents("ondragend",e)),this.nodeDragging=void 0},_prepareDrag:function(){var e=this;this.on("mousemove touchmove",function(t){if(e.nodeDragging){var i=e.getUserPosition();e.nodeDragging.drag.x&&(e.nodeDragging.x=i.x-e.nodeDragging.offset.x),e.nodeDragging.drag.y&&(e.nodeDragging.y=i.y-e.nodeDragging.offset.y),e.nodeDragging.getLayer().draw(),e.nodeDragging.drag.moving||(e.nodeDragging.drag.moving=!0,e.nodeDragging._handleEvents("ondragstart",t)),e.nodeDragging._handleEvents("ondragmove",t)}},!1),this.on("mouseup touchend mouseout",function(t){e._endDrag(t)})},setSize:function(e,t){for(var i=this.children,n=0;i.length>n;n++){var r=i[n];r.getCanvas().width=e,r.getCanvas().height=t,r.draw()}this.width=e,this.height=t,this.bufferLayer.getCanvas().width=e,this.bufferLayer.getCanvas().height=t,this.backstageLayer.getCanvas().width=e,this.backstageLayer.getCanvas().height=t},setScale:function(e,t){function i(e){for(var t=0;e.length>t;t++){var s=e[t];s.x*=a.scale.x/n,s.y*=a.scale.y/r,s.children&&i(s.children)}}var n=this.scale.x,r=this.scale.y;t?(this.scale.x=e,this.scale.y=t):(this.scale.x=e,this.scale.y=e);var s=this.children,a=this;i(s)},getScale:function(){return this.scale},clear:function(){for(var e=this.children,t=0;e.length>t;t++)e[t].clear()},toDataURL:function(e){function t(s){var a=r[s].getCanvas().toDataURL(),o=new Image;o.onload=function(){n.drawImage(this,0,0),s++,r.length>s?t(s):e(i.getCanvas().toDataURL())},o.src=a}var i=this.bufferLayer,n=i.getContext(),r=this.children;i.clear(),t(0)},remove:function(e){this.container.removeChild(e.canvas),this._remove(e)},on:function(e,t){for(var i=e.split(" "),n=0;i.length>n;n++){var r=i[n];this.container.addEventListener(r,t,!1)}},add:function(e){e.name&&(this.childrenNames[e.name]=e),e.canvas.width=this.width,e.canvas.height=this.height,this._add(e),e.draw(),this.container.appendChild(e.canvas)},_handleEvent:function(e){function t(t){t._draw(n);var i=s.getUserPosition(),o=t.eventListeners;if(s.targetShape&&t.id===s.targetShape.id&&(a=!0),t.visible&&void 0!==i&&r.isPointInPath(i.x,i.y)){if(s.mouseDown)return s.mouseDown=!1,s.clickStart=!0,t._handleEvents("onmousedown",e),!0;if(s.mouseUp)return s.mouseUp=!1,t._handleEvents("onmouseup",e),s.clickStart&&(s.nodeDragging&&!s.nodeDragging.drag.moving||!s.nodeDragging)&&(t._handleEvents("onclick",e),t.inDoubleClickWindow&&t._handleEvents("ondblclick",e),t.inDoubleClickWindow=!0,setTimeout(function(){t.inDoubleClickWindow=!1},s.dblClickWindow)),!0;if(s.touchStart){if(s.touchStart=!1,t._handleEvents("touchstart",e),o.ondbltap&&t.inDoubleClickWindow)for(var l=o.ondbltap,c=0;l.length>c;c++)l[c].handler.apply(t,[e]);return t.inDoubleClickWindow=!0,setTimeout(function(){t.inDoubleClickWindow=!1},s.dblClickWindow),!0}if(s.touchEnd)return s.touchEnd=!1,t._handleEvents("touchend",e),!0;if(o.touchmove)return t._handleEvents("touchmove",e),!0;if(!s.targetShape||!a&&t.id!==s.targetShape.id){if(s.targetShape){var u=s.targetShape.eventListeners;u&&s.targetShape._handleEvents("onmouseout",e)}return s.targetShape=t,t._handleEvents("onmouseover",e),!0}return t._handleEvents("onmousemove",e),!0}return s.targetShape&&s.targetShape.id===t.id?(s.targetShape=void 0,t._handleEvents("onmouseout",e),!0):!1}function i(e){for(var n=e.children,r=n.length-1;r>=0;r--){var s=n[r];if("Shape"===s.className){var a=t(s);if(a)return!0}else i(s)}return!1}e||(e=window.event),this._setMousePosition(e),this._setTouchPosition(e);var n=this.backstageLayer,r=n.getContext(),s=this;n.clear();for(var a=!1,o=this.children.length-1;o>=0;o--){var l=this.children[o];l.visible&&o>=0&&l.isListening&&i(l)&&(o=-1)}},_listen:function(){var e=this;this.container.addEventListener("mousedown",function(t){e.mouseDown=!0,e._handleEvent(t)},!1),this.container.addEventListener("mousemove",function(t){e.mouseUp=!1,e.mouseDown=!1,e._handleEvent(t)},!1),this.container.addEventListener("mouseup",function(t){e.mouseUp=!0,e.mouseDown=!1,e._handleEvent(t),e.clickStart=!1},!1),this.container.addEventListener("mouseover",function(t){e._handleEvent(t)},!1),this.container.addEventListener("mouseout",function(){e.mousePos=void 0},!1),this.container.addEventListener("touchstart",function(t){t.preventDefault(),e.touchStart=!0,e._handleEvent(t)},!1),this.container.addEventListener("touchmove",function(t){t.preventDefault(),e._handleEvent(t)},!1),this.container.addEventListener("touchend",function(t){t.preventDefault(),e.touchEnd=!0,e._handleEvent(t)},!1)},getMousePosition:function(){return this.mousePos},getTouchPosition:function(){return this.touchPos},getUserPosition:function(){return this.getTouchPosition()||this.getMousePosition()},_setMousePosition:function(e){var t=e.clientX-this._getContainerPosition().left+window.pageXOffset,i=e.clientY-this._getContainerPosition().top+window.pageYOffset;this.mousePos={x:t,y:i}},_setTouchPosition:function(e){if(void 0!==e.touches&&1===e.touches.length){var t=e.touches[0],i=t.clientX-this._getContainerPosition().left+window.pageXOffset,n=t.clientY-this._getContainerPosition().top+window.pageYOffset;this.touchPos={x:i,y:n}}},_getContainerPosition:function(){for(var e=this.container,t=0,i=0;e&&"BODY"!==e.tagName;)t+=e.offsetTop,i+=e.offsetLeft,e=e.offsetParent;return{top:t,left:i}},getContainer:function(){return this.container},getStage:function(){return this},getTargetShape:function(){return this.targetShape}},Kinetic.GlobalObject.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Layer=function(e){this.className="Layer",this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.style.position="absolute",Kinetic.Container.apply(this,[]),Kinetic.Node.apply(this,[e])},Kinetic.Layer.prototype={draw:function(){this._draw()},_draw:function(){this.clear(),this.visible&&this._drawChildren()},clear:function(){var e=this.getContext(),t=this.getCanvas();e.clearRect(0,0,t.width,t.height)},getCanvas:function(){return this.canvas},getContext:function(){return this.context},add:function(e){this._add(e)},remove:function(e){this._remove(e)}},Kinetic.GlobalObject.extend(Kinetic.Layer,Kinetic.Container),Kinetic.GlobalObject.extend(Kinetic.Layer,Kinetic.Node),Kinetic.Group=function(e){this.className="Group",Kinetic.Container.apply(this,[]),Kinetic.Node.apply(this,[e])},Kinetic.Group.prototype={_draw:function(){this.visible&&this._drawChildren()},add:function(e){this._add(e)},remove:function(e){this._remove(e)}},Kinetic.GlobalObject.extend(Kinetic.Group,Kinetic.Container),Kinetic.GlobalObject.extend(Kinetic.Group,Kinetic.Node),Kinetic.Shape=function(e){this.className="Shape",this.drawFunc=e.drawFunc,this.fill=e.fill,this.stroke=e.stroke,this.strokeWidth=e.strokeWidth,Kinetic.Node.apply(this,[e])},Kinetic.Shape.prototype={getContext:function(){return this.tempLayer.getContext()},getCanvas:function(){return this.tempLayer.getCanvas()},_draw:function(e){if(this.visible){var t=e.getStage(),i=e.getContext(),n=[];n.unshift(this);for(var r=this.parent;"Stage"!==r.className;)n.unshift(r),r=r.parent;for(var s=0;n.length>s;s++){var a=n[s];i.save(),(0!==a.x||0!==a.y)&&i.translate(a.x,a.y),(0!==a.centerOffset.x||0!==a.centerOffset.y)&&i.translate(a.centerOffset.x,a.centerOffset.y),0!==a.rotation&&i.rotate(a.rotation),(1!==a.scale.x||1!==a.scale.y)&&i.scale(a.scale.x,a.scale.y),(0!==a.centerOffset.x||0!==a.centerOffset.y)&&i.translate(-1*a.centerOffset.x,-1*a.centerOffset.y),1!==a.getAbsoluteAlpha()&&(i.globalAlpha=a.getAbsoluteAlpha())}i.save(),!t||1===t.scale.x&&1===t.scale.y||i.scale(t.scale.x,t.scale.y),this.tempLayer=e,this.drawFunc.call(this);for(var o=0;n.length>o;o++)i.restore();i.restore()}}},Kinetic.GlobalObject.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Geometry=function(e){this.fill=e.fill,this.stroke=e.stroke,this.strokeWidth=e.strokeWidth,Kinetic.Shape.apply(this,[e])},Kinetic.Geometry.prototype={_fillStroke:function(){var e=this.getContext();this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.lineWidth=void 0===this.strokeWidth?1:this.strokeWidth,e.strokeStyle=this.stroke,e.stroke())},setFill:function(e){this.fill=e},getFill:function(){return this.fill},setStroke:function(e){this.stroke=e},getStroke:function(){return this.stroke},setStrokeWidth:function(e){this.strokeWidth=e},getStrokeWidth:function(){return this.strokeWidth}},Kinetic.GlobalObject.extend(Kinetic.Geometry,Kinetic.Shape),Kinetic.Rect=function(e){this.width=e.width,this.height=e.height,e.drawFunc=function(){this.getCanvas();var e=this.getContext();e.beginPath(),e.rect(0,0,this.width,this.height),e.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.Rect.prototype={setWidth:function(e){this.width=e},getWidth:function(){return this.width},setHeight:function(e){this.height=e},getHeight:function(){return this.height},setSize:function(e,t){this.width=e,this.height=t}},Kinetic.GlobalObject.extend(Kinetic.Rect,Kinetic.Geometry),Kinetic.Circle=function(e){this.radius=e.radius,e.drawFunc=function(){this.getCanvas();var e=this.getContext();e.beginPath(),e.arc(0,0,this.radius,0,2*Math.PI,!0),e.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.Circle.prototype={setRadius:function(e){this.radius=e},getRadius:function(){return this.radius}},Kinetic.GlobalObject.extend(Kinetic.Circle,Kinetic.Geometry),Kinetic.Image=function(e){this.image=e.image,this.width=void 0!==e.width?e.width:e.image.width,this.height=void 0!==e.height?e.height:e.image.height,e.drawFunc=function(){this.getCanvas();var e=this.getContext();e.beginPath(),e.rect(0,0,this.width,this.height),e.closePath(),this._fillStroke(),e.drawImage(this.image,0,0,this.width,this.height)},Kinetic.Geometry.apply(this,[e])},Kinetic.Image.prototype={setImage:function(e){this.image=e},getImage:function(){return this.image},setWidth:function(e){this.width=e},getWidth:function(){return this.width},setHeight:function(e){this.height=e},getHeight:function(){return this.height},setSize:function(e,t){this.width=e,this.height=t}},Kinetic.GlobalObject.extend(Kinetic.Image,Kinetic.Geometry),Kinetic.Polygon=function(e){this.points=e.points,e.drawFunc=function(){var e=this.getContext();e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(var t=1;this.points.length>t;t++)e.lineTo(this.points[t].x,this.points[t].y);e.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.GlobalObject.extend(Kinetic.Polygon,Kinetic.Geometry),Kinetic.RegularPolygon=function(e){this.points=e.points,this.radius=e.radius,this.sides=e.sides,e.drawFunc=function(){var t=this.getContext();t.beginPath(),t.moveTo(0,0-this.radius);for(var i=1;e.sides>i;i++){var n=this.radius*Math.sin(2*i*Math.PI/this.sides),r=-1*this.radius*Math.cos(2*i*Math.PI/this.sides);t.lineTo(n,r)}t.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.RegularPolygon.prototype={setPoints:function(e){this.points=e},getPoints:function(){return this.points},setRadius:function(e){this.radius=e},getRadius:function(){return this.radius},setSides:function(e){this.sides=e},getSides:function(){return this.sides}},Kinetic.GlobalObject.extend(Kinetic.RegularPolygon,Kinetic.Geometry),Kinetic.Star=function(e){this.points=e.points,this.outerRadius=e.outerRadius,this.innerRadius=e.innerRadius,e.drawFunc=function(){var t=this.getContext();t.beginPath(),t.moveTo(0,0-this.outerRadius);for(var i=1;2*e.points>i;i++){var n=0===i%2?this.outerRadius:this.innerRadius,r=n*Math.sin(i*Math.PI/this.points),s=-1*n*Math.cos(i*Math.PI/this.points);t.lineTo(r,s)}t.closePath(),this._fillStroke()},Kinetic.Geometry.apply(this,[e])},Kinetic.Star.prototype={setPoints:function(e){this.points=e},getPoints:function(){return this.points},setOuterRadius:function(e){this.outerRadius=e},getOuterRadius:function(){return this.outerRadius},setInnerRadius:function(e){this.innerRadius=e},getInnerRadius:function(){return this.innerRadius}},Kinetic.GlobalObject.extend(Kinetic.Star,Kinetic.Geometry);var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Actor=function(e){if(!e)throw"No arguments passed to the function";this.id=e.id,this.name=e.name,this.grid=e.grid,this.extraInfo=e.extraInfo?e.extraInfo:void 0,this.opacity=this.grid.maxOpacity||1,this._focused=!1,this._selected=!1,this._hidden=!0,this._filtered=!1,this.fading="none",this.parents=[],e.parent&&this.parents.push(e.parent);var t=this,i=t.getDiv();i.addEventListener("mouseover",function(){var e;if(t.focus(),!t.isOrphan())for(var i in t.parents)e=t.parents[i].parent,e.focus(),e.colorHandler("mouseover"),t.parents[i].colorHandler("mouseover")},!1),i.addEventListener("mouseout",function(){var e;if(t.unfocus(),!t.isOrphan())for(var i in t.parents)e=t.parents[i].parent,e.unfocus(),e.colorHandler("mouseout"),t.parents[i].colorHandler("mouseout")},!1),i.addEventListener("click",function(){t.isSelected()?t.unselect():(t.select(),t.unfocus())},!1)},socialCheesecake.Actor.prototype.getParentsIds=function(){var e=this.parents,t=[];for(var i in e)t.push(e[i].id);return t},socialCheesecake.Actor.prototype.addClass=function(e){var t=this.getDiv(),i="",n=new RegExp("(^|\\s)"+e+"($|\\s)");t.getAttribute("class")?(i=t.getAttribute("class"),i.match(n)||(i=i.concat(" "+e),t.setAttribute("class",i))):(i=e,t.setAttribute("class",i))},socialCheesecake.Actor.prototype.removeClass=function(e){var t=this.getDiv(),i="",n=new RegExp("(^|\\s)"+e+"($|\\s)");t.getAttribute("class")&&(i=t.getAttribute("class"),i.match(n)&&(n=new RegExp("(^|\\s)"+e),i=t.getAttribute("class").replace(n,""),t.setAttribute("class",i)))},socialCheesecake.Actor.prototype.isSelected=function(){return this._selected},socialCheesecake.Actor.prototype.select=function(){this._selected=!0,this.addClass("selected")},socialCheesecake.Actor.prototype.unselect=function(){this._selected=!1,this.removeClass("selected")},socialCheesecake.Actor.prototype.focus=function(){this._focused=!0,this.addClass("focused")},socialCheesecake.Actor.prototype.unfocus=function(){this._focused=!1,this.removeClass("focused")},socialCheesecake.Actor.prototype.isFocused=function(){return this.getCheesecake().grid.divIdPrefix,this._focused},socialCheesecake.Actor.prototype.isOrphan=function(){var e=this,t=!1;return 1>e.parents.length&&(t=!0),t},socialCheesecake.Actor.prototype.hide=function(){var e=this.getDiv(),t=" display: none;";this._hidden=!0,e.getAttribute("style")&&(t=e.getAttribute("style").match(/display\s*:\s*[a-z]*;/)?e.getAttribute("style").replace(/display\s*:\s*[a-z]*;/,"display: none;"):e.getAttribute("style").concat("display: none;")),e.setAttribute("style",t),this.fading="none"},socialCheesecake.Actor.prototype.show=function(){var e=this.getDiv(),t=" display: inline;";this.isFiltered()||(this._hidden=!1,e.getAttribute("style")&&(t=e.getAttribute("style").match(/display\s*:\s*[a-z]*;/)?e.getAttribute("style").replace(/display\s*:\s*[a-z]*;/,"display: inline;"):e.getAttribute("style").concat("display: inline;")),e.setAttribute("style",t))},socialCheesecake.Actor.prototype.isHidden=function(){return this._hidden},socialCheesecake.Actor.prototype.isFiltered=function(){return this._filtered},socialCheesecake.Actor.prototype.isVisible=function(){return!(this.isHidden()||this.isFiltered())},socialCheesecake.Actor.prototype.filter=function(){this._filtered=!0,this.fadeOut(100,!0)},socialCheesecake.Actor.prototype.unfilter=function(){this._filtered=!1},socialCheesecake.Actor.prototype.setDivOpacity=function(e){e=e>1?1:e,e=0>e?0:e;var t=this.getDiv();this.opacity=e;var i="opacity: "+this.opacity+";";t.getAttribute("style")&&(i=t.getAttribute("style").replace(/opacity\s*:\s*[a-zA-Z0-9.]*;/g,""),i=i.concat("opacity: "+this.opacity+";")),t.setAttribute("style",i)},socialCheesecake.Actor.prototype.fade=function(e,t){var i=this,e=e?e:300,n=this.grid.minOpacity,r=this.grid.maxOpacity,s=1e3*(r-n)/(60*e),a=0;"out"==this.fading?(a=-1,s>this.opacity-n&&(s=this.opacity-n)):"in"==this.fading&&(a=1,s>r-this.opacity&&(s=r-this.opacity));var o=this.opacity+a*s;o=Math.round(1e3*o)/1e3,i.setDivOpacity(o),"out"==this.fading&&o>n||"in"==this.fading&&r>o?requestAnimFrame(function(){i.fade(e,t)}):(this.fading="none",t&&n>=o&&i.hide())},socialCheesecake.Actor.prototype.fadeOut=function(e,t){var i=this.grid.maxOpacity;this.fading="out",this.setDivOpacity(i),this.fade(e,t)},socialCheesecake.Actor.prototype.fadeIn=function(e,t){var i=this,n=this.grid.minOpacity;i.isFiltered()||(i.fading="in",i.setDivOpacity(n),t&&i.show(),i.fade(e,t))},socialCheesecake.Actor.prototype.getCheesecake=function(){return this.grid.parent},socialCheesecake.Actor.prototype.getDiv=function(){var e=this.grid.divIdPrefix,t=this.id,i=document.getElementById(e+t);return i}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Cheesecake=function(e){var t=e.sectors,i=this;if(i.center={x:e.center.x,y:e.center.y},i.rMax=e.rMax,i.sectors=[],i.highlightedSector=null,i.auxiliarSectors=[],i.stage=new Kinetic.Stage(e.container.id,e.container.width,e.container.height),i.stage.add(new Kinetic.Layer({name:"main"})),i.grid=new socialCheesecake.Grid({parent:this,grid_id:e.grid.id,divIdPrefix:e.grid.divIdPrefix||"actor_",maxOpacity:e.grid.maxOpacity||1,minOpacity:e.grid.minOpacity||0}),i.matchActorsNumber=e.match,null==i.matchActorsNumber&&(i.matchActorsNumber=!0),i._initialState={},i._changes={},e.text)for(var n in e.text)socialCheesecake.text[n]=e.text[n];if(e.colors)for(var r in e.colors)for(var s in e.colors[r])socialCheesecake.colors[r][s]=e.colors[r][s];if(e.callbacks)for(var r in e.callbacks)socialCheesecake.eventCallbackHandlers[r]=e.callbacks[r];if(i.syncSectorFocusCallbacks=i.syncSectorFocusCallbacks||!1,16>t.length){var a=new socialCheesecake.Sector({parent:i,center:i.center,label:"+",rOut:e.rMax,color:socialCheesecake.colors.extraSector.background,subsectors:[{name:"New Subsector 1"}],auxiliar:!0,type:"extraSector"});i.sectors[t.length]=a}for(var o=Math.min(t.length,16),l=0;o>l;l++){var c={parent:i,center:i.center,id:t[l].id,label:t[l].name,rOut:e.rMax,subsectors:t[l].subsectors,type:"normalSector"};i.sectors[l]=new socialCheesecake.Sector(c)}i.calculatePortions(),i._setInitialState(),i.draw()},socialCheesecake.Cheesecake.prototype.draw=function(){var e=this.sectors;this.addToLayer(e),this.stage.draw()},socialCheesecake.Cheesecake.prototype.disable=function(){var e=this.stage.getChildren();for(var t in e)e[t].listen(!1)},socialCheesecake.Cheesecake.prototype.enable=function(){var e=this.stage.getChildren();for(var t in e)e[t].listen(!0)},socialCheesecake.Cheesecake.prototype.focusAndBlurCheesecake=function(e){var t,i=this,n=socialCheesecake.eventCallbackHandlers.onSectorFocusBegin;for(var r in i.sectors)i.sectors[r]===e&&(t=r);if(null==t)throw"sector doesn't belong to this cheesecake";i.clearLayer(),i.setHighlightedSector(e),i.disable();var s={parent:i,center:i.center,phi:e.phi+e.delta,delta:2*Math.PI-e.delta,rOut:i.rMax,color:socialCheesecake.colors.greySector.background,auxiliar:!0,type:"greySector"},a=new socialCheesecake.Sector(s);i.auxiliarSectors.push(a);var o=this.getAuxiliarClone(t);i.addToLayer(a),i.addToLayer(o);var l=function(){a.changeProperty("label","GO BACK"),i.enable()},c=function(){a.resizeDelta({delta:3*Math.PI/2,anchor:"M",callback:l})},u=function(){var e=i.grid;e.hideAll(),e.show(i.sectors[t].actors),o.splitUp()},h=function(){var e=function(){o.resizeDelta({anchor:"M",callback:u})};n?i.syncSectorFocusCallbacks?n(i,e):(n(i),e()):e()};a.rotateTo({destination:5*Math.PI/4,callback:c,anchor:"M"}),o.rotateTo({destination:Math.PI/4,callback:h,anchor:"M"})},socialCheesecake.Cheesecake.prototype.recoverCheesecake=function(){var e=this,t=this.highlightedSector,i=this.stage.getChild("main");i.getChildren(),e.removeFromLayer(e.auxiliarSectors),e.auxiliarSectors=[],i.clear(),e.draw(),t&&(t.color=t.originalAttr.color,t.fan(!1),t.unfocus(),this.setHighlightedSector(null))},socialCheesecake.Cheesecake.prototype.unfocusAndUnblurCheesecake=function(){var e,t,i=this,n=this.auxiliarSectors,r=socialCheesecake.eventCallbackHandlers.onSectorUnfocusEnd,s=socialCheesecake.eventCallbackHandlers.onSectorUnfocusBegin,a=function(){for(var s in n)if(null!=n[s].simulate){var a={phi:n[s].phi,delta:n[s].delta,rOut:n[s].rOut};e=i.getAuxiliarClone(n[s].simulate,a)}else t=n[s];dummyNewDelta=i.sectors[e.simulate].delta,dummyNewPhi=i.sectors[e.simulate].phi,e.putTogether(),e.resizeDelta({anchor:"M",delta:dummyNewDelta,callback:function(){r&&r(i),i.grid.showAll(),e.rotateTo({destination:dummyNewPhi})}}),t.resizeDelta({anchor:"M",delta:2*Math.PI-dummyNewDelta,callback:function(){t.rotateTo({destination:dummyNewPhi+dummyNewDelta,callback:function(){i.recoverCheesecake()}})}})};s?i.syncSectorFocusCallbacks?s(i,a):(s(i),a()):a()},socialCheesecake.Cheesecake.prototype.addNewSector=function(){var e=this,t=this.sectors,i=this.getInitialState().sectors.length;console.log(i);var n,r={parent:e,center:e.center,id:i,label:"New Sector",rOut:e.rMax,subsectors:[{name:"New Subsector 1"}]};t.push(t[t.length-1]),n=new socialCheesecake.Sector(r),e.sectors[t.length-2]=n,e.calculatePortions()},socialCheesecake.Cheesecake.prototype.addNewSubsector=function(e){var t=this.getFocusedSector();if(null!=t)return e>t.subsectors.length?(console.log("Cannot add new subsector in position "+e+".This sector only has "+t.subsectors.length+" subsectors"),void 0):(t.turnExtraIntoNewSubsector(e),void 0)},socialCheesecake.Cheesecake.prototype.updateActorMembership=function(e){var t=this._changes;this.grid,t.actors=t.actors||[];var i=t.actors,n=!1,r=e.id,s=e.getParentsIds(),a=e.name,o=e.extraInfo,l=socialCheesecake.eventCallbackHandlers.onChange;for(var c in i)i[c].id==r&&(n=!0,i[c].subsectors=s);n||i.push({id:r,subsectors:s,name:a,extraInfo:o,justAdded:!1}),l&&l(this)},socialCheesecake.Cheesecake.prototype.updateSectorChanges=function(e){var t=this._changes;t.sectors=t.sectors||[];var i=t.sectors,n=!1;for(var r in i)i[r].id==e.id&&(n=!0,i[r].subsectors=e.getSubsectorsIds(),i[r].name=e.label);n||i.push({id:e.id,subsectors:e.getSubsectorsIds(),name:e.label})},socialCheesecake.Cheesecake.prototype.calculatePortions=function(){var e,t=this.sectors,i=this.matchActorsNumber,n=Math.PI/8,r=Math.PI/8,s=5*Math.PI/4-n/2,a=[],o=[],l=t.length,c=0,u=2*Math.PI;t[t.length-1].auxiliar&&(t[t.length-1].phi=s,t[t.length-1].delta=n,t[t.length-1].originalAttr.phi=t[t.length-1].phi,t[t.length-1].originalAttr.delta=t[t.length-1].delta,s+=n,l=t.length-1,u-=n),e=i?u-l*r:0;for(var h=0;l>h;h++)a[h]=t[h].actors.length,c+=a[h],o[h]=r,i||(o[h]=u/l);for(var h=0;l>h;h++)0!=c?o[h]+=a[h]/c*e:o[h]=u/l,t[h].phi=s,t[h].delta=o[h],t[h].originalAttr.phi=t[h].phi,t[h].originalAttr.delta=t[h].delta,s+=t[h].delta},socialCheesecake.Cheesecake.prototype.addToLayer=function(e,t){var t=t||this.stage.getChild("main");if(e instanceof Array)for(var i in e)t.add(e[i].getRegion());else t.add(e.getRegion())},socialCheesecake.Cheesecake.prototype.removeFromLayer=function(e,t){var t=t||this.stage.getChild("main");if(e instanceof Array)for(var i in e)try{t.remove(e[i].getRegion())}catch(n){}else t.remove(e.getRegion())},socialCheesecake.Cheesecake.prototype.drawLayer=function(e,t){var e=e||this.stage.getChild("main");if(t=null!=t?t:!0){var i=e.getContext();i.restore(),i.save()}e.draw()},socialCheesecake.Cheesecake.prototype.clearLayer=function(e){for(var e=e||this.stage.getChild("main"),t=e.getChildren(),i=t.length-1;i>=0;i--)e.remove(t[i]);e.clear()},socialCheesecake.Cheesecake.prototype.setHighlightedSector=function(e){var t=socialCheesecake.eventCallbackHandlers.onSectorHighlight;this.highlightedSector!=e&&(this.highlightedSector=e,t&&t(this))},socialCheesecake.Cheesecake.prototype.getAuxiliarClone=function(e,t){var i=null,n=this,r=null,s=n.auxiliarSectors,a={},t=t||{};for(var o in s)null!=s[o].simulate&&(i=s[o]);if(null!=e){r=n.sectors[e],a={phi:t.phi||r.phi,delta:t.delta||r.delta,rOut:t.rOut||r.rOut,label:t.label||r.label,borderColor:t.borderColor||socialCheesecake.colors[r.type].border,color:t.color||r.color,fontColor:t.fontColor||socialCheesecake.colors[r.type].font,simulate:e,auxiliar:!0,type:"dummySector"},i||(i=new socialCheesecake.Sector({center:n.center,parent:n}),this.auxiliarSectors.push(i));for(var l in a)i[l]=a[l]}return i},socialCheesecake.Cheesecake.prototype.getFocusedSector=function(){var e=this.getAuxiliarClone(),t=this.sectors,i=null;return e&&(i=t[e.simulate]),i},socialCheesecake.Cheesecake.prototype.getSectorById=function(e){var t,i=this.sectors;for(var n in i)if(i[n].id==e){t=i[n];break}return t},socialCheesecake.Cheesecake.prototype.getSubsectorById=function(e){var t,i,n=this.sectors;for(var r in n){t=n[r].subsectors;for(var s in t)if(t[s].id==e){i=t[s];
break}}return i},socialCheesecake.Cheesecake.prototype.getChanges=function(){return this._changes},socialCheesecake.Cheesecake.prototype.getInitialState=function(){return this._initialState},socialCheesecake.Cheesecake.prototype.filter=function(e){console.log("search");var t=this.grid,i=this.highlightedSector;socialCheesecake.SearchEngine.filter(e,t.actors),i?t.fadeIn(i.actors,100,!0):t.fadeIn(t.actors,100,!0)},socialCheesecake.Cheesecake.prototype._setInitialState=function(){var e=this._initialState,t=this.grid.actors,i=this.sectors;e.actors=[];for(var n in t)e.actors.push({id:t[n].id,subsectors:t[n].getParentsIds(),name:t[n].name,extraInfo:t[n].extraInfo});e.sectors=[];for(var r in i)"normalSector"==i[r].type&&e.sectors.push({id:i[r].id,name:i[r].label,subsectors:i[r].getSubsectorsIds()})}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.colors={normalSector:{background:"#FEEEBD",border:"#D19405",font:"#D19405",click:"#FFE481",mouseover:"#FFE481",mouseup:"#FEEEBD",mouseout:"#FEEEBD"},extraSector:{background:"#FFBABA",border:"#BD1823",font:"#BD1823",click:"#FF5964",mouseover:"#FF5964",mouseup:"#FFBABA",mouseout:"#FFBABA"},greySector:{background:"#f5f5f5",click:"#f5f5f5",mouseover:"#f5f5f5",mouseout:"#f5f5f5",mouseup:"#f5f5f5",font:"#666",border:"#666"}},socialCheesecake.colors.normalSubsector=socialCheesecake.colors.normalSector,socialCheesecake.colors.extraSubsector=socialCheesecake.colors.extraSector,socialCheesecake.colors.greySubsector=socialCheesecake.colors.greySector})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.eventCallbackHandlers={normalSector:{mouseover:function(e){var t=e.getCheesecake();document.body.style.cursor="pointer",t.grid.focus(e.actors),e.focus(),null!=t.highlightedSector?t.highlightedSector.fan(!1,function(){e.fan(!0)}):e.fan(!0),t.setHighlightedSector(e)},mouseout:function(e){var t=e.getCheesecake();document.body.style.cursor="default",t.grid.unfocusAll(),e.unfocus(),t.setHighlightedSector(null),e.fan(!1)},click:function(e){var t=e.getCheesecake();t.focusAndBlurCheesecake(e),t.grid.unfocus(e.actors)}},extraSector:{mouseover:function(e){e.getCheesecake(),document.body.style.cursor="pointer",e.focus()},mouseout:function(e){e.getCheesecake(),document.body.style.cursor="default",e.unfocus()},click:function(e){var t=e.getCheesecake();t.focusAndBlurCheesecake(e),t.addNewSector()}},greySector:{mouseout:function(){document.body.style.cursor="default"},click:function(e){e.changeProperty("label",""),e.getCheesecake().unfocusAndUnblurCheesecake()},mouseup:function(){},mouseover:function(){document.body.style.cursor="pointer"}},normalSubsector:{mouseover:function(e){var t=e.getCheesecake();document.body.style.cursor="pointer",t.grid.focus(e.actors),t.setHighlightedSector(e)},mouseout:function(e){var t=e.getCheesecake();document.body.style.cursor="default",t.grid.unfocus(e.actors),t.setHighlightedSector(e.parent)},click:function(e){var t=e.getCheesecake(),i=t.grid.getSelectedActors();i.length>0&&e.changeMembership(i)},mouseup:function(){}},extraSubsector:{mouseover:function(e){e.resizeWidth({width:1.5*(e.originalAttr.rOut-e.originalAttr.rIn),anchor:"m",step:1})},mouseout:function(e){e.resizeWidth({width:e.originalAttr.rOut-e.originalAttr.rIn,anchor:0==e.rIn?"rin":"m",step:1,priority:!0})},click:function(e){e.parent.turnExtraIntoNewSubsector(e.simulate)},mouseup:function(){}},onSectorHighlight:null,onSubsectorAddedBegin:null,onSubsectorAddedEnd:null,onSectorFocusBegin:null,onSectorFocusEnd:null,onSectorUnfocusBegin:null,onSectorUnfocusEnd:null,onChange:null}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Grid=function(e){if(!e)throw"No arguments passed to the function";this.actors=[],this.orphans=[],this.parent=e.parent,this.id=e.grid_id,this.divIdPrefix=e.divIdPrefix,this.maxOpacity=e.maxOpacity,this.minOpacity=e.minOpacity},socialCheesecake.Grid.prototype.addActor=function(e,t){var i=this.actors,n=this.orphans,r=null,s=!1;for(var a in i)if(i[a].id==e.id){s=!0,r=i[a];var o=!1;for(var l in r.parents)r.parents[l]==t&&(o=!0);o||r.parents.push(t)}if(!s){var c=!1;for(var a in n)n[a].id==e.id&&(c=!0,r=n[a],n.splice(a,1),r.removeClass("orphan"),r.parents.push(t));c||(e.parent=t,e.grid=this,r=new socialCheesecake.Actor(e)),i.push(r)}return r},socialCheesecake.Grid.prototype.removeActor=function(e){var t=this.actors,i=this.orphans;for(var n in t)t[n].id==e.id&&e.isOrphan()&&(t.splice(n,1),i.push(e),e.addClass("orphan"))},socialCheesecake.Grid.prototype.getActor=function(e){var t=this.actors;for(var i in t)if(this.actors[i].id==e)return this.actors[i];return null},socialCheesecake.Grid.prototype.getSelectedActors=function(){var e=this.actors,t=this.orphans,i=[];for(var n in e)e[n].isSelected()&&i.push(e[n]);for(var n in t)t[n].isSelected()&&i.push(t[n]);return i},socialCheesecake.Grid.prototype.select=function(e){var t;if(e instanceof Array)for(var i in e)t=e[i],t&&(t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.select());else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.select()},socialCheesecake.Grid.prototype.selectAll=function(){this.select(this.actors)},socialCheesecake.Grid.prototype.unselect=function(e){var t;if(e instanceof Array)for(var i in e)t=e[i],t&&(t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.unselect());else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.unselect()},socialCheesecake.Grid.prototype.unselectAll=function(){this.unselect(this.actors)},socialCheesecake.Grid.prototype.focus=function(e){var t;if(e instanceof Array)for(var i in e)t=e[i],t&&(t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.focus());else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.focus()},socialCheesecake.Grid.prototype.focusAll=function(){this.focus(this.actors)},socialCheesecake.Grid.prototype.hide=function(e,t){var i;if(e instanceof Array)for(var n in e)i=e[n],i&&(i instanceof socialCheesecake.Actor||(i=this.getActor(i)),(!i.isSelected()||t)&&i.hide());else i=e instanceof socialCheesecake.Actor?e:this.getActor(e),i.hide()},socialCheesecake.Grid.prototype.hideAll=function(){this.hide(this.actors)},socialCheesecake.Grid.prototype.show=function(e,t){var i;if(e instanceof Array)for(var n=0;e.length>n;n++)i=e[n],i instanceof socialCheesecake.Actor||(i=this.getActor(i)),(!i.isSelected()||t)&&i.show();else i=e instanceof socialCheesecake.Actor?e:this.getActor(e),(!i.isSelected()||t)&&i.show()},socialCheesecake.Grid.prototype.showAll=function(){this.show(this.actors)},socialCheesecake.Grid.prototype.unfocus=function(e){var t;if(e instanceof Array)for(var i in e)t=e[i],t instanceof socialCheesecake.Actor||(t=this.getActor(t)),t.unfocus();else t=e,e instanceof socialCheesecake.Actor||(t=this.getActor(e)),t.unfocus()},socialCheesecake.Grid.prototype.unfocusAll=function(){this.unfocus(this.actors)},socialCheesecake.Grid.prototype.fadeOut=function(e,t,i,n){var r;if(e instanceof Array)for(var s in e)r=e[s],r&&(r instanceof socialCheesecake.Actor||(r=this.getActor(r)),(!r.isSelected()||n)&&r.fadeOut(t,i));else r=e instanceof socialCheesecake.Actor?e:this.getActor(e),(!r.isSelected()||n)&&r.fadeOut(t,i)},socialCheesecake.Grid.prototype.fadeOutAll=function(e,t){this.fadeOut(this.actors,e,t)},socialCheesecake.Grid.prototype.fadeIn=function(e,t,i,n){var r;if(e instanceof Array)for(var s=0;e.length>s;s++)r=e[s],r instanceof socialCheesecake.Actor||(r=this.getActor(r)),(!r.isSelected()||n)&&r.fadeIn(t,i);else r=e instanceof socialCheesecake.Actor?e:this.getActor(e),(!r.isSelected()||n)&&r.fadeIn(t,i)},socialCheesecake.Grid.prototype.fadeInAll=function(e,t){this.fadeIn(this.actors,e,t)}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.SearchEngine={filter:function(e,t){var t=t,i=new RegExp(e.toLowerCase());for(var n in t){var r=t[n];r.name.toLowerCase().match(i)?r.unfilter():r.filter()}}}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Sector=function(e){var t={center:{x:0,y:0},rIn:0,rOut:300,delta:Math.PI/2,phi:0,label:"",color:socialCheesecake.colors.normalSector.background,auxiliar:!1,type:"normalSector"};e||(e=t);for(var i in t)i in e&&void 0!==e[i]||(e[i]=t[i]);for(e.phi%=2*Math.PI;0>e.phi;)e.phi+=2*Math.PI;if(0>=e.delta||e.delta>2*Math.PI)throw"Delta must be greater than 0 and less than 2*pi";if(void 0!=e.id&&(this.id=e.id),this.x=e.center.x,this.y=e.center.y,this.rOut=e.rOut,this.rIn=e.rIn,this.phi=e.phi,this.delta=e.delta,this.label=e.label,this.color=e.color,e.fontColor&&(this.fontColor=e.fontColor),e.borderColor&&(this.borderColor=e.borderColor),e.mouseover&&(this.mouseover=e.mouseover),e.mouseup&&(this.mouseup=e.mouseup),e.mouseout&&(this.mouseout=e.mouseout),e.click&&(this.click=e.click),this.subsectors=[],this.extraSubsectors=[],this.actors=[],null!=e.parent&&(this.parent=e.parent),null!=e.simulate&&(this.simulate=e.simulate),this.auxiliar=e.auxiliar,this.type=e.type,null!=e.subsectors)for(var n in e.subsectors){var r=new socialCheesecake.Subsector({id:e.subsectors[n].id,label:e.subsectors[n].name,parent:this,x:this.x,y:this.y,phi:null,delta:null,rIn:null,rOut:null,actors:e.subsectors[n].actors,color:socialCheesecake.colors.normalSector.background});this.subsectors.push(r)}this.originalAttr={x:this.x,y:this.y,phi:this.phi,delta:this.delta,rIn:this.rIn,rOut:this.rOut,color:this.color,label:this.label,simulate:this.simulate,subsectors:this.subsectors,auxiliar:this.auxiliar,type:this.type},this._region=null},socialCheesecake.Sector.newSubsectorIdRoot="new_",socialCheesecake.Sector.prototype._draw=function(e){var t=this.x,i=this.y,n=this.phi,r=this.delta,s=this.rIn,a=this.rOut,o=this.color||socialCheesecake.colors[u].background,l=this.label,c=this.actors,u=this.type,h=this.fontColor||socialCheesecake.colors[u].font,d=.7*(a-s)+s,f=d;e.restore(),e.save(),e.beginPath(),e.arc(t,i,a,-n,-(n+r),!0),e.lineTo(t+s*Math.cos(-n-r),i+s*Math.sin(-n-r)),e.arc(t,i,s,-(n+r),-n,!1),e.closePath(),e.fillStyle=o,e.fill(),e.lineWidth=2,e.strokeStyle=this.borderColor||socialCheesecake.colors[u].border,e.stroke(),this.auxiliar&&"+"==l?socialCheesecake.text.addPlusCharacter(e,t,i,.5*(a-s)+s,n,r,h):this.parent.auxiliar&&"+"==this.parent.label?socialCheesecake.text.writeCurvedText(l,e,t,i,d,n,r,h,"newStyle"):socialCheesecake.text.writeCurvedText(l,e,t,i,d,n,r,h),this.auxiliar||(f-=socialCheesecake.text.getTextHeight(l),socialCheesecake.text.writeCurvedText("("+c.length+")",e,t,i,f,n,r,h))},socialCheesecake.Sector.prototype.getRegion=function(){if(null==this._region){var e=this;e._region=new Kinetic.Geometry({drawFunc:function(){var t=this.getContext();e._draw(t)},name:e.label}),e._region.on("mouseover",function(){e.eventHandler("mouseover")}),e._region.on("mouseout",function(){e.eventHandler("mouseout")}),e._region.on("click",function(){e.eventHandler("click")}),e._region.on("mouseup",function(){e.eventHandler("mouseup")})}return this._region},socialCheesecake.Sector.prototype.getLayer=function(){return this.getRegion().getParent()?this.getRegion().getLayer():void 0},socialCheesecake.Sector.prototype.eventHandler=function(e){this.colorHandler(e),this.callbackHandler(e)},socialCheesecake.Sector.prototype.colorHandler=function(e){var t=this,i=t.type;null!=t[e]&&null!=t[e].color?t.changeColor(t[e].color):socialCheesecake.colors[i]&&socialCheesecake.colors[i][e]&&t.changeColor(socialCheesecake.colors[i][e])},socialCheesecake.Sector.prototype.callbackHandler=function(e){var t=this,i=t.type;null!=t[e]&&null!=t[e].callback?t[e].callback(t):socialCheesecake.eventCallbackHandlers[i]&&socialCheesecake.eventCallbackHandlers[i][e]&&socialCheesecake.eventCallbackHandlers[i][e](t)},socialCheesecake.Sector.prototype.getCheesecake=function(){return this.parent},socialCheesecake.Sector.prototype.getIndex=function(){var e=this,t=e.getCheesecake(),i=null;for(var n in t.sectors)t.sectors[n]===e&&(i=n);return i},socialCheesecake.Sector.prototype.turnExtraIntoNewSubsector=function(e){var t=this,i=this.getCheesecake(),n=this.extraSubsectors.concat(this.subsectors),r=[],s=[],a=1.5,o="m",l=socialCheesecake.eventCallbackHandlers.onSubsectorAddedBegin,c=socialCheesecake.eventCallbackHandlers.onSubsectorAddedEnd;if(this.subsectors.length>=4)return console.log("Reached subsectors limit. No new subsectors will be added"),void 0;for(var u in n){var h={label:n[u].label,x:n[u].x,y:n[u].y,rIn:n[u].rIn,rOut:n[u].rOut,phi:n[u].phi,delta:n[u].delta,type:n[u].type,auxiliar:!0,parent:n[u].parent,color:n[u].color};this.extraSubsectors.length>u?s.push(new socialCheesecake.Subsector(h)):r.push(new socialCheesecake.Subsector(h))}i.disable(),i.addToLayer(r.concat(s)),i.removeFromLayer(n),this.addNewSubsector(e),null!=l&&l(t.subsectors[e]);var d=this.subsectors;this.extraSubsectors=[];var f=t.extraSubsectors,p=this.getCheesecake().getAuxiliarClone();p.calculateSubportions(),p.label="",p.color=socialCheesecake.colors.normalSector.background;for(var u in s)u!=e&&s[u].resizeWidth({width:0,anchor:"m",step:a});for(var m=function(){for(var t=0;r.length>t;t++)r[t].changeMediumRadius({radius:e>t?d[t].getMediumRadius():d[t+1].getMediumRadius(),step:a});s[e].type="normalSubsector",s[e].color=d[e].color,s[e].label="",0==e?o="rin":e==s.length-1&&(o="rout"),s[e].resizeWidth({width:"m"==o||0==f.length?d[e].getWidth():f[e].getWidth()+d[e].getWidth(),anchor:o,step:a,callback:g})},g=function(){if(s[e].label=d[e].label,s[e].changeMediumRadius({radius:d[e].getMediumRadius(),step:a,callback:d.length>=4?v:function(){}}),4>d.length){t.createExtraSubsectors(),p.calculateSubportions(),f=t.extraSubsectors;var n={label:"+",x:f[e].x,y:f[e].y,phi:s[e].phi,delta:s[e].delta,type:"extraSubsector",auxiliar:!0,parent:s[e].parent,color:f[e].color};s.push(new socialCheesecake.Subsector(n)),s.push(new socialCheesecake.Subsector(n));for(var r=!1,o=0;s.length>o;o++)o!=e&&(s[o].rIn=e>o?f[o].getMediumRadius():f[o-1].getMediumRadius(),s[o].rOut=s[o].rIn,i.addToLayer(s[o]),s[o].resizeWidth({width:e>o?f[o].getWidth():f[o-1].getWidth(),anchor:"m",step:a,callback:function(){return r?void 0:(r=!0,v)}()}))}},v=function(){i.removeFromLayer(r.concat(s)),i.addToLayer(d),f&&i.addToLayer(f),i.drawLayer(),i.enable(),null!=c&&c(t.subsectors[e])},u=0;r.length>u;u++)r[u].resizeWidth({width:e>u?d[u].getWidth():d[u+1].getWidth(),anchor:"m",step:a,callback:0==u?m:function(){}})},socialCheesecake.Sector.prototype.splitUp=function(){var e=this.getCheesecake(),t=socialCheesecake.eventCallbackHandlers.onSectorFocusEnd,i=null!=this.simulate?e.sectors[this.simulate]:this,n=i.subsectors;4>n.length&&i.createExtraSubsectors(),this.calculateSubportions(),e.addToLayer(n.concat(i.extraSubsectors)),e.drawLayer(),t&&t(e)},socialCheesecake.Sector.prototype.putTogether=function(){var e=this.getCheesecake(),t=null!=this.simulate?e.sectors[this.simulate]:this,i=t.subsectors,n=t.extraSubsectors;e.removeFromLayer(i.concat(n)),t.extraSubsectors=[]},socialCheesecake.Sector.prototype.createExtraSubsectors=function(){var e=this.getCheesecake(),t=this,i=this.subsectors,n=this.extraSubsectors||[],r={x:e.center.x,y:e.center.y,label:"+",parent:t,auxiliar:!0,color:socialCheesecake.colors.extraSector.background,type:"extraSubsector"};n.splice(0,n.length);for(var s=0;i.length+1>s;s++){r.simulate=s;var a=new socialCheesecake.Subsector(r);n.push(a)}},socialCheesecake.Sector.prototype.calculateSubportions=function(){var e=this.getCheesecake(),t=null!=this.simulate?e.sectors[this.simulate]:this,i=t.subsectors,n=t.extraSubsectors,r=this.phi,s=this.delta,a=this.rOut,o=this.rIn,l=n.length==i.length+1?.06*(a-o):0,c=(a-o-n.length*l)/i.length;for(var u in i)o+=l,i[u].rIn=o,i[u].originalAttr.rIn=i[u].rIn,i[u].rOut=o+c,i[u].originalAttr.rOut=i[u].rOut,i[u].phi=r,i[u].originalAttr.phi=i[u].phi,i[u].delta=s,i[u].originalAttr.delta=i[u].delta,o+=c;o=this.rIn;for(var u in n)n[u].rIn=o,n[u].originalAttr.rIn=n[u].rIn,n[u].rOut=o+l,n[u].originalAttr.rOut=n[u].rOut,n[u].delta=s,n[u].originalAttr.delta=n[u].delta,n[u].phi=r,n[u].originalAttr.phi=n[u].phi,o+=l+c},socialCheesecake.Sector.prototype.changeColor=function(e){this.changeProperty("color",e)},socialCheesecake.Sector.prototype.changeLabel=function(e){this.changeProperty("label",e)},socialCheesecake.Sector.prototype.changeProperty=function(e,t){var i=this,n=i.getCheesecake(),r=i.getLayer();i[e]=t,"normalSector"==i.type&&"label"==e&&n.updateSectorChanges(i),r&&n.drawLayer(r)},socialCheesecake.Sector.prototype.resizeDelta=function(e){if(!e)throw"No arguments passed to the function";var t=this,i=t.delta,n=t.phi,r=.05,s=Math.PI/2,a=1,o=!0,l=0;e.step&&(r=e.step),e.delta&&(s=e.delta),e.anchor&&(("b"==e.anchor.toLowerCase()||"beginning"==e.anchor)&&(a=0),("m"==e.anchor.toLowerCase()||"middle"==e.anchor)&&(a=.5),("e"==e.anchor.toLowerCase()||"end"==e.anchor)&&(a=1)),i>s?(r>i-s&&(r=i-s),i-=r,n+=a*r,l=-1):s>i&&(r>s-i&&(r=s-i),i+=r,n-=a*r,l=1),e.priority&&(t.growDelta=l),null!=t.growDelta&&l!=t.growDelta?o=!1:(o=!0,t.growDelta=l),t.delta=i,t.phi=n,t.getCheesecake().drawLayer(t.getLayer()),o&&Math.round(1e3*i)!=Math.round(1e3*s)?requestAnimFrame(function(){t.resizeDelta(e)}):(t.growDelta=null,e.callback&&e.callback())},socialCheesecake.Sector.prototype.resizeWidth=function(e){var t=this,i=this.rIn,n=this.rOut,r=n-i,s=.05,a=r,o=1,l=0,c=!0;if(e.step&&(s=e.step),null!=e.width&&(a=e.width),0>a)throw"Width must be greater than or equal to zero";e.anchor&&(("i"==e.anchor.toLowerCase()||"in"==e.anchor||"rin"==e.anchor.toLowerCase())&&(o=1),("m"==e.anchor.toLowerCase()||"middle"==e.anchor)&&(o=.5),("o"==e.anchor.toLowerCase()||"out"==e.anchor||"rout"==e.anchor.toLowerCase())&&(o=0)),r>a?(s>r-a&&(s=r-a),l=-1):a>r&&(s>a-r&&(s=a-r),l=1),e.priority&&(t.grow=l),null!=t.grow&&l!=t.grow?c=!1:(c=!0,t.grow=l),n+=l*o*s,i-=l*(1-o)*s,r=n-i,0>i&&(n+=this.rIn-i,i=0),0>=r&&t.getCheesecake().removeFromLayer(t),t.rOut=n,t.rIn=i,t.getCheesecake().drawLayer(t.getLayer()),c&&Math.round(1e3*r)!=Math.round(1e3*a)?requestAnimFrame(function(){t.resizeWidth(e)}):(t.grow=null,e.callback&&e.callback())},socialCheesecake.Sector.prototype.changeMediumRadius=function(e){var t=this,i=this.rIn,n=this.rOut,r=this.getMediumRadius();0>e.radius-this.getWidth()/2&&(e.radius=this.getWidth()/2);var s=e.radius||r,a=e.step||.05;s>r?(a>s-r&&(a=s-r),i+=a,n+=a):(a>r-s&&(a=r-s),i-=a,n-=a),this.rIn=Math.round(1e3*i)/1e3,this.rOut=Math.round(1e3*n)/1e3,r=this.getMediumRadius(),t.getCheesecake().drawLayer(t.getLayer()),Math.round(1e3*r)!=Math.round(1e3*s)?requestAnimFrame(function(){t.changeMediumRadius(e)}):e.callback&&e.callback()},socialCheesecake.Sector.prototype.focus=function(){var e=this;e.changeProperty("rOut",1.05*e.originalAttr.rOut)},socialCheesecake.Sector.prototype.unfocus=function(){var e=this;e.changeProperty("rOut",e.originalAttr.rOut)},socialCheesecake.Sector.prototype.fan=function(e,t){var i=this,n=Math.PI/5;e&&i.delta>=n||(e?(i.getRegion().moveToTop(),i.resizeDelta({anchor:"m",delta:n,callback:t})):i.resizeDelta({anchor:"m",delta:i.originalAttr.delta,priority:!0,callback:t}))},socialCheesecake.Sector.prototype.rotateTo=function(e){var t=this,i=this.phi%(2*Math.PI),n=this.delta,r=.05,s=0;if(!e)throw"No arguments passed to the function";if(e.step&&(r=e.step),null==e.destination)throw"destination must be defined";e.anchor&&(("b"==e.anchor.toLowerCase()||"beginning"==e.anchor)&&(s=0),("m"==e.anchor.toLowerCase()||"middle"==e.anchor)&&(s=.5),("e"==e.anchor.toLowerCase()||"end"==e.anchor)&&(s=1));for(var a=(e.destination-s*n)%(2*Math.PI);0>a;)a+=2*Math.PI;for(;0>i;)i+=2*Math.PI;var o=0;a>i?o=1:i>a&&(o=-1),Math.round(1e3*(2*Math.PI-Math.abs(a-i)))/1e3>=Math.round(1e3*Math.abs(a-i))/1e3?(r>Math.abs(a-i)&&(r=Math.abs(a-i)),i+=o*r):(r>2*Math.PI-Math.abs(a-i)&&(r=2*Math.PI-Math.abs(a-i)),a-=2*o*Math.PI,i-=o*r),t.phi=i,t.getCheesecake().drawLayer(t.getLayer()),Math.abs(i-a)>.001?(t.phi=i%(2*Math.PI),requestAnimFrame(function(){t.rotateTo({destination:e.destination,step:r,callback:e.callback,anchor:e.anchor})})):e.callback&&e.callback()},socialCheesecake.Sector.prototype.addNewSubsector=function(e){for(var t=this.subsectors,i={parent:this,x:this.x,y:this.y,delta:this.delta,phi:this.phi,id:socialCheesecake.Sector.newSubsectorIdRoot+"S"+this.getIndex()+"s"+e},n=t.length;n>=0;n--)n>e&&(t[n]=t[n-1]),n==e&&(i.label="New Subsector "+n,t[n]=new socialCheesecake.Subsector(i));return this.getCheesecake().updateSectorChanges(this),t[e]},socialCheesecake.Sector.prototype.addActor=function(e,t){var i,n=this.actors,r=!1;for(var s in n)if(n[s].id==e.id){r=!0,i=n[s];var a=!1;for(var o in i.parents)i.parents[o]==t&&(a=!0);a||i.parents.push(t)}return r||(i=this==t?this.parent.addActor(e,t):this.parent.grid.addActor(e,t),n.push(i)),i},socialCheesecake.Sector.prototype.removeActor=function(e){var t,i=this.actors,n=!1,r=this.getCheesecake().grid;for(var s in i)if(i[s].id==e.id){t=e.parents;for(var a in t)for(var o in this.subsectors)if(t[a]===this.subsectors[o]){n=!0;break}n||(i.splice(s,1),r.removeActor(e))}},socialCheesecake.Sector.prototype.getWidth=function(){return this.rOut-this.rIn},socialCheesecake.Sector.prototype.getMediumRadius=function(){return(this.rOut+this.rIn)/2},socialCheesecake.Sector.prototype.getSubsectorsIds=function(){var e=[];for(var t in this.subsectors)e.push(this.subsectors[t].id);return e},socialCheesecake.Sector.prototype.listen=function(e){var t=this.getRegion(),i=this;void 0===e&&(e=!0),e?(t.on("mouseover",function(){i.eventHandler("mouseover")}),t.on("mouseout",function(){i.eventHandler("mouseout")}),t.on("click",function(){i.eventHandler("click")}),t.on("mouseup",function(){i.eventHandler("mouseup")})):(t.off("mouseover"),t.off("mouseout"),t.off("click"),t.off("mouseup"))}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.Subsector=function(e){if(this.id=null,void 0!=e.id&&(this.id=e.id),null!=e.parent&&(this.parent=e.parent),this.label="",null!=e.label&&(this.label=e.label),this.x=e.x,this.y=e.y,this.rOut=e.rOut,this.rIn=e.rIn,this.phi=e.phi,this.delta=e.delta,this.actors=[],this.auxiliar=e.auxiliar?e.auxiliar:!1,this.type=e.type?e.type:"normalSubsector",null!=e.simulate&&(this.simulate=e.simulate),this.color=e.color||socialCheesecake.colors.normalSubsector.background,e.fontColor&&(this.fontColor=e.fontColor),e.borderColor&&(this.borderColor=e.borderColor),null!=e.click&&(this.click=e.click),null!=e.mouseup&&(this.mouseup=e.mouseup),null!=e.mouseover&&(this.mouseover=e.mouseover),null!=e.mouseout&&(this.mouseout=e.mouseout),this.getCheesecake().grid,e.actors)for(var t in e.actors){var i={id:e.actors[t][0],name:e.actors[t][1],extraInfo:e.actors[t][2]};this.addActor(i,this)}this.originalAttr={x:this.x,y:this.y,phi:this.phi,delta:this.delta,rIn:this.rIn,rOut:this.rOut,color:this.color,fontColor:this.fontColor,borderColor:this.borderColor,label:this.label,auxiliar:this.auxiliar,type:this.type,simulate:this.simulate}},socialCheesecake.Subsector.prototype=new socialCheesecake.Sector({id:this.id,parent:this.parent,center:{x:this.x,y:this.y},label:this.label,rIn:this.rIn,rOut:this.rOut,phi:this.phi,delta:this.delta,auxiliar:this.auxiliar,color:this.color,fontColor:this.fontColor,borderColor:this.borderColor,type:this.type,simulate:this.simulate,mouseover:this.mouseover,mouseout:this.mouseout,mouseup:this.mouseup,click:this.click}),socialCheesecake.Subsector.prototype.getCheesecake=function(){var e=this;return e.parent.parent},socialCheesecake.Subsector.prototype.getIndex=function(){var e=this,t=e.parent,i=null;for(var n in t.subsectors)t.subsectors[n]===e&&(i=n);return i},socialCheesecake.Subsector.prototype.removeActor=function(e){var t,i=this.actors;for(var n in i)if(i[n].id==e.id){t=e.parents;for(var r in t)t[r]===this&&t.splice(r,1);i.splice(n,1),this.parent.removeActor(e)}},socialCheesecake.Subsector.prototype.changeMembership=function(e){var t,i=this.actors,n=!1;for(var r in e){for(var s in i)if(i[s].id==e[r].id){n=!0,this.removeActor(e[r]);break}n||(t={id:e[r].id},this.addActor(t,this)),this.getCheesecake().updateActorMembership(e[r]),n=!1}this.getCheesecake().calculatePortions()}})();var socialCheesecake=socialCheesecake||{};(function(){socialCheesecake.text={style:"bold 14px sans-serif",newStyle:"bold 14px sans-serif",addPlusCharacter:function(e,t,i,n,r,s,a,o){e.font=o&&socialCheesecake.text[o]?socialCheesecake.text[o]:socialCheesecake.text.style,e.fillStyle=a||"#000",e.textAlign="center",e.textBaseline="middle",text="+",e.translate(t,i),e.rotate(-s/2-r-Math.PI/2),e.fillText(text[0],0,n),e.restore(),e.save()},writeCurvedText:function(e,t,i,n,r,s,a,o,l){t.font=l&&socialCheesecake.text[l]?socialCheesecake.text[l]:socialCheesecake.text.style,t.fillStyle=o||"#000",t.textBaseline="middle";for(var c=Math.tan(t.measureText(e).width/(e.length*r)),u=null,h=e;c*(e.length+4)>a;){if(u==e){console.log("WARNING: Infinite loop detected and stopped. Text '"+h+"' failed to be "+"correctly truncated. Proccesed serveral times as '"+e+"' and will be returned as '"+words[0].substring(0,a/c-7)+"'. Space too small to even be able to truncate."),e=words[0].substring(0,a/c-7);break}u=e,words=e.split(" "),words.length>1?(words.splice(words.length-1,1),e=words.join(" ")+"..."):e=words[0].substring(0,a/c-7)+"...",c=Math.tan(t.measureText(e).width/(e.length*r))}t.translate(i,n);var d=0;s+a/2>=Math.PI&&2*Math.PI>s+a/2?(d=-1,t.rotate(-(a-c*e.length)/2-s-Math.PI/2)):(d=1,t.rotate((a-c*e.length)/2+Math.PI/2-a-s));for(var f=0;e.length>f;f++){t.fillText(e[f],0,-(d*r));var p=Math.tan(t.measureText(e[f]).width/r);t.rotate(d*p)}t.restore(),t.save()},writeCenterText:function(e,t,i,n){t.fillText(e,i-t.measureText(e).width/2,n)},getTextHeight:function(e,t){var t=t||socialCheesecake.text.style,i=document.createElement("div"),n=0;return i.setAttribute("id","getTextHeight"),i.setAttribute("display","none"),i.setAttribute("style","font: "+t),i.innerHTML=e,document.body.appendChild(i),n=parseInt(window.getComputedStyle(i).fontSize),document.body.removeChild(i),n}}})();var SocialStream=SocialStream||{};/*! Copyright (c) 2008 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.0.3
 * Requires jQuery 1.1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
(function(e){e.extend(e.fn,{livequery:function(t,i,n){var r,s=this;return e.isFunction(t)&&(n=i,i=t,t=void 0),e.each(e.livequery.queries,function(e,a){return s.selector!=a.selector||s.context!=a.context||t!=a.type||i&&i.$lqguid!=a.fn.$lqguid||n&&n.$lqguid!=a.fn2.$lqguid?void 0:(r=a)&&!1}),r=r||new e.livequery(this.selector,this.context,t,i,n),r.stopped=!1,r.run(),this},expire:function(t,i,n){var r=this;return e.isFunction(t)&&(n=i,i=t,t=void 0),e.each(e.livequery.queries,function(s,a){r.selector!=a.selector||r.context!=a.context||t&&t!=a.type||i&&i.$lqguid!=a.fn.$lqguid||n&&n.$lqguid!=a.fn2.$lqguid||this.stopped||e.livequery.stop(a.id)}),this}}),e.livequery=function(t,i,n,r,s){return this.selector=t,this.context=i||document,this.type=n,this.fn=r,this.fn2=s,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,r.$lqguid=r.$lqguid||e.livequery.guid++,s&&(s.$lqguid=s.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,i){e.fn2.apply(i)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,i=this.elements,n=e(this.selector,this.context),r=n.not(i);this.elements=n,this.type?(r.bind(this.type,this.fn),i.length>0&&e.each(i,function(i,r){0>e.inArray(r,n)&&e.event.remove(r,t.type,t.fn)})):(r.each(function(){t.fn.apply(this)}),this.fn2&&i.length>0&&e.each(i,function(i,r){0>e.inArray(r,n)&&t.fn2.apply(r)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,i){if(e.fn[i]){var n=e.fn[i];e.fn[i]=function(){var t=n.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?0>e.inArray(t,e.livequery.queue)&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){0>e.inArray(t,e.livequery.queue)&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove"),e(function(){e.livequery.play()});var t=e.prototype.init;e.prototype.init=function(e,i){var n=t.apply(this,arguments);return e&&e.selector&&(n.context=e.context,n.selector=e.selector),"string"==typeof e&&(n.context=i||document,n.selector=e),n},e.prototype.init.prototype=e.prototype})(jQuery),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function i(t,i){this.$element=e(t),this.options=i,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){function i(){a.hoverTooltip=!0}function n(){if("in"!=a.hoverState&&(a.hoverTooltip=!1,"manual"!=a.options.trigger)){var e="hover"==a.options.trigger?"mouseleave.tipsy":"blur.tipsy";a.$element.trigger(e)}}var r=this.getTitle();if(r&&this.enabled){var s=this.tip();s.find(".tipsy-inner")[this.options.html?"html":"text"](r),s[0].className="tipsy",s.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=this;this.options.hoverable&&s.hover(i,n);var o,l=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c=s[0].offsetWidth,u=s[0].offsetHeight,h=t(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":o={top:l.top+l.height+this.options.offset,left:l.left+l.width/2-c/2};break;case"s":o={top:l.top-u-this.options.offset,left:l.left+l.width/2-c/2};break;case"e":o={top:l.top+l.height/2-u/2,left:l.left-c-this.options.offset};break;case"w":o={top:l.top+l.height/2-u/2,left:l.left+l.width+this.options.offset}}2==h.length&&(o.left="w"==h.charAt(1)?l.left+l.width/2-15:l.left+l.width/2-c+15),s.css(o).addClass("tipsy-"+h),s.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.className&&s.addClass(t(this.options.className,this.$element[0])),this.options.fade?s.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):s.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,i=this.options;this.fixTitle();var e,i=this.options;return"string"==typeof i.title?e=t.attr("title"==i.title?"original-title":i.title):"function"==typeof i.title&&(e=i.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||i.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function n(n){var r=e.data(n,"tipsy");return r||(r=new i(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",r)),r}function r(){var e=n(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function s(){var e=n(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState||e.hoverTooltip||e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var a=this.data("tipsy");return a&&a[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.hoverable&&(t.delayOut=t.delayOut||200),t.live||this.each(function(){n(this)}),"manual"!=t.trigger){var o=t.live?"live":"bind",l="hover"==t.trigger?"mouseenter.tipsy":"focus.tipsy",c="hover"==t.trigger?"mouseleave.tipsy":"blur.tipsy";this[o](l,r)[o](c,s)}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.elementOptions=function(t,i){return e.metadata?e.extend({},i,e(t).metadata()):i},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,i){return function(){var n={ns:i[0],ew:i.length>1?i[1]:!1},r=e(document).scrollTop()+t,s=e(document).scrollLeft()+t,a=e(this);return r>a.offset().top&&(n.ns="n"),s>a.offset().left&&(n.ew="w"),t>e(window).width()+e(document).scrollLeft()-a.offset().left&&(n.ew="e"),t>e(window).height()+e(document).scrollTop()-a.offset().top&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}}}(jQuery),/*	
	Watermark plugin for jQuery
	Version: 3.1.4
	http://jquery-watermark.googlecode.com/

	Copyright (c) 2009-2012 Todd Northrop
	http://www.speednet.biz/
	
	August 13, 2012

	Requires:  jQuery 1.2.3+
	
	Dual licensed under the MIT or GPL Version 2 licenses.
	See mit-license.txt and gpl2-license.txt in the project root for details.
------------------------------------------------------*/
function(e,t,i){var n="watermark",r="watermarkClass",s="watermarkFocus",a="watermarkSubmit",o="watermarkMaxLength",l="watermarkPassword",c="watermarkText",u=/\r/g,h=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,d="input:data("+n+"),textarea:data("+n+")",f=":watermarkable",p=["Page_ClientValidate"],m=!1,g="placeholder"in document.createElement("input");e.watermark=e.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(t){e(t).filter(d).each(function(){e.watermark._hide(e(this))})},_hide:function(e,i){var n=e[0],s=(n.value||"").replace(u,""),a=e.data(c)||"",h=e.data(o)||0,d=e.data(r);if(a.length&&s==a){if(n.value="",e.data(l)&&"text"===(e.attr("type")||"")){var f=e.data(l)||[],p=e.parent()||[];f.length&&p.length&&(p[0].removeChild(e[0]),p[0].appendChild(f[0]),e=f)}h&&(e.attr("maxLength",h),e.removeData(o)),i&&(e.attr("autocomplete","off"),t.setTimeout(function(){e.select()},1))}d&&e.removeClass(d)},show:function(t){e(t).filter(d).each(function(){e.watermark._show(e(this))})},_show:function(t){var i=t[0],n=(i.value||"").replace(u,""),a=t.data(c)||"",h=t.attr("type")||"",d=t.data(r);if(0!=n.length&&n!=a||t.data(s))e.watermark._hide(t);else{if(m=!0,t.data(l)&&"password"===h){var f=t.data(l)||[],p=t.parent()||[];f.length&&p.length&&(p[0].removeChild(t[0]),p[0].appendChild(f[0]),t=f,t.attr("maxLength",a.length),i=t[0])}if("text"===h||"search"===h){var g=t.attr("maxLength")||0;g>0&&a.length>g&&(t.data(o,g),t.attr("maxLength",a.length))}d&&t.addClass(d),i.value=a}},hideAll:function(){m&&(e.watermark.hide(f),m=!1)},showAll:function(){e.watermark.show(f)}},e.fn.watermark=e.fn.watermark||function(i,o){if(!this.length)return this;var h=!1,d="string"==typeof i;return d&&(i=i.replace(u,"")),"object"==typeof o?(h="string"==typeof o.className,o=e.extend({},e.watermark.options,o)):"string"==typeof o?(h=!0,o=e.extend({},e.watermark.options,{className:o})):o=e.watermark.options,"function"!=typeof o.useNative&&(o.useNative=o.useNative?function(){return!0}:function(){return!1}),this.each(function(){var p=e(this);if(p.is(f)){if(p.data(n))(d||h)&&(e.watermark._hide(p),d&&p.data(c,i),h&&p.data(r,o.className));else{if(g&&o.useNative.call(this,p)&&"TEXTAREA"!==(p.attr("tagName")||""))return d&&p.attr("placeholder",i),void 0;if(p.data(c,d?i:""),p.data(r,o.className),p.data(n,1),"password"===(p.attr("type")||"")){var m=p.wrap("<span>").parent(),v=e(m.html().replace(/type=["']?password["']?/i,'type="text"'));v.data(c,p.data(c)),v.data(r,p.data(r)),v.data(n,1),v.attr("maxLength",i.length),v.focus(function(){e.watermark._hide(v,!0)}).bind("dragenter",function(){e.watermark._hide(v)}).bind("dragend",function(){t.setTimeout(function(){v.blur()},1)}),p.blur(function(){e.watermark._show(p)}).bind("dragleave",function(){e.watermark._show(p)}),v.data(l,p),p.data(l,v)}else p.focus(function(){p.data(s,1),e.watermark._hide(p,!0)}).blur(function(){p.data(s,0),e.watermark._show(p)}).bind("dragenter",function(){e.watermark._hide(p)}).bind("dragleave",function(){e.watermark._show(p)}).bind("dragend",function(){t.setTimeout(function(){e.watermark._show(p)},1)}).bind("drop",function(e){var t=p[0],i=e.originalEvent.dataTransfer.getData("Text");(t.value||"").replace(u,"").replace(i,"")===p.data(c)&&(t.value=i),p.focus()});if(this.form){var y=this.form,b=e(y);b.data(a)||(b.submit(e.watermark.hideAll),y.submit?(b.data(a,y.submit),y.submit=function(t,i){return function(){var n=i.data(a);e.watermark.hideAll(),n.apply?n.apply(t,Array.prototype.slice.call(arguments)):n()}}(y,b)):(b.data(a,1),y.submit=function(t){return function(){e.watermark.hideAll(),delete t.submit,t.submit()}}(y)))}}e.watermark._show(p)}})},e.watermark.runOnce&&(e.watermark.runOnce=!1,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},watermarkable:function(e){var t,i=e.nodeName;return"TEXTAREA"===i?!0:"INPUT"!==i?!1:(t=e.getAttribute("type"),!t||!h.test(t))}}),function(t){e.fn.val=function(){var r=Array.prototype.slice.call(arguments);if(!this.length)return r.length?this:i;if(r.length)return t.apply(this,r),e.watermark.show(this),this;if(this.data(n)){var s=(this[0].value||"").replace(u,"");return s===(this.data(c)||"")?"":s}return t.apply(this)}}(e.fn.val),p.length&&e(function(){var i,n,r;for(i=p.length-1;i>=0;i--)n=p[i],r=t[n],"function"==typeof r&&(t[n]=function(t){return function(){return e.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(r))}),e(t).bind("beforeunload",function(){e.watermark.options.hideBeforeUnload&&e.watermark.hideAll()}))}(jQuery,window),SocialStream.Timeline=function(e,t,i){var n=[],r=[],s=function(e){n.push(e)},a=function(e){r.push(e)},o=function(){t.each(n,function(e,t){t()})},l=function(e){t.each(r,function(t,i){i(e)})},c=function(e){var n=".activity_audience",r=".activity_audience_summary";e!=i&&(n="#"+e+" "+n,r="#"+e+" "+r),t(n).hide(),t(r).tipsy({html:!0,hoverable:!0,opacity:.95,title:function(){return t(this).siblings(".activity_audience").html()}})},u=function(){t("#wall .activity_comments").each(function(){var e=t(this).children(".subactivity");e.size()>3&&(t(this).prepend("<div class='hide_show_comments'><a href='#' onclick='SocialStream.Timeline.showAllComments(\""+t(this).attr("id")+"\"); return false;'>"+I18n.t("comment.view_all")+"("+e.size()+")</a></div><div class='space_comments'></div>"),e.slice(0,e.size()-2).hide(),t(this).children(".space_comments").slice(0,e.size()-2).hide())})},h=function(e){t("#"+e).children().show(),t("#"+e).children(".hide_show_comments").hide()};return s(c),s(u),a(c),{addInitCallback:s,init:o,addCreateCallback:a,create:l,initPrivacyTooltips:c,showAllComments:h}}(SocialStream,jQuery),SocialStream.Wall=function(e,t){var i=[],n=function(e){i.push(e)},r=function(){t.each(i,function(e,t){t()})},s=function(){t("#wrapper_activities_header form").hide(),t("#new_post").show(),t("#select_post").addClass("selected")},a=function(){t("#masterSubmitButton").click(function(){t("#wrapper_activities_header form:visible").submit()})},o=function(){t("#input_activities").watermark(I18n.t("post.input"),"#666")},l=function(){t(".activity_form_selector").click(function(){t(".activity_form_selector").removeClass("selected"),t(this).addClass("selected"),t("#wrapper_activities_header form").hide(),t("#"+this.id.replace(/^select/,"new")).show()})},c=function(e){t("#security_chzn .chzn-choices").css("background-image","url(/assets/btn/"+e+".png)")},u=function(){var e="100px";chosen=t("#security").security_chosen(),t("#security").change(function(){t(this).children("option:selected").each(function(e,i){if(i.value==relation_public){if(0==public_selected){public_selected=!0;for(id in relation_options)id==relation_public_pos?t("#securitychzn_o_"+relation_public_pos).click():chosen.result_deselect(id);chosen.results_update_field()}else t("#security").children("option:selected").size()>1&&(public_selected=!1,chosen.result_deselect(relation_public_pos),chosen.results_update_field());c("public")}else c("restricted")}),t("#securities .search-choice a").click(function(){0==t("#security").children("option:selected").size()&&t("#securities input").css("width",e)})}),t("#securities input").blur(function(){0==t("#security").children("option:selected").size()&&t("#securities input").css("width",e)}),t("#securities input.default").css("width",e)},h=function(){t("#wrapper_activities_header form").submit(function(){t(this).find("input[type=text]").each(function(){t(this).blur().attr("readonly",!0)}),t("#masterSubmitButton").val(I18n.t("activity.sending")+"...").attr("disabled",!0),t(".liveAdded").remove();var e=t(this);return t("#security option:selected").each(function(){e.append(t("<input/>").addClass("liveAdded").attr("type","hidden").attr("name",e.attr("id").split("_")[1]+"[relation_ids][]").val(t(this).attr("value")))}),!0}),t(".new_comment").submit(function(){return t(this).find("input[type=text]").each(function(){t(this).blur().attr("readonly",!0)}),t(this).find(".submitActivity").each(function(){t(this).val(I18n.t("activity.sending")+"...").attr("disabled",!0)}),!0})},d=function(){t(".submitActivity").val(I18n.t("share")).removeAttr("disabled"),t("#masterSubmitButton").val(I18n.t("share")).removeAttr("disabled"),t("#wrapper_activities_header form").find("input[type=text]").each(function(){t(this).removeAttr("readonly").val("").blur()}),t(".input_new_comments").each(function(){t(this).removeAttr("readonly").val("")})};return n(s),n(a),n(o),n(l),n(u),n(h),e.Timeline.addCreateCallback(d),{addInitCallback:n,init:r,activateAntiRebounds:h,unblockForms:d}}(SocialStream,jQuery),$("#carousel_ul li:first").before($("#carousel_ul li:last")),$("#right_scroll img").livequery("click",function(){var e=$("#carousel_ul li").outerWidth()+10,t=parseInt($("#carousel_ul").css("left"))-e;$("#carousel_ul:not(:animated)").animate({left:t},500,function(){$("#carousel_ul li:last").after($("#carousel_ul li:first")),$("#carousel_ul").css({left:"-210px"})})}),$("#left_scroll img").livequery("click",function(){var e=$("#carousel_ul li").outerWidth()+10,t=parseInt($("#carousel_ul").css("left"))+e;$("#carousel_ul:not(:animated)").animate({left:t},500,function(){$("#carousel_ul li:first").before($("#carousel_ul li:last")),$("#carousel_ul").css({left:"-210px"})})}),function(){/*
     Chosen, a Select Box Enhancer for jQuery and Protoype
     by Patrick Filler for Harvest, http://getharvest.com

     Available for use under the MIT License, http://en.wikipedia.org/wiki/MIT_License

     Copyright (c) 2011 by Harvest
     */
var e,t,i,n,r,s=function(e,t){return function(){return e.apply(t,arguments)}};r="undefined"!=typeof exports&&null!==exports?exports:this,e=jQuery,e.fn.extend({security_chosen:function(i,n){var r;return e(this).each(function(){e(this).hasClass("chzn-done")||(r=new t(this,i,n))}),r}}),t=function(){function t(t){this.set_default_values(),this.form_field=t,this.form_field_jq=e(this.form_field),this.is_multiple=this.form_field.multiple,this.default_text_default=this.form_field.multiple?"Select Some Options":"Select an Option",this.set_up_html(),this.register_observers(),this.form_field_jq.addClass("chzn-done")}return t.prototype.set_default_values=function(){return this.click_test_action=s(function(e){return this.test_active_click(e)},this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.choices=0},t.prototype.set_up_html=function(){var t,i,r,s;return this.container_id=this.form_field.id+"_chzn",this.f_width=this.form_field_jq.width(),this.default_text=this.form_field_jq.attr("title")?this.form_field_jq.attr("title"):this.default_text_default,t=e("<div />",{id:this.container_id,"class":"chzn-container"}),this.is_multiple?t.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):t.html('<a href="javascript:void(0)" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(t),this.container=e("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),i=this.container.height(),r=this.f_width-n(this.dropdown),this.dropdown.css({width:r+"px",top:i+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),s=r-n(this.search_container)-n(this.search_field),this.search_field.css({width:s+"px"})),this.results_build(),this.set_tab_index()},t.prototype.register_observers=function(){return this.container.click(s(function(e){return this.container_click(e)},this)),this.container.mouseenter(s(function(e){return this.mouse_enter(e)},this)),this.container.mouseleave(s(function(e){return this.mouse_leave(e)},this)),this.search_results.click(s(function(e){return this.search_results_click(e)},this)),this.search_results.mouseover(s(function(e){return this.search_results_mouseover(e)},this)),this.search_results.mouseout(s(function(e){return this.search_results_mouseout(e)},this)),this.form_field_jq.bind("liszt:updated",s(function(e){return this.results_update_field(e)},this)),this.search_field.blur(s(function(e){return this.input_blur(e)},this)),this.search_field.keyup(s(function(e){return this.keyup_checker(e)},this)),this.search_field.keydown(s(function(e){return this.keydown_checker(e)},this)),this.is_multiple?(this.search_choices.click(s(function(e){return this.choices_click(e)},this)),this.search_field.focus(s(function(e){return this.input_focus(e)},this))):this.selected_item.focus(s(function(e){return this.activate_field(e)},this))},t.prototype.container_click=function(t){return t&&"click"===t.type&&t.stopPropagation(),this.pending_destroy_click?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!t||e(t.target)!==this.selected_item&&!e(t.target).parents("a.chzn-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field())},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){return this.active_field?void 0:setTimeout(s(function(){return this.container_click()},this),50)},t.prototype.input_blur=function(){return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(s(function(){return this.blur_test()},this),100))},t.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},t.prototype.close_field=function(){e(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default()},t.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},t.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container.id).length?this.active_field=!0:this.close_field()},t.prototype.results_build=function(){var e,t,n,r,s,a;for(n=new Date,this.parsing=!0,this.results_data=i.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||this.selected_item.find("span").text(this.default_text),e="",a=this.results_data,r=0,s=a.length;s>r;r++)t=a[r],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&this.selected_item.find("span").text(t.text));return this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},t.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.form_field.id+"chzn_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},t.prototype.result_add_option=function(t){var i;return t.disabled?"":(t.dom_id=this.form_field.id+"chzn_o_"+t.array_index,i=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&i.push("result-selected"),null!=t.group_array_index&&i.push("group-option"),'<li id="'+t.dom_id+'" class="'+i.join(" ")+'">'+e("<div />").text(t.text).html()+"</li>")},t.prototype.results_update_field=function(){return this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.result_do_highlight=function(e){var t,i,n,r,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),r=n+s,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=r)return this.search_results.scrollTop(t-n>0?t-n:0);if(s>i)return this.search_results.scrollTop(i)}},t.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_show=function(){var e;return this.is_multiple||(this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)),e=this.is_multiple?this.container.height():this.container.height()-1,this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},t.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},t.prototype.set_tab_index=function(){var e;return this.form_field_jq.attr("tabindex")?(e=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",e):(this.selected_item.attr("tabindex",e),this.search_field.attr("tabindex",-1))):void 0},t.prototype.show_search_field_default=function(){return this.is_multiple&&1>this.choices&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},t.prototype.search_results_click=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select()):void 0},t.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},t.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},t.prototype.choices_click=function(t){return t.preventDefault(),!this.active_field||e(t.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},t.prototype.choice_build=function(t){var i,n;return i=this.form_field.id+"_chzn_c_"+t.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+i+'"><span>'+t.text+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>'),n=e("#"+i).find("a").first(),n.click(s(function(e){return this.choice_destroy_link_click(e)},this))},t.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.pending_destroy_click=!0,this.choice_destroy(e(t.target))},t.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&1>this.search_field.val().length&&this.results_hide(),this.result_deselect(e.attr("rel")),e.parents("li").first().remove()},t.prototype.result_select=function(){var e,t,i,n;return this.result_highlight?(e=this.result_highlight,t=e.attr("id"),this.result_clear_highlight(),e.addClass("result-selected"),this.is_multiple?this.result_deactivate(e):this.result_single_selected=e,n=t.substr(t.lastIndexOf("_")+1),i=this.results_data[n],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):this.selected_item.find("span").first().text(i.text),this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change"),this.search_field_scale()):void 0},t.prototype.result_activate=function(e){return e.addClass("active-result").show()},t.prototype.result_deactivate=function(e){return e.removeClass("active-result").hide()},t.prototype.result_deselect=function(t){var i,n;return n=this.results_data[t],n.selected=!1,this.form_field.options[n.options_index].selected=!1,i=e("#"+this.form_field.id+"chzn_o_"+t),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change"),this.search_field_scale()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,i,n,r,s,a,o,l,c,u,h,d,f,p,m,g,v;for(c=new Date,this.no_results_clear(),o=0,l=this.search_field.val()===this.default_text?"":e.trim(this.search_field.val()),s=new RegExp("^"+l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),d=new RegExp(l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),v=this.results_data,f=0,m=v.length;m>f;f++)if(i=v[f],!i.disabled&&!i.empty)if(i.group)e("#"+i.dom_id).hide();else if(!this.is_multiple||!i.selected){if(t=!1,a=i.dom_id,s.test(i.text))t=!0,o+=1;else if((i.text.indexOf(" ")>=0||0===i.text.indexOf("["))&&(r=i.text.replace(/\[|\]/g,"").split(" "),r.length))for(p=0,g=r.length;g>p;p++)n=r[p],s.test(n)&&(t=!0,o+=1);t?(l.length?(u=i.text.search(d),h=i.text.substr(0,u+l.length)+"</em>"+i.text.substr(u+l.length),h=h.substr(0,u)+"<em>"+h.substr(u)):h=i.text,e("#"+a).html!==h&&e("#"+a).html(h),this.result_activate(e("#"+a)),null!=i.group_array_index&&e("#"+this.results_data[i.group_array_index].dom_id).show()):(this.result_highlight&&a===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(e("#"+a)))}return 1>o&&l.length?this.no_results(l):this.winnow_results_set_highlight()},t.prototype.winnow_results_clear=function(){var t,i,n,r,s;for(this.search_field.val(""),i=this.search_results.find("li"),s=[],n=0,r=i.length;r>n;n++)t=i[n],t=e(t),s.push(t.hasClass("group-result")?t.show():this.is_multiple&&t.hasClass("result-selected")?void 0:this.result_activate(t));return s},t.prototype.winnow_results_set_highlight=function(){var e;return!this.result_highlight&&(e=this.search_results.find(".active-result").first())?this.result_do_highlight(e):void 0},t.prototype.no_results=function(t){var i;return i=e('<li class="no-results">No results match "<span></span>"</li>'),i.find("span").first().text(t),this.search_results.append(i)},t.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},t.prototype.keydown_arrow=function(){var t,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t))),this.results_showing?void 0:this.results_show()},t.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},t.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},t.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},t.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&1>this.backstroke_length&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select();break;case 27:if(this.results_showing)return this.results_hide();break;case 9:case 38:case 40:case 16:break;default:return this.results_search()}},t.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},t.prototype.search_field_scale=function(){var t,i,n,r,s,a,o,l,c;if(this.is_multiple){for(n=0,o=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",a=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=a.length;c>l;l++)r=a[l],s+=r+":"+this.search_field.css(r)+";";return i=e("<div />",{style:s}),i.text(this.search_field.val()),e("body").append(i),o=i.width()+25,i.remove(),o>this.f_width-10&&(o=this.f_width-10),this.search_field.css({width:o+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},t}(),n=function(e){var t;return t=e.outerWidth()-e.width()},r.get_side_border_padding=n,i=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,n,r,s,a;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,a=[],n=0,r=s.length;r>n;n++)i=s[n],a.push(this.add_option(i,t,e.disabled));return a},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),i.select_to_array=function(e){var t,n,r,s,a;for(n=new i,a=e.childNodes,r=0,s=a.length;s>r;r++)t=a[r],n.add_node(t);return n.parsed},r.SelectParser=i}.call(this),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),/*!
 * URL Utils - v1.11 - 9/10/2009
 * http://benalman.com/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Licensed under the MIT license
 * http://benalman.com/about/license/
 */
// Copyright (c) 2009 "Cowboy" Ben Alman
function(e){"$:nomunge";function t(e){return"string"==typeof e}function i(e){return"object"==typeof e}function n(){var e=N.call(arguments),t=e.shift();return function(){return t.apply(this,e.concat(N.call(arguments)))}}function r(){return P.href.replace(/^[^#]*#?/,"")}function s(e){var t=e.nodeName;return t?S[t.toLowerCase()]:""}function a(n,s,a,o){var l;return t(a)||i(a)?h(s,a,o,n):i(s)?e.param(s):t(s)?u(s,a,n):(l=n?r():P.search,u(l,s,n))}function o(){var n,r,o,l=N.call(arguments),c=l.shift();return(t(l[1])||i(l[1]))&&(n=l.shift()),r=l.shift(),o=l.shift(),this.each(function(){var t=e(this),i=n||s(this),l=i&&t.attr(i)||"";l=a(c,l,r,o),t.attr(i,l)})}function l(){var t=N.call(arguments),i=t.shift(),n=t.shift(),r=a(i);return e.isFunction(t[0])?r=t.shift()(r):e.isArray(t[0])&&e.each(t.shift(),function(e,t){delete r[t]}),a(i,n,r,t.shift())}function c(){var i,n=N.call(arguments),r=n.shift();return t(n[0])&&(i=n.shift()),this.each(function(){var t=e(this),a=i||s(this),o=a&&t.attr(a)||"";o=l.apply(this,[r,o].concat(n)),t.attr(a,o)})}function u(t,i,n){var r,s,a,o={},l={"null":null,"true":I,"false":T},c=decodeURIComponent,u=n?/^.*[#]/:/^.*[?]|#.*$/g;for(t=t.replace(u,"").replace(/\+/g," ").split("&");t.length;)r=t.shift().split("="),s=c(r[0]),2===r.length?(a=c(r[1]),i&&(a&&!isNaN(a)?a=Number(a):"undefined"===a?a=p:l[a]!==p&&(a=l[a])),e.isArray(o[s])?o[s].push(a):o[s]=o[s]!==p?[o[s],a]:a):s&&(o[s]=i?p:"");return o}function h(i,n,r,s){var a,o=s?/^([^#]*)[#]?(.*)$/:/^([^#?]*)[?]?([^#]*)(#?.*)/,l=i.match(o),c=u(l[2],0,s),h=l[3]||"";return t(n)&&(n=u(n,0,s)),a=2===r?n:1===r?e.extend({},n,c):e.extend({},c,n),a=e.param(a),l[1]+(s?"#":a||!l[1]?"?":"")+a+h}function d(){var t,i=e.browser,n={};return n[O]=n[F]=function(e){return e},i.msie&&8>i.version&&(n[O]=function(e,i){var n=t.document;e!==i&&(n.open(),n.close(),n.location.hash="#"+e)},n[F]=function(){return t.document.location.hash.replace(/^#/,"")},t=e("<iframe/>").hide().appendTo("body").get(0).contentWindow,n[O](r())),n}var f,p,m,g,v,y,b,_,w,x,C,E,S={},k=this,I=!0,T=!1,A="onhashchange"in k,N=Array.prototype.slice,P=document.location,D="urlInternal",M="urlExternal",R="queryString",F="fragment",O="update",j="passQueryString",H="passFragment",L="fragmentChange",B="hashchange."+L;e.urlTagAttrList=m=function(t){return e.extend(S,t)},m({a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"}),e.urlInternalHost=g=function(e){e=e?"(?:"+e+"\\.)?":"";var t=new RegExp("^"+e+"(.*)","i"),i="^"+P.protocol+"//"+P.hostname.replace(t,e+"$1")+(P.port?":"+P.port:"")+"/";return v(i)},e.urlInternalRegExp=v=function(e){return e&&(f=t(e)?new RegExp(e,"i"):e),f},g("www"),e.isUrlInternal=y=function(e){return e?f.test(e)?I:/^https?:\/\//i.test(e)?T:/^(?:#|[a-z\d.-]+:)/i.test(e)?p:I:p},e.isUrlExternal=b=function(e){var t=y(e);return"boolean"==typeof t?!t:t},_=function(e,t){return this.filter(":"+e+(t?"("+t+")":""))},e.fn[D]=n(_,D),e.fn[M]=n(_,M),w=function(t,i,n,r){var a=r[3]||s(i);return a?!!t(e(i).attr(a)):T},e.expr[":"][D]=n(w,y),e.expr[":"][M]=n(w,b),e[R]=n(a,0),e[F]=n(a,1),e.fn[R]=n(o,0),e.fn[F]=n(o,1),e[j]=n(l,0),e[H]=n(l,1),e.fn[j]=n(c,0),e.fn[H]=n(c,1),e.setFragment=x=function(e,t){var n=i(e)?a(I,e):(e||"").replace(/^#/,"");n=e?h("#"+r(),"#"+n,t,1):"#",P.href=P.href.replace(/#.*$/,"")+n},e[L]=function(t){function i(){var t=e.Event(L);t[F]=r(),e(document).trigger(t)}t===I&&(t=100),A&&e(k).unbind(B),C&&clearTimeout(C),C=null,"number"==typeof t&&(A?e(k).bind(B,i):(E=r(),e.isFunction(d)&&(d=d()),function n(){var e=r(),s=d[F](E);e!==E?(d[O](e,s),E=e,i()):s!==E&&x(s,2),C=setTimeout(n,0>t?0:t)}()))}}(jQuery),$(function(){$("#search_field").live("click",function(){"Search by name"==this.value&&(this.value="")}),$("#search_field").keypress(function(e){"13"==e.keyCode&&($("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.getScript(window.location.pathname+"?search="+this.value))}),$("#search_button").click(function(){e=$.Event("keypress"),e.keyCode=13,$("#search_field").trigger(e)}),$(".pagination a").live("click",function(){return $("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.setFragment({page:$.queryString(this.href).page}),$.setFragment({letter:$.queryString(this.href).letter}),$.setFragment({search:$.queryString(this.href).search}),$.setFragment({tag:$.queryString(this.href).tag}),$.getScript(this.href),!1}),$(".user_letter_link").live("click",function(){return $("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.setFragment({letter:$.queryString(this.href).letter}),$.getScript(this.href),!1}),$("#wordcloud a").live("click",function(){return $("#list_users_ajax").html("<div id='ajax_loader_icon'><img src='../images/loader.gif'></div>"),$.setFragment({tag:$.queryString(this.href).tag}),$.getScript(this.href),!1})}),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},i.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||"BackCompat"==n.compatMode?n.body:n.documentElement})},e.fn.scrollTo=function(n,r,s){return"object"==typeof r&&(s=r,r=0),"function"==typeof s&&(s={onAfter:s}),"max"==n&&(n=9e9),s=e.extend({},i.defaults,s),r=r||s.speed||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(r/=2),s.offset=t(s.offset),s.over=t(s.over),this._scrollable().each(function(){function a(e){c.animate(h,r,s.easing,e&&function(){e.call(this,n,s)})}var o,l=this,c=e(l),u=n,h={},d=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}u=e(u,this);case"object":(u.is||u.style)&&(o=(u=e(u)).offset())}e.each(s.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",r=n.toLowerCase(),f="scroll"+n,p=l[f],m=i.max(l,t);if(o)h[f]=o[r]+(d?0:p-c.offset()[r]),s.margin&&(h[f]-=parseInt(u.css("margin"+n))||0,h[f]-=parseInt(u.css("border"+n+"Width"))||0),h[f]+=s.offset[r]||0,s.over[r]&&(h[f]+=u["x"==t?"width":"height"]()*s.over[r]);else{var g=u[r];h[f]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}/^\d+$/.test(h[f])&&(h[f]=0>=h[f]?0:Math.min(h[f],m)),!e&&s.queue&&(p!=h[f]&&a(s.onAfterFirst),delete h[f])}),a(s.onAfter)}).end()},i.max=function(t,i){var n="x"==i?"Width":"Height",r="scroll"+n;if(!e(t).is("html,body"))return t[r]-e(t)[n.toLowerCase()]();var s="client"+n,a=t.ownerDocument.documentElement,o=t.ownerDocument.body;return Math.max(a[r],o[r])-Math.min(a[s],o[s])}}(jQuery),/**
 * jQuery Validation Plugin 1.8.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"),void 0;var i=e.data(this[0],"validator");return i?i:(i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function n(){if(i.settings.submitHandler){if(i.submitButton)var t=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var r=e.data(n.form,"validator").settings,s=r.rules,a=e.validator.staticRules(n);switch(t){case"add":e.extend(a,e.validator.normalizeRule(i)),s[n.name]=a,i.messages&&(r.messages[n.name]=e.extend(r.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],a;var o={};return e.each(i.split(/\s/),function(e,t){o[t]=a[t],delete a[t]}),o}}var l=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(n),e.validator.classRules(n),e.validator.attributeRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1==arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),i)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0])}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){e.each(n.split(/\s/),function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",t).validateDelegate(":radio, :checkbox, select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.clean(t),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.clean(t),this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);var i=e(t).rules(),n=!1;for(var r in i){var s={method:r,parameters:i[r]};try{var a=e.validator.methods[r].call(this,t.value.replace(/\r/g,""),t,s.parameters);if("dependency-mismatch"==a){n=!0;continue}if(n=!1,"pending"==a)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!a)return this.formatAndAdd(t,s),!1}catch(o){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",o),o}}return n?void 0:(this.objectLength(i)&&this.successList.push(t),!0)},customMetaMessage:function(t,i){if(e.metadata){var n=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return n&&n.messages&&n.messages[i]}},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var e=0;arguments.length>e;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t.method),n=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,t.parameters,e):n.test(i)&&(i=jQuery.format(i.replace(n,"{$1}"),t.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,i=this.validElements();i[e];e++)this.settings.unhighlight.call(this,i[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass().addClass(this.settings.errorClass),n.attr("generated")&&n.html(i)):(n=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var i=this.currentForm;return e(document.getElementsByName(t)).map(function(e,n){return n.form==i&&n.name==t&&n||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[t.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t);for(var r in e.validator.methods){var s=n.attr(r);s&&(i[r]=s)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!e.metadata)return{};var i=e.data(t.form,"validator").settings.meta;return i?e(t).metadata()[i]:e(t).metadata()},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,r){if(r===!1)return delete t[n],void 0;if(r.param||r.depends){var s=!0;switch(typeof r.depends){case"string":s=!!e(r.depends,i.form).length;break;case"function":s=r.depends.call(i,i)}s?t[n]=void 0!==r.param?r.param:!0:delete t[n]}}),e.each(t,function(n,r){t[n]=e.isFunction(r)?r(i):r}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!=n?n:e.validator.messages[t],3>i.length&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var r=e(i).val();return r&&r.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return e.trim(t).length>0}},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var r=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),r.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=r.message,n="string"==typeof n&&{url:n}||n,this.pending[i.name])return"pending";if(r.old===t)return r.valid;r.old=t;var s=this;this.startRequest(i);var a={};return a[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,success:function(n){s.settings.messages[i.name].remote=r.originalMessage;var a=n===!0;if(a){var o=s.formSubmitted;s.prepareElement(i),s.formSubmitted=o,s.successList.push(i),s.showErrors()}else{var l={},c=n||s.defaultMessage(i,"remote");l[i.name]=r.message=e.isFunction(c)?c(t):c,s.showErrors(l)}r.valid=a,s.stopRequest(i,a)}},n)),"pending"},minlength:function(t,i,n){return this.optional(i)||this.getLength(e.trim(t),i)>=n},maxlength:function(t,i,n){return this.optional(i)||n>=this.getLength(e.trim(t),i)},rangelength:function(t,i,n){var r=this.getLength(e.trim(t),i);return this.optional(i)||r>=n[0]&&n[1]>=r},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&i[1]>=e},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9-]+/.test(e))return!1;var i=0,n=0,r=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var a=e.charAt(s),n=parseInt(a,10);r&&(n*=2)>9&&(n-=9),i+=n,r=!r}return 0==i%10},accept:function(e,t,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+i+")$","i"))},equalTo:function(t,i,n){var r=e(n).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()});return t==r.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){var r=e.port;"abort"==e.mode&&(t[r]&&t[r].abort(),t[r]=n)});else{var i=e.ajax;e.ajax=function(n){var r=("mode"in n?n:e.ajaxSettings).mode,s=("port"in n?n:e.ajaxSettings).port;return"abort"==r?(t[s]&&t[s].abort(),t[s]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,i){function n(t){return t=e.event.fix(t),t.type=i,e.event.handle.call(this,t)}e.event.special[i]={setup:function(){this.addEventListener(t,n,!0)},teardown:function(){this.removeEventListener(t,n,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=i,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var r=e(i.target);return r.is(t)?n.apply(r,arguments):void 0})}})}(jQuery),/*
 CLEditor WYSIWYG HTML Editor v1.3.0
 http://premiumsoftware.net/cleditor
 requires jQuery v1.4.2 or later

 Copyright 2010, Chris Landowski, Premium Software, LLC
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function(e){function t(t){var i=this,n=t.target,r=e.data(n,I),s=U[r],a=s.popupName,o=$[a];if(!i.disabled&&e(n).attr(P)!=P){var u={editor:i,button:n,buttonName:r,popup:o,popupName:a,command:s.command,useCSS:i.options.useCSS};if(s.buttonClick&&s.buttonClick(t,u)===!1)return!1;if("source"==r)w(i)?(delete i.range,i.$area.hide(),i.$frame.show(),n.title=s.title):(i.$frame.hide(),i.$area.show(),n.title="Show Rich Text"),setTimeout(function(){g(i)},100);else if(!w(i)){if(a){var h=e(o);if("url"==a){if("link"==r&&""===y(i))return b(i,"A selection is required when inserting a link.",n),!1;h.children(":button").unbind(N).bind(N,function(){var t=h.find(":text"),n=e.trim(t.val());""!==n&&l(i,u.command,n,null,u.button),t.val("http://"),f(),c(i)})}else"pastetext"==a&&h.children(":button").unbind(N).bind(N,function(){var e=h.find("textarea"),t=e.val().replace(/\n/g,"<br />");""!==t&&l(i,u.command,t,null,u.button),e.val(""),f(),c(i)});if(n!==e.data(o,k))return _(i,o,n),!1;return}if("print"==r)i.$frame[0].contentWindow.print();else if(!l(i,u.command,u.value,u.useCSS,n))return!1}c(i)}}function i(t){t=e(t.target).closest("div"),t.css(S,t.data(I)?"#FFF":"#FFC")}function n(t){e(t.target).closest("div").css(S,"transparent")}function r(t){var i=t.data.popup,n=t.target;if(i!==$.msg&&!e(i).hasClass(L)){var r,s=e.data(i,k),a=e.data(s,I),o=U[a],u=o.command,h=this.options.useCSS;if("font"==a?r=n.style.fontFamily.replace(/"/g,""):"size"==a?("DIV"==n.tagName&&(n=n.children[0]),r=n.innerHTML):"style"==a?r="<"+n.tagName+">":"color"==a?r=d(n.style.backgroundColor):"highlight"==a&&(r=d(n.style.backgroundColor),q?u="backcolor":h=!0),i={editor:this,button:s,buttonName:a,popup:i,popupName:o.popupName,command:u,value:r,useCSS:h},!o.popupClick||o.popupClick(t,i)!==!1){if(i.command&&!l(this,i.command,i.value,i.useCSS,s))return!1;f(),c(this)}}}function s(e){for(var t=1,i=0,n=0;e.length>n;++n)t=(t+e.charCodeAt(n))%65521,i=(i+t)%65521;return i<<16|t}function a(t,r,s,a,o){if($[t])return $[t];var l=e(D).hide().addClass(O).appendTo("body");return a?l.html(a):"color"==t?(r=r.colors.split(" "),10>r.length&&l.width("auto"),e.each(r,function(t,i){e(D).appendTo(l).css(S,"#"+i)}),s=H):"font"==t?e.each(r.fonts.split(","),function(t,i){e(D).appendTo(l).css("fontFamily",i).html(i)}):"size"==t?e.each(r.sizes.split(","),function(t,i){e(D).appendTo(l).html("<font size="+i+">"+i+"</font>")}):"style"==t?e.each(r.styles,function(t,i){e(D).appendTo(l).html(i[1]+i[0]+i[1].replace("<","</"))}):"url"==t?(l.html('Enter URL:<br><input type=text value="http://" size=35><br><input type=button value="Submit">'),s=L):"pastetext"==t&&(l.html("Paste your content here and click submit.<br /><textarea cols=40 rows=3></textarea><br /><input type=button value=Submit>"),s=L),s||a||(s=j),l.addClass(s),q&&l.attr(M,"on").find("div,font,p,h1,h2,h3,h4,h5,h6").attr(M,"on"),(l.hasClass(j)||o===!0)&&l.children().hover(i,n),$[t]=l[0],l[0]}function o(e,t){t?(e.$area.attr(P,P),e.disabled=!0):(e.$area.removeAttr(P),delete e.disabled);try{q?e.doc.body.contentEditable=!t:e.doc.designMode=t?"off":"on"}catch(i){}g(e)}function l(e,t,i,n,r){v(e),q||((void 0===n||null===n)&&(n=e.options.useCSS),e.doc.execCommand("styleWithCSS",0,n.toString())),n=!0;var s;if(q&&"inserthtml"==t.toLowerCase())u(e).pasteHTML(i);else{try{n=e.doc.execCommand(t,0,i||null)}catch(a){s=a.description,n=!1}n||("cutcopypaste".indexOf(t)>-1?b(e,"For security reasons, your browser does not support the "+t+" command. Try using the keyboard shortcut or context menu instead.",r):b(e,s?s:"Error executing the "+t+" command.",r))}return g(e),n}function c(e){setTimeout(function(){w(e)?e.$area.focus():e.$frame[0].contentWindow.focus(),g(e)},0)}function u(e){return q?h(e).createRange():h(e).getRangeAt(0)}function h(e){return q?e.doc.selection:e.$frame[0].contentWindow.getSelection()}function d(e){var t=/rgba?\((\d+), (\d+), (\d+)/.exec(e),i=e.split("");if(t)for(e=(t[1]<<16|t[2]<<8|t[3]).toString(16);6>e.length;)e="0"+e;return"#"+(6==e.length?e:i[1]+i[1]+i[2]+i[2]+i[3]+i[3])}function f(){e.each($,function(t,i){e(i).hide().unbind(N).removeData(k)})}function p(){var t=e("link[href$='jquery.cleditor.css']").attr("href");return t.substr(0,t.length-19)+"images/"}function m(t){var i=t.$main,n=t.options;t.$frame&&t.$frame.remove();var r=t.$frame=e('<iframe frameborder="0" src="javascript:true;">').hide().appendTo(i),s=r[0].contentWindow,a=t.doc=s.document,l=e(a);a.open(),a.write(n.docType+"<html>"+(""===n.docCSSFile?"":'<head><link rel="stylesheet" type="text/css" href="'+n.docCSSFile+'" /></head>')+'<body style="'+n.bodyStyle+'"></body></html>'),a.close(),q&&l.click(function(){c(t)}),x(t),q&&(l.bind("beforedeactivate beforeactivate selectionchange keypress",function(e){if("beforedeactivate"==e.type)t.inactive=!0;else if("beforeactivate"==e.type)!t.inactive&&t.range&&t.range.length>1&&t.range.shift(),delete t.inactive;else if(!t.inactive)for(t.range||(t.range=[]),t.range.unshift(u(t));t.range.length>2;)t.range.pop()}),r.focus(function(){v(t)})),(e.browser.mozilla?l:e(s)).blur(function(){C(t,!0)}),l.click(f).bind("keyup mouseup",function(){g(t)}),W?t.$area.show():r.show(),e(function(){var e=t.$toolbar,s=e.children("div:last"),a=i.width();s=s.offset().top+s.outerHeight()-e.offset().top+1,e.height(s),s=(/%/.test(""+n.height)?i.height():parseInt(n.height))-s,r.width(a).height(s),t.$area.width(a).height(z?s-2:s),o(t,t.disabled),g(t)})}function g(t){W||!e.browser.webkit||t.focused||(t.$frame[0].contentWindow.focus(),window.focus(),t.focused=!0);var i=t.doc;q&&(i=u(t));var n=w(t);e.each(t.$toolbar.find("."+R),function(r,s){var a=e(s),o=e.cleditor.buttons[e.data(s,I)],l=o.command,c=!0;if(t.disabled)c=!1;else if(o.getEnabled)c=o.getEnabled({editor:t,button:s,buttonName:o.name,popup:$[o.popupName],popupName:o.popupName,command:o.command,useCSS:t.options.useCSS}),void 0===c&&(c=!0);else if((n||W)&&"source"!=o.name||q&&("undo"==l||"redo"==l))c=!1;else if(l&&"print"!=l&&(q&&"hilitecolor"==l&&(l="backcolor"),!q||"inserthtml"!=l))try{c=i.queryCommandEnabled(l)}catch(u){c=!1}c?(a.removeClass(F),a.removeAttr(P)):(a.addClass(F),a.attr(P,P))})}function v(e){q&&e.range&&e.range[0].select()}function y(e){return v(e),q?u(e).text:h(e).toString()}function b(e,t,i){var n=a("msg",e.options,B);n.innerHTML=t,_(e,n,i)}function _(t,i,n){var s,a,o=e(i);if(n){var l=e(n);s=l.offset(),a=--s.left,s=s.top+l.height()}else l=t.$toolbar,s=l.offset(),a=Math.floor((l.width()-o.width())/2)+s.left,s=s.top+l.height()-2;f(),o.css({left:a,top:s}).show(),n&&(e.data(i,k,n),o.bind(N,{popup:i},e.proxy(r,t))),setTimeout(function(){o.find(":text,textarea").eq(0).focus().select()},100)}function w(e){return e.$area.is(":visible")}function x(t,i){var n=t.$area.val(),r=t.options,a=r.updateFrame,o=e(t.doc.body);if(a){var l=s(n);if(i&&t.areaChecksum==l)return;t.areaChecksum=l}n=a?a(n):n,n=n.replace(/<(?=\/?script)/gi,"&lt;"),r.updateTextArea&&(t.frameChecksum=s(n)),n!=o.html()&&(o.html(n),e(t).triggerHandler(T))}function C(t,i){var n=e(t.doc.body).html(),r=t.options,a=r.updateTextArea,o=t.$area;if(a){var l=s(n);if(i&&t.frameChecksum==l)return;t.frameChecksum=l}n=a?a(n):n,r.updateFrame&&(t.areaChecksum=s(n)),n!=o.val()&&(o.val(n),e(t).triggerHandler(T))}e.cleditor={defaultOptions:{width:500,height:250,controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source",colors:"FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana",sizes:"1,2,3,4,5,6,7",styles:[["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],useCSS:!1,docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',docCSSFile:"",bodyStyle:"margin:4px; font:10pt Arial,Verdana; cursor:text"},buttons:{init:"bold,,|italic,,|underline,,|strikethrough,,|subscript,,|superscript,,|font,,fontname,|size,Font Size,fontsize,|style,,formatblock,|color,Font Color,forecolor,|highlight,Text Highlight Color,hilitecolor,color|removeformat,Remove Formatting,|bullets,,insertunorderedlist|numbering,,insertorderedlist|outdent,,|indent,,|alignleft,Align Text Left,justifyleft|center,,justifycenter|alignright,Align Text Right,justifyright|justify,,justifyfull|undo,,|redo,,|rule,Insert Horizontal Rule,inserthorizontalrule|image,Insert Image,insertimage,url|link,Insert Hyperlink,createlink,url|unlink,Remove Hyperlink,|cut,,|copy,,|paste,,|pastetext,Paste as Text,inserthtml,|print,,|source,Show Source"},imagesPath:function(){return p()}},e.fn.cleditor=function(t){var i=e([]);return this.each(function(n,r){if("TEXTAREA"==r.tagName){var s=e.data(r,A);s||(s=new cleditor(r,t)),i=i.add(s)}}),i};var E,S="backgroundColor",k="button",I="buttonName",T="change",A="cleditor",N="click",P="disabled",D="<div>",M="unselectable",R="cleditorButton",F="cleditorDisabled",O="cleditorPopup",j="cleditorList",H="cleditorColor",L="cleditorPrompt",B="cleditorMsg",q=e.browser.msie,z=/msie\s6/i.test(navigator.userAgent),W=/iphone|ipad|ipod/i.test(navigator.userAgent),$={},U=e.cleditor.buttons;e.each(U.init.split("|"),function(e,t){var i=t.split(","),n=i[0];U[n]={stripIndex:e,name:n,title:""===i[1]?n.charAt(0).toUpperCase()+n.substr(1):i[1],command:""===i[2]?n:i[2],popupName:""===i[3]?n:i[3]}}),delete U.init,cleditor=function(r,s){var o=this;o.options=s=e.extend({},e.cleditor.defaultOptions,s);var l=o.$area=e(r).hide().data(A,o).blur(function(){x(o,!0)}),c=o.$main=e(D).addClass("cleditorMain").width(s.width).height(s.height),u=o.$toolbar=e(D).addClass("cleditorToolbar").appendTo(c),h=e(D).addClass("cleditorGroup").appendTo(u);e.each(s.controls.split(" "),function(r,l){if(""===l)return!0;if("|"==l)e(D).addClass("cleditorDivider").appendTo(h),h=e(D).addClass("cleditorGroup").appendTo(u);else{var c=U[l],d=e(D).data(I,c.name).addClass(R).attr("title",c.title).bind(N,e.proxy(t,o)).appendTo(h).hover(i,n),f={};c.css?f=c.css:c.image&&(f.backgroundImage="url("+p()+c.image+")"),c.stripIndex&&(f.backgroundPosition=-24*c.stripIndex),d.css(f),q&&d.attr(M,"on"),c.popupName&&a(c.popupName,s,c.popupClass,c.popupContent,c.popupHover)}}),c.insertBefore(l).append(l),E||(e(document).click(function(t){t=e(t.target),t.add(t.parents()).is("."+L)||f()}),E=!0),/auto|%/.test(""+s.width+s.height)&&e(window).resize(function(){m(o)}),m(o)};var G=cleditor.prototype;e.each([["clear",function(e){e.$area.val(""),x(e)}],["disable",o],["execCommand",l],["focus",c],["hidePopups",f],["sourceMode",w,!0],["refresh",m],["select",function(e){setTimeout(function(){w(e)?e.$area.select():l(e,"selectall")},0)}],["selectedHTML",function(t){if(v(t),t=u(t),q)return t.htmlText;var i=e("<layer>")[0];return i.appendChild(t.cloneContents()),i.innerHTML},!0],["selectedText",y,!0],["showMessage",b],["updateFrame",x],["updateTextArea",C]],function(e,t){G[t[0]]=function(){for(var e=[this],i=0;arguments.length>i;i++)e.push(arguments[i]);return e=t[1].apply(this,e),t[2]?e:this}}),G.change=function(t){var i=e(this);return t?i.bind(T,t):i.trigger(T)}}(jQuery),/*!
 * jQCloud Plugin for jQuery
 *
 * Version 0.1.3
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: Wed Feb 16 11:41:32 2011 +0100
 */
function(e){e.fn.jQCloud=function(t,i){var n=this,r=function(){var r=function(e,t){var i=function(e,t){return Math.abs(2*e.offsetLeft+e.offsetWidth-2*t.offsetLeft-t.offsetWidth)<e.offsetWidth+t.offsetWidth&&Math.abs(2*e.offsetTop+e.offsetHeight-2*t.offsetTop-t.offsetHeight)<e.offsetHeight+t.offsetHeight?!0:!1},n=0;for(n=0;t.length>n;n++)if(i(e,t[n]))return!0;return!1};t.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0});var s=2,a=[],o=n.width()/n.height(),l=n.width()/2,c=n.height()/2;e.each(t,function(i,u){var h=6.28*Math.random(),d=0,f=Math.round(9*((u.weight-t[t.length-1].weight)/(t[0].weight-t[t.length-1].weight)))+1,p=void 0!==u.url?"<a href='"+u.url+"'>"+u.text+"</a></span>":u.text;n.append("<span id='word_"+i+"' class='w"+f+"' title='"+(u.title||"")+"'>"+p+"</span>");var m=e("#word_"+i).width(),g=e("#word_"+i).height(),v=l-m/2,y=c-g/2;for(e("#word_"+i).css("position","absolute"),e("#word_"+i).css("left",v+"px"),e("#word_"+i).css("top",y+"px");r(document.getElementById("word_"+i),a);)d+=s,h+=(0===i%2?1:-1)*s,v=l+(d*Math.cos(h)-m/2)*o,y=c+d*Math.sin(h)-g/2,e("#word_"+i).css("left",v+"px"),e("#word_"+i).css("top",y+"px");a.push(document.getElementById("word_"+i))}),"function"==typeof i&&i.call(this)};return setTimeout(function(){r()},100),this}}(jQuery),function(e){e.fn.fcbkcomplete=function(t){return this.queue(function(){function n(){r(),l(0)}function r(){C=e('<ul class="holder"></ul>'),x.attachto?"object"==typeof x.attachto?x.attachto.append(C):e(x.attachto).append(C):N.after(C),S=e('<div class="facebook-auto">').append('<div class="default">'+x.complete_text+"</div>"),S.hover(function(){A=0},function(){A=1}),E=e('<ul id="'+P+'_feed"></ul>'),C.after(S.prepend(E)),E.css("width",S.width()),s()}function s(){name=N.attr("name"),x.bricket&&-1==name.indexOf("[]")&&(name+="[]");var t=e("<"+N.get(0).tagName+' name="'+name+'" id="'+P+'" multiple="multiple" class="hidden">');e.each(N.children("option"),function(i,n){if(n=e(n),t.data(n.val(),n.text()),n.hasClass("selected")){var r=a(n.text(),n.val(),!0,n.hasClass("locked"));t.append('<option value="'+n.val()+'" selected="selected" id="opt_'+r+'"class="selected">'+n.text()+"</option>")}}),N.after(t),N.remove(),N=t,e(N).bind("addItem",function(e,t){a(t.title,t.value,0,0,0)}),e(N).bind("removeItem",function(e,t){var i=C.children("li[rel="+t.value+"]");i.length&&o(i)}),e(N).bind("destroy",function(){C.remove(),S.remove(),N.show()})}function a(t,i,n,r,s){if(!g())return!1;var a="bit-box"+(r?" locked":""),c=F(),u=document.createTextNode(w(t)),h=e('<a class="closebutton" href="#"></a>'),d=e('<li class="'+a+'" rel="'+i+'" id="pt_'+c+'"></li>').prepend(u).append(h);if(C.append(d),h.click(function(){return o(e(this).parent("li")),!1}),!n){e("#"+P+"_annoninput").remove(),l(s);var f=e('<option value="'+w(i,1)+'" id="opt_'+c+'" class="selected" selected="selected">'+w(t)+"</option>");N.append(f),x.onselect&&y(x.onselect,f),N.change()}return C.children("li.bit-box.deleted").removeClass("deleted"),E.hide(),c}function o(t){if(!t.hasClass("locked")){t.fadeOut("fast");var i=t.attr("id");if(x.onremove){var n=i?e("#o"+i):N.children("option[value="+t.attr("rel")+"]");y(x.onremove,n)}i?e("#o"+i).remove():N.children('option[value="'+t.attr("rel")+'"]').remove(),t.remove(),N.change(),T=0}}function l(t){var i=e('<li class="bit-input" id="'+P+'_annoninput">'),n=e('<input type="text" class="maininput" size="1" autocomplete="off">'),r=0;C.append(i.append(n)),n.focus(function(){g()&&S.fadeIn("fast")}),n.blur(function(){A?S.fadeOut("fast"):n.focus()}),C.click(function(){n.focus(),E.length&&n.val().length?E.show():(E.hide(),S.children(".default").show())}),n.keypress(function(e){return e.keyCode==R.enter?!1:(n.attr("size",n.val().length+1),void 0)}),n.keyup(function(t){var i=_(n.val(),1);if(t.keyCode==R.backspace&&0==i.length&&(E.hide(),!C.children("li.bit-box:last").hasClass("locked"))){if(0==C.children("li.bit-box.deleted").length)return C.children("li.bit-box:last").addClass("deleted"),!1;if(T)return;T=1,C.children("li.bit-box.deleted").fadeOut("fast",function(){return o(e(this)),!1})}if(t.keyCode!=R.downarrow&&t.keyCode!=R.uparrow&&t.keyCode!=R.leftarrow&&t.keyCode!=R.rightarrow&&0!=i.length){if(k=0,x.json_url&&g())if(x.cache&&M.get(i))c(i),f();else{r++;var s=r;setTimeout(function(){s==r&&e.getJSON(x.json_url,{tag:w(i)},function(e){c(i,e),M.set(i,1),f()})},x.delay)}else c(i),f();S.children(".default").hide(),E.show()}}),t&&setTimeout(function(){n.focus(),S.children(".default").show()},1)}function c(t,i){E.html(""),x.cache||null==i||O.clear(),v(t),null!=i&&i.length&&e.each(i,function(e,t){O.set(_(t.key),_(t.value))});var n=x.maxshownitems<O.length()?x.maxshownitems:O.length(),r="";e.each(O.search(t),function(e,i){x.filter_selected&&N.children("option[value="+i.key+"]").hasClass("selected")||(r+='<li rel="'+i.key+'">'+w(u(i.value,t))+"</li>",k++,n--)}),E.append(r),x.firstselected&&(I=E.children("li:visible:first"),I.addClass("auto-focus")),k>x.height?E.css({height:24*x.height+"px",overflow:"auto"}):E.css("height","auto"),g()&&S.is(":hidden")&&S.show()}function u(e,t){if(x.filter_case)try{var i=new RegExp("(.*)("+t+")(.*)",x.filter_case?"g":"gi"),e=e.replace(i,"$1<em>$2</em>$3")}catch(n){}else try{var i=new RegExp("(.*)("+t.toLowerCase()+")(.*)","gi"),e=e.replace(i,"$1<em>$2</em>$3")}catch(n){}return e}function h(){E.children("li").mouseover(function(){E.children("li").removeClass("auto-focus"),I=e(this),I.addClass("auto-focus")}),E.children("li").mouseout(function(){e(this).removeClass("auto-focus"),I=null})}function d(){E.unbind("mouseover").unbind("mouseout").mousemove(function(){h(),E.unbind("mousemove")})}function f(){var t=e("#"+P+"_annoninput").children(".maininput");h(),E.children("li").unbind("mousedown").mousedown(function(){var t=e(this);a(t.text(),t.attr("rel"),0,0,1),E.hide(),S.hide()}),t.unbind("keydown"),t.keydown(function(t){if(t.keyCode!=R.backspace&&C.children("li.bit-box.deleted").removeClass("deleted"),(t.keyCode==R.enter||t.keyCode==R.tab)&&b()){var i=I;return a(i.text(),i.attr("rel"),0,0,1),m(t)}if((t.keyCode==R.enter||t.keyCode==R.tab)&&!b()){if(x.newel){var n=_(e(this).val());return a(n,n,0,0,1),m(t)}if(x.addontab&&x.newel){I=E.children("li:visible:first");var i=I;return a(i.text(),i.attr("rel"),0,0,1),m(t)}}t.keyCode==R.downarrow&&p("first"),t.keyCode==R.uparrow&&p("last")})}function p(e){if(d(),null==I||0==I.length)I=E.children("li:visible:"+e),E.get(0).scrollTop="first"==e?0:parseInt(I.get(0).scrollHeight,10)*(parseInt(E.children("li:visible").length,10)-Math.round(x.height/2));else{I.removeClass("auto-focus"),I="first"==e?I.nextAll("li:visible:first"):I.prevAll("li:visible:first");var t=parseInt(I.prevAll("li:visible").length,10),i=parseInt(I.nextAll("li:visible").length,10);(("first"==e?t:i)>Math.round(x.height/2)||Math.round(x.height/2)>=("first"==e?t:i))&&"undefined"!=typeof I.get(0)&&(E.get(0).scrollTop=parseInt(I.get(0).scrollHeight,10)*(t-Math.round(x.height/2)))}E.children("li").removeClass("auto-focus"),I.addClass("auto-focus")}function m(e){return S.hide(),e.preventDefault(),I=null,!1}function g(){return 0!=x.maxitems&&C.children("li.bit-box").length<x.maxitems}function v(t){if(x.newel&&g()){if(E.children("li[fckb=1]").remove(),0==t.length)return;var i=e('<li rel="'+t+'" fckb="1"">').html(w(t));E.prepend(i),k++}}function y(e,t){var n={};for(i=0;t.get(0).attributes.length>i;i++)null!=t.get(0).attributes[i].nodeValue&&(n["_"+t.get(0).attributes[i].nodeName]=t.get(0).attributes[i].nodeValue);return e.call(e,n)}function b(){return null==I||0==I.length?!1:!0}function _(e,t){if("undefined"!=typeof t){for(i=0;e.length>i;i++){var n=e.charCodeAt(i);(n>=R.exclamation&&R.slash>=n||n>=R.colon&&R.at>=n||n>=R.squarebricket_left&&R.apostrof>=n)&&(e=e.replace(e[i],escape(e[i])))}e=e.replace(/(\{|\}|\*)/i,"\\$1")}return e.replace(/script(.*)/g,"")}function w(e,t){return e=e.replace("\\",""),"undefined"!=typeof t?e:unescape(e)}var x=e.extend({json_url:null,cache:!1,height:"10",newel:!1,addontab:!1,firstselected:!1,filter_case:!1,filter_selected:!1,complete_text:"Start to type...",maxshownitems:30,maxitems:10,onselect:null,onremove:null,attachto:null,delay:350,bricket:!0},t),C=null,E=null,S=null,k=0,I=null,T=0,A=1,N=e(this),P=N.attr("id"),D=e("<div></div>").after(N),M={set:function(e,t){D.data(e,t)},get:function(e){return D.data(e)}},R={enter:13,tab:9,backspace:8,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,exclamation:33,slash:47,colon:58,at:64,squarebricket_left:91,apostrof:96},F=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t="",i=0;32>i;i++){var n=Math.floor(Math.random()*e.length);t+=e.substring(n,n+1)}return t},O={search:function(t){var i=new Array,n=new RegExp(t,x.filter_case?"g":"gi");return e.each(N.data(),function(e,t){"function"==typeof t.search&&-1!=t.search(n)&&i.push({key:e,value:t})}),i},set:function(e,t){N.data(e,t)},get:function(e){return N.data(e)},clear:function(){N.removeData()},length:function(){var e=0;for(var t in this)this.hasOwnProperty(t)&&++e;return e}};return n(),this})}}(jQuery),$(function(){jQuery.validator.addMethod("emails",function(e,t){return this.optional(t)||/^((, *)*((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)+$/i.test(e)}," Please enter valid email addresses."),$(".invitation_form").validate({errorClass:"validation_error"})}),/**
 * Copyright (c) 2010 Anders Ekdahl (http://coffeescripter.com/)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.2.4
 *
 * Demo and documentation: http://coffeescripter.com/code/ad-gallery/
 */
function(e){function t(e,t,i){var n=parseInt(e.css("top"),10);if("left"==t){var r="-"+this.image_wrapper_height+"px";e.css("top",this.image_wrapper_height+"px")}else{var r=this.image_wrapper_height+"px";e.css("top","-"+this.image_wrapper_height+"px")}return i&&(i.css("bottom","-"+i[0].offsetHeight+"px"),i.animate({bottom:0},2*this.settings.animation_speed)),this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},2*this.settings.animation_speed),{old_image:{top:r},new_image:{top:n}}}function i(e,t,i){var n=parseInt(e.css("left"),10);if("left"==t){var r="-"+this.image_wrapper_width+"px";e.css("left",this.image_wrapper_width+"px")}else{var r=this.image_wrapper_width+"px";e.css("left","-"+this.image_wrapper_width+"px")}return i&&(i.css("bottom","-"+i[0].offsetHeight+"px"),i.animate({bottom:0},2*this.settings.animation_speed)),this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},2*this.settings.animation_speed),{old_image:{left:r},new_image:{left:n}}}function n(e){var t=e.width(),i=e.height(),n=parseInt(e.css("left"),10),r=parseInt(e.css("top"),10);return e.css({width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2}),{old_image:{width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2},new_image:{width:t,height:i,top:r,left:n}}}function r(e){return e.css("opacity",0),{old_image:{opacity:0},new_image:{opacity:1}}}function s(e){return e.css("opacity",0),{old_image:{opacity:0},new_image:{opacity:1},speed:0}}function a(e,t){this.init(e,t)}function o(e,t){this.init(e,t)}e.fn.adGallery=function(t){var i={loader_image:"loader.gif",start_at_index:0,description_wrapper:!1,thumb_opacity:.7,animate_first_image:!1,animation_speed:400,width:!1,height:!1,display_next_and_prev:!0,display_back_and_forward:!0,scroll_jump:0,slideshow:{enable:!0,autostart:!1,speed:5e3,start_label:"Start",stop_label:"Stop",stop_on_scroll:!0,countdown_prefix:"(",countdown_sufix:")",onStart:!1,onStop:!1},effect:"slide-hori",enable_keyboard_move:!0,cycle:!0,callbacks:{init:!1,afterImageVisible:!1,beforeImageVisible:!1}},n=e.extend(!1,i,t);t&&t.slideshow&&(n.slideshow=e.extend(!1,i.slideshow,t.slideshow)),n.slideshow.enable||(n.slideshow.autostart=!1);var r=[];return e(this).each(function(){var e=new a(this,n);r[r.length]=e}),r},a.prototype={wrapper:!1,image_wrapper:!1,gallery_info:!1,nav:!1,loader:!1,preloads:!1,thumbs_wrapper:!1,scroll_back:!1,scroll_forward:!1,next_link:!1,prev_link:!1,slideshow:!1,image_wrapper_width:0,image_wrapper_height:0,current_index:0,current_image:!1,current_description:!1,nav_display_width:0,settings:!1,images:!1,in_transition:!1,animations:!1,init:function(t,i){var n=this;this.wrapper=e(t),this.settings=i,this.setupElements(),this.setupAnimations(),this.settings.width?(this.image_wrapper_width=this.settings.width,this.image_wrapper.width(this.settings.width),this.wrapper.width(this.settings.width)):this.image_wrapper_width=this.image_wrapper.width(),this.settings.height?(this.image_wrapper_height=this.settings.height,this.image_wrapper.height(this.settings.height)):this.image_wrapper_height=this.image_wrapper.height(),this.nav_display_width=this.nav.width(),this.current_index=0,this.current_image=!1,this.current_description=!1,this.in_transition=!1,this.findImages(),this.settings.display_next_and_prev&&this.initNextAndPrev();var r=function(e){return n.nextImage(e)};this.slideshow=new o(r,this.settings.slideshow),this.controls.append(this.slideshow.create()),this.settings.slideshow.enable?this.slideshow.enable():this.slideshow.disable(),this.settings.display_back_and_forward&&this.initBackAndForward(),this.settings.enable_keyboard_move&&this.initKeyEvents();var s=parseInt(this.settings.start_at_index,10);window.location.hash&&0===window.location.hash.indexOf("#ad-image")&&(s=window.location.hash.replace(/[^0-9]+/g,""),1*s!=s&&(s=this.settings.start_at_index)),this.loading(!0),this.showImage(s,function(){n.settings.slideshow.autostart&&(n.preloadImage(s+1),n.slideshow.start())}),this.fireCallback(this.settings.callbacks.init)},setupAnimations:function(){this.animations={"slide-vert":t,"slide-hori":i,resize:n,fade:r,none:s}},setupElements:function(){this.controls=this.wrapper.find(".ad-controls"),this.gallery_info=e('<p class="ad-info"></p>'),this.controls.append(this.gallery_info),this.image_wrapper=this.wrapper.find(".ad-image-wrapper"),this.image_wrapper.empty(),this.nav=this.wrapper.find(".ad-nav"),this.thumbs_wrapper=this.nav.find(".ad-thumbs"),this.preloads=e('<div class="ad-preloads"></div>'),this.loader=e('<img class="ad-loader" src="'+this.settings.loader_image+'">'),this.image_wrapper.append(this.loader),this.loader.hide(),e(document.body).append(this.preloads)},loading:function(e){e?this.loader.show():this.loader.hide()},addAnimation:function(t,i){e.isFunction(i)&&(this.animations[t]=i)},findImages:function(){var t=this;this.images=[];var i=0,n=0,r=this.thumbs_wrapper.find("a"),s=r.length;1>this.settings.thumb_opacity&&r.find("img").css("opacity",this.settings.thumb_opacity),r.each(function(r){var s=e(this),a=s.attr("href"),o=s.find("img");t.isImageLoaded(o[0])?(i+=o[0].parentNode.parentNode.offsetWidth,n++):o.load(function(){i+=this.parentNode.parentNode.offsetWidth,n++}),s.addClass("ad-thumb"+r),s.click(function(){return t.showImage(r),t.slideshow.stop(),!1}).hover(function(){!e(this).is(".ad-active")&&1>t.settings.thumb_opacity&&e(this).find("img").fadeTo(300,1),t.preloadImage(r)},function(){!e(this).is(".ad-active")&&1>t.settings.thumb_opacity&&e(this).find("img").fadeTo(300,t.settings.thumb_opacity)});var s=!1;o.data("ad-link")?s=o.data("ad-link"):o.attr("longdesc")&&o.attr("longdesc").length&&(s=o.attr("longdesc"));var l=!1;o.data("ad-desc")?l=o.data("ad-desc"):o.attr("alt")&&o.attr("alt").length&&(l=o.attr("alt"));var c=!1;o.data("ad-title")?c=o.data("ad-title"):o.attr("title")&&o.attr("title").length&&(c=o.attr("title")),t.images[r]={thumb:o.attr("src"),image:a,error:!1,preloaded:!1,desc:l,title:c,size:!1,link:s}});var a=setInterval(function(){if(s==n){i-=100;var e=t.nav.find(".ad-thumb-list");e.css("width",i+"px");for(var r=1,o=e.height();201>r&&(e.css("width",i+r+"px"),o==e.height());)o=e.height(),r++;clearInterval(a)}},100)},initKeyEvents:function(){var t=this;e(document).keydown(function(e){39==e.keyCode?(t.nextImage(),t.slideshow.stop()):37==e.keyCode&&(t.prevImage(),t.slideshow.stop())})},initNextAndPrev:function(){this.next_link=e('<div class="ad-next"><div class="ad-next-image"></div></div>'),this.prev_link=e('<div class="ad-prev"><div class="ad-prev-image"></div></div>'),this.image_wrapper.append(this.next_link),this.image_wrapper.append(this.prev_link);var t=this;this.prev_link.add(this.next_link).mouseover(function(){e(this).css("height",t.image_wrapper_height),e(this).find("div").show()}).mouseout(function(){e(this).find("div").hide()}).click(function(){e(this).is(".ad-next")?(t.nextImage(),t.slideshow.stop()):(t.prevImage(),t.slideshow.stop())}).find("div").css("opacity",.7)},initBackAndForward:function(){var t=this;this.scroll_forward=e('<div class="ad-forward"></div>'),this.scroll_back=e('<div class="ad-back"></div>'),this.nav.append(this.scroll_forward),this.nav.prepend(this.scroll_back);var i=0,n=!1;e(this.scroll_back).add(this.scroll_forward).click(function(){var i=t.nav_display_width-50;if(t.settings.scroll_jump>0)var i=t.settings.scroll_jump;if(e(this).is(".ad-forward"))var n=t.thumbs_wrapper.scrollLeft()+i;else var n=t.thumbs_wrapper.scrollLeft()-i;return t.settings.slideshow.stop_on_scroll&&t.slideshow.stop(),t.thumbs_wrapper.animate({scrollLeft:n+"px"}),!1}).css("opacity",.6).hover(function(){var r="left";e(this).is(".ad-forward")&&(r="right"),n=setInterval(function(){i++,i>30&&t.settings.slideshow.stop_on_scroll&&t.slideshow.stop();var e=t.thumbs_wrapper.scrollLeft()+1;"left"==r&&(e=t.thumbs_wrapper.scrollLeft()-1),t.thumbs_wrapper.scrollLeft(e)},10),e(this).css("opacity",1)},function(){i=0,clearInterval(n),e(this).css("opacity",.6)})},_afterShow:function(){this.gallery_info.html(this.current_index+1+" / "+this.images.length),this.settings.cycle||(this.prev_link.show().css("height",this.image_wrapper_height),this.next_link.show().css("height",this.image_wrapper_height),this.current_index==this.images.length-1&&this.next_link.hide(),0==this.current_index&&this.prev_link.hide()),this.fireCallback(this.settings.callbacks.afterImageVisible)},_getContainedImageSize:function(e,t){if(t>this.image_wrapper_height){var i=e/t;t=this.image_wrapper_height,e=this.image_wrapper_height*i}if(e>this.image_wrapper_width){var i=t/e;e=this.image_wrapper_width,t=this.image_wrapper_width*i}return{width:e,height:t}},_centerImage:function(e,t,i){if(e.css("top","0px"),this.image_wrapper_height>i){var n=this.image_wrapper_height-i;e.css("top",n/2+"px")}if(e.css("left","0px"),this.image_wrapper_width>t){var n=this.image_wrapper_width-t;e.css("left",n/2+"px")}},_getDescription:function(t){var i=!1;if(t.desc.length||t.title.length){var n="";t.title.length&&(n='<strong class="ad-description-title">'+t.title+"</strong>");var i="";t.desc.length&&(i="<span>"+t.desc+"</span>"),i=e('<p class="ad-image-description">'+n+i+"</p>")}return i},showImage:function(e,t){if(this.images[e]&&!this.in_transition){var i=this,n=this.images[e];this.in_transition=!0,n.preloaded?this._showWhenLoaded(e,t):(this.loading(!0),this.preloadImage(e,function(){i.loading(!1),i._showWhenLoaded(e,t)}))}},_showWhenLoaded:function(t,i){if(this.images[t]){var n=this,r=this.images[t],s=e(document.createElement("div")).addClass("ad-image"),a=e(new Image).attr("src",r.image);if(r.link){var o=e('<a href="'+r.link+'" target="_blank"></a>');o.append(a),s.append(o)}else s.append(a);this.image_wrapper.prepend(s);var l=this._getContainedImageSize(r.size.width,r.size.height);a.attr("width",l.width),a.attr("height",l.height),s.css({width:l.width+"px",height:l.height+"px"}),this._centerImage(s,l.width,l.height);var c=this._getDescription(r,s);if(c)if(this.settings.description_wrapper)this.settings.description_wrapper.append(c);else{s.append(c);var u=l.width-parseInt(c.css("padding-left"),10)-parseInt(c.css("padding-right"),10);c.css("width",u+"px")}this.highLightThumb(this.nav.find(".ad-thumb"+t));var h="right";if(t>this.current_index&&(h="left"),this.fireCallback(this.settings.callbacks.beforeImageVisible),this.current_image||this.settings.animate_first_image){var d=this.settings.animation_speed,f="swing",p=this.animations[this.settings.effect].call(this,s,h,c);if("undefined"!=typeof p.speed&&(d=p.speed),"undefined"!=typeof p.easing&&(f=p.easing),this.current_image){var m=this.current_image,g=this.current_description;m.animate(p.old_image,d,f,function(){m.remove(),g&&g.remove()})}s.animate(p.new_image,d,f,function(){n.current_index=t,n.current_image=s,n.current_description=c,n.in_transition=!1,n._afterShow(),n.fireCallback(i)})}else this.current_index=t,this.current_image=s,n.current_description=c,this.in_transition=!1,n._afterShow(),this.fireCallback(i)}},nextIndex:function(){if(this.current_index==this.images.length-1){if(!this.settings.cycle)return!1;var e=0}else var e=this.current_index+1;return e},nextImage:function(e){var t=this.nextIndex();return t===!1?!1:(this.preloadImage(t+1),this.showImage(t,e),!0)},prevIndex:function(){if(0==this.current_index){if(!this.settings.cycle)return!1;var e=this.images.length-1}else var e=this.current_index-1;return e},prevImage:function(e){var t=this.prevIndex();return t===!1?!1:(this.preloadImage(t-1),this.showImage(t,e),!0)},preloadAll:function(){function e(){t.images.length>i&&(i++,t.preloadImage(i,e))}var t=this,i=0;t.preloadImage(i,e)},preloadImage:function(t,i){if(this.images[t]){var n=this.images[t];if(this.images[t].preloaded)this.fireCallback(i);else{var r=e(new Image);if(r.attr("src",n.image),this.isImageLoaded(r[0]))n.preloaded=!0,n.size={width:r[0].width,height:r[0].height},this.fireCallback(i);else{this.preloads.append(r);var s=this;r.load(function(){n.preloaded=!0,n.size={width:this.width,height:this.height},s.fireCallback(i)}).error(function(){n.error=!0,n.preloaded=!1,n.size=!1})}}}},isImageLoaded:function(e){return"undefined"==typeof e.complete||e.complete?"undefined"!=typeof e.naturalWidth&&0==e.naturalWidth?!1:!0:!1},highLightThumb:function(e){this.thumbs_wrapper.find(".ad-active").removeClass("ad-active"),e.addClass("ad-active"),1>this.settings.thumb_opacity&&(this.thumbs_wrapper.find("a:not(.ad-active) img").fadeTo(300,this.settings.thumb_opacity),e.find("img").fadeTo(300,1));var t=e[0].parentNode.offsetLeft;t-=this.nav_display_width/2-e[0].offsetWidth/2,this.thumbs_wrapper.animate({scrollLeft:t+"px"})},fireCallback:function(t){e.isFunction(t)&&t.call(this)}},o.prototype={start_link:!1,stop_link:!1,countdown:!1,controls:!1,settings:!1,nextimage_callback:!1,enabled:!1,running:!1,countdown_interval:!1,init:function(e,t){this.nextimage_callback=e,this.settings=t},create:function(){this.start_link=e('<span class="ad-slideshow-start">'+this.settings.start_label+"</span>"),this.stop_link=e('<span class="ad-slideshow-stop">'+this.settings.stop_label+"</span>"),this.countdown=e('<span class="ad-slideshow-countdown"></span>'),this.controls=e('<div class="ad-slideshow-controls"></div>'),this.controls.append(this.start_link).append(this.stop_link).append(this.countdown),this.countdown.hide();var t=this;return this.start_link.click(function(){t.start()}),this.stop_link.click(function(){t.stop()}),e(document).keydown(function(e){83==e.keyCode&&(t.running?t.stop():t.start())}),this.controls},disable:function(){this.enabled=!1,this.stop(),this.controls.hide()},enable:function(){this.enabled=!0,this.controls.show()},toggle:function(){this.enabled?this.disable():this.enable()},start:function(){return this.running||!this.enabled?!1:(this.running=!0,this.controls.addClass("ad-slideshow-running"),this._next(),this.fireCallback(this.settings.onStart),!0)},stop:function(){return this.running?(this.running=!1,this.countdown.hide(),this.controls.removeClass("ad-slideshow-running"),clearInterval(this.countdown_interval),this.fireCallback(this.settings.onStop),!0):!1},_next:function(){var e=this,t=this.settings.countdown_prefix,i=this.settings.countdown_sufix;clearInterval(e.countdown_interval),this.countdown.show().html(t+this.settings.speed/1e3+i);var n=0;this.countdown_interval=setInterval(function(){if(n+=1e3,n>=e.settings.speed){var r=function(){e.running&&e._next(),n=0};e.nextimage_callback(r)||e.stop(),n=0}var s=parseInt(e.countdown.text().replace(/[^0-9]/g,""),10);s--,s>0&&e.countdown.html(t+s+i)},1e3)},fireCallback:function(t){e.isFunction(t)&&t.call(this)}}}(jQuery),/**
 * Copyright (c) 2010 Anders Ekdahl (http://coffeescripter.com/)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.2.4
 *
 * Demo and documentation: http://coffeescripter.com/code/ad-gallery/
 */
eval(function(e,t,i,n,r,s){if(r=function(e){return(t>e?"":r(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;i--;)s[r(i)]=n[i]||r(i);n=[function(e){return s[e]}],r=function(){return"\\w+"},i=1}for(;i--;)n[i]&&(e=e.replace(new RegExp("\\b"+r(i)+"\\b","g"),n[i]));return e}("(8($){$.3n.3o=8(b){5 c={2s:'Z.3p',1W:0,1X:q,11:0.7,2t:q,1b:3q,v:q,x:q,2u:B,2v:B,1Y:0,t:{1c:B,1Z:q,1d:3r,2w:'3s',2x:'3t',20:B,2y:'(',2z:')',2A:q,2B:q},2C:'21-2D',2E:B,1z:B,1A:{1e:q,2F:q,2G:q}};5 d=$.2H(q,c,b);4(b&&b.t){d.t=$.2H(q,c.t,b.t)};4(!d.t.1c){d.t.1Z=q};5 e=[];$(3).2I(8(){5 a=1B 22(3,d);e[e.J]=a});w e};8 2J(a,b,c){5 d=12(a.u('Q'),10);4(b=='C'){5 e='-'+3.D+'z';a.u('Q',3.D+'z')}y{5 e=3.D+'z';a.u('Q','-'+3.D+'z')};4(c){c.u('1f','-'+c[0].1C+'z');c.13({1f:0},3.r.1b*2)};4(3.R){3.R.13({1f:'-'+3.R[0].1C+'z'},3.r.1b*2)};w{1g:{Q:e},1h:{Q:d}}};8 2K(a,b,c){5 d=12(a.u('C'),10);4(b=='C'){5 e='-'+3.K+'z';a.u('C',3.K+'z')}y{5 e=3.K+'z';a.u('C','-'+3.K+'z')};4(c){c.u('1f','-'+c[0].1C+'z');c.13({1f:0},3.r.1b*2)};4(3.R){3.R.13({1f:'-'+3.R[0].1C+'z'},3.r.1b*2)};w{1g:{C:e},1h:{C:d}}};8 2L(a,b,c){5 d=a.v();5 e=a.x();5 f=12(a.u('C'),10);5 g=12(a.u('Q'),10);a.u({v:0,x:0,Q:3.D/2,C:3.K/2});w{1g:{v:0,x:0,Q:3.D/2,C:3.K/2},1h:{v:d,x:e,Q:g,C:f}}};8 2M(a,b,c){a.u('S',0);w{1g:{S:0},1h:{S:1}}};8 2N(a,b,c){a.u('S',0);w{1g:{S:0},1h:{S:1},1d:0}};8 22(a,b){3.1e(a,b)};22.2O={17:q,T:q,1D:q,V:q,Z:q,1r:q,N:q,1E:q,1F:q,1i:q,1j:q,t:q,K:0,D:0,O:0,18:q,R:q,1G:0,r:q,G:q,1k:q,1H:q,1e:8(b,c){5 d=3;3.17=$(b);3.r=c;3.2P();3.2Q();4(3.r.v){3.K=3.r.v;3.T.v(3.r.v);3.17.v(3.r.v)}y{3.K=3.T.v()};4(3.r.x){3.D=3.r.x;3.T.x(3.r.x)}y{3.D=3.T.x()};3.1G=3.V.v();3.O=0;3.18=q;3.R=q;3.1k=q;3.2R();4(3.r.2u){3.2S()};5 e=8(a){w d.1I(a)};3.t=1B 23(e,3.r.t);3.L.F(3.t.2T());4(3.r.t.1c){3.t.1c()}y{3.t.24()};4(3.r.2v){3.2U()};4(3.r.2E){3.2V()};5 f=12(3.r.1W,10);4(25.26.27&&25.26.27.3u('#s-W')===0){f=25.26.27.2W(/[^0-9]+/g,'');4((f*1)!=f){f=3.r.1W}};3.1J(B);3.1s(f,8(){4(d.r.t.1Z){d.14(f+1);d.t.1t()}});3.P(3.r.1A.1e)},2Q:8(){3.1H={'21-3v':2J,'21-2D':2K,'3w':2L,'3x':2M,'3y':2N}},2P:8(){3.L=3.17.E('.s-L');3.1D=$('<p H=\"s-3z\"></p>');3.L.F(3.1D);3.T=3.17.E('.s-W-17');3.T.3A();3.V=3.17.E('.s-V');3.N=3.V.E('.s-3B');3.1r=$('<A H=\"s-1r\"></A>');3.Z=$('<19 H=\"s-Z\" 1K=\"'+3.r.2s+'\">');3.T.F(3.Z);3.Z.15();$(1L.3C).F(3.1r)},1J:8(a){4(a){3.Z.1l()}y{3.Z.15()}},3D:8(a,b){4($.28(b)){3.1H[a]=b}},2R:8(){5 f=3;3.G=[];5 g=0;5 h=0;5 j=3.N.E('a');5 k=j.J;4(3.r.11<1){j.E('19').u('S',3.r.11)};j.2I(8(i){5 a=$(3);5 b=a.I('2X');5 c=a.E('19');4(!f.29(c[0])){c.2Y(8(){g+=3.1u.1u.2a;h++})}y{g+=c[0].1u.1u.2a;h++};a.1M('s-1N'+i);a.1v(8(){f.1s(i);f.t.M();w q}).2Z(8(){4(!$(3).1w('.s-1m')&&f.r.11<1){$(3).E('19').1O(1P,1)};f.14(i)},8(){4(!$(3).1w('.s-1m')&&f.r.11<1){$(3).E('19').1O(1P,f.r.11)}});5 a=q;4(c.1n('s-1x')){a=c.1n('s-1x')}y 4(c.I('2b')&&c.I('2b').J){a=c.I('2b')};5 d=q;4(c.1n('s-1o')){d=c.1n('s-1o')}y 4(c.I('2c')&&c.I('2c').J){d=c.I('2c')};5 e=q;4(c.1n('s-U')){e=c.1n('s-U')}y 4(c.I('U')&&c.I('U').J){e=c.I('U')};f.G[i]={1N:c.I('1K'),W:b,2d:q,1p:q,1o:d,U:e,1q:q,1x:a}});5 l=2e(8(){4(k==h){f.V.E('.s-1N-3E').u('v',g+'z');1Q(l)}},3F)},2V:8(){5 a=3;$(1L).31(8(e){4(e.2f==39){a.1I();a.t.M()}y 4(e.2f==37){a.2g();a.t.M()}})},2S:8(){3.1i=$('<A H=\"s-2h\"><A H=\"s-2h-W\"></A></A>');3.1j=$('<A H=\"s-32\"><A H=\"s-32-W\"></A></A>');3.T.F(3.1i);3.T.F(3.1j);5 a=3;3.1j.33(3.1i).3G(8(e){$(3).u('x',a.D);$(3).E('A').1l()}).3H(8(e){$(3).E('A').15()}).1v(8(){4($(3).1w('.s-2h')){a.1I();a.t.M()}y{a.2g();a.t.M()}}).E('A').u('S',0.7)},2U:8(){5 c=3;3.1F=$('<A H=\"s-2i\"></A>');3.1E=$('<A H=\"s-3I\"></A>');3.V.F(3.1F);3.V.34(3.1E);5 d=0;5 e=q;$(3.1E).33(3.1F).1v(8(){5 a=c.1G-3J;4(c.r.1Y>0){5 a=c.r.1Y};4($(3).1w('.s-2i')){5 b=c.N.1a()+a}y{5 b=c.N.1a()-a};4(c.r.t.20){c.t.M()};c.N.13({1a:b+'z'});w q}).u('S',0.6).2Z(8(){5 b='C';4($(3).1w('.s-2i')){b='2j'};e=2e(8(){d++;4(d>30&&c.r.t.20){c.t.M()};5 a=c.N.1a()+1;4(b=='C'){a=c.N.1a()-1};c.N.1a(a)},10);$(3).u('S',1)},8(){d=0;1Q(e);$(3).u('S',0.6)})},2k:8(){3.1D.2l((3.O+1)+' / '+3.G.J);4(!3.r.1z){3.1j.1l().u('x',3.D);3.1i.1l().u('x',3.D);4(3.O==(3.G.J-1)){3.1i.15()};4(3.O==0){3.1j.15()}};3.P(3.r.1A.2F)},35:8(a,b){4(b>3.D){5 c=a/b;b=3.D;a=3.D*c};4(a>3.K){5 c=b/a;a=3.K;b=3.K*c};w{v:a,x:b}},36:8(a,b,c){a.u('Q','38');4(c<3.D){5 d=3.D-c;a.u('Q',(d/2)+'z')};a.u('C','38');4(b<3.K){5 d=3.K-b;a.u('C',(d/2)+'z')}},3a:8(a){5 b=q;4(a.1o.J||a.U.J){5 c='';4(a.U.J){c='<3b H=\"s-3c-U\">'+a.U+'</3b>'};5 b='';4(a.1o.J){b='<16>'+a.1o+'</16>'};b=$('<p H=\"s-W-3c\">'+c+b+'</p>')};w b},1s:8(a,b){4(3.G[a]&&!3.1k){5 c=3;5 d=3.G[a];3.1k=B;4(!d.1p){3.1J(B);3.14(a,8(){c.1J(q);c.2m(a,b)})}y{3.2m(a,b)}}},2m:8(a,b){4(3.G[a]){5 c=3;5 d=3.G[a];5 e=$(1L.3K('A')).1M('s-W');5 f=$(1B 3d()).I('1K',d.W);4(d.1x){5 g=$('<a 2X=\"'+d.1x+'\" 3L=\"3M\"></a>');g.F(f);e.F(g)}y{e.F(f)}3.T.34(e);5 h=3.35(d.1q.v,d.1q.x);f.I('v',h.v);f.I('x',h.x);e.u({v:h.v+'z',x:h.x+'z'});3.36(e,h.v,h.x);5 i=3.3a(d,e);4(i){4(!3.r.1X){e.F(i);5 j=h.v-12(i.u('3e-C'),10)-12(i.u('3e-2j'),10);i.u('v',j+'z')}y{3.r.1X.F(i)}};3.3f(3.V.E('.s-1N'+a));5 k='2j';4(3.O<a){k='C'};3.P(3.r.1A.2G);4(3.18||3.r.2t){5 l=3.r.1b;5 m='3N';5 n=3.1H[3.r.2C].2n(3,e,k,i);4(1R n.1d!='1S'){l=n.1d};4(1R n.3g!='1S'){m=n.3g};4(3.18){5 o=3.18;5 p=3.R;o.13(n.1g,l,m,8(){o.3h();4(p)p.3h()})};e.13(n.1h,l,m,8(){c.O=a;c.18=e;c.R=i;c.1k=q;c.2k();c.P(b)})}y{3.O=a;3.18=e;c.R=i;3.1k=q;c.2k();3.P(b)}}},3i:8(){4(3.O==(3.G.J-1)){4(!3.r.1z){w q};5 a=0}y{5 a=3.O+1};w a},1I:8(a){5 b=3.3i();4(b===q)w q;3.14(b+1);3.1s(b,a);w B},3j:8(){4(3.O==0){4(!3.r.1z){w q};5 a=3.G.J-1}y{5 a=3.O-1};w a},2g:8(a){5 b=3.3j();4(b===q)w q;3.14(b-1);3.1s(b,a);w B},3O:8(){5 a=3;5 i=0;8 2o(){4(i<a.G.J){i++;a.14(i,2o)}};a.14(i,2o)},14:8(a,b){4(3.G[a]){5 c=3.G[a];4(!3.G[a].1p){5 d=$(1B 3d());d.I('1K',c.W);4(!3.29(d[0])){3.1r.F(d);5 e=3;d.2Y(8(){c.1p=B;c.1q={v:3.v,x:3.x};e.P(b)}).2d(8(){c.2d=B;c.1p=q;c.1q=q})}y{c.1p=B;c.1q={v:d[0].v,x:d[0].x};3.P(b)}}y{3.P(b)}}},29:8(a){4(1R a.3k!='1S'&&!a.3k){w q};4(1R a.3l!='1S'&&a.3l==0){w q};w B},3f:8(a){3.N.E('.s-1m').3m('s-1m');a.1M('s-1m');4(3.r.11<1){3.N.E('a:3P(.s-1m) 19').1O(1P,3.r.11);a.E('19').1O(1P,1)};5 b=a[0].1u.3Q;b-=(3.1G/2)-(a[0].2a/2);3.N.13({1a:b+'z'})},P:8(a){4($.28(a)){a.2n(3)}}};8 23(a,b){3.1e(a,b)};23.2O={1T:q,1U:q,X:q,L:q,r:q,2p:q,1y:q,Y:q,1V:q,1e:8(a,b){5 c=3;3.2p=a;3.r=b},2T:8(){3.1T=$('<16 H=\"s-t-1t\">'+3.r.2w+'</16>');3.1U=$('<16 H=\"s-t-M\">'+3.r.2x+'</16>');3.X=$('<16 H=\"s-t-X\"></16>');3.L=$('<A H=\"s-t-L\"></A>');3.L.F(3.1T).F(3.1U).F(3.X);3.X.15();5 a=3;3.1T.1v(8(){a.1t()});3.1U.1v(8(){a.M()});$(1L).31(8(e){4(e.2f==3R){4(a.Y){a.M()}y{a.1t()}}});w 3.L},24:8(){3.1y=q;3.M();3.L.15()},1c:8(){3.1y=B;3.L.1l()},3S:8(){4(3.1y){3.24()}y{3.1c()}},1t:8(){4(3.Y||!3.1y)w q;5 a=3;3.Y=B;3.L.1M('s-t-Y');3.2q();3.P(3.r.2A);w B},M:8(){4(!3.Y)w q;3.Y=q;3.X.15();3.L.3m('s-t-Y');1Q(3.1V);3.P(3.r.2B);w B},2q:8(){5 c=3;5 d=3.r.2y;5 e=3.r.2z;1Q(c.1V);3.X.1l().2l(d+(3.r.1d/2r)+e);5 f=0;3.1V=2e(8(){f+=2r;4(f>=c.r.1d){5 a=8(){4(c.Y){c.2q()};f=0};4(!c.2p(a)){c.M()};f=0};5 b=12(c.X.3T().2W(/[^0-9]/g,''),10);b--;4(b>0){c.X.2l(d+b+e)}},2r)},P:8(a){4($.28(a)){a.2n(3)}}}})(3U);",62,243,"|||this|if|var|||function||||||||||||||||||false|settings|ad|slideshow|css|width|return|height|else|px|div|true|left|image_wrapper_height|find|append|images|class|attr|length|image_wrapper_width|controls|stop|thumbs_wrapper|current_index|fireCallback|top|current_description|opacity|image_wrapper|title|nav|image|countdown|running|loader||thumb_opacity|parseInt|animate|preloadImage|hide|span|wrapper|current_image|img|scrollLeft|animation_speed|enable|speed|init|bottom|old_image|new_image|next_link|prev_link|in_transition|show|active|data|desc|preloaded|size|preloads|showImage|start|parentNode|click|is|link|enabled|cycle|callbacks|new|offsetHeight|gallery_info|scroll_back|scroll_forward|nav_display_width|animations|nextImage|loading|src|document|addClass|thumb|fadeTo|300|clearInterval|typeof|undefined|start_link|stop_link|countdown_interval|start_at_index|description_wrapper|scroll_jump|autostart|stop_on_scroll|slide|AdGallery|AdGallerySlideshow|disable|window|location|hash|isFunction|isImageLoaded|offsetWidth|longdesc|alt|error|setInterval|keyCode|prevImage|next|forward|right|_afterShow|html|_showWhenLoaded|call|preloadNext|nextimage_callback|_next|1000|loader_image|animate_first_image|display_next_and_prev|display_back_and_forward|start_label|stop_label|countdown_prefix|countdown_sufix|onStart|onStop|effect|hori|enable_keyboard_move|afterImageVisible|beforeImageVisible|extend|each|VerticalSlideAnimation|HorizontalSlideAnimation|ResizeAnimation|FadeAnimation|NoneAnimation|prototype|setupElements|setupAnimations|findImages|initNextAndPrev|create|initBackAndForward|initKeyEvents|replace|href|load|hover||keydown|prev|add|prepend|_getContainedImageSize|_centerImage||0px||_getDescription|strong|description|Image|padding|highLightThumb|easing|remove|nextIndex|prevIndex|complete|naturalWidth|removeClass|fn|adGallery|gif|400|5000|Start|Stop|indexOf|vert|resize|fade|none|info|empty|thumbs|body|addAnimation|list|100|mouseover|mouseout|back|50|createElement|target|_blank|swing|preloadAll|not|offsetLeft|83|toggle|text|jQuery".split("|"),0,{})),function(e){e.fn.hoverIntent=function(t,i){var n={sensitivity:7,interval:100,timeout:0};n=e.extend(n,i?{over:t,out:i}:t);var r,s,a,o,l=function(e){r=e.pageX,s=e.pageY},c=function(t,i){return i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(a-r)+Math.abs(o-s)<n.sensitivity?(e(i).unbind("mousemove",l),i.hoverIntent_s=1,n.over.apply(i,[t])):(a=r,o=s,i.hoverIntent_t=setTimeout(function(){c(t,i)},n.interval),void 0)},u=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,n.out.apply(t,[e])},h=function(t){for(var i=("mouseover"==t.type?t.fromElement:t.toElement)||t.relatedTarget;i&&i!=this;)try{i=i.parentNode}catch(t){i=this}if(i==this)return!1;var r=jQuery.extend({},t),s=this;s.hoverIntent_t&&(s.hoverIntent_t=clearTimeout(s.hoverIntent_t)),"mouseover"==t.type?(a=r.pageX,o=r.pageY,e(s).bind("mousemove",l),1!=s.hoverIntent_s&&(s.hoverIntent_t=setTimeout(function(){c(r,s)},n.interval))):(e(s).unbind("mousemove",l),1==s.hoverIntent_s&&(s.hoverIntent_t=setTimeout(function(){u(r,s)},n.timeout)))};return this.mouseover(h).mouseout(h)}}(jQuery),function(e){e.fn.superfish=function(t){var i=e.fn.superfish,n=i.c,r=e(['<span class="',n.arrowClass,'"> &#187;</span>'].join("")),s=function(){var t=e(this),i=o(t);clearTimeout(i.sfTimer),t.showSuperfishUl().siblings().hideSuperfishUl()},a=function(){var t=e(this),n=o(t),r=i.op;clearTimeout(n.sfTimer),n.sfTimer=setTimeout(function(){r.retainPath=e.inArray(t[0],r.$path)>-1,t.hideSuperfishUl(),r.$path.length&&1>t.parents(["li.",r.hoverClass].join("")).length&&s.call(r.$path)},r.delay)},o=function(e){var t=e.parents(["ul.",n.menuClass,":first"].join(""))[0];return i.op=i.o[t.serial],t},l=function(e){e.addClass(n.anchorClass).append(r.clone())};return this.each(function(){var r=this.serial=i.o.length,o=e.extend({},i.defaults,t);o.$path=e("li."+o.pathClass,this).slice(0,o.pathLevels).each(function(){e(this).addClass([o.hoverClass,n.bcClass].join(" ")).filter("li:has(ul)").removeClass(o.pathClass)}),i.o[r]=i.op=o,e("li:has(ul)",this)[e.fn.hoverIntent&&!o.disableHI?"hoverIntent":"hover"](s,a).each(function(){o.autoArrows&&l(e(">a:first-child",this))}).not("."+n.bcClass).hideSuperfishUl();var c=e("a",this);c.each(function(e){var t=c.eq(e).parents("li");c.eq(e).focus(function(){s.call(t)}).blur(function(){a.call(t)})}),o.onInit.call(this)}).each(function(){var t=[n.menuClass];!i.op.dropShadows||e.browser.msie&&7>e.browser.version||t.push(n.shadowClass),e(this).addClass(t.join(" "))})};var t=e.fn.superfish;t.o=[],t.op={},t.IE7fix=function(){var i=t.op;e.browser.msie&&e.browser.version>6&&i.dropShadows&&void 0!=i.animation.opacity&&this.toggleClass(t.c.shadowClass+"-off")},t.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"},t.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}},e.fn.extend({hideSuperfishUl:function(){var i=t.op,n=i.retainPath===!0?i.$path:"";i.retainPath=!1;var r=e(["li.",i.hoverClass].join(""),this).add(this).not(n).removeClass(i.hoverClass).find(">ul").hide().css("visibility","hidden");return i.onHide.call(r),this},showSuperfishUl:function(){var e=t.op,i=(t.c.shadowClass+"-off",this.addClass(e.hoverClass).find(">ul:hidden").css("visibility","visible"));return t.IE7fix.call(i),e.onBeforeShow.call(i),i.animate(e.animation,e.speed,function(){t.IE7fix.call(i),e.onShow.call(i)}),this}})}(jQuery),$(function(){jQuery("ul.sf-menu").superfish({animation:{height:"show"},speed:"fast",autoArrows:!1,dropShadows:!1}),$("#tabright> ul").tabs({fx:{height:"toggle",opacity:"toggle"}})}),function(e){e.fn.aeImageResize=function(t){var i=0,n=e.browser.msie&&6==~~e.browser.version;return t.height||t.width?(t.height&&t.width&&(i=t.width/t.height),this.one("load",function(){this.removeAttribute("height"),this.removeAttribute("width"),this.style.height=this.style.width="";var e=this.height,n=this.width,r=n/e,s=t.height,a=t.width,o=i;o||(o=s?r+1:r-1),(s&&e>s||a&&n>a)&&(r>o?s=~~(e/n*a):a=~~(n/e*s),this.height=s,this.width=a)}).each(function(){(this.complete||n)&&e(this).trigger("load")})):this}}(jQuery),$.preloadImages=function(){for(var e=0;arguments.length>e;e++)img=new Image,img.src=arguments[e]},$(function(){jQuery.validator.addMethod("phone",function(e,t){return this.optional(t)||/^((\((\+?)\d+\))?|(\+\d+)?)[ ]*-?(\d+[ ]*\-?[ ]*\d*)+$/.test(e)}," Please enter a valid telephone number"),$(".edit_profile").validate({errorClass:"validation_error"})}),closeAllSettings=function(){$(".settings_content").hide("slow"),$(".settings_briefing").show("slow")},showSettings=function(e){closeAllSettings(),"none"==$("#"+e+"_content").css("display")?($("#"+e+"_briefing").hide("slow"),$("#"+e+"_content").show("slow")):($("#"+e+"_briefing").show("slow"),$("#"+e+"_content").hide("slow"))},SocialStream.Action=function(e,t){var i=[],n=function(e){i.push(e)},r=function(e){t.each(i,function(t,i){i(e)})},s=function(e){var t=e.follow;t&&(a(e).replaceWith(t.form),o(e).replaceWith(t.sentence))},a=function(e){return t(".follow_form-"+e.activity_object.id)},o=function(e){return t(".follow_sentence-"+e.activity_object.id)};return n(s),{addUpdateCallback:n,update:r,followForms:a,followSentences:o}}(SocialStream,jQuery),SocialStream.Objects=function(e,t){var i=[],n=function(e){i.push(e)},r=function(){t.each(i,function(e,t){t()})};return n(SocialStream.Timeline.initPrivacyTooltips),n(SocialStream.Wall.activateAntiRebounds),{addInitCallback:n,init:r}}(SocialStream,jQuery),SocialStream.Activity=function(e,t){var i=function(){var e=window.location.hash.match(/^.*activity_(\d+).*$/);e&&e>0&&t.scrollTo("#activity_"+e[1],1500,{axis:"y"})};return e.Objects.addInitCallback(i),{}}(SocialStream,jQuery),SocialStream.Comments=function(e,t){var i=function(){t(".activity_new_comment").each(function(){""!=t.trim(t(this).siblings(".activity_comments").text())&&(t(this).show(),t(this).find(".input_new_comments").val(""))}),n(),r(),s(),a(),o()},n=function(){t(".activities_comment_btn").hide(),t(".actor_name_new_comment").hide(),t(".actor_logo_new_comment").hide()},r=function(){t(".input_new_comments").watermark(I18n.t("comment.input"),"#666")},s=function(){t(".input_new_comments").change(function(){l(this)}).keydown(function(){l(this)}).keyup(function(){l(this)}),t(".input_new_comments").each(function(){l(this)})},a=function(){t(".input_new_comments").click(function(){t(".activities_comment_btn").hide(),t(".new_comment").removeClass("new_comment_shown"),t(".actor_name_new_comment").hide(),t(".actor_logo_new_comment").hide();var e=t(this).parents(".activity_new_comment");return e.find(".activities_comment_btn").show(),t(this).parents(".new_comment").addClass("new_comment_shown"),e.find(".actor_name_new_comment").show(),e.find(".actor_logo_new_comment").show(),!1})},o=function(){t(".to_comment").click(function(){return t(this).parents(".activity_content").find(".activity_new_comment").show(),t(this).closest(".activity_content").find(".input_new_comments").click().focus().val(""),!1})},l=function(e){var i=t(e).val().replace(/\n/g,"<br/>");t(e).siblings(".copy_new_comment").html(i)};return SocialStream.Timeline.addInitCallback(i),SocialStream.Timeline.addCreateCallback(n),SocialStream.Timeline.addCreateCallback(r),SocialStream.Timeline.addCreateCallback(s),SocialStream.Timeline.addCreateCallback(a),SocialStream.Timeline.addCreateCallback(o),SocialStream.Objects.addInitCallback(i),{initNew:i}}(SocialStream,jQuery),SocialStream.Follow=function(e,t){var i=function(){t(".following-button").mouseenter(function(){t(this).hide(),t(this).siblings(".unfollow-button").show()}),t(".unfollow-button").mouseleave(function(){t(this).hide(),t(this).siblings(".following-button").show()}),t(".unfollow-button").hide()};return t(function(){SocialStream.Follow.initButtons()}),{initButtons:i}}(SocialStream,jQuery),SocialStream.Search=function(e,t){function i(){t.preloadImages("/assets/mini-loading-25438ebb0f6113639768ac1815a6afaa.gif"),t("#search_form").submit(function(){return query=t("#global_search_input").val(),""==query||2>query.length||query==I18n.t("search.write")?(t("#too_short_error").show(),t("#global_search_input").removeClass("searching"),t("#global_search_input").blur(),t("#global_search_input").focus(),!1):(t("#global_search_input").addClass("searching"),t("#global_search_input").blur(),!0)}),t("#global_search_input").watermark(I18n.t("search.write"))}return{init:i}}(SocialStream,jQuery),SocialStream.Toolbar=function(e,t){var i=function(e){t(".toolbar_menu ul li ul").hide(),t(".toolbar_menu li a").click(function(){t(this).next().slideToggle("normal")}),n.init(e)},n=function(e,t,i){var n=function(e){t(".logo_grid.logo_full").hover(function(){t(".logo_menu",this).stop().animate({top:"101px"},{queue:!1,duration:160})},function(){t(".logo_menu",this).stop().animate({top:"1119px"},{queue:!1,duration:160})}),e!=i&&e.option!=i&&e.option.length&&r(e.option)},r=function(e){t("#toolbar_menu-"+e).next().show()};return{init:n,expand:r}}(e,t);return{init:i,expandMenu:n.expand}}(SocialStream,jQuery),function(){function e(){return this}function t(e){return e.length}function i(e){return null==e}function n(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function r(){var e={},t=[];return e.add=function(i){for(var n=0;t.length>n;n++)if(t[n].listener==i)return e;return t.push({listener:i,on:!0}),e},e.remove=function(i){for(var n=0;t.length>n;n++){var r=t[n];if(r.listener==i){r.on=!1,t=t.slice(0,n).concat(t.slice(n+1));break}}return e},e.dispatch=function(){for(var e=t,i=0,n=e.length;n>i;i++){var r=e[i];r.on&&r.listener.apply(this,arguments)}},e}function s(e){return e+""}function a(e){for(var t=e.lastIndexOf("."),i=t>=0?e.substring(t):(t=e.length,""),n=[];t>0;)n.push(e.substring(t-=3,t+3));return n.reverse().join(",")+i}function o(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function l(e){return function(t){return 1-e(1-t)}}function c(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function u(e){return e}function h(e){return function(t){return Math.pow(t,e)}}function d(e){return 1-Math.cos(e*Math.PI/2)}function f(e){return Math.pow(2,10*(e-1))}function p(e){return 1-Math.sqrt(1-e*e)}function m(e,t){var i;return 2>arguments.length&&(t=.45),1>arguments.length?(e=1,i=t/4):i=t/(2*Math.PI)*Math.asin(1/e),function(n){return 1+e*Math.pow(2,10*-n)*Math.sin(2*(n-i)*Math.PI/t)}}function g(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function v(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function y(e){return e in _i||/\bcolor\b/.test(e)?d3.interpolateRgb:d3.interpolate}function b(e,t){return t=t-(e=+e)?1/(t-e):0,function(i){return(i-e)*t}}function _(e,t){return t=t-(e=+e)?1/(t-e):0,function(i){return Math.max(0,Math.min(1,(i-e)*t))}}function w(e,t,i){return new x(e,t,i)}function x(e,t,i){this.r=e,this.g=t,this.b=i}function C(e){return 16>e?"0"+e.toString(16):e.toString(16)}function E(e,t,i){var n,r,s,a=0,o=0,l=0;if(n=/([a-z]+)\((.*)\)/i.exec(e))switch(r=n[2].split(","),n[1]){case"hsl":return i(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(k(r[0]),k(r[1]),k(r[2]))}return(s=wi[e])?t(s.r,s.g,s.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(a=e.charAt(1),a+=a,o=e.charAt(2),o+=o,l=e.charAt(3),l+=l):7===e.length&&(a=e.substring(1,3),o=e.substring(3,5),l=e.substring(5,7)),a=parseInt(a,16),o=parseInt(o,16),l=parseInt(l,16)),t(a,o,l))}function S(e,t,i){var n,r,s=Math.min(e/=255,t/=255,i/=255),a=Math.max(e,t,i),o=a-s,l=(a+s)/2;return o?(r=.5>l?o/(a+s):o/(2-a-s),n=e==a?(t-i)/o+(i>t?6:0):t==a?(i-e)/o+2:(e-t)/o+4,n*=60):r=n=0,I(n,r,l)}function k(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function I(e,t,i){return new T(e,t,i)}function T(e,t,i){this.h=e,this.s=t,this.l=i}function A(e,t,i){function n(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(a-s)*e/60:180>e?a:240>e?s+(a-s)*(240-e)/60:s}function r(e){return Math.round(255*n(e))}var s,a;return e%=360,0>e&&(e+=360),t=0>t?0:t>1?1:t,i=0>i?0:i>1?1:i,a=.5>=i?i*(1+t):i+t-i*t,s=2*i-a,w(r(e+120),r(e),r(e-120))}function N(e){return hi(e,Si),e}function P(e){return function(){return Ci(e,this)}}function D(e){return function(){return Ei(e,this)}}function M(e){return{__data__:e}}function R(e){return hi(e,ki),e}function F(e){return arguments.length||(e=d3.ascending),function(t,i){return e(t&&t.__data__,i&&i.__data__)}}function O(e,t){hi(e,Ti);var i={},n=d3.dispatch("start","end"),r=Pi,s=Date.now();return e.id=t,e.tween=function(t,n){return 2>arguments.length?i[t]:(null==n?delete i[t]:i[t]=n,e)},e.ease=function(t){return arguments.length?(r="function"==typeof t?t:d3.ease.apply(d3,arguments),e):r},e.each=function(t,i){return 2>arguments.length?H.call(e,t):(n[t].add(i),e)},d3.timer(function(a){return e.each(function(o,l,c){function u(e){if(v.active>t)return d();v.active=t;for(var r in i)(r=i[r].call(p,o,l))&&f.push(r);return n.start.dispatch.call(p,o,l),h(e)||d3.timer(h,0,s),1}function h(e){if(v.active!==t)return d();for(var i=(e-m)/g,s=r(i),a=f.length;a>0;)f[--a].call(p,s);return i>=1?(d(),Ni=t,n.end.dispatch.call(p,o,l),Ni=0,1):void 0}function d(){return--v.count||delete p.__transition__,1}var f=[],p=this,m=e[c][l].delay,g=e[c][l].duration,v=p.__transition__||(p.__transition__={active:0,count:0});++v.count,a>=m?u(a):d3.timer(u,m,s)}),1},0,s),e}function j(e){return"function"==typeof e?function(t,i,n){var r=e.call(this,t,i)+"";return n!=r&&d3.interpolate(n,r)}:(e+="",function(t,i,n){return n!=e&&d3.interpolate(n,e)})}function H(e){for(var t=0,i=this.length;i>t;t++)for(var n=this[t],r=0,s=n.length;s>r;r++){var a=n[r];a&&e.call(a=a.node,a.__data__,r,t)}return this}function L(){for(var e,t=Date.now(),i=Ri;i;)e=t-i.then,e>=i.delay&&(i.flush=i.callback(e)),i=i.next;var n=B()-t;n>24?(isFinite(n)&&(clearTimeout(Mi),Mi=setTimeout(L,n)),Di=0):(Di=1,Fi(L))}function B(){for(var e=null,t=Ri,i=1/0;t;)t.flush?t=e?e.next=t.next:Ri=t.next:(i=Math.min(i,t.then+t.delay),t=(e=t).next);return i}function q(e){var t=e[0],i=e[e.length-1];return i>t?[t,i]:[i,t]}function z(e,t){var i,n=0,r=e.length-1,s=e[n],a=e[r];return s>a&&(i=n,n=r,r=i,i=s,s=a,a=i),t=t(a-s),e[n]=t.floor(s),e[r]=t.ceil(a),e}function W(){return Math}function $(e,t,i,n){function r(){var r=2==e.length?X:K,l=n?_:b;return a=r(e,t,l,i),o=r(t,e,l,d3.interpolate),s}function s(e){return a(e)}var a,o;return s.invert=function(e){return o(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},s.range=function(e){return arguments.length?(t=e,r()):t},s.rangeRound=function(e){return s.range(e).interpolate(d3.interpolateRound)},s.clamp=function(e){return arguments.length?(n=e,r()):n},s.interpolate=function(e){return arguments.length?(i=e,r()):i},s.ticks=function(t){return Q(e,t)},s.tickFormat=function(t){return Y(e,t)},s.nice=function(){return z(e,G),r()},s.copy=function(){return $(e,t,i,n)},r()}function U(e,t){return e.range=d3.rebind(e,t.range),e.rangeRound=d3.rebind(e,t.rangeRound),e.interpolate=d3.rebind(e,t.interpolate),e.clamp=d3.rebind(e,t.clamp),e}function G(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function V(e,t){var i=q(e),n=i[1]-i[0],r=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),s=t/n*r;return.15>=s?r*=10:.35>=s?r*=5:.75>=s&&(r*=2),i[0]=Math.ceil(i[0]/r)*r,i[1]=Math.floor(i[1]/r)*r+.5*r,i[2]=r,i}function Q(e,t){return d3.range.apply(d3,V(e,t))}function Y(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log(V(e,t)[2])/Math.LN10+.01))+"f")}function X(e,t,i,n){var r=i(e[0],e[1]),s=n(t[0],t[1]);return function(e){return s(r(e))}}function K(e,t,i,n){for(var r=[],s=[],a=0,o=e.length;o>++a;)r.push(i(e[a-1],e[a])),s.push(n(t[a-1],t[a]));return function(t){var i=d3.bisect(e,t,1,e.length-1)-1;return s[i](r[i](t))}}function Z(e,t){function i(i){return e(t(i))}var n=t.pow;return i.invert=function(t){return n(e.invert(t))},i.domain=function(r){return arguments.length?(t=0>r[0]?et:J,n=t.pow,e.domain(r.map(t)),i):e.domain().map(n)},i.nice=function(){return e.domain(z(e.domain(),W)),i},i.ticks=function(){var i=q(e.domain()),r=[];if(i.every(isFinite)){var s=Math.floor(i[0]),a=Math.ceil(i[1]),o=n(i[0]),l=n(i[1]);if(t===et)for(r.push(n(s));a>s++;)for(var c=9;c>0;c--)r.push(n(s)*c);else{for(;a>s;s++)for(var c=1;10>c;c++)r.push(n(s)*c);r.push(n(s))}for(s=0;o>r[s];s++);for(a=r.length;r[a-1]>l;a--);r=r.slice(s,a)}return r},i.tickFormat=function(){return tt},i.copy=function(){return Z(e.copy(),t)},U(i,e)}function J(e){return Math.log(e)/Math.LN10}function et(e){return-Math.log(-e)/Math.LN10}function tt(e){return e.toPrecision(1)}function it(e,t){function i(t){return e(n(t))}var n=nt(t),r=nt(1/t);return i.invert=function(t){return r(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t.map(n)),i):e.domain().map(r)},i.ticks=function(e){return Q(i.domain(),e)},i.tickFormat=function(e){return Y(i.domain(),e)},i.nice=function(){return i.domain(z(i.domain(),G))},i.exponent=function(e){if(!arguments.length)return t;var s=i.domain();return n=nt(t=e),r=nt(1/t),i.domain(s)},i.copy=function(){return it(e.copy(),t)},U(i,e)}function nt(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function rt(e,t){function i(t){return r[((n[t]||(n[t]=e.push(t)))-1)%r.length]}var n,r,s;return i.domain=function(r){if(!arguments.length)return e;e=[],n={};for(var s,a=-1,o=r.length;o>++a;)n[s=r[a]]||(n[s]=e.push(s));return i[t.t](t.x,t.p)},i.range=function(e){return arguments.length?(r=e,s=0,t={t:"range",x:e},i):r},i.rangePoints=function(n,a){2>arguments.length&&(a=0);var o=n[0],l=n[1],c=(l-o)/(e.length-1+a);return r=2>e.length?[(o+l)/2]:d3.range(o+c*a/2,l+c/2,c),s=0,t={t:"rangePoints",x:n,p:a},i},i.rangeBands=function(n,a){2>arguments.length&&(a=0);var o=n[0],l=n[1],c=(l-o)/(e.length+a);return r=d3.range(o+c*a,l,c),s=c*(1-a),t={t:"rangeBands",x:n,p:a},i},i.rangeRoundBands=function(n,a){2>arguments.length&&(a=0);var o=n[0],l=n[1],c=Math.floor((l-o)/(e.length+a)),u=l-o-(e.length-a)*c;return r=d3.range(o+Math.round(u/2),l,c),s=Math.round(c*(1-a)),t={t:"rangeRoundBands",x:n,p:a},i},i.rangeBand=function(){return s},i.copy=function(){return rt(e,t)},i.domain(e)}function st(e,t){function i(){var i=0,s=(e.length,t.length);for(r=[];s>++i;)r[i-1]=d3.quantile(e,i/s);return n}function n(e){return isNaN(e=+e)?0/0:t[d3.bisect(r,e)]}var r;return n.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),i()):e},n.range=function(e){return arguments.length?(t=e,i()):t},n.quantiles=function(){return r},n.copy=function(){return st(e,t)},i()}function at(e,t,i){function n(t){return i[Math.max(0,Math.min(a,Math.floor(s*(t-e))))]}function r(){return s=i.length/(t-e),a=i.length-1,n}var s,a;return n.domain=function(i){return arguments.length?(e=+i[0],t=+i[i.length-1],r()):[e,t]},n.range=function(e){return arguments.length?(i=e,r()):i},n.copy=function(){return at(e,t,i)},r()}function ot(e){return e.innerRadius}function lt(e){return e.outerRadius}function ct(e){return e.startAngle}function ut(e){return e.endAngle}function ht(e){function t(t){return 1>t.length?null:"M"+s(e(dt(this,t,i,n)),a)}var i=ft,n=pt,r="linear",s=zi[r],a=.7;return t.x=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(n=e,t):n},t.interpolate=function(e){return arguments.length?(s=zi[r=e],t):r},t.tension=function(e){return arguments.length?(a=e,t):a},t}function dt(e,t,i,n){var r,s=[],a=-1,o=t.length,l="function"==typeof i,c="function"==typeof n;if(l&&c)for(;o>++a;)s.push([i.call(e,r=t[a],a),n.call(e,r,a)]);else if(l)for(;o>++a;)s.push([i.call(e,t[a],a),n]);else if(c)for(;o>++a;)s.push([i,n.call(e,t[a],a)]);else for(;o>++a;)s.push([i,n]);return s}function ft(e){return e[0]}function pt(e){return e[1]}function mt(e){var t=[],i=0,n=e.length,r=e[0];for(t.push(r[0],",",r[1]);n>++i;)t.push("L",(r=e[i])[0],",",r[1]);return t.join("")}function gt(e){var t=[],i=0,n=e.length,r=e[0];for(t.push(r[0],",",r[1]);n>++i;)t.push("V",(r=e[i])[1],"H",r[0]);return t.join("")}function vt(e){var t=[],i=0,n=e.length,r=e[0];for(t.push(r[0],",",r[1]);n>++i;)t.push("H",(r=e[i])[0],"V",r[1]);return t.join("")}function yt(e,t){return 4>e.length?mt(e):e[1]+wt(e.slice(1,e.length-1),xt(e,t))}function bt(e,t){return 3>e.length?mt(e):e[0]+wt((e.push(e[0]),e),xt([e[e.length-2]].concat(e,[e[1]]),t))}function _t(e,t){return 3>e.length?mt(e):e[0]+wt(e,xt(e,t))}function wt(e,t){if(1>t.length||e.length!=t.length&&e.length!=t.length+2)return mt(e);var i=e.length!=t.length,n="",r=e[0],s=e[1],a=t[0],o=a,l=1;if(i&&(n+="Q"+(s[0]-2*a[0]/3)+","+(s[1]-2*a[1]/3)+","+s[0]+","+s[1],r=e[1],l=2),t.length>1){o=t[1],s=e[l],l++,n+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1];for(var c=2;t.length>c;c++,l++)s=e[l],o=t[c],n+="S"+(s[0]-o[0])+","+(s[1]-o[1])+","+s[0]+","+s[1]}if(i){var u=e[l];n+="Q"+(s[0]+2*o[0]/3)+","+(s[1]+2*o[1]/3)+","+u[0]+","+u[1]}return n}function xt(e,t){for(var i,n=[],r=(1-t)/2,s=e[0],a=e[1],o=1,l=e.length;l>++o;)i=s,s=a,a=e[o],n.push([r*(a[0]-i[0]),r*(a[1]-i[1])]);return n}function Ct(e){if(3>e.length)return mt(e);var t=[],i=1,n=e.length,r=e[0],s=r[0],a=r[1],o=[s,s,s,(r=e[1])[0]],l=[a,a,a,r[1]];for(t.push(s,",",a),Tt(t,o,l);n>++i;)r=e[i],o.shift(),o.push(r[0]),l.shift(),l.push(r[1]),Tt(t,o,l);for(i=-1;2>++i;)o.shift(),o.push(r[0]),l.shift(),l.push(r[1]),Tt(t,o,l);return t.join("")}function Et(e){if(4>e.length)return mt(e);for(var t,i=[],n=-1,r=e.length,s=[0],a=[0];3>++n;)t=e[n],s.push(t[0]),a.push(t[1]);for(i.push(It(Ui,s)+","+It(Ui,a)),--n;r>++n;)t=e[n],s.shift(),s.push(t[0]),a.shift(),a.push(t[1]),Tt(i,s,a);return i.join("")}function St(e){for(var t,i,n=-1,r=e.length,s=r+4,a=[],o=[];4>++n;)i=e[n%r],a.push(i[0]),o.push(i[1]);for(t=[It(Ui,a),",",It(Ui,o)],--n;s>++n;)i=e[n%r],a.shift(),a.push(i[0]),o.shift(),o.push(i[1]),Tt(t,a,o);return t.join("")}function kt(e,t){for(var i,n,r=e.length-1,s=e[0][0],a=e[0][1],o=e[r][0]-s,l=e[r][1]-a,c=-1;r>=++c;)i=e[c],n=c/r,i[0]=t*i[0]+(1-t)*(s+n*o),i[1]=t*i[1]+(1-t)*(a+n*l);return Ct(e)}function It(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Tt(e,t,i){e.push("C",It(Wi,t),",",It(Wi,i),",",It($i,t),",",It($i,i),",",It(Ui,t),",",It(Ui,i))}function At(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Nt(e){for(var t=0,i=e.length-1,n=[],r=e[0],s=e[1],a=n[0]=At(r,s);i>++t;)n[t]=a+(a=At(r=s,s=e[t+1]));return n[t]=a,n}function Pt(e){for(var t,i,n,r,s=[],a=Nt(e),o=-1,l=e.length-1;l>++o;)t=At(e[o],e[o+1]),1e-6>Math.abs(t)?a[o]=a[o+1]=0:(i=a[o]/t,n=a[o+1]/t,r=i*i+n*n,r>9&&(r=3*t/Math.sqrt(r),a[o]=r*i,a[o+1]=r*n));for(o=-1;l>=++o;)r=(e[Math.min(l,o+1)][0]-e[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),s.push([r||0,a[o]*r||0]);return s}function Dt(e){return 3>e.length?mt(e):e[0]+wt(e,Pt(e))}function Mt(e){for(var t,i,n,r=-1,s=e.length;s>++r;)t=e[r],i=t[0],n=t[1]+Bi,t[0]=i*Math.cos(n),t[1]=i*Math.sin(n);return e}function Rt(e){function t(t){if(1>t.length)return null;var a=dt(this,t,i,r),c=dt(this,t,i===n?Ft(a):n,r===s?Ot(a):s);return"M"+o(e(c),l)+"L"+o(e(a.reverse()),l)+"Z"}var i=ft,n=ft,r=0,s=pt,a="linear",o=zi[a],l=.7;return t.x=function(e){return arguments.length?(i=n=e,t):n},t.x0=function(e){return arguments.length?(i=e,t):i},t.x1=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=s=e,t):s},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(s=e,t):s
},t.interpolate=function(e){return arguments.length?(o=zi[a=e],t):a},t.tension=function(e){return arguments.length?(l=e,t):l},t}function Ft(e){return function(t,i){return e[i][0]}}function Ot(e){return function(t,i){return e[i][1]}}function jt(e){return e.source}function Ht(e){return e.target}function Lt(e){return e.radius}function Bt(e){return[e.x,e.y]}function qt(e){return function(){var t=e.apply(this,arguments),i=t[0],n=t[1]+Bi;return[i*Math.cos(n),i*Math.sin(n)]}}function zt(e,t){var i=(e.ownerSVGElement||e).createSVGPoint();if(0>Gi&&(window.scrollX||window.scrollY)){var n=d3.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),r=n[0][0].getScreenCTM();Gi=!(r.f||r.e),n.remove()}return Gi?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}function Wt(){return 64}function $t(){return"circle"}function Ut(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Gt(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function Vt(e,t,i){if(n=[],i&&t.length>1){for(var n,r,s,a=q(e.domain()),o=-1,l=t.length,c=(t[1]-t[0])/++i;l>++o;)for(r=i;--r>0;)(s=+t[o]-r*c)>=a[0]&&n.push(s);for(--o,r=0;i>++r&&(s=+t[o]+r*c)<a[1];)n.push(s)}return n}function Qt(e){var t=d3.event,i=Ki.parentNode,n=0,r=0;i&&(i=Yt(i),n=i[0]-Ji[0],r=i[1]-Ji[1],Ji=i,en|=n|r);try{d3.event={dx:n,dy:r},Xi[e].dispatch.apply(Ki,Zi)}finally{d3.event=t}t.preventDefault()}function Yt(e){return d3.event.touches?d3.svg.touches(e)[0]:d3.svg.mouse(e)}function Xt(){if(Ki){var e=Ki.parentNode;if(!e)return Kt();Qt("drag"),Jt()}}function Kt(){Ki&&(Qt("dragend"),Ki=null,en&&(tn=!0,Jt()))}function Zt(){tn&&(Jt(),tn=!1)}function Jt(){d3.event.stopPropagation(),d3.event.preventDefault()}function ei(e){return[e[0]-an[0],e[1]-an[1],an[2]]}function ti(){nn||(nn=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e,t=d3.event;try{nn.scrollTop=1e3,nn.dispatchEvent(t),e=1e3-nn.scrollTop}catch(i){e=t.wheelDelta||5*-t.detail}return.005*e}function ii(){for(var e,t=d3.svg.touches(ln),i=-1,n=t.length;n>++i;)dn[(e=t[i]).identifier]=ei(e);return t}function ni(){var e=d3.svg.touches(ln);switch(e.length){case 1:var t=e[0];oi(an[2],t,dn[t.identifier]);break;case 2:var i=e[0],n=e[1],r=[(i[0]+n[0])/2,(i[1]+n[1])/2],s=dn[i.identifier],a=dn[n.identifier],o=[(s[0]+a[0])/2,(s[1]+a[1])/2,s[2]];oi(Math.log(d3.event.scale)/Math.LN2+s[2],r,o)}}function ri(){sn=null,rn&&(un=!0,oi(an[2],d3.svg.mouse(ln),rn))}function si(){rn&&(un&&(hn=!0),ri(),rn=null)}function ai(){hn&&(d3.event.stopPropagation(),d3.event.preventDefault(),hn=!1)}function oi(e,t,i){function n(e,t){var i=e.__domain||(e.__domain=e.domain()),n=e.range().map(function(e){return(e-t)/l});e.domain(i).domain(n.map(e.invert))}var r=Math.pow(2,(an[2]=e)-i[2]),s=an[0]=t[0]-r*i[0],a=an[1]=t[1]-r*i[1],o=d3.event,l=Math.pow(2,e);d3.event={scale:l,translate:[s,a],transform:function(e,t){e&&n(e,s),t&&n(t,a)}};try{on.apply(ln,cn)}finally{d3.event=o}o.preventDefault()}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(li){var ci=CSSStyleDeclaration.prototype,ui=ci.setProperty;ci.setProperty=function(e,t,i){ui.call(this,e,t+"",i)}}d3={version:"2.1.2"};var hi=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)e[i]=t[i]};d3.functor=function(e){return"function"==typeof e?e:function(){return e}},d3.rebind=function(e,t){return function(){var i=t.apply(e,arguments);return arguments.length?e:i}},d3.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},d3.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},d3.min=function(e,t){var i,n,r=-1,s=e.length;if(1===arguments.length){for(;s>++r&&(null==(i=e[r])||i!=i);)i=void 0;for(;s>++r;)null!=(n=e[r])&&i>n&&(i=n)}else{for(;s>++r&&(null==(i=t.call(e,e[r],r))||i!=i);)i=void 0;for(;s>++r;)null!=(n=t.call(e,e[r],r))&&i>n&&(i=n)}return i},d3.max=function(e,t){var i,n,r=-1,s=e.length;if(1===arguments.length){for(;s>++r&&(null==(i=e[r])||i!=i);)i=void 0;for(;s>++r;)null!=(n=e[r])&&n>i&&(i=n)}else{for(;s>++r&&(null==(i=t.call(e,e[r],r))||i!=i);)i=void 0;for(;s>++r;)null!=(n=t.call(e,e[r],r))&&n>i&&(i=n)}return i},d3.sum=function(e,t){var i,n=0,r=e.length,s=-1;if(1===arguments.length)for(;r>++s;)isNaN(i=+e[s])||(n+=i);else for(;r>++s;)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},d3.quantile=function(e,t){var i=(e.length-1)*t+1,n=Math.floor(i),r=e[n-1],s=i-n;return s?r+s*(e[n]-r):r},d3.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,i=d3.min(arguments,t),n=new Array(i);i>++e;)for(var r,s=-1,a=n[e]=new Array(r);r>++s;)a[s]=arguments[s][e];return n},d3.bisectLeft=function(e,t,i,n){for(3>arguments.length&&(i=0),4>arguments.length&&(n=e.length);n>i;){var r=i+n>>1;t>e[r]?i=r+1:n=r}return i},d3.bisect=d3.bisectRight=function(e,t,i,n){for(3>arguments.length&&(i=0),4>arguments.length&&(n=e.length);n>i;){var r=i+n>>1;e[r]>t?n=r:i=r+1}return i},d3.first=function(e,t){var i,n=0,r=e.length,s=e[0];for(1===arguments.length&&(t=d3.ascending);r>++n;)t.call(e,s,i=e[n])>0&&(s=i);return s},d3.last=function(e,t){var i,n=0,r=e.length,s=e[0];for(1===arguments.length&&(t=d3.ascending);r>++n;)0>=t.call(e,s,i=e[n])&&(s=i);return s},d3.nest=function(){function e(t,a){if(a>=s.length)return n?n.call(r,t):i?t.sort(i):t;for(var o,l,c=-1,u=t.length,h=s[a++],d={};u>++c;)(o=h(l=t[c]))in d?d[o].push(l):d[o]=[l];for(o in d)d[o]=e(d[o],a);return d}function t(e,i){if(i>=s.length)return e;var n,r=[],o=a[i++];for(n in e)r.push({key:n,values:t(e[n],i)});return o&&r.sort(function(e,t){return o(e.key,t.key)}),r}var i,n,r={},s=[],a=[];return r.map=function(t){return e(t,0)},r.entries=function(i){return t(e(i,0),0)},r.key=function(e){return s.push(e),r},r.sortKeys=function(e){return a[s.length-1]=e,r},r.sortValues=function(e){return i=e,r},r.rollup=function(e){return n=e,r},r},d3.keys=function(e){var t=[];for(var i in e)t.push(i);return t},d3.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},d3.entries=function(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t},d3.permute=function(e,t){for(var i=[],n=-1,r=t.length;r>++n;)i[n]=e[t[n]];return i},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var n,r=[],s=[],a=-1,o=e.length;for(2>arguments.length&&(t=i);o>++a;)t.call(s,n=e[a],a)?s=[]:(s.length||r.push(s),s.push(n));return r},d3.range=function(e,t,i){if(3>arguments.length&&(i=1,2>arguments.length&&(t=e,e=0)),1/0==(t-e)/i)throw new Error("infinite range");var n,r=[],s=-1;if(0>i)for(;(n=e+i*++s)>t;)r.push(n);else for(;t>(n=e+i*++s);)r.push(n);return r},d3.requote=function(e){return e.replace(di,"\\$&")};var di=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(e,t){return t?Math.round(e*Math.pow(10,t))*Math.pow(10,-t):Math.round(e)},d3.xhr=function(e,t,i){var n=new XMLHttpRequest;3>arguments.length?i=t:t&&n.overrideMimeType&&n.overrideMimeType(t),n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&i(300>n.status?n:null)},n.send(null)},d3.text=function(e,t,i){function n(e){i(e&&e.responseText)}3>arguments.length&&(i=t,t=null),d3.xhr(e,t,n)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(null!=e){var i=document.createRange();i.selectNode(document.body),e=i.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,i){function n(e){i(e&&e.responseXML)}3>arguments.length&&(i=t,t=null),d3.xhr(e,t,n)},d3.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qualify:function(e){var t=e.indexOf(":");return 0>t?e:{space:d3.ns.prefix[e.substring(0,t)],local:e.substring(t+1)}}},d3.dispatch=function(){for(var e,t={},i=0,n=arguments.length;n>i;i++)e=arguments[i],t[e]=r(e);return t},d3.format=function(e){var t=fi.exec(e),i=t[1]||" ",n=t[3]||"",r=t[5],o=+t[6],l=t[7],c=t[8],u=t[9],h=!1,d=!1;switch(c&&(c=c.substring(1)),r&&(i="0",l&&(o-=Math.floor((o-1)/4))),u){case"n":l=!0,u="g";break;case"%":h=!0,u="f";break;case"p":h=!0,u="r";break;case"d":d=!0,c="0"}return u=pi[u]||s,function(e){var t=h?100*e:+e,s=0>t&&(t=-t)?"−":n;if(d&&t%1)return"";if(e=u(t,c),r){var f=e.length+s.length;o>f&&(e=new Array(o-f+1).join(i)+e),l&&(e=a(e)),e=s+e}else{l&&(e=a(e)),e=s+e;var f=e.length;o>f&&(e=new Array(o-f+1).join(i)+e)}return h&&(e+="%"),e}};var fi=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,pi={g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){var i=1+Math.floor(1e-15+Math.log(e)/Math.LN10);return d3.round(e,t-i).toFixed(Math.max(0,Math.min(20,t-i)))}},mi=h(2),gi=h(3),vi={linear:function(){return u},poly:h,quad:function(){return mi},cubic:function(){return gi},sin:function(){return d},exp:function(){return f},circle:function(){return p},elastic:m,back:g,bounce:function(){return v}},yi={"in":function(e){return e},out:l,"in-out":c,"out-in":function(e){return c(l(e))}};d3.ease=function(e){var t=e.indexOf("-"),i=t>=0?e.substring(0,t):e,n=t>=0?e.substring(t+1):"in";return o(yi[n](vi[i].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(e,t){for(var i,n=d3.interpolators.length;--n>=0&&!(i=d3.interpolators[n](e,t)););return i},d3.interpolateNumber=function(e,t){return t-=e,function(i){return e+t*i}},d3.interpolateRound=function(e,t){return t-=e,function(i){return Math.round(e+t*i)}},d3.interpolateString=function(e,t){var i,n,r,s,a,o=0,l=0,c=[],u=[];for(bi.lastIndex=0,n=0;i=bi.exec(t);++n)i.index&&c.push(t.substring(o,l=i.index)),u.push({i:c.length,x:i[0]}),c.push(null),o=bi.lastIndex;for(t.length>o&&c.push(t.substring(o)),n=0,s=u.length;(i=bi.exec(e))&&s>n;++n)if(a=u[n],a.x==i[0]){if(a.i)if(null==c[a.i+1])for(c[a.i-1]+=a.x,c.splice(a.i,1),r=n+1;s>r;++r)u[r].i--;else for(c[a.i-1]+=a.x+c[a.i+1],c.splice(a.i,2),r=n+1;s>r;++r)u[r].i-=2;else if(null==c[a.i+1])c[a.i]=a.x;else for(c[a.i]=a.x+c[a.i+1],c.splice(a.i+1,1),r=n+1;s>r;++r)u[r].i--;u.splice(n,1),s--,n--}else a.x=d3.interpolateNumber(parseFloat(i[0]),parseFloat(a.x));for(;s>n;)a=u.pop(),null==c[a.i+1]?c[a.i]=a.x:(c[a.i]=a.x+c[a.i+1],c.splice(a.i+1,1)),s--;return 1===c.length?null==c[0]?u[0].x:function(){return t}:function(e){for(n=0;s>n;++n)c[(a=u[n]).i]=a.x(e);return c.join("")}},d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var i=e.r,n=e.g,r=e.b,s=t.r-i,a=t.g-n,o=t.b-r;return function(e){return"rgb("+Math.round(i+s*e)+","+Math.round(n+a*e)+","+Math.round(r+o*e)+")"}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var i=e.h,n=e.s,r=e.l,s=t.h-i,a=t.s-n,o=t.l-r;return function(e){return A(i+s*e,n+a*e,r+o*e).toString()}},d3.interpolateArray=function(e,t){var i,n=[],r=[],s=e.length,a=t.length,o=Math.min(e.length,t.length);for(i=0;o>i;++i)n.push(d3.interpolate(e[i],t[i]));for(;s>i;++i)r[i]=e[i];for(;a>i;++i)r[i]=t[i];return function(e){for(i=0;o>i;++i)r[i]=n[i](e);return r}},d3.interpolateObject=function(e,t){var i,n={},r={};for(i in e)i in t?n[i]=y(i)(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}};var bi=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,_i={background:1,fill:1,stroke:1};d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return"string"==typeof t&&d3.interpolateString(String(e),t)},function(e,t){return("string"==typeof t?t in wi||/^(#|rgb\(|hsl\()/.test(t):t instanceof x||t instanceof T)&&d3.interpolateRgb(String(e),t)},function(e,t){return"number"==typeof t&&d3.interpolateNumber(+e,t)}],d3.rgb=function(e,t,i){return 1===arguments.length?E(""+e,w,A):w(~~e,~~t,~~i)},x.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,i=this.g,n=this.b,r=30;return t||i||n?(t&&r>t&&(t=r),i&&r>i&&(i=r),n&&r>n&&(n=r),w(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(i/e)),Math.min(255,Math.floor(n/e)))):w(r,r,r)},x.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),w(Math.max(0,Math.floor(e*this.r)),Math.max(0,Math.floor(e*this.g)),Math.max(0,Math.floor(e*this.b)))},x.prototype.hsl=function(){return S(this.r,this.g,this.b)},x.prototype.toString=function(){return"#"+C(this.r)+C(this.g)+C(this.b)};var wi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var xi in wi)wi[xi]=E(wi[xi],w,A);d3.hsl=function(e,t,i){return 1===arguments.length?E(""+e,S,I):I(+e,+t,+i)},T.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),I(this.h,this.s,this.l/e)},T.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),I(this.h,this.s,e*this.l)},T.prototype.rgb=function(){return A(this.h,this.s,this.l)},T.prototype.toString=function(){return"hsl("+this.h+","+100*this.s+"%,"+100*this.l+"%)"};var Ci=function(e,t){return t.querySelector(e)},Ei=function(e,t){return t.querySelectorAll(e)};"function"==typeof Sizzle&&(Ci=function(e,t){return Sizzle(e,t)[0]},Ei=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))});var Si=[];d3.selection=function(){return Ii},d3.selection.prototype=Si,Si.select=function(e){var t,i,n,r,s=[];"function"!=typeof e&&(e=P(e));for(var a=-1,o=this.length;o>++a;){s.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var l=-1,c=n.length;c>++l;)(r=n[l])?(t.push(i=e.call(r,r.__data__,l)),i&&"__data__"in r&&(i.__data__=r.__data__)):t.push(null)}return N(s)},Si.selectAll=function(e){var t,i,n=[];"function"!=typeof e&&(e=D(e));for(var r=-1,s=this.length;s>++r;)for(var a=this[r],o=-1,l=a.length;l>++o;)(i=a[o])&&(n.push(t=e.call(i,i.__data__,o)),t.parentNode=i);return N(n)},Si.attr=function(e,t){function i(){this.removeAttribute(e)}function n(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function a(){var i=t.apply(this,arguments);null==i?this.removeAttribute(e):this.setAttribute(e,i)}function o(){var i=t.apply(this,arguments);null==i?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}if(e=d3.ns.qualify(e),2>arguments.length){var l=this.node();return e.local?l.getAttributeNS(e.space,e.local):l.getAttribute(e)}return this.each(null==t?e.local?n:i:"function"==typeof t?e.local?o:a:e.local?s:r)},Si.classed=function(e,t){function i(){if(t=this.classList)return t.add(e);var t=this.className,i=null!=t.baseVal,r=i?t.baseVal:t;a.lastIndex=0,a.test(r)||(r=n(r+" "+e),i?t.baseVal=r:this.className=r)}function r(){if(t=this.classList)return t.remove(e);var t=this.className,i=null!=t.baseVal,r=i?t.baseVal:t;r=n(r.replace(a," ")),i?t.baseVal=r:this.className=r}function s(){(t.apply(this,arguments)?i:r).call(this)}var a=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(2>arguments.length){var o=this.node();if(l=o.classList)return l.contains(e);var l=o.className;return a.lastIndex=0,a.test(null!=l.baseVal?l.baseVal:l)}return this.each("function"==typeof t?s:t?i:r)},Si.style=function(e,t,i){function n(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,i)}function s(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,i)}return 3>arguments.length&&(i=""),2>arguments.length?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(null==t?n:"function"==typeof t?s:r)},Si.property=function(e,t){function i(){delete this[e]}function n(){this[e]=t}function r(){var i=t.apply(this,arguments);null==i?delete this[e]:this[e]=i}return 2>arguments.length?this.node()[e]:this.each(null==t?i:"function"==typeof t?r:n)},Si.text=function(e){return 1>arguments.length?this.node().textContent:this.each("function"==typeof e?function(){this.textContent=e.apply(this,arguments)}:function(){this.textContent=e})},Si.html=function(e){return 1>arguments.length?this.node().innerHTML:this.each("function"==typeof e?function(){this.innerHTML=e.apply(this,arguments)}:function(){this.innerHTML=e})},Si.append=function(e){function t(){return this.appendChild(document.createElement(e))}function i(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=d3.ns.qualify(e),this.select(e.local?i:t)},Si.insert=function(e,t){function i(){return this.insertBefore(document.createElement(e),Ci(t,this))}function n(){return this.insertBefore(document.createElementNS(e.space,e.local),Ci(t,this))}return e=d3.ns.qualify(e),this.select(e.local?n:i)},Si.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},Si.data=function(e,t){function i(e,i){var n,o,l,c=e.length,u=i.length,h=Math.min(c,u),d=Math.max(c,u),f=[],p=[],m=[];if(t){var g,v={},y=[],b=i.length;for(n=-1;c>++n;)g=t.call(o=e[n],o.__data__,n),g in v?m[b++]=o:v[g]=o,y.push(g);for(n=-1;u>++n;)o=v[g=t.call(i,l=i[n],n)],o?(o.__data__=l,f[n]=o,p[n]=m[n]=null):(p[n]=M(l),f[n]=m[n]=null),delete v[g];for(n=-1;c>++n;)y[n]in v&&(m[n]=e[n])}else{for(n=-1;h>++n;)o=e[n],l=i[n],o?(o.__data__=l,f[n]=o,p[n]=m[n]=null):(p[n]=M(l),f[n]=m[n]=null);for(;u>n;++n)p[n]=M(i[n]),f[n]=m[n]=null;for(;d>n;++n)m[n]=e[n],p[n]=f[n]=null}p.update=f,p.parentNode=f.parentNode=m.parentNode=e.parentNode,r.push(p),s.push(f),a.push(m)}var n,r=[],s=[],a=[],o=-1,l=this.length;if("function"==typeof e)for(;l>++o;)i(n=this[o],e.call(n,n.parentNode.__data__,o));else for(;l>++o;)i(n=this[o],e);var c=N(s);return c.enter=function(){return R(r)},c.exit=function(){return N(a)},c};var ki=[];ki.append=Si.append,ki.insert=Si.insert,ki.empty=Si.empty,ki.select=function(e){for(var t,i,n,r,s,a=[],o=-1,l=this.length;l>++o;){n=(r=this[o]).update,a.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;u>++c;)(s=r[c])?(t.push(n[c]=i=e.call(r.parentNode,s.__data__,c)),i.__data__=s.__data__):t.push(null)}return N(a)},Si.filter=function(e){for(var t,i,n,r=[],s=0,a=this.length;a>s;s++){r.push(t=[]),t.parentNode=(i=this[s]).parentNode;for(var o=0,l=i.length;l>o;o++)(n=i[o])&&e.call(n,n.__data__,o)&&t.push(n)}return N(r)},Si.map=function(e){return this.each(function(){this.__data__=e.apply(this,arguments)})},Si.sort=function(e){e=F.apply(this,arguments);for(var t=0,i=this.length;i>t;t++)for(var n=this[t].sort(e),r=1,s=n.length,a=n[0];s>r;r++){var o=n[r];o&&(a&&a.parentNode.insertBefore(o,a.nextSibling),a=o)}return this},Si.on=function(e,t,i){3>arguments.length&&(i=!1);var n="__on"+e,r=e.indexOf(".");return r>0&&(e=e.substring(0,r)),2>arguments.length?(r=this.node()[n])&&r._:this.each(function(r,s){function a(e){var i=d3.event;d3.event=e;try{t.call(o,o.__data__,s)}finally{d3.event=i}}var o=this;o[n]&&o.removeEventListener(e,o[n],i),t&&o.addEventListener(e,o[n]=a,i),a._=t})},Si.each=function(e){for(var t=-1,i=this.length;i>++t;)for(var n=this[t],r=-1,s=n.length;s>++r;){var a=n[r];a&&e.call(a,a.__data__,r,t)}return this},Si.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},Si.empty=function(){return!this.node()},Si.node=function(){for(var e=0,t=this.length;t>e;e++)for(var i=this[e],n=0,r=i.length;r>n;n++){var s=i[n];if(s)return s}return null},Si.transition=function(){for(var e,t,i=[],n=-1,r=this.length;r>++n;){i.push(e=[]);for(var s=this[n],a=-1,o=s.length;o>++a;)e.push((t=s[a])?{node:t,delay:0,duration:250}:null)}return O(i,Ni||++Ai)};var Ii=N([[document]]);Ii[0].parentNode=document.documentElement,d3.select=function(e){return"string"==typeof e?Ii.select(e):N([[e]])},d3.selectAll=function(e){return"string"==typeof e?Ii.selectAll(e):N([e])};var Ti=[],Ai=0,Ni=0,Pi=d3.ease("cubic-in-out");Ti.call=Si.call,d3.transition=function(){return Ii.transition()},d3.transition.prototype=Ti,Ti.select=function(e){var t,i,n,r=[];"function"!=typeof e&&(e=P(e));for(var s=-1,a=this.length;a>++s;){r.push(t=[]);for(var o=this[s],l=-1,c=o.length;c>++l;)(n=o[l])&&(i=e.call(n.node,n.node.__data__,l))?("__data__"in n.node&&(i.__data__=n.node.__data__),t.push({node:i,delay:n.delay,duration:n.duration})):t.push(null)}return O(r,this.id).ease(this.ease())},Ti.selectAll=function(e){var t,i,n=[];"function"!=typeof e&&(e=D(e));for(var r=-1,s=this.length;s>++r;)for(var a=this[r],o=-1,l=a.length;l>++o;)if(i=a[o]){n.push(t=e.call(i.node,i.node.__data__,o));for(var c=-1,u=t.length;u>++c;)t[c]={node:t[c],delay:i.delay,duration:i.duration}}return O(n,this.id).ease(this.ease())},Ti.attr=function(e,t){return this.attrTween(e,j(t))},Ti.attrTween=function(e,t){function i(i,n){var r=t.call(this,i,n,this.getAttribute(e));return r&&function(t){this.setAttribute(e,r(t))}}function n(i,n){var r=t.call(this,i,n,this.getAttributeNS(e.space,e.local));return r&&function(t){this.setAttributeNS(e.space,e.local,r(t))}}return e=d3.ns.qualify(e),this.tween("attr."+e,e.local?n:i)},Ti.style=function(e,t,i){return 3>arguments.length&&(i=""),this.styleTween(e,j(t),i)},Ti.styleTween=function(e,t,i){return 3>arguments.length&&(i=""),this.tween("style."+e,function(n,r){var s=t.call(this,n,r,window.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),i)}})},Ti.text=function(e){return this.tween("text",function(t,i){this.textContent="function"==typeof e?e.call(this,t,i):e})},Ti.remove=function(){return this.each("end",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},Ti.delay=function(e){var t=this;return t.each("function"==typeof e?function(i,n,r){t[r][n].delay=+e.apply(this,arguments)}:(e=+e,function(i,n,r){t[r][n].delay=e}))},Ti.duration=function(e){var t=this;return t.each("function"==typeof e?function(i,n,r){t[r][n].duration=+e.apply(this,arguments)}:(e=+e,function(i,n,r){t[r][n].duration=e}))},Ti.transition=function(){return this.select(e)};var Di,Mi,Ri=null;d3.timer=function(e,t,i){var n,r=!1,s=Ri;if(3>arguments.length){if(2>arguments.length)t=0;else if(!isFinite(t))return;i=Date.now()}for(;s;){if(s.callback===e){s.then=i,s.delay=t,r=!0;break}n=s,s=s.next}r||(Ri={callback:e,then:i,delay:t,next:Ri}),Di||(Mi=clearTimeout(Mi),Di=1,Fi(L))},d3.timer.flush=function(){for(var e,t=Date.now(),i=Ri;i;)e=t-i.then,i.delay||(i.flush=i.callback(e)),i=i.next;B()};var Fi=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.scale={},d3.scale.linear=function(){return $([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return Z(d3.scale.linear(),J)},J.pow=function(e){return Math.pow(10,e)},et.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return it(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return rt([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Oi)},d3.scale.category20=function(){return d3.scale.ordinal().range(ji)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Hi)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Li)};var Oi=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ji=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Hi=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Li=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return st([],[])},d3.scale.quantize=function(){return at(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=i.apply(this,arguments),a=n.apply(this,arguments)+Bi,o=r.apply(this,arguments)+Bi,l=(a>o&&(l=a,a=o,o=l),o-a),c=Math.PI>l?"0":"1",u=Math.cos(a),h=Math.sin(a),d=Math.cos(o),f=Math.sin(o);return l>=qi?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*u+","+s*h+"A"+s+","+s+" 0 "+c+",1 "+s*d+","+s*f+"L"+e*d+","+e*f+"A"+e+","+e+" 0 "+c+",0 "+e*u+","+e*h+"Z":"M"+s*u+","+s*h+"A"+s+","+s+" 0 "+c+",1 "+s*d+","+s*f+"L0,0"+"Z"}var t=ot,i=lt,n=ct,r=ut;return e.innerRadius=function(i){return arguments.length?(t=d3.functor(i),e):t},e.outerRadius=function(t){return arguments.length?(i=d3.functor(t),e):i},e.startAngle=function(t){return arguments.length?(n=d3.functor(t),e):n},e.endAngle=function(t){return arguments.length?(r=d3.functor(t),e):r},e.centroid=function(){var e=(t.apply(this,arguments)+i.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Bi;return[Math.cos(s)*e,Math.sin(s)*e]},e};var Bi=-Math.PI/2,qi=2*Math.PI-1e-6;d3.svg.line=function(){return ht(Object)};var zi={linear:mt,"step-before":gt,"step-after":vt,basis:Ct,"basis-open":Et,"basis-closed":St,bundle:kt,cardinal:_t,"cardinal-open":yt,"cardinal-closed":bt,monotone:Dt},Wi=[0,2/3,1/3,0],$i=[0,1/3,2/3,0],Ui=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=ht(Mt);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},d3.svg.area=function(){return Rt(Object)},d3.svg.area.radial=function(){var e=Rt(Mt);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function e(e,o){var l=t(this,s,e,o),c=t(this,a,e,o);return"M"+l.p0+n(l.r,l.p1)+(i(l,c)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,c.r,c.p0)+n(c.r,c.p1)+r(c.r,c.p1,l.r,l.p0))+"Z"}function t(e,t,i,n){var r=t.call(e,i,n),s=o.call(e,r,n),a=l.call(e,r,n)+Bi,u=c.call(e,r,n)+Bi;return{r:s,a0:a,a1:u,p0:[s*Math.cos(a),s*Math.sin(a)],p1:[s*Math.cos(u),s*Math.sin(u)]}}function i(e,t){return e.a0==t.a0&&e.a1==t.a1}function n(e,t){return"A"+e+","+e+" 0 0,1 "+t}function r(e,t,i,n){return"Q 0,0 "+n}var s=jt,a=Ht,o=Lt,l=ct,c=ut;return e.radius=function(t){return arguments.length?(o=d3.functor(t),e):o},e.source=function(t){return arguments.length?(s=d3.functor(t),e):s},e.target=function(t){return arguments.length?(a=d3.functor(t),e):a},e.startAngle=function(t){return arguments.length?(l=d3.functor(t),e):l},e.endAngle=function(t){return arguments.length?(c=d3.functor(t),e):c},e},d3.svg.diagonal=function(){function e(e,r){var s=t.call(this,e,r),a=i.call(this,e,r),o=(s.y+a.y)/2,l=[s,{x:s.x,y:o},{x:a.x,y:o},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=jt,i=Ht,n=Bt;return e.source=function(i){return arguments.length?(t=d3.functor(i),e):t},e.target=function(t){return arguments.length?(i=d3.functor(t),e):i},e.projection=function(t){return arguments.length?(n=t,e):n},e},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=Bt,i=e.projection;return e.projection=function(e){return arguments.length?i(qt(t=e)):t},e},d3.svg.mouse=function(e){return zt(e,d3.event)};var Gi=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(e){var t=d3.event.touches;return t?Array.prototype.map.call(t,function(t){var i=zt(e,t);return i.identifier=t.identifier,i}):[]},d3.svg.symbol=function(){function e(e,n){return(Vi[t.call(this,e,n)]||Vi.circle)(i.call(this,e,n))}var t=$t,i=Wt;return e.type=function(i){return arguments.length?(t=d3.functor(i),e):t},e.size=function(t){return arguments.length?(i=d3.functor(t),e):i},e};var Vi={circle:function(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Yi)),i=t*Yi;return"M0,"+-t+"L"+i+",0"+" 0,"+t+" "+-i+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Qi),i=t*Qi/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Qi),i=t*Qi/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}};d3.svg.symbolTypes=d3.keys(Vi);var Qi=Math.sqrt(3),Yi=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function e(e){e.each(function(u,h,d){function f(t){return e.delay?t.transition().delay(e[d][h].delay).duration(e[d][h].duration).ease(e.ease()):t}var p,m=d3.select(this),g=i.ticks.apply(i,l),v=null==t?i.tickFormat.apply(i,l):t,y=Vt(i,g,c),b=m.selectAll(".minor").data(y,String),_=b.enter().insert("svg:line","g").attr("class","tick minor").style("opacity",1e-6),w=f(b.exit()).style("opacity",1e-6).remove(),x=f(b).style("opacity",1),C=m.selectAll("g").data(g,String),E=C.enter().insert("svg:g","path").style("opacity",1e-6),S=f(C.exit()).style("opacity",1e-6).remove(),k=f(C).style("opacity",1),I=q(i.range()),T=m.selectAll(".domain").data([]),A=(T.enter().append("svg:path").attr("class","domain"),f(T)),N=this.__chart__||i;switch(this.__chart__=i.copy(),E.append("svg:line").attr("class","tick"),E.append("svg:text"),k.select("text").text(v),n){case"bottom":p=Ut,x.attr("y2",s),E.select("text").attr("dy",".71em").attr("text-anchor","middle"),k.select("line").attr("y2",r),k.select("text").attr("y",Math.max(r,0)+o),A.attr("d","M"+I[0]+","+a+"V0H"+I[1]+"V"+a);break;case"top":p=Ut,x.attr("y2",-s),E.select("text").attr("text-anchor","middle"),k.select("line").attr("y2",-r),k.select("text").attr("y",-(Math.max(r,0)+o)),A.attr("d","M"+I[0]+","+-a+"V0H"+I[1]+"V"+-a);break;case"left":p=Gt,x.attr("x2",-s),E.select("text").attr("dy",".32em").attr("text-anchor","end"),k.select("line").attr("x2",-r),k.select("text").attr("x",-(Math.max(r,0)+o)),A.attr("d","M"+-a+","+I[0]+"H0V"+I[1]+"H"+-a);
break;case"right":p=Gt,x.attr("x2",s),E.select("text").attr("dy",".32em"),k.select("line").attr("x2",r),k.select("text").attr("x",Math.max(r,0)+o),A.attr("d","M"+a+","+I[0]+"H0V"+I[1]+"H"+a)}E.call(p,N),k.call(p,i),S.call(p,i),_.call(p,N),x.call(p,i),w.call(p,i)})}var t,i=d3.scale.linear(),n="bottom",r=6,s=6,a=6,o=3,l=[10],c=0;return e.scale=function(t){return arguments.length?(i=t,e):i},e.orient=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return arguments.length?(l=arguments,e):l},e.tickFormat=function(i){return arguments.length?(t=i,e):t},e.tickSize=function(t,i){if(!arguments.length)return r;var n=arguments.length-1;return r=+t,s=n>1?+i:r,a=n>0?+arguments[n]:r,e},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(t){return arguments.length?(c=+t,e):c},e},d3.behavior={},d3.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",i),d3.select(window).on("mousemove.drag",Xt).on("touchmove.drag",Xt).on("mouseup.drag",Kt,!0).on("touchend.drag",Kt,!0).on("click.drag",Zt,!0)}function t(){Xi=n,Ji=Yt((Ki=this).parentNode),en=0,Zi=arguments}function i(){t.apply(this,arguments),Qt("dragstart")}var n=d3.dispatch("drag","dragstart","dragend");return e.on=function(t,i){return n[t].add(i),e},e};var Xi,Ki,Zi,Ji,en,tn;d3.behavior.zoom=function(){function e(){this.on("mousedown.zoom",i).on("mousewheel.zoom",n).on("DOMMouseScroll.zoom",n).on("dblclick.zoom",r).on("touchstart.zoom",s),d3.select(window).on("mousemove.zoom",ri).on("mouseup.zoom",si).on("touchmove.zoom",ni).on("touchend.zoom",ii).on("click.zoom",ai,!0)}function t(){an=a,on=o.zoom.dispatch,ln=this,cn=arguments}function i(){t.apply(this,arguments),rn=ei(d3.svg.mouse(ln)),un=!1,d3.event.preventDefault(),window.focus()}function n(){t.apply(this,arguments),sn||(sn=ei(d3.svg.mouse(ln))),oi(ti()+a[2],d3.svg.mouse(ln),sn)}function r(){t.apply(this,arguments);var e=d3.svg.mouse(ln);oi(d3.event.shiftKey?Math.ceil(a[2]-1):Math.floor(a[2]+1),e,ei(e))}function s(){t.apply(this,arguments);var e,i=ii(),n=Date.now();1===i.length&&300>n-fn&&oi(1+Math.floor(a[2]),e=i[0],dn[e.identifier]),fn=n}var a=[0,0,0],o=d3.dispatch("zoom");return e.on=function(t,i){return o[t].add(i),e},e};var nn,rn,sn,an,on,ln,cn,un,hn,dn={},fn=0}(),function(){function e(e){for(var t=e.source,n=e.target,r=i(t,n),s=[t];t!==r;)t=t.parent,s.push(t);for(var a=s.length;n!==r;)s.splice(a,0,n),n=n.parent;return s}function t(e){for(var t=[],i=e.parent;null!=i;)t.push(e),e=i,i=i.parent;return t.push(e),t}function i(e,i){if(e===i)return e;for(var n=t(e),r=t(i),s=n.pop(),a=r.pop(),o=null;s===a;)o=s,s=n.pop(),a=r.pop();return o}function n(e){e.fixed|=2}function r(e){e!==J&&(e.fixed&=1)}function s(){a(),J.fixed&=1,Z=J=null}function a(){J.px+=d3.event.dx,J.py+=d3.event.dy,Z.resume()}function o(e){var t=0,i=0;if(e.count=0,!e.leaf)for(var n,r=e.nodes,s=r.length,a=-1;s>++a;)n=r[a],null!=n&&(o(n),e.count+=n.count,t+=n.count*n.cx,i+=n.count*n.cy);e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),e.count++,t+=e.point.x,i+=e.point.y),e.cx=t/e.count,e.cy=i/e.count}function l(){return 20}function c(){return 1}function u(e){return e.x}function h(e){return e.y}function f(e,t,i){e.y0=t,e.y=i}function p(e){for(var t,i=1,n=0,r=e[0][1],s=e.length;s>i;++i)(t=e[i][1])>r&&(n=i,r=t);return n}function m(e){return e.reduce(g,0)}function g(e,t){return e+t[1]}function v(e,t){return y(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function y(e,t){for(var i=-1,n=+e[0],r=(e[1]-n)/t,s=[];t>=++i;)s[i]=r*i+n;return s}function b(e){return[d3.min(e),d3.max(e)]}function _(e,t){return e.sort=d3.rebind(e,t.sort),e.children=d3.rebind(e,t.children),e.links=E,e.value=d3.rebind(e,t.value),e.nodes=function(t){return it=!0,(e.nodes=e)(t)},e}function w(e){return e.children}function x(e){return e.value}function C(e,t){return t.value-e.value}function E(e){return d3.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function S(e,t){return e.value-t.value}function k(e,t){var i=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=i,i._pack_prev=t}function I(e,t){e._pack_next=t,t._pack_prev=e}function T(e,t){var i=t.x-e.x,n=t.y-e.y,r=e.r+t.r;return r*r-i*i-n*n>.001}function A(e){function t(e){o=Math.min(e.x-e.r,o),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}var i,n,r,s,a,o=1/0,l=-1/0,c=1/0,u=-1/0,h=e.length;if(e.forEach(N),i=e[0],i.x=-i.r,i.y=0,t(i),h>1&&(n=e[1],n.x=n.r,n.y=0,t(n),h>2)){r=e[2],R(i,n,r),t(r),k(i,r),i._pack_prev=r,k(r,n),n=i._pack_next;for(var d=3;h>d;d++){R(i,n,r=e[d]);var f=0,p=1,m=1;for(s=n._pack_next;s!==n;s=s._pack_next,p++)if(T(s,r)){f=1;break}if(1==f)for(a=i._pack_prev;a!==s._pack_prev;a=a._pack_prev,m++)if(T(a,r)){p>m&&(f=-1,s=a);break}0==f?(k(i,r),n=r,t(r)):f>0?(I(i,s),n=s,d--):(I(s,n),i=s,d--)}}for(var g=(o+l)/2,v=(c+u)/2,y=0,d=0;h>d;d++){var b=e[d];b.x-=g,b.y-=v,y=Math.max(y,b.r+Math.sqrt(b.x*b.x+b.y*b.y))}return e.forEach(P),y}function N(e){e._pack_next=e._pack_prev=e}function P(e){delete e._pack_next,delete e._pack_prev}function D(e){var t=e.children;t?(t.forEach(D),e.r=A(t)):e.r=Math.sqrt(e.value)}function M(e,t,i,n){var r=e.children;if(e.x=t+=n*e.x,e.y=i+=n*e.y,e.r*=n,r)for(var s=-1,a=r.length;a>++s;)M(r[s],t,i,n)}function R(e,t,i){var n=t.r+i.r,r=e.r+i.r,s=t.x-e.x,a=t.y-e.y,o=Math.sqrt(s*s+a*a),l=(r*r+o*o-n*n)/(2*r*o),c=Math.acos(l),u=l*r,h=Math.sin(c)*r;s/=o,a/=o,i.x=e.x+u*s+h*a,i.y=e.y+u*a-h*s}function F(e){return 1+d3.max(e,function(e){return e.y})}function O(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function j(e){var t=e.children;return t?j(t[0]):e}function H(e){var t=e.children;return t?H(t[t.length-1]):e}function L(e,t){return e.parent==t.parent?1:2}function B(e){return e.children?e.children[0]:e._tree.thread}function q(e){return e.children?e.children[e.children.length-1]:e._tree.thread}function z(e,t){var i=e.children;if(i)for(var n,r=i.length,s=-1;r>++s;)t(n=z(i[s],t),e)>0&&(e=n);return e}function W(e,t){return e.x-t.x}function $(e,t){return t.x-e.x}function U(e,t){return e.depth-t.depth}function G(e,t){function i(e,n){var r=e.children;if(r)for(var s,a=null,o=-1,l=r.length;l>++o;)s=r[o],i(s,a),a=s;t(e,n)}i(e,null)}function V(e){for(var t,i=0,n=0,r=e.children,s=r.length;--s>=0;)t=r[s]._tree,t.prelim+=i,t.mod+=i,i+=t.shift+(n+=t.change)}function Q(e,t,i){e=e._tree,t=t._tree;var n=i/(t.number-e.number);e.change+=n,t.change-=n,t.shift+=i,t.prelim+=i,t.mod+=i}function Y(e,t,i){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:i}function X(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function K(e,t){var i=e.x+t[3],n=e.y+t[0],r=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>r&&(i+=r/2,r=0),0>s&&(n+=s/2,s=0),{x:i,y:n,dx:r,dy:s}}d3.layout={},d3.layout.bundle=function(){return function(t){for(var i=[],n=-1,r=t.length;r>++n;)i.push(e(t[n]));return i}},d3.layout.chord=function(){function e(){var e,c,h,d,f,p={},m=[],g=d3.range(s),v=[];for(i=[],n=[],e=0,d=-1;s>++d;){for(c=0,f=-1;s>++f;)c+=r[d][f];m.push(c),v.push(d3.range(s)),e+=c}for(a&&g.sort(function(e,t){return a(m[e],m[t])}),o&&v.forEach(function(e,t){e.sort(function(e,i){return o(r[t][e],r[t][i])})}),e=(2*Math.PI-u*s)/e,c=0,d=-1;s>++d;){for(h=c,f=-1;s>++f;){var y=g[d],b=v[d][f],_=r[y][b];p[y+"-"+b]={index:y,subindex:b,startAngle:c,endAngle:c+=_*e,value:_}}n.push({index:y,startAngle:h,endAngle:c,value:(c-h)/e}),c+=u}for(d=-1;s>++d;)for(f=d-1;s>++f;){var w=p[d+"-"+f],x=p[f+"-"+d];(w.value||x.value)&&i.push(w.value<x.value?{source:x,target:w}:{source:w,target:x})}l&&t()}function t(){i.sort(function(e,t){return l(e.target.value,t.target.value)})}var i,n,r,s,a,o,l,c={},u=0;return c.matrix=function(e){return arguments.length?(s=(r=e)&&r.length,i=n=null,c):r},c.padding=function(e){return arguments.length?(u=e,i=n=null,c):u},c.sortGroups=function(e){return arguments.length?(a=e,i=n=null,c):a},c.sortSubgroups=function(e){return arguments.length?(o=e,i=null,c):o},c.sortChords=function(e){return arguments.length?(l=e,i&&t(),c):l},c.chords=function(){return i||e(),i},c.groups=function(){return n||e(),n},c},d3.layout.force=function(){function e(e,t){return function(i,n,r,s){if(i.point!==e){var a=i.cx-e.x,o=i.cy-e.y,l=1/Math.sqrt(a*a+o*o);if(x>(s-n)*l){var c=t*i.count*l*l;return e.px-=a*c,e.py-=o*c,!0}if(i.point&&isFinite(l)){var c=t*l*l;e.px-=a*c,e.py-=o*c}}}}function t(){var t,i,n,r,s,a,l,c,u,p=C.length,y=E.length;for(i=0;y>i;++i)n=E[i],r=n.source,s=n.target,c=s.x-r.x,u=s.y-r.y,(a=c*c+u*u)&&(a=h*f[i]*((a=Math.sqrt(a))-d[i])/a,c*=a,u*=a,s.x-=c*(l=r.weight/(s.weight+r.weight)),s.y-=u*l,r.x+=c*(l=1-l),r.y+=u*l);if((l=h*w)&&(c=g[0]/2,u=g[1]/2,i=-1,l))for(;p>++i;)n=C[i],n.x+=(c-n.x)*l,n.y+=(u-n.y)*l;if(l=h*_)for(o(t=d3.geom.quadtree(C)),i=-1;p>++i;)(n=C[i]).fixed||t.visit(e(n,l));for(i=-1;p>++i;)n=C[i],n.fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*v,n.y-=(n.py-(n.py=n.y))*v);return m.tick.dispatch({type:"tick",alpha:h}),.005>(h*=.99)}function i(e){n(J=e),Z=p}var u,h,d,f,p={},m=d3.dispatch("tick"),g=[1,1],v=.9,y=l,b=c,_=-30,w=.1,x=.8,C=[],E=[];return p.on=function(e,t){return m[e].add(t),p},p.nodes=function(e){return arguments.length?(C=e,p):C},p.links=function(e){return arguments.length?(E=e,p):E},p.size=function(e){return arguments.length?(g=e,p):g},p.linkDistance=function(e){return arguments.length?(y=d3.functor(e),p):y},p.distance=p.linkDistance,p.linkStrength=function(e){return arguments.length?(b=d3.functor(e),p):b},p.friction=function(e){return arguments.length?(v=e,p):v},p.charge=function(e){return arguments.length?(_=e,p):_},p.gravity=function(e){return arguments.length?(w=e,p):w},p.theta=function(e){return arguments.length?(x=e,p):x},p.start=function(){function e(e,n){for(var r,s=t(i),a=-1,o=s.length;o>++a;)if(!isNaN(r=s[a][e]))return r;return Math.random()*n}function t(){if(!r){for(r=[],n=0;a>n;++n)r[n]=[];for(n=0;o>n;++n){var e=E[n];r[e.source.index].push(e.target),r[e.target.index].push(e.source)}}return r[i]}var i,n,r,s,a=C.length,o=E.length,l=g[0],c=g[1];for(i=0;a>i;++i)(s=C[i]).index=i,s.weight=0;for(d=[],f=[],i=0;o>i;++i)s=E[i],"number"==typeof s.source&&(s.source=C[s.source]),"number"==typeof s.target&&(s.target=C[s.target]),d[i]=y.call(this,s,i),f[i]=b.call(this,s,i),++s.source.weight,++s.target.weight;for(i=0;a>i;++i)s=C[i],isNaN(s.x)&&(s.x=e("x",l)),isNaN(s.y)&&(s.y=e("y",c)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);return p.resume()},p.resume=function(){return h=.1,d3.timer(t),p},p.stop=function(){return h=0,p},p.drag=function(){u||(u=d3.behavior.drag().on("dragstart",i).on("drag",a).on("dragend",s)),this.on("mouseover.force",n).on("mouseout.force",r).call(u)},p};var Z,J;d3.layout.partition=function(){function e(t,i,n,r){var s=t.children;if(t.x=i,t.y=t.depth*r,t.dx=n,t.dy=r,s){var a,o,l=-1,c=s.length;for(n=t.value?n/t.value:0;c>++l;)e(a=s[l],i,o=a.value*n,r),i+=o}}function t(e){var i=e.children,n=0;if(i)for(var r=-1,s=i.length;s>++r;)n=Math.max(n,t(i[r]));return 1+n}function i(i,s){var a=n.call(this,i,s);return e(a[0],0,r[0],r[1]/t(a[0])),a}var n=d3.layout.hierarchy(),r=[1,1];return i.size=function(e){return arguments.length?(r=e,i):r},_(i,n)},d3.layout.pie=function(){function e(e){var s=+("function"==typeof n?n.apply(this,arguments):n),a=("function"==typeof r?r.apply(this,arguments):r)-n,o=d3.range(e.length);null!=i&&o.sort(function(t,n){return i(e[t],e[n])});var l=e.map(t);a/=l.reduce(function(e,t){return e+t},0);var c=o.map(function(t){return{data:e[t],value:d=l[t],startAngle:s,endAngle:s+=d*a}});return e.map(function(e,t){return c[o[t]]})}var t=Number,i=null,n=0,r=2*Math.PI;return e.value=function(i){return arguments.length?(t=i,e):t},e.sort=function(t){return arguments.length?(i=t,e):i},e.startAngle=function(t){return arguments.length?(n=t,e):n},e.endAngle=function(t){return arguments.length?(r=t,e):r},e},d3.layout.stack=function(){function e(o,l){var c=o.map(function(i,n){return t.call(e,i,n)}),u=c.map(function(t){return t.map(function(t,i){return[s.call(e,t,i),a.call(e,t,i)]})}),h=i.call(e,u,l);c=d3.permute(c,h),u=d3.permute(u,h);var d,f,p,m=n.call(e,u,l),g=c.length,v=c[0].length;for(f=0;v>f;++f)for(r.call(e,c[0][f],p=m[f],u[0][f][1]),d=1;g>d;++d)r.call(e,c[d][f],p+=u[d-1][f][1],u[d][f][1]);return o}var t=Object,i=et["default"],n=tt.zero,r=f,s=u,a=h;return e.values=function(i){return arguments.length?(t=i,e):t},e.order=function(t){return arguments.length?(i="function"==typeof t?t:et[t],e):i},e.offset=function(t){return arguments.length?(n="function"==typeof t?t:tt[t],e):n},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(r=t,e):r},e};var et={"inside-out":function(e){var t,i,n=e.length,r=e.map(p),s=e.map(m),a=d3.range(n).sort(function(e,t){return r[e]-r[t]}),o=0,l=0,c=[],u=[];for(t=0;n>t;++t)i=a[t],l>o?(o+=s[i],c.push(i)):(l+=s[i],u.push(i));return u.reverse().concat(c)},reverse:function(e){return d3.range(e.length).reverse()},"default":function(e){return d3.range(e.length)}},tt={silhouette:function(e){var t,i,n,r=e.length,s=e[0].length,a=[],o=0,l=[];for(i=0;s>i;++i){for(t=0,n=0;r>t;t++)n+=e[t][i][1];n>o&&(o=n),a.push(n)}for(i=0;s>i;++i)l[i]=(o-a[i])/2;return l},wiggle:function(e){var t,i,n,r,s,a,o,l,c,u=e.length,h=e[0],d=h.length,f=[];for(f[0]=l=c=0,i=1;d>i;++i){for(t=0,r=0;u>t;++t)r+=e[t][i][1];for(t=0,s=0,o=h[i][0]-h[i-1][0];u>t;++t){for(n=0,a=(e[t][i][1]-e[t][i-1][1])/(2*o);t>n;++n)a+=(e[n][i][1]-e[n][i-1][1])/o;s+=a*e[t][i][1]}f[i]=l-=r?s/r*o:0,c>l&&(c=l)}for(i=0;d>i;++i)f[i]-=c;return f},expand:function(e){var t,i,n,r=e.length,s=e[0].length,a=1/r,o=[];for(i=0;s>i;++i){for(t=0,n=0;r>t;t++)n+=e[t][i][1];if(n)for(t=0;r>t;t++)e[t][i][1]/=n;else for(t=0;r>t;t++)e[t][i][1]=a}for(i=0;s>i;++i)o[i]=0;return o},zero:function(e){for(var t=-1,i=e[0].length,n=[];i>++t;)n[t]=0;return n}};d3.layout.histogram=function(){function e(e,s){for(var a,o,l=[],c=e.map(i,this),u=n.call(this,c,s),h=r.call(this,u,c,s),s=-1,d=c.length,f=h.length-1,p=t?1:1/d;f>++s;)a=l[s]=[],a.dx=h[s+1]-(a.x=h[s]),a.y=0;for(s=-1;d>++s;)o=c[s],o>=u[0]&&u[1]>=o&&(a=l[d3.bisect(h,o,1,f)-1],a.y+=p,a.push(e[s]));return l}var t=!0,i=Number,n=b,r=v;return e.value=function(t){return arguments.length?(i=t,e):i},e.range=function(t){return arguments.length?(n=d3.functor(t),e):n},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return y(e,t)}:d3.functor(t),e):r},e.frequency=function(i){return arguments.length?(t=!!i,e):t},e},d3.layout.hierarchy=function(){function e(t,a,o){var l=r.call(i,t,a),c=it?t:{data:t};if(c.depth=a,o.push(c),l){for(var u=-1,h=l.length,f=c.children=[],p=0,m=a+1;h>++u;)d=e(l[u],m,o),d.parent=c,f.push(d),p+=d.value;n&&f.sort(n),s&&(c.value=p)}else s&&(c.value=+s.call(i,t,a)||0);return c}function t(e,n){var r=e.children,a=0;if(r)for(var o=-1,l=r.length,c=n+1;l>++o;)a+=t(r[o],c);else s&&(a=+s.call(i,it?e:e.data,n)||0);return s&&(e.value=a),a}function i(t){var i=[];return e(t,0,i),i}var n=C,r=w,s=x;return i.sort=function(e){return arguments.length?(n=e,i):n},i.children=function(e){return arguments.length?(r=e,i):r},i.value=function(e){return arguments.length?(s=e,i):s},i.revalue=function(e){return t(e,0),e},i};var it=!1;d3.layout.pack=function(){function e(e,n){var r=t.call(this,e,n),s=r[0];s.x=0,s.y=0,D(s);var a=i[0],o=i[1],l=1/Math.max(2*s.r/a,2*s.r/o);return M(s,a/2,o/2,l),r}var t=d3.layout.hierarchy().sort(S),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},_(e,t)},d3.layout.cluster=function(){function e(e,r){var s,a=t.call(this,e,r),o=a[0],l=0;G(o,function(e){e.children?(e.x=O(e.children),e.y=F(e.children)):(e.x=s?l+=i(e,s):0,e.y=0,s=e)});var c=j(o),u=H(o),h=c.x-i(c,u)/2,d=u.x+i(u,c)/2;return G(o,function(e){e.x=(e.x-h)/(d-h)*n[0],e.y=(1-e.y/o.y)*n[1]}),a}var t=d3.layout.hierarchy().sort(null).value(null),i=L,n=[1,1];return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(n=t,e):n},_(e,t)},d3.layout.tree=function(){function e(e,r){function s(e,t){var n=e.children,r=e._tree;if(n&&(a=n.length)){for(var a,l,c,u=n[0],h=u,d=-1;a>++d;)c=n[d],s(c,l),h=o(c,l,h),l=c;V(e);var f=.5*(u._tree.prelim+c._tree.prelim);t?(r.prelim=t._tree.prelim+i(e,t),r.mod=r.prelim-f):r.prelim=f}else t&&(r.prelim=t._tree.prelim+i(e,t))}function a(e,t){e.x=e._tree.prelim+t;var i=e.children;if(i){var n=-1,r=i.length;for(t+=e._tree.mod;r>++n;)a(i[n],t)}}function o(e,t,n){if(t){for(var r,s=e,a=e,o=t,l=e.parent.children[0],c=s._tree.mod,u=a._tree.mod,h=o._tree.mod,d=l._tree.mod;o=q(o),s=B(s),o&&s;)l=B(l),a=q(a),a._tree.ancestor=e,r=o._tree.prelim+h-s._tree.prelim-c+i(o,s),r>0&&(Q(Y(o,e,n),e,r),c+=r,u+=r),h+=o._tree.mod,c+=s._tree.mod,d+=l._tree.mod,u+=a._tree.mod;o&&!q(a)&&(a._tree.thread=o,a._tree.mod+=h-u),s&&!B(l)&&(l._tree.thread=s,l._tree.mod+=c-d,n=e)}return n}var l=t.call(this,e,r),c=l[0];G(c,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),s(c),a(c,-c._tree.prelim);var u=z(c,$),h=z(c,W),d=z(c,U),f=u.x-i(u,h)/2,p=h.x+i(h,u)/2,m=d.depth||1;return G(c,function(e){e.x=(e.x-f)/(p-f)*n[0],e.y=e.depth/m*n[1],delete e._tree}),l}var t=d3.layout.hierarchy().sort(null).value(null),i=L,n=[1,1];return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(n=t,e):n},_(e,t)},d3.layout.treemap=function(){function e(e,t){for(var i,n,r=-1,s=e.length;s>++r;)n=(i=e[r]).value*(0>t?0:t),i.area=isNaN(n)||0>=n?0:n}function t(i){if(i.children){var s,a,o,l=h(i),c=[],u=i.children.slice(),d=1/0,f=Math.min(l.dx,l.dy);for(e(u,l.dx*l.dy/i.value),c.area=0;(o=u.length)>0;)c.push(s=u[o-1]),c.area+=s.area,d>=(a=n(c,f))?(u.pop(),d=a):(c.area-=c.pop().area,r(c,f,l,!1),f=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(r(c,f,l,!0),c.length=c.area=0),i.children.forEach(t)}}function i(t){if(t.children){var n,s=h(t),a=t.children.slice(),o=[];for(e(a,s.dx*s.dy/t.value),o.area=0;n=a.pop();)o.push(n),o.area+=n.area,null!=n.z&&(r(o,n.z?s.dx:s.dy,s,!a.length),o.length=o.area=0);t.children.forEach(i)}}function n(e,t){for(var i,n=e.area,r=0,s=1/0,a=-1,o=e.length;o>++a;)(i=e[a].area)&&(s>i&&(s=i),i>r&&(r=i));return n*=n,t*=t,n?Math.max(t*r*f/n,n/(t*s*f)):1/0}function r(e,t,i,n){var r,s=-1,a=e.length,o=i.x,c=i.y,u=t?l(e.area/t):0;if(t==i.dx){for((n||u>i.dy)&&(u=u?i.dy:0);a>++s;)r=e[s],r.x=o,r.y=c,r.dy=u,o+=r.dx=u?l(r.area/u):0;r.z=!0,r.dx+=i.x+i.dx-o,i.y+=u,i.dy-=u}else{for((n||u>i.dx)&&(u=u?i.dx:0);a>++s;)r=e[s],r.x=o,r.y=c,r.dx=u,c+=r.dy=u?l(r.area/u):0;r.z=!1,r.dy+=i.y+i.dy-c,i.x+=u,i.dx-=u}}function s(n){var r=a||o(n),s=r[0];return s.x=0,s.y=0,s.dx=c[0],s.dy=c[1],a&&o.revalue(s),e([s],s.dx*s.dy/s.value),(a?i:t)(s),d&&(a=r),r}var a,o=d3.layout.hierarchy(),l=Math.round,c=[1,1],u=null,h=X,d=!1,f=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(c=e,s):c},s.padding=function(e){function t(t){var i=e.call(s,t,t.depth);return null==i?X(t):K(t,"number"==typeof i?[i,i,i,i]:i)}function i(t){return K(t,e)}if(!arguments.length)return u;var n;return h=null==(u=e)?X:"function"==(n=typeof e)?t:"number"===n?(e=[e,e,e,e],i):i,s},s.round=function(e){return arguments.length?(l=e?Math.round:Number,s):l!=Number},s.sticky=function(e){return arguments.length?(d=e,a=null,s):d},s.ratio=function(e){return arguments.length?(f=e,s):f},_(s,o)}}(),function(){function e(e){for(var t=0,i=0;;){if(e(t,i))return[t,i];0===t?(t=i+1,i=0):(t-=1,i+=1)}}function t(e,t,i,n){var r,s,a,o,l,c,u;return r=n[e],s=r[0],a=r[1],r=n[t],o=r[0],l=r[1],r=n[i],c=r[0],u=r[1],(u-a)*(o-s)-(l-a)*(c-s)>0}function i(e,t,i){return(i[0]-t[0])*(e[1]-t[1])<(i[1]-t[1])*(e[0]-t[0])}function n(e,t,i,n){var r=e[0],s=t[0],a=i[0],o=n[0],l=e[1],c=t[1],u=i[1],h=n[1],d=r-a,f=s-r,p=o-a,m=l-u,g=c-l,v=h-u,y=(p*m-v*d)/(v*f-p*g);return[r+y*f,l+y*g]}function r(e,t){var i={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},n={list:[],leftEnd:null,rightEnd:null,init:function(){n.leftEnd=n.createHalfEdge(null,"l"),n.rightEnd=n.createHalfEdge(null,"l"),n.leftEnd.r=n.rightEnd,n.rightEnd.l=n.leftEnd,n.list.unshift(n.leftEnd,n.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=n.leftEnd;do t=t.r;while(t!=n.rightEnd&&r.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?i.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?i.bottomSite:e.edge.region[u[e.side]]}},r={bisect:function(e,t){var i={region:{l:e,r:t},ep:{l:null,r:null}},n=t.x-e.x,r=t.y-e.y,s=n>0?n:-n,a=r>0?r:-r;return i.c=e.x*n+e.y*r+.5*(n*n+r*r),s>a?(i.a=1,i.b=r/n,i.c/=n):(i.b=1,i.a=n/r,i.c/=r),i},intersect:function(e,t){var i=e.edge,n=t.edge;if(!i||!n||i.region.r==n.region.r)return null;var r=i.a*n.b-i.b*n.a;if(1e-10>Math.abs(r))return null;var s,a,o=(i.c*n.b-n.c*i.b)/r,l=(n.c*i.a-i.c*n.a)/r,c=i.region.r,u=n.region.r;c.y<u.y||c.y==u.y&&c.x<u.x?(s=e,a=i):(s=t,a=n);var h=o>=a.region.r.x;return h&&"l"===s.side||!h&&"r"===s.side?null:{x:o,y:l}},rightOf:function(e,t){var i=e.edge,n=i.region.r,r=t.x>n.x;if(r&&"l"===e.side)return 1;if(!r&&"r"===e.side)return 0;if(1===i.a){var s=t.y-n.y,a=t.x-n.x,o=0,l=0;if(!r&&0>i.b||r&&i.b>=0?l=o=s>=i.b*a:(l=t.x+t.y*i.b>i.c,0>i.b&&(l=!l),l||(o=1)),!o){var c=n.x-i.region.l.x;l=i.b*(a*a-s*s)<c*s*(1+2*a/c+i.b*i.b),0>i.b&&(l=!l)}}else{var u=i.c-i.a*t.x,h=t.y-u,d=t.x-n.x,f=u-n.y;l=h*h>d*d+f*f}return"l"===e.side?l:!l},endPoint:function(e,i,n){e.ep[i]=n,e.ep[u[i]]&&t(e)},distance:function(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}},s={list:[],insert:function(e,t,i){e.vertex=t,e.ystar=t.y+i;for(var n=0,r=s.list,a=r.length;a>n;n++){var o=r[n];if(!(e.ystar>o.ystar||e.ystar==o.ystar&&t.x>o.vertex.x))break}r.splice(n,0,e)},del:function(e){for(var t=0,i=s.list,n=i.length;n>t&&i[t]!=e;++t);i.splice(t,1)},empty:function(){return 0===s.list.length},nextEvent:function(e){for(var t=0,i=s.list,n=i.length;n>t;++t)if(i[t]==e)return i[t+1];return null},min:function(){var e=s.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return s.list.shift()}};n.init(),i.bottomSite=i.list.shift();for(var a,o,l,c,h,d,f,p,m,g,v,y,b,_=i.list.shift();;)if(s.empty()||(a=s.min()),_&&(s.empty()||_.y<a.y||_.y==a.y&&_.x<a.x))o=n.leftBound(_),l=n.right(o),f=n.rightRegion(o),y=r.bisect(f,_),d=n.createHalfEdge(y,"l"),n.insert(o,d),g=r.intersect(o,d),g&&(s.del(o),s.insert(o,g,r.distance(g,_))),o=d,d=n.createHalfEdge(y,"r"),n.insert(o,d),g=r.intersect(d,l),g&&s.insert(d,g,r.distance(g,_)),_=i.list.shift();else{if(s.empty())break;o=s.extractMin(),c=n.left(o),l=n.right(o),h=n.right(l),f=n.leftRegion(o),p=n.rightRegion(l),v=o.vertex,r.endPoint(o.edge,o.side,v),r.endPoint(l.edge,l.side,v),n.del(o),s.del(l),n.del(l),b="l",f.y>p.y&&(m=f,f=p,p=m,b="r"),y=r.bisect(f,p),d=n.createHalfEdge(y,b),n.insert(c,d),r.endPoint(y,u[b],v),g=r.intersect(c,d),g&&(s.del(c),s.insert(c,g,r.distance(g,f))),g=r.intersect(d,h),g&&s.insert(d,g,r.distance(g,f))}for(o=n.right(n.leftEnd);o!=n.rightEnd;o=n.right(o))t(o.edge)}function s(){return{leaf:!0,nodes:[],point:null}}function a(e,t,i,n,r,s){if(!e(t,i,n,r,s)){var o=.5*(i+r),l=.5*(n+s),c=t.nodes;c[0]&&a(e,c[0],i,n,o,l),c[1]&&a(e,c[1],o,n,r,l),c[2]&&a(e,c[2],i,l,o,s),c[3]&&a(e,c[3],o,l,r,s)}}function o(e){return{x:e[0],y:e[1]}}d3.geom={},d3.geom.contour=function(t,i){var n=i||e(t),r=[],s=n[0],a=n[1],o=0,u=0,h=0/0,d=0/0,f=0;do f=0,t(s-1,a-1)&&(f+=1),t(s,a-1)&&(f+=2),t(s-1,a)&&(f+=4),t(s,a)&&(f+=8),6===f?(o=-1===d?-1:1,u=0):9===f?(o=0,u=1===h?-1:1):(o=l[f],u=c[f]),o!=h&&u!=d&&(r.push([s,a]),h=o,d=u),s+=o,a+=u;while(n[0]!=s||n[1]!=a);return r};var l=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],c=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(e){if(3>e.length)return[];var i,n,r,s,a,o,l,c,u,h,d=e.length,f=d-1,p=[],m=[],g=0;for(i=1;d>i;++i)e[i][1]<e[g][1]?g=i:e[i][1]==e[g][1]&&(g=e[i][0]<e[g][0]?i:g);for(i=0;d>i;++i)i!==g&&(s=e[i][1]-e[g][1],r=e[i][0]-e[g][0],p.push({angle:Math.atan2(s,r),index:i}));for(p.sort(function(e,t){return e.angle-t.angle}),u=p[0].angle,c=p[0].index,l=0,i=1;f>i;++i)n=p[i].index,u==p[i].angle?(r=e[c][0]-e[g][0],s=e[c][1]-e[g][1],a=e[n][0]-e[g][0],o=e[n][1]-e[g][1],r*r+s*s>=a*a+o*o?p[i].index=-1:(p[l].index=-1,u=p[i].angle,l=i,c=n)):(u=p[i].angle,l=i,c=n);for(m.push(g),i=0,n=0;2>i;++n)-1!==p[n].index&&(m.push(p[n].index),i++);for(h=m.length;f>n;++n)if(-1!==p[n].index){for(;!t(m[h-2],m[h-1],p[n].index,e);)--h;m[h++]=p[n].index}var v=[];for(i=0;h>i;++i)v.push(e[m[i]]);return v},d3.geom.polygon=function(e){return e.area=function(){for(var t=0,i=e.length,n=e[i-1][0]*e[0][1],r=e[i-1][1]*e[0][0];i>++t;)n+=e[t-1][0]*e[t][1],r+=e[t-1][1]*e[t][0];return.5*(r-n)},e.centroid=function(t){var i,n,r,s=-1,a=e.length-1,o=0,l=0;for(arguments.length||(t=1/(6*e.area()));a>++s;)i=e[s],n=e[s+1],r=i[0]*n[1]-n[0]*i[1],o+=(i[0]+n[0])*r,l+=(i[1]+n[1])*r;return[o*t,l*t]},e.clip=function(t){for(var r,s,a,o,l,c,u=-1,h=e.length,d=e[h-1];h>++u;){for(r=t.slice(),t.length=0,o=e[u],l=r[(a=r.length)-1],s=-1;a>++s;)c=r[s],i(c,d,o)?(i(l,d,o)||t.push(n(l,c,d,o)),t.push(c)):i(l,d,o)&&t.push(n(l,c,d,o)),l=c;d=o}return t},e},d3.geom.voronoi=function(e){var t=e.map(function(){return[]});return r(e,function(e){var i,n,r,s,a,o;1===e.a&&e.b>=0?(i=e.ep.r,n=e.ep.l):(i=e.ep.l,n=e.ep.r),1===e.a?(a=i?i.y:-1e6,r=e.c-e.b*a,o=n?n.y:1e6,s=e.c-e.b*o):(r=i?i.x:-1e6,a=e.c-e.a*r,s=n?n.x:1e6,o=e.c-e.a*s);var l=[r,a],c=[s,o];t[e.region.l.index].push(l,c),t[e.region.r.index].push(l,c)}),t.map(function(t,i){var n=e[i][0],r=e[i][1];return t.forEach(function(e){e.angle=Math.atan2(e[0]-n,e[1]-r)}),t.sort(function(e,t){return e.angle-t.angle}).filter(function(e,i){return!i||e.angle-t[i-1].angle>1e-10})})};var u={l:"r",r:"l"};d3.geom.delaunay=function(e){var t=e.map(function(){return[]}),i=[];return r(e,function(i){t[i.region.l.index].push(e[i.region.r.index])}),t.forEach(function(t,n){var r=e[n],s=r[0],a=r[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-s,e[1]-a)}),t.sort(function(e,t){return e.angle-t.angle});for(var o=0,l=t.length-1;l>o;o++)i.push([r,t[o],t[o+1]])}),i},d3.geom.quadtree=function(e,t,i,n,r){function l(e,t,i,n,r,s){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf){var a=e.point;a?.01>Math.abs(a.x-t.x)+Math.abs(a.y-t.y)?c(e,t,i,n,r,s):(e.point=null,c(e,a,i,n,r,s),c(e,t,i,n,r,s)):e.point=t}else c(e,t,i,n,r,s)}function c(e,t,i,n,r,a){var o=.5*(i+r),c=.5*(n+a),u=t.x>=o,h=t.y>=c,d=(h<<1)+u;e.leaf=!1,e=e.nodes[d]||(e.nodes[d]=s()),u?i=o:r=o,h?n=c:a=c,l(e,t,i,n,r,a)}var u,h=-1,d=e.length;if(d&&isNaN(e[0].x)&&(e=e.map(o)),5>arguments.length)if(3===arguments.length)r=n=i,i=t;else{for(t=i=1/0,n=r=-1/0;d>++h;)u=e[h],t>u.x&&(t=u.x),i>u.y&&(i=u.y),u.x>n&&(n=u.x),u.y>r&&(r=u.y);var f=n-t,p=r-i;f>p?r=i+f:n=t+p}var m=s();return m.add=function(e){l(m,e,t,i,n,r)},m.visit=function(e){a(e,m,t,i,n,r)},e.forEach(m.add),m}}(),function(e){e.fn.tiesGraph=function(e){var t=860,i=500;d3.scale.category20();var n=d3.select(this.selector).append("svg:svg").attr("width",t).attr("height",i),r=d3.layout.force().charge(-120).linkDistance(40).nodes(e.nodes).links(e.links).size([t,i]).start(),s=n.selectAll("line.link").data(e.links).enter().append("svg:line").attr("class","link").style("stroke-width",function(e){return Math.sqrt(e.value)}).attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),a=n.selectAll("g.node").data(e.nodes).enter().append("svg:g").attr("class","node").call(r.drag);a.append("svg:image").attr("class","circle").attr("xlink:href",function(e){return e.logo}).attr("x","-10px").attr("y","-10px").attr("width","20px").attr("height","20px"),a.append("svg:title").text(function(e){return e.name}),n.style("opacity",1e-6).transition().duration(1e3).style("opacity",1),r.on("tick",function(){s.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),a.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})}}(jQuery),/*
 * jPlayer Plugin for jQuery JavaScript Library
 * http://www.happyworm.com/jquery/jplayer
 *
 * Copyright (c) 2009 - 2010 Happyworm Ltd
 * Dual licensed under the MIT and GPL licenses.
 *  - http://www.opensource.org/licenses/mit-license.php
 *  - http://www.gnu.org/copyleft/gpl.html
 *
 * Author: Mark J Panaghiston
 * Version: 2.0.0
 * Date: 20th December 2010
 */
function(e,t){e.fn.jPlayer=function(i){var n="string"==typeof i,r=Array.prototype.slice.call(arguments,1),s=this;return i=!n&&r.length?e.extend.apply(null,[!0,i].concat(r)):i,n&&"_"===i.charAt(0)?s:(n?this.each(function(){var n=e.data(this,"jPlayer"),a=n&&e.isFunction(n[i])?n[i].apply(n,r):n;return a!==n&&a!==t?(s=a,!1):void 0}):this.each(function(){var t=e.data(this,"jPlayer");t?(t.option(i||{})._init(),t.option(i||{})):e.data(this,"jPlayer",new e.jPlayer(i,this))}),s)},e.jPlayer=function(t,i){if(arguments.length){this.element=e(i),this.options=e.extend(!0,{},this.options,t);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},e.jPlayer.event={ready:"jPlayer_ready",resize:"jPlayer_resize",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"},e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplaythrough","ratechange"],e.jPlayer.pause=function(){e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""},e.jPlayer.convertTime=function(t){t=new Date(1e3*t);var i=t.getUTCHours(),n=t.getUTCMinutes();return t=t.getUTCSeconds(),i=e.jPlayer.timeFormat.padHour&&10>i?"0"+i:i,n=e.jPlayer.timeFormat.padMin&&10>n?"0"+n:n,t=e.jPlayer.timeFormat.padSec&&10>t?"0"+t:t,(e.jPlayer.timeFormat.showHour?i+e.jPlayer.timeFormat.sepHour:"")+(e.jPlayer.timeFormat.showMin?n+e.jPlayer.timeFormat.sepMin:"")+(e.jPlayer.timeFormat.showSec?t+e.jPlayer.timeFormat.sepSec:"")},e.jPlayer.uaMatch=function(e){e=e.toLowerCase();var t=/(opera)(?:.*version)?[ \/]([\w.]+)/,i=/(msie) ([\w.]+)/,n=/(mozilla)(?:.*? rv:([\w.]+))?/;return e=/(webkit)[ \/]([\w.]+)/.exec(e)||t.exec(e)||i.exec(e)||0>e.indexOf("compatible")&&n.exec(e)||[],{browser:e[1]||"",version:e[2]||"0"}},e.jPlayer.browser={};var i=e.jPlayer.uaMatch(navigator.userAgent);i.browser&&(e.jPlayer.browser[i.browser]=!0,e.jPlayer.browser.version=i.version),e.jPlayer.prototype={count:0,version:{script:"2.0.0",needFlash:"2.0.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:!1,backgroundColor:"#000000",cssSelectorAncestor:"#jp_interface_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",currentTime:".jp-current-time",duration:".jp-duration"},idPrefix:"jp",errorAlerts:!1,warningAlerts:!1},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0},_status:{volume:t,muted:!1,width:0,height:0},internal:{ready:!1,instance:t,htmlDlyCmdId:t},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=e.extend({},this.status,this._status),this.internal=e.extend({},this.internal),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.flash={},this.css={},this.css.cs={},this.css.jq={},this.status.volume=this._limitValue(this.options.volume,0,1),this.status.muted=this.options.muted,this.status.width=this.element.css("width"),this.status.height=this.element.css("height"),this.element.css({"background-color":this.options.backgroundColor}),e.each(this.options.supplied.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.format[r]){var s=!1;e.each(i.formats,function(e,t){return r===t?(s=!0,!1):void 0}),s||i.formats.push(r)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,n){var r=n.replace(/^\s+|\s+$/g,"");if(i.solution[r]){var s=!1;e.each(i.solutions,function(e,t){return r===t?(s=!0,!1):void 0}),s||i.solutions.push(r)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,""===this.element.attr("id")&&this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(""!==this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf"}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,n){i.options[e]!==t&&(i.element.bind(n+".jPlayer",i.options[e]),i.options[e]=t)}),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!i.status.video||i.status.waitForPlay)&&i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){i.require[i.format[t].media]=!0}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType),this.flash.available=this._checkForFlash(10),this.html.canPlay={},this.flash.canPlay={},e.each(this.formats,function(e,t){i.html.canPlay[t]=i.html[i.format[t].media].available&&""!==i.htmlElement[i.format[t].media].canPlayType(i.format[t].codec),i.flash.canPlay[t]=i.format[t].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,n){if(0===t)i[n].desired=!0;else{var r=!1,s=!1;e.each(i.formats,function(e,t){i[i.solutions[0]].canPlay[t]&&("video"===i.format[t].media?s=!0:r=!0)}),i[n].desired=i.require.audio&&!r||i.require.video&&!s}}),this.html.support={},this.flash.support={},e.each(this.formats,function(e,t){i.html.support[t]=i.html.canPlay[t]&&i.html.desired,i.flash.support[t]=i.flash.canPlay[t]&&i.flash.desired}),this.html.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,n){e.each(i.formats,function(e,t){return i[n].support[t]?(i[n].used=!0,!1):void 0})}),this.html.used||this.flash.used||this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.html.active=!1,this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.active=!1,this.flash.gate=!1,this.flash.used){var n="id="+escape(this.internal.self.id)+"&vol="+this.status.volume+"&muted="+this.status.muted;if(e.browser.msie&&8>=Number(e.browser.version)){var r='<object id="'+this.internal.flash.id+'"';r+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"',r+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"',r+=' type="application/x-shockwave-flash"',r+=' width="0" height="0">',r+="</object>";var s=[];for(s[0]='<param name="movie" value="'+this.internal.flash.swf+'" />',s[1]='<param name="quality" value="high" />',s[2]='<param name="FlashVars" value="'+n+'" />',s[3]='<param name="allowScriptAccess" value="always" />',s[4]='<param name="bgcolor" value="'+this.options.backgroundColor+'" />',n=document.createElement(r),r=0;s.length>r;r++)n.appendChild(document.createElement(s[r]));this.element.append(n)}else s='<embed name="'+this.internal.flash.id+'" id="'+this.internal.flash.id+'" src="'+this.internal.flash.swf+'"',s+=' width="0" height="0" bgcolor="'+this.options.backgroundColor+'"',s+=' quality="high" FlashVars="'+n+'"',s+=' allowScriptAccess="always"',s+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',this.element.append(s);this.internal.flash.jq=e("#"+this.internal.flash.id),this.internal.flash.jq.css({width:"0px",height:"0px"})}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css({width:"0px",height:"0px"}))),this.html.used&&!this.flash.used&&window.setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(e.jPlayer.event.ready)},100),e.each(this.options.cssSelector,function(e,t){i._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(!1),this._updateVolume(this.status.volume),this._updateMute(this.status.muted),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this._resetStatus(),this._updateInterface(),this._seeked(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),this.status.srcSet&&this.pause(),e.each(this.css.jq,function(e,t){t.unbind(".jPlayer")}),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),this.instances[this.internal.instance]=t},enable:function(){},disable:function(){},_addHtmlEventListeners:function(t,i){var n=this;t.preload=this.options.preload,t.muted=this.options.muted,t.addEventListener("progress",function(){i.gate&&!n.status.waitForLoad&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("timeupdate",function(){i.gate&&!n.status.waitForLoad&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){i.gate&&!n.status.waitForLoad&&(n.status.duration=this.duration,n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){i.gate&&!n.status.waitForLoad&&(n._updateButtons(!0),n._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){i.gate&&!n.status.waitForLoad&&(n._updateButtons(!0),n._seeked(),n._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){i.gate&&!n.status.waitForLoad&&(n._updateButtons(!1),n._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){i.gate&&!n.status.waitForLoad&&(n._seeking(),n._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("canplay",function(){i.gate&&!n.status.waitForLoad&&(t.volume=n._volumeFix(n.status.volume),n._trigger(e.jPlayer.event.canplay))},!1),t.addEventListener("seeking",function(){i.gate&&!n.status.waitForLoad&&(n._seeking(),n._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){i.gate&&!n.status.waitForLoad&&(n._seeked(),n._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("suspend",function(){i.gate&&!n.status.waitForLoad&&(n._seeked(),n._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){i.gate&&!n.status.waitForLoad&&(e.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){i.gate&&!n.status.waitForLoad&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(r,s){t.addEventListener(this,function(){i.gate&&!n.status.waitForLoad&&n._trigger(e.jPlayer.event[s])},!1)})},_getHtmlStatus:function(e,t){var i=0,n=0,r=0,s=0;i=e.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(r=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,s=100*e.currentTime/e.seekable.end(e.seekable.length-1)):(r=100,s=n),t&&(n=s=i=0),this.status.seekPercent=r,this.status.currentPercentRelative=s,this.status.currentPercentAbsolute=n,this.status.currentTime=i},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,i,n){t=e.Event(t),t.jPlayer={},t.jPlayer.version=e.extend({},this.version),t.jPlayer.status=e.extend(!0,{},this.status),t.jPlayer.html=e.extend(!0,{},this.html),t.jPlayer.flash=e.extend(!0,{},this.flash),i&&(t.jPlayer.error=e.extend({},i)),n&&(t.jPlayer.warning=e.extend({},n)),this.element.trigger(t)},jPlayerFlashEvent:function(t,i){if(t!==e.jPlayer.event.ready||this.internal.ready||(this.internal.ready=!0,this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(t)),this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._error({type:e.jPlayer.error.URL,context:i.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration},_updateButtons:function(e){this.status.paused=!e,this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%"),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(e.jPlayer.convertTime(this.status.currentTime)),this.css.jq.duration.length&&this.css.jq.duration.text(e.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},setMedia:function(t){var i=this;this._seeked(),clearTimeout(this.internal.htmlDlyCmdId);var n=this.html.audio.gate,r=this.html.video.gate,s=!1;e.each(this.formats,function(a,o){var l="video"===i.format[o].media;return e.each(i.solutions,function(e,a){if(i[a].support[o]&&i._validString(t[o])){var c="html"===a;return l?c?(i.html.audio.gate=!1,i.html.video.gate=!0,i.flash.gate=!1):(i.html.audio.gate=!1,i.html.video.gate=!1,i.flash.gate=!0):c?(i.html.audio.gate=!0,i.html.video.gate=!1,i.flash.gate=!1):(i.html.audio.gate=!1,i.html.video.gate=!1,i.flash.gate=!0),i.flash.active||i.html.active&&i.flash.gate||n===i.html.audio.gate&&r===i.html.video.gate?i.clearMedia():n!==i.html.audio.gate&&r!==i.html.video.gate&&(i._html_pause(),i.status.video&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._resetStatus()),l?(c?(i._html_setVideo(t),i.html.active=!0,i.flash.active=!1):(i._flash_setVideo(t),i.html.active=!1,i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(c?(i._html_setAudio(t),i.html.active=!0,i.flash.active=!1):(i._flash_setAudio(t),i.html.active=!1,i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),s=!0,!1}}),s?!1:void 0}),s?(this._validString(t.poster)?this.htmlElement.poster.src!==t.poster?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show():this.internal.poster.jq.hide(),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface()):(this.status.srcSet&&!this.status.waitForPlay&&this.pause(),this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.gate=!1,this.html.active=!1,this.flash.active=!1,this._resetStatus(),this._updateInterface(),this._updateButtons(!1),this.internal.poster.jq.hide(),this.html.used&&this.require.video&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.flash.used&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT}))},clearMedia:function(){this._resetStatus(),this._updateButtons(!1),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},play:function(e){e="number"==typeof e?e:0/0,this.status.srcSet?this.html.active?this._html_play(e):this.flash.active&&this._flash_play(e):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:0/0,this.status.srcSet?this.html.active?this._html_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},pauseOthers:function(){var t=this;e.each(this.instances,function(e,i){t.element!==i&&i.data("jPlayer").status.srcSet&&i.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},mute:function(){this.status.muted=!0,this.html.used&&this._html_mute(!0),this.flash.used&&this._flash_mute(!0),this._updateMute(!0),this._updateVolume(0),this._trigger(e.jPlayer.event.volumechange)},unmute:function(){this.status.muted=!1,this.html.used&&this._html_mute(!1),this.flash.used&&this._flash_mute(!1),this._updateMute(!1),this._updateVolume(this.status.volume),this._trigger(e.jPlayer.event.volumechange)},_updateMute:function(e){this.css.jq.mute.length&&this.css.jq.unmute.length&&(e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){t=this._limitValue(t,0,1),this.status.volume=t,this.html.used&&this._html_volume(t),this.flash.used&&this._flash_volume(t),this.status.muted||this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange)},volumeBar:function(e){if(!this.status.muted&&this.css.jq.volumeBar){var t=this.css.jq.volumeBar.offset();e=e.pageX-t.left,t=this.css.jq.volumeBar.width(),this.volume(e/t)}},volumeBarValue:function(e){this.volumeBar(e)},_updateVolume:function(e){this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.width(100*e+"%")},_volumeFix:function(e){var t=.001*Math.random();return e+(.5>e?t:-t)},_cssSelectorAncestor:function(t,i){this.options.cssSelectorAncestor=t,i&&e.each(this.options.cssSelector,function(e,t){self._cssSelector(e,t)})},_cssSelector:function(t,i){var n=this;"string"==typeof i?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=i,this.css.cs[t]=this.options.cssSelectorAncestor+" "+i,this.css.jq[t]=i?e(this.css.cs[t]):[],this.css.jq[t].length&&this.css.jq[t].bind("click.jPlayer",function(i){return n[t](i),e(this).blur(),!1}),i&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(e){if(this.css.jq.seekBar){var t=this.css.jq.seekBar.offset();e=e.pageX-t.left,t=this.css.jq.seekBar.width(),this.playHead(100*e/t)}},playBar:function(e){this.seekBar(e)},currentTime:function(){},duration:function(){},option:function(i,n){var r=i;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof i){var s=i.split(".");if(n===t){for(var a=e.extend(!0,{},this.options),o=0;s.length>o;o++){if(a[s[o]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:i,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;a=a[s[o]]}return a}for(a=r={},o=0;s.length>o;o++)s.length-1>o?(a[s[o]]={},a=a[s[o]]):a[s[o]]=n}return this._setOptions(r),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(t,i){var n=this;switch(t){case"cssSelectorAncestor":this.options[t]=i,e.each(n.options.cssSelector,function(e,t){n._cssSelector(e,t)});break;case"cssSelector":e.each(i,function(e,t){n._cssSelector(e,t)})}return this},resize:function(t){this.html.active&&this._resizeHtml(t),this.flash.active&&this._resizeFlash(t),this._trigger(e.jPlayer.event.resize)},_resizePoster:function(){},_resizeHtml:function(){},_resizeFlash:function(e){this.internal.flash.jq.css({width:e.width,height:e.height})},_html_initMedia:function(){this.status.srcSet&&!this.status.waitForPlay&&this.htmlElement.media.pause(),"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setAudio:function(t){var i=this;e.each(this.formats,function(e,n){return i.html.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia()},_html_setVideo:function(t){var i=this;e.each(this.formats,function(e,n){return i.html.support[n]&&t[n]?(i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1):void 0}),this.htmlElement.media=this.htmlElement.video,this._html_initMedia()},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause(),this.htmlElement.media.src="",e.browser.msie&&Number(e.browser.version)>=9||this.htmlElement.media.load())},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=!1,this.htmlElement.media.src=this.status.src;try{this.htmlElement.media.load()}catch(e){}}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this;if(this._html_load(),this.htmlElement.media.play(),!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(i){return this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},100),void 0}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this;if(e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),this.htmlElement.media.pause(),!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(i){return this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},100),void 0}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this;this._html_load();try{if("object"==typeof this.htmlElement.media.seekable&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=e*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else{if(!(this.htmlElement.media.duration>0)||isNaN(this.htmlElement.media.duration))throw"e";this.htmlElement.media.currentTime=e*this.htmlElement.media.duration/100}}catch(i){return this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},100),void 0}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(e){this.html.audio.available&&(this.htmlElement.audio.volume=e),this.html.video.available&&(this.htmlElement.video.volume=e)},_html_mute:function(e){this.html.audio.available&&(this.htmlElement.audio.muted=e),this.html.video.available&&(this.htmlElement.video.muted=e)},_flash_setAudio:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4a":i._getMovie().fl_setAudio_m4a(t[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_setVideo:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4v":i._getMovie().fl_setVideo_m4v(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(n){this._flashError(n)}},_flash_clearMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(t){var i,n=!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t),n=!0}catch(r){}else navigator.plugins&&navigator.mimeTypes.length>0&&(i=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=t&&(n=!0);return e.browser.msie&&Number(e.browser.version)>=9?!1:n},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,i){return t>e?t:e>i?i:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){this._error({type:e.jPlayer.error.FLASH,context:this.internal.flash.swf,message:e.jPlayer.errorMsg.FLASH+t.message,hint:e.jPlayer.errorHint.FLASH})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n\n"+t.message:"")+(t.hint?"\n\n"+t.hint:"")+"\n\nContext: "+t.context)},_warning:function(i){this._trigger(e.jPlayer.event.warning,t,i),this.options.errorAlerts&&this._alert("Warning!"+(i.message?"\n\n"+i.message:"")+(i.hint?"\n\n"+i.hint:"")+"\n\nContext: "+i.context)},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)}},e.jPlayer.error={FLASH:"e_flash",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of methodCssSelectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}(jQuery),SocialStream.Documents=SocialStream.Documents||{},SocialStream.Audio=function(e,t){var i=function(){t(".jp-audio .jp-jplayer").each(function(){t(this).jPlayer({ready:function(){t(this).jPlayer("setMedia",{webma:t(this).closest(".audio").find(".audio-webma").attr("href")})},preload:"none",supplied:"webma",swfPath:"/assets/",cssSelectorAncestor:"#"+t(this).closest(".audio-full").attr("id")})}),t(".audio-format-links").hide()};SocialStream.Timeline.addInitCallback(i)}(SocialStream,jQuery),SocialStream.Repository=function(e,t){var i=function(){t("body").screw({loadingHTML:'<img src="/assets/loading-b7ff30d20adcf2b850f420d17048930c.gif">'})
},n=function(e){t(".document_menu").each(function(){console.log(t(this)),"none"!=t(this).css("display")&&(t(this).slideToggle("slow"),t("#"+t(this).attr("id")+"_action").removeClass("selected"))}),"none"==t("#document_"+e).css("display")&&(t("#document_"+e).slideToggle("slow"),t("#document_"+e+"_action").addClass("selected"))};return{init:i,toggleDocumentMenu:n}}(SocialStream,jQuery),SocialStream.Video=function(e,t){var i=function(){t(".jp-video .jp-jplayer").each(function(){t(this).jPlayer({ready:function(){t(this).jPlayer("setMedia",{webmv:t(this).closest(".video").find(".video-webm").attr("href"),flv:t(this).closest(".video").find(".video-flv").attr("href"),mp4:t(this).closest(".video").find(".video-mp4").attr("href")})},solution:"flash, html",preload:"none",supplied:"webmv, flv, mp4",swfPath:"/assets/",cssSelectorAncestor:"#"+t(this).closest(".video-full").attr("id")})}),t(".video-format-links").hide(),t(".video-full").hide(),t(".video_thumbnail_play_over").click(function(){var e=t(this).closest(".video");e.find(".video-thumb").hide(),e.find(".video-details").hide(),e.find(".jp-video-play").hide(),e.find(".video-full").show(),e.find(".jp-jplayer").jPlayer("play",0)})};SocialStream.Timeline.addInitCallback(i)}(SocialStream,jQuery),jQuery.fn.boxy=function(e){return e=e||{},this.each(function(){var t=this.nodeName.toLowerCase(),i=this;"a"==t?jQuery(this).click(function(){var t=Boxy.linkedTo(this),i=this.getAttribute("href"),n=jQuery.extend({actuator:this,title:this.title},e);if(t)t.show();else if(i.indexOf("#")>=0){var r=jQuery(i.substr(i.indexOf("#"))),s=r.clone(!0);r.remove(),n.unloadOnHide=!1,new Boxy(s,n)}else n.cache||(n.unloadOnHide=!0),Boxy.load(this.href,n);return!1}):"form"==t&&jQuery(this).bind("submit.boxy",function(){return Boxy.confirm(e.message||"Please confirm:",function(){jQuery(i).unbind("submit.boxy").submit()}),!1})})},Boxy.EF=function(){},jQuery.extend(Boxy,{WRAPPER:"<table cellspacing='0' cellpadding='0' border='0' class='boxy-wrapper'><tr><td class='top-left'></td><td class='top'></td><td class='top-right'></td></tr><tr><td class='left'></td><td class='boxy-inner'></td><td class='right'></td></tr><tr><td class='bottom-left'></td><td class='bottom'></td><td class='bottom-right'></td></tr></table>",DEFAULTS:{title:null,closeable:!0,draggable:!0,clone:!1,actuator:null,center:!0,show:!0,modal:!1,fixed:!0,closeText:"[close]",unloadOnHide:!1,clickToFront:!1,behaviours:Boxy.EF,afterDrop:Boxy.EF,afterShow:Boxy.EF,afterHide:Boxy.EF,beforeUnload:Boxy.EF},DEFAULT_X:50,DEFAULT_Y:50,zIndex:1337,dragConfigured:!1,resizeConfigured:!1,dragging:null,load:function(e,t){t=t||{};var i={url:e,type:"GET",dataType:"html",cache:!1,success:function(e){e=jQuery(e),t.filter&&(e=jQuery(t.filter,e)),new Boxy(e,t)}};jQuery.each(["type","cache"],function(){this in t&&(i[this]=t[this],delete t[this])}),jQuery.ajax(i)},get:function(e){var t=jQuery(e).parents(".boxy-wrapper");return t.length?jQuery.data(t[0],"boxy"):null},linkedTo:function(e){return jQuery.data(e,"active.boxy")},alert:function(e,t,i){return Boxy.ask(e,["OK"],t,i)},confirm:function(e,t,i){return Boxy.ask(e,["OK","Cancel"],function(e){"OK"==e&&t()},i)},ask:function(e,t,i,n){n=jQuery.extend({modal:!0,closeable:!1},n||{},{show:!0,unloadOnHide:!0});var r=jQuery("<div></div>").append(jQuery('<div class="question"></div>').html(e)),s={},a=[];if(t instanceof Array)for(var o=0;t.length>o;o++)s[t[o]]=t[o],a.push(t[o]);else for(var l in t)s[t[l]]=l,a.push(t[l]);var c=jQuery('<form class="answers"></form>');c.html(jQuery.map(a,function(e){return"<input type='button' value='"+e+"' />"}).join(" ")),jQuery("input[type=button]",c).click(function(){var e=this;Boxy.get(this).hide(function(){i&&i(s[e.value])})}),r.append(c),new Boxy(r,n)},isModalVisible:function(){return jQuery(".boxy-modal-blackout").length>0},_u:function(){for(var e=0;arguments.length>e;e++)if("undefined"!=typeof arguments[e])return!1;return!0},_handleResize:function(){var e=jQuery(document);jQuery(".boxy-modal-blackout").css("display","none").css({width:e.width(),height:e.height()}).css("display","block")},_handleDrag:function(e){var t;(t=Boxy.dragging)&&t[0].boxy.css({left:e.pageX-t[1],top:e.pageY-t[2]})},_nextZ:function(){return Boxy.zIndex++},_viewport:function(){var e=document.documentElement,t=document.body,i=window;return jQuery.extend(jQuery.browser.msie?{left:t.scrollLeft||e.scrollLeft,top:t.scrollTop||e.scrollTop}:{left:i.pageXOffset,top:i.pageYOffset},Boxy._u(i.innerWidth)?Boxy._u(e)||Boxy._u(e.clientWidth)||0==e.clientWidth?{width:t.clientWidth,height:t.clientHeight}:{width:e.clientWidth,height:e.clientHeight}:{width:i.innerWidth,height:i.innerHeight})}}),Boxy.prototype={estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var e=this.getSize();return this.boxy.css("display","none").css("visibility","visible"),e},getSize:function(){return[this.boxy.width(),this.boxy.height()]},getContentSize:function(){var e=this.getContent();return[e.width(),e.height()]},getPosition:function(){var e=this.boxy[0];return[e.offsetLeft,e.offsetTop]},getCenter:function(){var e=this.getPosition(),t=this.getSize();return[Math.floor(e[0]+t[0]/2),Math.floor(e[1]+t[1]/2)]},getInner:function(){return jQuery(".boxy-inner",this.boxy)},getContent:function(){return jQuery(".boxy-content",this.boxy)},setContent:function(e){return e=jQuery(e).css({display:"block"}).addClass("boxy-content"),this.options.clone&&(e=e.clone(!0)),this.getContent().remove(),this.getInner().append(e),this._setupDefaultBehaviours(e),this.options.behaviours.call(this,e),this},moveTo:function(e,t){return this.moveToX(e).moveToY(t),this},moveToX:function(e){return"number"==typeof e?this.boxy.css({left:e}):this.centerX(),this},moveToY:function(e){return"number"==typeof e?this.boxy.css({top:e}):this.centerY(),this},centerAt:function(e,t){var i=this[this.visible?"getSize":"estimateSize"]();return"number"==typeof e&&this.moveToX(e-i[0]/2),"number"==typeof t&&this.moveToY(t-i[1]/2),this},centerAtX:function(e){return this.centerAt(e,null)},centerAtY:function(e){return this.centerAt(null,e)},center:function(e){var t=Boxy._viewport(),i=this.options.fixed?[0,0]:[t.left,t.top];return e&&"x"!=e||this.centerAt(i[0]+t.width/2,null),e&&"y"!=e||this.centerAt(null,i[1]+t.height/2),this},centerX:function(){return this.center("x")},centerY:function(){return this.center("y")},resize:function(e,t,i){if(this.visible){var n=this._getBoundsForResize(e,t);return this.boxy.css({left:n[0],top:n[1]}),this.getContent().css({width:n[2],height:n[3]}),i&&i(this),this}},tween:function(e,t,i){if(this.visible){var n=this._getBoundsForResize(e,t),r=this;return this.boxy.stop().animate({left:n[0],top:n[1]}),this.getContent().stop().animate({width:n[2],height:n[3]},function(){i&&i(r)}),this}},isVisible:function(){return this.visible},show:function(){if(!this.visible){if(this.options.modal){var e=this;Boxy.resizeConfigured||(Boxy.resizeConfigured=!0,jQuery(window).resize(function(){Boxy._handleResize()})),this.modalBlackout=jQuery('<div class="boxy-modal-blackout"></div>').css({zIndex:Boxy._nextZ(),opacity:.7,width:jQuery(document).width(),height:jQuery(document).height()}).appendTo(document.body),this.toTop(),this.options.closeable&&jQuery(document.body).bind("keypress.boxy",function(t){var i=t.which||t.keyCode;27==i&&(e.hide(),jQuery(document.body).unbind("keypress.boxy"))})}return this.boxy.stop().css({opacity:1}).show(),this.visible=!0,this._fire("afterShow"),this}},hide:function(e){if(this.visible){var t=this;return this.options.modal&&(jQuery(document.body).unbind("keypress.boxy"),this.modalBlackout.animate({opacity:0},function(){jQuery(this).remove()})),this.boxy.stop().animate({opacity:0},300,function(){t.boxy.css({display:"none"}),t.visible=!1,t._fire("afterHide"),e&&e(t),t.options.unloadOnHide&&t.unload()}),this}},toggle:function(){return this[this.visible?"hide":"show"](),this},hideAndUnload:function(e){return this.options.unloadOnHide=!0,this.hide(e),this},unload:function(){this._fire("beforeUnload"),this.boxy.remove(),this.options.actuator&&jQuery.data(this.options.actuator,"active.boxy",!1)},toTop:function(){return this.boxy.css({zIndex:Boxy._nextZ()}),this},getTitle:function(){return jQuery("> .title-bar h2",this.getInner()).html()},setTitle:function(e){return jQuery("> .title-bar h2",this.getInner()).html(e),this},_getBoundsForResize:function(e,t){var i=this.getContentSize(),n=[e-i[0],t-i[1]],r=this.getPosition();return[Math.max(r[0]-n[0]/2,0),Math.max(r[1]-n[1]/2,0),e,t]},_setupTitleBar:function(){if(this.options.title){var e=this,t=jQuery("<div class='title-bar'></div>").html("<h2>"+this.options.title+"</h2>");this.options.closeable&&t.append(jQuery("<a href='#' class='close'></a>").html(this.options.closeText)),this.options.draggable&&(t[0].onselectstart=function(){return!1},t[0].unselectable="on",t[0].style.MozUserSelect="none",Boxy.dragConfigured||(jQuery(document).mousemove(Boxy._handleDrag),Boxy.dragConfigured=!0),t.mousedown(function(t){e.toTop(),Boxy.dragging=[e,t.pageX-e.boxy[0].offsetLeft,t.pageY-e.boxy[0].offsetTop],jQuery(this).addClass("dragging")}).mouseup(function(){jQuery(this).removeClass("dragging"),Boxy.dragging=null,e._fire("afterDrop")})),this.getInner().prepend(t),this._setupDefaultBehaviours(t)}},_setupDefaultBehaviours:function(e){var t=this;this.options.clickToFront&&e.click(function(){t.toTop()}),jQuery(".close",e).click(function(){return t.hide(),!1}).mousedown(function(e){e.stopPropagation()})},_fire:function(e){this.options[e].call(this)}},/**
 * @preserve
 * FullCalendar v1.5.4
 * http://arshaw.com/fullcalendar/
 *
 * Use fullcalendar.css for basic styling.
 * For event drag & drop, requires jQuery UI draggable.
 * For event resizing, requires jQuery UI resizable.
 *
 * Copyright (c) 2011 Adam Shaw
 * Dual licensed under the MIT and GPL licenses, located in
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 *
 * Date: Tue Sep 4 23:38:33 2012 -0700
 *
 */
function(e,t){function i(t){e.extend(!0,vt,t)}function n(i,n,c){function u(e){Z?(E(),C(),D(),b(e)):h()}function h(){J=n.theme?"ui":"fc",i.addClass("fc"),n.isRTL&&i.addClass("fc-rtl"),n.theme&&i.addClass("ui-widget"),Z=e("<div class='fc-content' style='position:relative'/>").prependTo(i),X=new r(Y,n),K=X.render(),K&&i.prepend(K),y(n.defaultView),e(window).resize(k),v()||f()}function f(){setTimeout(function(){!et.start&&v()&&b()},0)}function p(){e(window).unbind("resize",k),X.destroy(),Z.remove(),i.removeClass("fc fc-rtl ui-widget")}function m(){return 0!==ot.offsetWidth}function v(){return 0!==e("body")[0].offsetWidth}function y(t){if(!et||t!=et.name){ut++,R();var i,n=et;n?((n.beforeHide||B)(),L(Z,Z.height()),n.element.hide()):L(Z,1),Z.css("overflow","hidden"),et=lt[t],et?et.element.show():et=lt[t]=new _t[t](i=nt=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(Z),Y),n&&X.deactivateButton(n.name),X.activateButton(t),b(),Z.css("overflow",""),n&&L(Z,1),i||(et.afterShow||B)(),ut--}}function b(e){if(m()){ut++,R(),it===t&&E();var n=!1;!et.start||e||et.start>ht||ht>=et.end?(et.render(ht,e||0),S(!0),n=!0):et.sizeDirty?(et.clearEvents(),S(),n=!0):et.eventsDirty&&(et.clearEvents(),n=!0),et.sizeDirty=!1,et.eventsDirty=!1,I(n),tt=i.outerWidth(),X.updateTitle(et.title);var r=new Date;r>=et.start&&et.end>r?X.disableButton("today"):X.enableButton("today"),ut--,et.trigger("viewDisplay",ot)}}function x(){C(),m()&&(E(),S(),R(),et.clearEvents(),et.renderEvents(dt),et.sizeDirty=!1)}function C(){e.each(lt,function(e,t){t.sizeDirty=!0})}function E(){it=n.contentHeight?n.contentHeight:n.height?n.height-(K?K.height():0)-F(Z):Math.round(Z.width()/Math.max(n.aspectRatio,.5))}function S(e){ut++,et.setHeight(it,e),nt&&(nt.css("position","relative"),nt=null),et.setWidth(Z.width(),e),ut--}function k(){if(!ut)if(et.start){var e=++ct;setTimeout(function(){e==ct&&!ut&&m()&&tt!=(tt=i.outerWidth())&&(ut++,x(),et.trigger("windowResize",ot),ut--)},200)}else f()}function I(e){!n.lazyFetching||st(et.visStart,et.visEnd)?T():e&&P()}function T(){at(et.visStart,et.visEnd)}function A(e){dt=e,P()}function N(e){P(e)}function P(e){D(),m()&&(et.clearEvents(),et.renderEvents(dt,e),et.eventsDirty=!1)}function D(){e.each(lt,function(e,t){t.eventsDirty=!0})}function M(e,i,n){et.select(e,i,n===t?!0:n)}function R(){et&&et.unselect()}function O(){b(-1)}function j(){b(1)}function H(){a(ht,-1),b()}function q(){a(ht,1),b()}function z(){ht=new Date,b()}function W(e,t,i){e instanceof Date?ht=d(e):g(ht,e,t,i),b()}function $(e,i,n){e!==t&&a(ht,e),i!==t&&o(ht,i),n!==t&&l(ht,n),b()}function U(){return d(ht)}function G(){return et}function V(e,i){return i===t?n[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=i,x()),void 0)}function Q(e,t){return n[e]?n[e].apply(t||ot,Array.prototype.slice.call(arguments,2)):void 0}var Y=this;Y.options=n,Y.render=u,Y.destroy=p,Y.refetchEvents=T,Y.reportEvents=A,Y.reportEventChange=N,Y.rerenderEvents=P,Y.changeView=y,Y.select=M,Y.unselect=R,Y.prev=O,Y.next=j,Y.prevYear=H,Y.nextYear=q,Y.today=z,Y.gotoDate=W,Y.incrementDate=$,Y.formatDate=function(e,t){return _(e,t,n)},Y.formatDates=function(e,t,i){return w(e,t,i,n)},Y.getDate=U,Y.getView=G,Y.option=V,Y.trigger=Q,s.call(Y,n,c);var X,K,Z,J,et,tt,it,nt,rt,st=Y.isFetchNeeded,at=Y.fetchEvents,ot=i[0],lt={},ct=0,ut=0,ht=new Date,dt=[];g(ht,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var r=t.target,s=e(r);if(!s.parents(".fc").length){var a=n.dropAccept;(e.isFunction(a)?a.call(r,s):s.is(a))&&(rt=r,et.dragStart(rt,t,i))}}).bind("dragstop",function(e,t){rt&&(et.dragStop(rt,e,t),rt=null)})}function r(t,i){function n(){d=i.theme?"ui":"fc";var t=i.header;return t?f=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(s("left")).append(s("center")).append(s("right"))):void 0}function r(){f.remove()}function s(n){var r=e("<td class='fc-header-"+n+"'/>"),s=i.header[n];return s&&e.each(s.split(" "),function(n){n>0&&r.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(n,a){if("title"==a)r.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(d+"-corner-right"),s=null;else{var o;if(t[a]?o=t[a]:_t[a]&&(o=function(){u.removeClass(d+"-state-hover"),t.changeView(a)}),o){var l=i.theme?$(i.buttonIcons,a):null,c=$(i.buttonText,a),u=e("<span class='fc-button fc-button-"+a+" "+d+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");u&&(u.click(function(){u.hasClass(d+"-state-disabled")||o()}).mousedown(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){u.removeClass(d+"-state-down")}).hover(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){u.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(r),s||u.addClass(d+"-corner-left"),s=u)}}}),s&&s.addClass(d+"-corner-right")}),r}function a(e){f.find("h2").html(e)}function o(e){f.find("span.fc-button-"+e).addClass(d+"-state-active")}function l(e){f.find("span.fc-button-"+e).removeClass(d+"-state-active")}function c(e){f.find("span.fc-button-"+e).addClass(d+"-state-disabled")}function u(e){f.find("span.fc-button-"+e).removeClass(d+"-state-disabled")}var h=this;h.render=n,h.destroy=r,h.updateTitle=a,h.activateButton=o,h.deactivateButton=l,h.disableButton=c,h.enableButton=u;var d,f=e([])}function s(i,n){function r(e,t){return!E||E>e||t>S}function s(e,t){E=e,S=t,R=[];var i=++P,n=N.length;D=n;for(var r=0;n>r;r++)a(N[r],i)}function a(e,t){o(e,function(i){if(t==P){if(i){for(var n=0;i.length>n;n++)i[n].source=e,b(i[n]);R=R.concat(i)}D--,D||T(R)}})}function o(t,n){var r,s,a=bt.sourceFetchers;for(r=0;a.length>r;r++){if(s=a[r](t,E,S,n),s===!0)return;if("object"==typeof s)return o(s,n),void 0}var l=t.events;if(l)e.isFunction(l)?(g(),l(d(E),d(S),function(e){n(e),y()})):e.isArray(l)?n(l):n();else{var c=t.url;if(c){var u=t.success,h=t.error,f=t.complete,p=e.extend({},t.data||{}),m=Z(t.startParam,i.startParam),v=Z(t.endParam,i.endParam);m&&(p[m]=Math.round(+E/1e3)),v&&(p[v]=Math.round(+S/1e3)),g(),e.ajax(e.extend({},wt,t,{data:p,success:function(t){t=t||[];var i=K(u,this,arguments);e.isArray(i)&&(t=i),n(t)},error:function(){K(h,this,arguments),n()},complete:function(){K(f,this,arguments),y()}}))}else n()}}function l(e){e=c(e),e&&(D++,a(e,P))}function c(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(_(t),N.push(t),t):void 0}function u(t){N=e.grep(N,function(e){return!w(e,t)}),R=e.grep(R,function(e){return!w(e.source,t)}),T(R)}function h(e){var t,i,n=R.length,r=I().defaultEventEnd,s=e.start-e._start,a=e.end?e.end-(e._end||r(e)):0;for(t=0;n>t;t++)i=R[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+s),i.end=e.end?i.end?new Date(+i.end+a):new Date(+r(i)+a):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroudColor=e.backgroudColor,i.borderColor=e.borderColor,i.textColor=e.textColor,b(i));b(e),T(R)}function f(e,t){b(e),e.source||(t&&(A.events.push(e),e.source=A),R.push(e)),T(R)}function p(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}R=e.grep(R,t,!0);for(var n=0;N.length>n;n++)e.isArray(N[n].events)&&(N[n].events=e.grep(N[n].events,t,!0))}else{R=[];for(var n=0;N.length>n;n++)e.isArray(N[n].events)&&(N[n].events=[])}T(R)}function m(t){return e.isFunction(t)?e.grep(R,t):t?(t+="",e.grep(R,function(e){return e._id==t})):R}function g(){M++||k("loading",null,!0)}function y(){--M||k("loading",null,!1)}function b(e){var n=e.source||{},r=Z(n.ignoreTimezone,i.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+xt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=d(e.start=v(e.start,r)),e.end=v(e.end,r),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?d(e.end):null,e.allDay===t&&(e.allDay=Z(n.allDayDefault,i.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function _(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=bt.sourceNormalizers,i=0;t.length>i;i++)t[i](e)}function w(e,t){return e&&t&&x(e)==x(t)}function x(e){return("object"==typeof e?e.events||e.url:"")||e}var C=this;C.isFetchNeeded=r,C.fetchEvents=s,C.addEventSource=l,C.removeEventSource=u,C.updateEvent=h,C.renderEvent=f,C.removeEvents=p,C.clientEvents=m,C.normalizeEvent=b;for(var E,S,k=C.trigger,I=C.getView,T=C.reportEvents,A={events:[]},N=[A],P=0,D=0,M=0,R=[],F=0;n.length>F;F++)c(n[F])}function a(e,t,i){return e.setFullYear(e.getFullYear()+t),i||h(e),e}function o(e,t,i){if(+e){var n=e.getMonth()+t,r=d(e);for(r.setDate(1),r.setMonth(n),e.setMonth(n),i||h(e);e.getMonth()!=r.getMonth();)e.setDate(e.getDate()+(r>e?1:-1))}return e}function l(e,t,i){if(+e){var n=e.getDate()+t,r=d(e);r.setHours(9),r.setDate(n),e.setDate(n),i||h(e),c(e,r)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*St)}function u(e,t){return e.setMinutes(e.getMinutes()+t),e}function h(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function d(e,t){return t?h(new Date(+e)):new Date(+e)}function f(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function p(e,t,i){for(t=t||1;!e.getDay()||i&&1==e.getDay()||!i&&6==e.getDay();)l(e,t);return e}function m(e,t){return Math.round((d(e,!0)-d(t,!0))/Et)}function g(e,i,n,r){i!==t&&i!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(i)),n!==t&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),r!==t&&e.setDate(r)}function v(e,i){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(i===t&&(i=!0),y(e,i)||(e?new Date(e):null)):null}function y(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var r=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),r.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),r.setDate(i[5])),c(n,r),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,r)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var s=60*Number(i[16])+(i[18]?Number(i[18]):0);s*="-"==i[15]?1:-1,n=new Date(+n+1e3*60*s)}return n}function b(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function _(e,t,i){return w(e,null,t,i)}function w(e,t,i,n){n=n||vt;var r,s,a,o,l=e,c=t,u=i.length,h="";for(r=0;u>r;r++)if(s=i.charAt(r),"'"==s){for(a=r+1;u>a;a++)if("'"==i.charAt(a)){l&&(h+=a==r+1?"'":i.substring(r+1,a),r=a);break}}else if("("==s){for(a=r+1;u>a;a++)if(")"==i.charAt(a)){var d=_(l,i.substring(r+1,a),n);parseInt(d.replace(/\D/,""),10)&&(h+=d),r=a;break}}else if("["==s){for(a=r+1;u>a;a++)if("]"==i.charAt(a)){var f=i.substring(r+1,a),d=_(l,f,n);d!=_(c,f,n)&&(h+=d),r=a;break}}else if("{"==s)l=t,c=e;else if("}"==s)l=e,c=t;else{for(a=u;a>r;a--)if(o=It[i.substring(r,a)]){l&&(h+=o(l,n)),r=a-1;break}a==r&&l&&(h+=s)}return h}function x(e){return e.end?C(e.end,e.allDay):l(d(e.start),1)}function C(e,t){return e=d(e),t||e.getHours()||e.getMinutes()?l(e,1):h(e)}function E(e,t){return 100*(t.msLength-e.msLength)+(e.event.start-t.event.start)}function S(e,t){return e.end>t.start&&e.start<t.end}function k(e,t,i,n){var r,s,a,o,l,c,u,h,f=[],p=e.length;for(r=0;p>r;r++)s=e[r],a=s.start,o=t[r],o>i&&n>a&&(i>a?(l=d(i),u=!1):(l=a,u=!0),o>n?(c=d(n),h=!1):(c=o,h=!0),f.push({event:s,start:l,end:c,isStart:u,isEnd:h,msLength:c-l}));return f.sort(E)}function I(e){var t,i,n,r,s,a=[],o=e.length;for(t=0;o>t;t++){for(i=e[t],n=0;;){if(r=!1,a[n])for(s=0;a[n].length>s;s++)if(S(a[n][s],i)){r=!0;break}if(!r)break;n++}a[n]?a[n].push(i):a[n]=[i]}return a}function T(i,n,r){i.unbind("mouseover").mouseover(function(i){for(var s,a,o,l=i.target;l!=this;)s=l,l=l.parentNode;(a=s._fci)!==t&&(s._fci=t,o=n[a],r(o.event,o.element,o),e(i.target).trigger(i)),i.stopPropagation()})}function A(t,i,n){for(var r,s=0;t.length>s;s++)r=e(t[s]),r.width(Math.max(0,i-P(r,n)))}function N(t,i,n){for(var r,s=0;t.length>s;s++)r=e(t[s]),r.height(Math.max(0,i-F(r,n)))}function P(e,t){return D(e)+R(e)+(t?M(e):0)}function D(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function M(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function R(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function F(e,t){return O(e)+H(e)+(t?j(e):0)}function O(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function j(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function H(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function L(e,t){t="number"==typeof t?t+"px":t,e.each(function(e,i){i.style.cssText+=";min-height:"+t+";_height:"+t})}function B(){}function q(e,t){return e-t}function z(e){return Math.max.apply(Math,e)}function W(e){return(10>e?"0":"")+e}function $(e,i){if(e[i]!==t)return e[i];for(var n,r=i.split(/(?=[A-Z])/),s=r.length-1;s>=0;s--)if(n=e[r[s].toLowerCase()],n!==t)return n;return e[""]}function U(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function G(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function V(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Q(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Y(e,t){e.each(function(e,i){i.className=i.className.replace(/^fc-\w*/,"fc-"+Ct[t.getDay()])})}function X(e,t){var i=e.source||{},n=e.color,r=i.color,s=t("eventColor"),a=e.backgroundColor||n||i.backgroundColor||r||t("eventBackgroundColor")||s,o=e.borderColor||n||i.borderColor||r||t("eventBorderColor")||s,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return a&&c.push("background-color:"+a),o&&c.push("border-color:"+o),l&&c.push("color:"+l),c.join(";")}function K(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var r,s;for(r=0;t.length>r;r++)s=t[r].apply(i,n)||s;return s}}function Z(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function J(e,t){function i(e,t){t&&(o(e,t),e.setDate(1));var i=d(e,!0);i.setDate(1);var c=o(d(i),1),u=d(i),h=d(c),f=r("firstDay"),m=r("weekends")?0:1;m&&(p(u),p(h,-1,!0)),l(u,-((u.getDay()-Math.max(f,m)+7)%7)),l(h,(7-h.getDay()+Math.max(f,m))%7);var g=Math.round((h-u)/(7*Et));"fixed"==r("weekMode")&&(l(h,7*(6-g)),g=6),n.title=a(i,r("titleFormat")),n.start=i,n.end=c,n.visStart=u,n.visEnd=h,s(6,g,m?5:7,!0)}var n=this;n.render=i,it.call(n,e,t,"month");var r=n.opt,s=n.renderBasic,a=t.formatDate}function et(e,t){function i(e,t){t&&l(e,7*t);var i=l(d(e),-((e.getDay()-r("firstDay")+7)%7)),o=l(d(i),7),c=d(i),u=d(o),h=r("weekends");h||(p(c),p(u,-1,!0)),n.title=a(c,l(d(u),-1),r("titleFormat")),n.start=i,n.end=o,n.visStart=c,n.visEnd=u,s(1,1,h?7:5,!1)}var n=this;n.render=i,it.call(n,e,t,"basicWeek");var r=n.opt,s=n.renderBasic,a=t.formatDates}function tt(e,t){function i(e,t){t&&(l(e,t),r("weekends")||p(e,0>t?-1:1)),n.title=a(e,r("titleFormat")),n.start=n.visStart=d(e,!0),n.end=n.visEnd=l(d(n.start),1),s(1,1,1,!1)}var n=this;n.render=i,it.call(n,e,t,"basicDay");var r=n.opt,s=n.renderBasic,a=t.formatDate}function it(t,i,n){function r(e,t,i,n){Z=t,J=i,s();var r=!B;r?a(e,n):bt(),o(r)}function s(){rt=vt("isRTL"),rt?(st=-1,at=J-1):(st=1,at=0),ot=vt("firstDay"),lt=vt("weekends")?0:1,ut=vt("theme")?"ui":"fc",mt=vt("columnFormat")}function a(i,n){var r,s,a,o,l=ut+"-widget-header",c=ut+"-widget-content";for(r="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",s=0;J>s;s++)r+="<th class='fc- "+l+"'/>";for(r+="</tr></thead><tbody>",s=0;i>s;s++){for(r+="<tr class='fc-week"+s+"'>",a=0;J>a;a++)r+="<td class='fc- "+c+" fc-day"+(s*J+a)+"'>"+"<div>"+(n?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";r+="</tr>"}r+="</tbody></table>",o=e(r).appendTo(t),j=o.find("thead"),H=j.find("th"),B=o.find("tbody"),q=B.find("tr"),z=B.find("td"),W=z.filter(":first-child"),$=q.eq(0).find("div.fc-day-content div"),Q(j.add(j.find("tr"))),Q(q),q.eq(0).addClass("fc-first"),f(z),U=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function o(t){var i,n,r,s=t||1==Z,a=O.start.getMonth(),o=h(new Date);s&&H.each(function(t,r){i=e(r),n=P(t),i.html(Ct(n,mt)),Y(i,n)}),z.each(function(t,r){i=e(r),n=P(t),n.getMonth()==a?i.removeClass("fc-other-month"):i.addClass("fc-other-month"),+n==+o?i.addClass(ut+"-state-highlight fc-today"):i.removeClass(ut+"-state-highlight fc-today"),i.find("div.fc-day-number").text(n.getDate()),s&&Y(i,n)}),q.each(function(t,i){r=e(i),Z>t?(r.show(),t==Z-1?r.addClass("fc-last"):r.removeClass("fc-last")):r.hide()})}function c(t){X=t;var i,n,r,s=X-j.height();"variable"==vt("weekMode")?i=n=Math.floor(s/(1==Z?2:6)):(i=Math.floor(s/Z),n=s-i*(Z-1)),W.each(function(t,s){Z>t&&(r=e(s),L(r.find("> div"),(t==Z-1?n:i)-F(r)))})}function u(e){G=e,it.clear(),K=Math.floor(G/J),A(H.slice(0,-1),K)}function f(e){e.click(p).mousedown(xt)}function p(e){if(!vt("selectable")){var t=parseInt(this.className.match(/fc\-day(\d+)/)[1]),i=P(t);yt("dayClick",this,i,!0,e)}}function g(e,t,i){i&&et.build();for(var n=d(O.visStart),r=l(d(n),J),s=0;Z>s;s++){var a=new Date(Math.max(n,e)),o=new Date(Math.min(r,t));if(o>a){var c,u;rt?(c=m(o,n)*st+at+1,u=m(a,n)*st+at+1):(c=m(a,n),u=m(o,n)),f(v(s,c,s,u-1))}l(n,7),l(r,7)}}function v(e,i,n,r){var s=et.rect(e,i,n,r,t);return _t(s,t)}function y(e){return d(e)}function b(e,t){g(e,l(d(t),1),!0)}function _(){wt()}function w(e,t,i){var n=I(e),r=z[n.row*J+n.col];yt("dayClick",r,e,t,i)}function x(e,t){tt.start(function(e){wt(),e&&v(e.row,e.col,e.row,e.col)},t)}function C(e,t,i){var n=tt.stop();if(wt(),n){var r=T(n);yt("drop",e,r,!0,t,i)}}function E(e){return d(e.start)}function S(e){return it.left(e)}function k(e){return it.right(e)}function I(e){return{row:Math.floor(m(e,O.visStart)/7),col:D(e.getDay())}}function T(e){return N(e.row,e.col)}function N(e,t){return l(d(O.visStart),7*e+t*st+at)}function P(e){return N(Math.floor(e/J),e%J)}function D(e){return(e-Math.max(ot,lt)+J)%J*st+at}function M(e){return q.eq(e)}function R(){return{left:0,right:G}}var O=this;O.renderBasic=r,O.setHeight=c,O.setWidth=u,O.renderDayOverlay=g,O.defaultSelectionEnd=y,O.renderSelection=b,O.clearSelection=_,O.reportDayClick=w,O.dragStart=x,O.dragStop=C,O.defaultEventEnd=E,O.getHoverListener=function(){return tt},O.colContentLeft=S,O.colContentRight=k,O.dayOfWeekCol=D,O.dateCell=I,O.cellDate=T,O.cellIsAllDay=function(){return!0},O.allDayRow=M,O.allDayBounds=R,O.getRowCnt=function(){return Z},O.getColCnt=function(){return J},O.getColWidth=function(){return K},O.getDaySegmentContainer=function(){return U},ct.call(O,t,i,n),dt.call(O),ht.call(O),nt.call(O);var j,H,B,q,z,W,$,U,G,X,K,Z,J,et,tt,it,rt,st,at,ot,lt,ut,mt,vt=O.opt,yt=O.trigger,bt=O.clearEvents,_t=O.renderOverlay,wt=O.clearOverlays,xt=O.daySelectionMousedown,Ct=i.formatDate;V(t.addClass("fc-grid")),et=new ft(function(t,i){var n,r,s;H.each(function(t,a){n=e(a),r=n.offset().left,t&&(s[1]=r),s=[r],i[t]=s}),s[1]=r+n.outerWidth(),q.each(function(i,a){Z>i&&(n=e(a),r=n.offset().top,i&&(s[1]=r),s=[r],t[i]=s)}),s[1]=r+n.outerHeight()}),tt=new pt(et),it=new gt(function(e){return $.eq(e)})}function nt(){function t(e,t){f(e),T(n(e),t)}function i(){p(),b().empty()}function n(t){var i,n,r,s,o,c,u=E(),h=S(),f=d(a.visStart),p=l(d(f),h),m=e.map(t,x),g=[];for(i=0;u>i;i++){for(n=I(k(t,m,f,p)),r=0;n.length>r;r++)for(s=n[r],o=0;s.length>o;o++)c=s[o],c.row=i,c.level=r,g.push(c);l(f,7),l(p,7)}return g}function r(e,t,i){u(e)&&s(e,t),i.isEnd&&h(e)&&A(e,t,i),m(e,t)}function s(e,t){var i,n=_();t.draggable({zIndex:9,delay:50,opacity:o("dragOpacity"),revertDuration:o("dragRevertDuration"),start:function(r,s){c("eventDragStart",t,e,r,s),v(e,t),n.start(function(n,r,s,a){t.draggable("option","revert",!n||!s&&!a),C(),n?(i=7*s+a*(o("isRTL")?-1:1),w(l(d(e.start),i),l(x(e),i))):i=0},r,"drag")},stop:function(r,s){n.stop(),C(),c("eventDragStop",t,e,r,s),i?y(this,e,i,0,e.allDay,r,s):(t.css("filter",""),g(e,t))}})}var a=this;a.renderEvents=t,a.compileDaySegs=n,a.clearEvents=i,a.bindDaySeg=r,ut.call(a);var o=a.opt,c=a.trigger,u=a.isEventDraggable,h=a.isEventResizable,f=a.reportEvents,p=a.reportEventClear,m=a.eventElementHandlers,g=a.showEvents,v=a.hideEvents,y=a.eventDrop,b=a.getDaySegmentContainer,_=a.getHoverListener,w=a.renderDayOverlay,C=a.clearOverlays,E=a.getRowCnt,S=a.getColCnt,T=a.renderDaySegs,A=a.resizableDayEvent}function rt(e,t){function i(e,t){t&&l(e,7*t);var i=l(d(e),-((e.getDay()-r("firstDay")+7)%7)),o=l(d(i),7),c=d(i),u=d(o),h=r("weekends");h||(p(c),p(u,-1,!0)),n.title=a(c,l(d(u),-1),r("titleFormat")),n.start=i,n.end=o,n.visStart=c,n.visEnd=u,s(h?7:5)}var n=this;n.render=i,at.call(n,e,t,"agendaWeek");var r=n.opt,s=n.renderAgenda,a=t.formatDates}function st(e,t){function i(e,t){t&&(l(e,t),r("weekends")||p(e,0>t?-1:1));var i=d(e,!0),o=l(d(i),1);n.title=a(e,r("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=o,s(1)}var n=this;n.render=i,at.call(n,e,t,"agendaDay");var r=n.opt,s=n.renderAgenda,a=t.formatDate}function at(i,n,r){function s(e){Rt=e,a(),et?Xt():o(),c()}function a(){Lt=Qt("theme")?"ui":"fc",qt=Qt("weekends")?0:1,Bt=Qt("firstDay"),(zt=Qt("isRTL"))?(Wt=-1,$t=Rt-1):(Wt=1,$t=0),Ut=b(Qt("minTime")),Gt=b(Qt("maxTime")),Vt=Qt("columnFormat")}function o(){var t,n,r,s,a,o=Lt+"-widget-header",l=Lt+"-widget-content",c=0==Qt("slotMinutes")%15;for(t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n=0;Rt>n;n++)t+="<th class='fc- fc-col"+n+" "+o+"'/>";for(t+="<th class='fc-agenda-gutter "+o+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+o+"'>&nbsp;</th>",n=0;Rt>n;n++)t+="<td class='fc- fc-col"+n+" "+l+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(t+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",et=e(t).appendTo(i),tt=et.find("thead"),it=tt.find("th").slice(1,-1),nt=et.find("tbody"),rt=nt.find("td").slice(0,-1),st=rt.find("div.fc-day-content div"),at=rt.eq(0),lt=at.find("> div"),Q(tt.add(tt.find("tr"))),Q(nt.add(nt.find("tr"))),Et=tt.find("th:first"),St=et.find(".fc-agenda-gutter"),ut=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Qt("allDaySlot")?(mt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ut),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+Qt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+o+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",vt=e(t).appendTo(ut),yt=vt.find("tr"),w(yt.find("td")),Et=Et.add(vt.find("th:first")),St=St.add(vt.find("th.fc-agenda-gutter")),ut.append("<div class='fc-agenda-divider "+o+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):mt=e([]),bt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ut),_t=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bt),wt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(_t),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=f(),s=u(d(r),Gt),u(r,Ut),Ft=0,n=0;s>r;n++)a=r.getMinutes(),t+="<tr class='fc-slot"+n+" "+(a?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+o+"'>"+(c&&a?"&nbsp;":ni(r,Qt("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(r,Qt("slotMinutes")),Ft++;t+="</tbody></table>",xt=e(t).appendTo(_t),Ct=xt.find("div:first"),x(xt.find("td")),Et=Et.add(xt.find("th:first"))}function c(){var e,t,i,n,r=h(new Date);for(e=0;Rt>e;e++)n=M(e),t=it.eq(e),t.html(ni(n,Vt)),i=rt.eq(e),+n==+r?i.addClass(Lt+"-state-highlight fc-today"):i.removeClass(Lt+"-state-highlight fc-today"),Y(t.add(i),n)}function p(e,i){e===t&&(e=Tt),Tt=e,ri={};var n=nt.position().top,r=bt.position().top,s=Math.min(e-n,xt.height()+r+1);lt.height(s-F(at)),ut.css("top",n),bt.height(s-r-1),Dt=Ct.height()+1,i&&v()}function g(t){It=t,Ht.clear(),At=0,A(Et.width("").each(function(t,i){At=Math.max(At,e(i).outerWidth())}),At);var i=bt[0].clientWidth;Pt=bt.width()-i,Pt?(A(St,Pt),St.show().prev().removeClass("fc-last")):St.hide().prev().addClass("fc-last"),Nt=Math.floor((i-At)/Rt),A(it.slice(0,-1),Nt)}function v(){function e(){bt.scrollTop(n)}var t=f(),i=d(t);i.setHours(Qt("firstHour"));var n=j(t,i)+1;e(),setTimeout(e,0)}function y(){Mt=bt.scrollTop()}function _(){bt.scrollTop(Mt)}function w(e){e.click(C).mousedown(ti)}function x(e){e.click(C).mousedown(G)}function C(e){if(!Qt("selectable")){var t=Math.min(Rt-1,Math.floor((e.pageX-et.offset().left-At)/Nt)),i=M(t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var r=parseInt(n[1])*Qt("slotMinutes"),s=Math.floor(r/60);i.setHours(s),i.setMinutes(r%60+Ut),Yt("dayClick",rt[t],i,!1,e)}else Yt("dayClick",rt[t],i,!0,e)}}function E(e,t,i){i&&Ot.build();var n,r,s=d(J.visStart);zt?(n=m(t,s)*Wt+$t+1,r=m(e,s)*Wt+$t+1):(n=m(e,s),r=m(t,s)),n=Math.max(0,n),r=Math.min(Rt,r),r>n&&w(S(0,n,0,r-1))}function S(e,t,i,n){var r=Ot.rect(e,t,i,n,ut);return Kt(r,ut)}function k(e,t){for(var i=d(J.visStart),n=l(d(i),1),r=0;Rt>r;r++){var s=new Date(Math.max(i,e)),a=new Date(Math.min(n,t));if(a>s){var o=r*Wt+$t,c=Ot.rect(0,o,0,o,_t),u=j(i,s),h=j(i,a);c.top=u,c.height=h-u,x(Kt(c,_t))}l(i,1),l(n,1)}}function I(e){return Ht.left(e)}function T(e){return Ht.right(e)}function P(e){return{row:Math.floor(m(e,J.visStart)/7),col:O(e.getDay())}}function D(e){var t=M(e.col),i=e.row;return Qt("allDaySlot")&&i--,i>=0&&u(t,Ut+i*Qt("slotMinutes")),t}function M(e){return l(d(J.visStart),e*Wt+$t)}function R(e){return Qt("allDaySlot")&&!e.row}function O(e){return(e-Math.max(Bt,qt)+Rt)%Rt*Wt+$t}function j(e,i){if(e=d(e,!0),u(d(e),Ut)>i)return 0;if(i>=u(d(e),Gt))return xt.height();var n=Qt("slotMinutes"),r=60*i.getHours()+i.getMinutes()-Ut,s=Math.floor(r/n),a=ri[s];return a===t&&(a=ri[s]=xt.find("tr:eq("+s+") td div")[0].offsetTop),Math.max(0,Math.round(a-1+Dt*(r%n/n)))}function H(){return{left:At,right:It-Pt}}function L(){return yt}function B(e){var t=d(e.start);return e.allDay?t:u(t,Qt("defaultEventMinutes"))}function z(e,t){return t?d(e):u(d(e),Qt("slotMinutes"))}function W(e,t,i){i?Qt("allDaySlot")&&E(e,l(d(t),1),!0):$(e,t)}function $(t,i){var n=Qt("selectHelper");if(Ot.build(),n){var r=m(t,J.visStart)*Wt+$t;if(r>=0&&Rt>r){var s=Ot.rect(0,r,0,r,_t),a=j(t,t),o=j(t,i);if(o>a){if(s.top=a,s.height=o-a,s.left+=2,s.width-=5,e.isFunction(n)){var l=n(t,i);l&&(s.position="absolute",s.zIndex=8,kt=e(l).css(s).appendTo(_t))}else s.isStart=!0,s.isEnd=!0,kt=e(ii({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},s)),kt.css("opacity",Qt("dragOpacity"));kt&&(x(kt),_t.append(kt),A(kt,s.width,!0),N(kt,s.height,!0))}}}else k(t,i)}function U(){Zt(),kt&&(kt.remove(),kt=null)}function G(t){if(1==t.which&&Qt("selectable")){ei(t);var i;jt.start(function(e,t){if(U(),e&&e.col==t.col&&!R(e)){var n=D(t),r=D(e);i=[n,u(d(n),Qt("slotMinutes")),r,u(d(r),Qt("slotMinutes"))].sort(q),$(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){jt.stop(),i&&(+i[0]==+i[1]&&X(i[0],!1,e),Jt(i[0],i[3],!1,e))})}}function X(e,t,i){Yt("dayClick",rt[O(e.getDay())],e,t,i)}function K(e,t){jt.start(function(e){if(Zt(),e)if(R(e))S(e.row,e.col,e.row,e.col);else{var t=D(e),i=u(d(t),Qt("defaultEventMinutes"));k(t,i)}},t)}function Z(e,t,i){var n=jt.stop();Zt(),n&&Yt("drop",e,D(n),R(n),t,i)}var J=this;J.renderAgenda=s,J.setWidth=g,J.setHeight=p,J.beforeHide=y,J.afterShow=_,J.defaultEventEnd=B,J.timePosition=j,J.dayOfWeekCol=O,J.dateCell=P,J.cellDate=D,J.cellIsAllDay=R,J.allDayRow=L,J.allDayBounds=H,J.getHoverListener=function(){return jt},J.colContentLeft=I,J.colContentRight=T,J.getDaySegmentContainer=function(){return mt},J.getSlotSegmentContainer=function(){return wt},J.getMinMinute=function(){return Ut},J.getMaxMinute=function(){return Gt},J.getBodyContent=function(){return _t},J.getRowCnt=function(){return 1},J.getColCnt=function(){return Rt},J.getColWidth=function(){return Nt},J.getSlotHeight=function(){return Dt},J.defaultSelectionEnd=z,J.renderDayOverlay=E,J.renderSelection=W,J.clearSelection=U,J.reportDayClick=X,J.dragStart=K,J.dragStop=Z,ct.call(J,i,n,r),dt.call(J),ht.call(J),ot.call(J);var et,tt,it,nt,rt,st,at,lt,ut,mt,vt,yt,bt,_t,wt,xt,Ct,Et,St,kt,It,Tt,At,Nt,Pt,Dt,Mt,Rt,Ft,Ot,jt,Ht,Lt,Bt,qt,zt,Wt,$t,Ut,Gt,Vt,Qt=J.opt,Yt=J.trigger,Xt=J.clearEvents,Kt=J.renderOverlay,Zt=J.clearOverlays,Jt=J.reportSelection,ei=J.unselect,ti=J.daySelectionMousedown,ii=J.slotSegHtml,ni=n.formatDate,ri={};V(i.addClass("fc-agenda")),Ot=new ft(function(t,i){function n(e){return Math.max(l,Math.min(c,e))}var r,s,a;it.each(function(t,n){r=e(n),s=r.offset().left,t&&(a[1]=s),a=[s],i[t]=a}),a[1]=s+r.outerWidth(),Qt("allDaySlot")&&(r=yt,s=r.offset().top,t[0]=[s,s+r.outerHeight()]);for(var o=_t.offset().top,l=bt.offset().top,c=l+bt.outerHeight(),u=0;Ft>u;u++)t.push([n(o+Dt*u),n(o+Dt*(u+1))])}),jt=new pt(Ot),Ht=new gt(function(e){return st.eq(e)})}function ot(){function i(e,t){E(e);var i,n=e.length,a=[],l=[];for(i=0;n>i;i++)e[i].allDay?a.push(e[i]):l.push(e[i]);y("allDaySlot")&&(z(r(a),t),D()),o(s(l),t)}function n(){S(),M().empty(),R().empty()}function r(t){var i,n,r,s,a=I(k(t,e.map(t,x),v.visStart,v.visEnd)),o=a.length,l=[];for(i=0;o>i;i++)for(n=a[i],r=0;n.length>r;r++)s=n[r],s.row=0,s.level=i,l.push(s);return l}function s(t){var i,n,r,s,o,c,h=$(),f=H(),p=j(),m=u(d(v.visStart),f),g=e.map(t,a),y=[];for(i=0;h>i;i++){for(n=I(k(t,g,m,u(d(m),p-f))),lt(n),r=0;n.length>r;r++)for(s=n[r],o=0;s.length>o;o++)c=s[o],c.col=i,c.level=r,y.push(c);l(m,1,!0)}return y}function a(e){return e.end?d(e.end):u(d(e.start),y("defaultEventMinutes"))}function o(i,n){var r,s,a,o,l,u,h,d,p,m,g,v,_,w,x,C,E,S,k,I,A,N,D=i.length,M="",O={},j={},H=R(),z=$();for((I=y("isRTL"))?(A=-1,N=z-1):(A=1,N=0),r=0;D>r;r++)s=i[r],a=s.event,o=L(s.start,s.start),l=L(s.start,s.end),u=s.col,h=s.level,d=s.forward||0,p=B(u*A+N),m=q(u*A+N)-p,m=Math.min(m-6,.95*m),g=h?m/(h+d+1):d?2*(m/(d+1)-6):m,v=p+m/(h+d+1)*h*A+(I?m-g:0),s.top=o,s.left=v,s.outerWidth=g,s.outerHeight=l-o,M+=c(a,s);for(H[0].innerHTML=M,_=H.children(),r=0;D>r;r++)s=i[r],a=s.event,w=e(_[r]),x=b("eventRender",a,a,w),x===!1?w.remove():(x&&x!==!0&&(w.remove(),w=e(x).css({position:"absolute",top:s.top,left:s.left}).appendTo(H)),s.element=w,a._id===n?f(a,w,s):w[0]._fci=r,K(a,w));for(T(H,i,f),r=0;D>r;r++)s=i[r],(w=s.element)&&(E=O[C=s.key=G(w[0])],s.vsides=E===t?O[C]=F(w,!0):E,E=j[C],s.hsides=E===t?j[C]=P(w,!0):E,S=w.find("div.fc-event-content"),S.length&&(s.contentTop=S[0].offsetTop));for(r=0;D>r;r++)s=i[r],(w=s.element)&&(w[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",k=Math.max(0,s.outerHeight-s.vsides),w[0].style.height=k+"px",a=s.event,s.contentTop!==t&&10>k-s.contentTop&&(w.find("div.fc-event-time").text(st(a.start,y("timeFormat"))+" - "+a.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",a,a,w))}function c(e,t){var i="<",n=e.url,r=X(e,y),s=r?" style='"+r+"'":"",a=["fc-event","fc-event-skin","fc-event-vert"];return _(e)&&a.push("fc-event-draggable"),t.isStart&&a.push("fc-corner-top"),t.isEnd&&a.push("fc-corner-bottom"),a=a.concat(e.className),e.source&&(a=a.concat(e.source.className||[])),i+=n?"a href='"+U(e.url)+"'":"div",i+=" class='"+a.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+r+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+s+">"+"<div class='fc-event-head fc-event-skin'"+s+">"+"<div class='fc-event-time'>"+U(at(e.start,e.end,y("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+U(e.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",t.isEnd&&w(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"
}function h(e,t,i){_(e)&&p(e,t,i.isStart),i.isEnd&&w(e)&&W(e,t,i),A(e,t)}function f(e,t,i){var n=t.find("div.fc-event-time");_(e)&&m(e,t,n),i.isEnd&&w(e)&&g(e,t,n),A(e,t)}function p(e,t,i){function n(){o||(t.width(r).height("").draggable("option","grid",null),o=!0)}var r,s,a,o=!0,c=y("isRTL")?-1:1,u=O(),h=V(),f=Q(),p=H();t.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(p,m){b("eventDragStart",t,e,p,m),J(e,t),r=t.width(),u.start(function(r,u,p,m){nt(),r?(s=!1,a=m*c,r.row?i?o&&(t.width(h-10),N(t,f*Math.round((e.end?(e.end-e.start)/kt:y("defaultEventMinutes"))/y("slotMinutes"))),t.draggable("option","grid",[h,1]),o=!1):s=!0:(it(l(d(e.start),a),l(x(e),a)),n()),s=s||o&&!a):(n(),s=!0),t.draggable("option","revert",s)},p,"drag")},stop:function(i,r){if(u.stop(),nt(),b("eventDragStop",t,e,i,r),s)n(),t.css("filter",""),Z(e,t);else{var l=0;o||(l=Math.round((t.offset().top-Y().offset().top)/f)*y("slotMinutes")+p-(60*e.start.getHours()+e.start.getMinutes())),et(this,e,a,l,o,i,r)}}})}function m(e,t,i){function n(t){var n,r=u(d(e.start),t);e.end&&(n=u(d(e.end),t)),i.text(at(r,n,y("timeFormat")))}function r(){h&&(i.css("display",""),t.draggable("option","grid",[g,v]),h=!1)}var s,a,o,c,h=!1,f=y("isRTL")?-1:1,p=O(),m=$(),g=V(),v=Q();t.draggable({zIndex:9,scroll:!1,grid:[g,v],axis:1==m?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,u){b("eventDragStart",t,e,n,u),J(e,t),s=t.position(),o=c=0,p.start(function(n,s,o,c){t.draggable("option","revert",!n),nt(),n&&(a=c*f,y("allDaySlot")&&!n.row?(h||(h=!0,i.hide(),t.draggable("option","grid",null)),it(l(d(e.start),a),l(x(e),a))):r())},n,"drag")},drag:function(e,t){o=Math.round((t.position.top-s.top)/v)*y("slotMinutes"),o!=c&&(h||n(o),c=o)},stop:function(i,l){var c=p.stop();nt(),b("eventDragStop",t,e,i,l),c&&(a||o||h)?et(this,e,a,h?0:o,h,i,l):(r(),t.css("filter",""),t.css(s),n(0),Z(e,t))}})}function g(e,t,i){var n,r,s=Q();t.resizable({handles:{s:"div.ui-resizable-s"},grid:s,start:function(i,s){n=r=0,J(e,t),t.css("z-index",9),b("eventResizeStart",this,e,i,s)},resize:function(a,o){n=Math.round((Math.max(s,t.height())-o.originalSize.height)/s),n!=r&&(i.text(at(e.start,n||e.end?u(C(e),y("slotMinutes")*n):null,y("timeFormat"))),r=n)},stop:function(i,r){b("eventResizeStop",this,e,i,r),n?tt(this,e,0,y("slotMinutes")*n,i,r):(t.css("z-index",8),Z(e,t))}})}var v=this;v.renderEvents=i,v.compileDaySegs=r,v.clearEvents=n,v.slotSegHtml=c,v.bindDaySeg=h,ut.call(v);var y=v.opt,b=v.trigger,_=v.isEventDraggable,w=v.isEventResizable,C=v.eventEnd,E=v.reportEvents,S=v.reportEventClear,A=v.eventElementHandlers,D=v.setHeight,M=v.getDaySegmentContainer,R=v.getSlotSegmentContainer,O=v.getHoverListener,j=v.getMaxMinute,H=v.getMinMinute,L=v.timePosition,B=v.colContentLeft,q=v.colContentRight,z=v.renderDaySegs,W=v.resizableDayEvent,$=v.getColCnt,V=v.getColWidth,Q=v.getSlotHeight,Y=v.getBodyContent,K=v.reportEventElement,Z=v.showEvents,J=v.hideEvents,et=v.eventDrop,tt=v.eventResize,it=v.renderDayOverlay,nt=v.clearOverlays,rt=v.calendar,st=rt.formatDate,at=rt.formatDates}function lt(e){var t,i,n,r,s,a;for(t=e.length-1;t>0;t--)for(r=e[t],i=0;r.length>i;i++)for(s=r[i],n=0;e[t-1].length>n;n++)a=e[t-1][n],S(s,a)&&(a.forward=Math.max(a.forward||0,(s.forward||0)+1))}function ct(e,i,n){function r(e,t){var i=P[e];return"object"==typeof i?$(i,t||n):i}function s(e,t){return i.trigger.apply(i,[e,t||E].concat(Array.prototype.slice.call(arguments,2),[E]))}function a(e){return c(e)&&!r("disableDragging")}function o(e){return c(e)&&!r("disableResizing")}function c(e){return Z(e.editable,(e.source||{}).editable,r("editable"))}function h(e){T={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],T[i._id]?T[i._id].push(i):T[i._id]=[i]}function f(e){return e.end?d(e.end):S(e)}function p(e,t){A.push(t),N[e._id]?N[e._id].push(t):N[e._id]=[t]}function m(){A=[],N={}}function g(e,t){t.click(function(i){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:s("eventClick",this,e,i)}).hover(function(t){s("eventMouseover",this,e,t)},function(t){s("eventMouseout",this,e,t)})}function v(e,t){b(e,t,"show")}function y(e,t){b(e,t,"hide")}function b(e,t,i){var n,r=N[e._id],s=r.length;for(n=0;s>n;n++)t&&r[n][0]==t[0]||r[n][i]()}function _(e,t,i,n,r,a,o){var l=t.allDay,c=t._id;x(T[c],i,n,r),s("eventDrop",e,t,i,n,r,function(){x(T[c],-i,-n,l),I(c)},a,o),I(c)}function w(e,t,i,n,r,a){var o=t._id;C(T[o],i,n),s("eventResize",e,t,i,n,function(){C(T[o],-i,-n),I(o)},r,a),I(o)}function x(e,i,n,r){n=n||0;for(var s,a=e.length,o=0;a>o;o++)s=e[o],r!==t&&(s.allDay=r),u(l(s.start,i,!0),n),s.end&&(s.end=u(l(s.end,i,!0),n)),k(s,P)}function C(e,t,i){i=i||0;for(var n,r=e.length,s=0;r>s;s++)n=e[s],n.end=u(l(f(n),t,!0),i),k(n,P)}var E=this;E.element=e,E.calendar=i,E.name=n,E.opt=r,E.trigger=s,E.isEventDraggable=a,E.isEventResizable=o,E.reportEvents=h,E.eventEnd=f,E.reportEventElement=p,E.reportEventClear=m,E.eventElementHandlers=g,E.showEvents=v,E.hideEvents=y,E.eventDrop=_,E.eventResize=w;var S=E.defaultEventEnd,k=i.normalizeEvent,I=i.reportEventChange,T={},A=[],N={},P=i.options}function ut(){function i(e,t){var i,n,l,d,g,v,y,b,_=L(),w=I(),x=A(),C=0,E=e.length;for(_[0].innerHTML=r(e),s(e,_.children()),a(e),o(e,_,t),c(e),u(e),h(e),i=f(),n=0;w>n;n++){for(l=0,d=[],g=0;x>g;g++)d[g]=0;for(;E>C&&(v=e[C]).row==n;){for(y=z(d.slice(v.startCol,v.endCol)),v.top=y,y+=v.outerHeight,b=v.startCol;v.endCol>b;b++)d[b]=y;C++}i[n].height(z(d))}m(e,p(i))}function n(t,i,n){var a,o,l,d=e("<div/>"),g=L(),v=t.length;for(d[0].innerHTML=r(t),a=d.children(),g.append(a),s(t,a),c(t),u(t),h(t),m(t,p(f())),a=[],o=0;v>o;o++)l=t[o].element,l&&(t[o].row===i&&l.css("top",n),a.push(l[0]));return e(a)}function r(e){var t,i,n,r,s,a,o,l,c,u,h=y("isRTL"),d=e.length,f=D(),p=f.left,m=f.right,g="";for(t=0;d>t;t++)i=e[t],n=i.event,s=["fc-event","fc-event-skin","fc-event-hori"],_(n)&&s.push("fc-event-draggable"),h?(i.isStart&&s.push("fc-corner-right"),i.isEnd&&s.push("fc-corner-left"),a=F(i.end.getDay()-1),o=F(i.start.getDay()),l=i.isEnd?M(a):p,c=i.isStart?R(o):m):(i.isStart&&s.push("fc-corner-left"),i.isEnd&&s.push("fc-corner-right"),a=F(i.start.getDay()),o=F(i.end.getDay()-1),l=i.isStart?M(a):p,c=i.isEnd?R(o):m),s=s.concat(n.className),n.source&&(s=s.concat(n.source.className||[])),r=n.url,u=X(n,y),g+=r?"<a href='"+U(r)+"'":"<div",g+=" class='"+s.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+l+"px;"+u+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(u?" style='"+u+"'":"")+">",!n.allDay&&i.isStart&&(g+="<span class='fc-event-time'>"+U(q(n.start,n.end,y("timeFormat")))+"</span>"),g+="<span class='fc-event-title'>"+U(n.title)+"</span>"+"</div>",i.isEnd&&w(n)&&(g+="<div class='ui-resizable-handle ui-resizable-"+(h?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),g+="</"+(r?"a":"div")+">",i.left=l,i.outerWidth=c-l,i.startCol=a,i.endCol=o+1;return g}function s(t,i){var n,r,s,a,o,l=t.length;for(n=0;l>n;n++)r=t[n],s=r.event,a=e(i[n]),o=b("eventRender",s,s,a),o===!1?a.remove():(o&&o!==!0&&(o=e(o).css({position:"absolute",left:r.left}),a.replaceWith(o),a=o),r.element=a)}function a(e){var t,i,n,r=e.length;for(t=0;r>t;t++)i=e[t],n=i.element,n&&C(i.event,n)}function o(e,t,i){var n,r,s,a,o=e.length;for(n=0;o>n;n++)r=e[n],s=r.element,s&&(a=r.event,a._id===i?B(a,s,r):s[0]._fci=n);T(t,e,B)}function c(e){var i,n,r,s,a,o=e.length,l={};for(i=0;o>i;i++)n=e[i],r=n.element,r&&(s=n.key=G(r[0]),a=l[s],a===t&&(a=l[s]=P(r,!0)),n.hsides=a)}function u(e){var t,i,n,r=e.length;for(t=0;r>t;t++)i=e[t],n=i.element,n&&(n[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px")}function h(e){var i,n,r,s,a,o=e.length,l={};for(i=0;o>i;i++)n=e[i],r=n.element,r&&(s=n.key,a=l[s],a===t&&(a=l[s]=j(r)),n.outerHeight=r[0].offsetHeight+a)}function f(){var e,t=I(),i=[];for(e=0;t>e;e++)i[e]=N(e).find("td:first div.fc-day-content > div");return i}function p(e){var t,i=e.length,n=[];for(t=0;i>t;t++)n[t]=e[t][0].offsetTop;return n}function m(e,t){var i,n,r,s,a=e.length;for(i=0;a>i;i++)n=e[i],r=n.element,r&&(r[0].style.top=t[n.row]+(n.top||0)+"px",s=n.event,b("eventAfterRender",s,s,r))}function g(t,i,r){var s=y("isRTL"),a=s?"w":"e",o=i.find("div.ui-resizable-"+a),c=!1;V(i),i.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),o.mousedown(function(o){function u(i){b("eventResizeStop",this,t,i),e("body").css("cursor",""),p.stop(),$(),h&&k(this,t,h,0,i),setTimeout(function(){c=!1},0)}if(1==o.which){c=!0;var h,f,p=v.getHoverListener(),m=I(),g=A(),y=s?-1:1,_=s?g-1:0,w=i.css("top"),C=e.extend({},t),T=O(t.start);Q(),e("body").css("cursor",a+"-resize").one("mouseup",u),b("eventResizeStart",this,t,o),p.start(function(e,i){if(e){var o=Math.max(T.row,e.row),c=e.col;1==m&&(o=0),o==T.row&&(c=s?Math.min(T.col,c):Math.max(T.col,c)),h=7*o+c*y+_-(7*i.row+i.col*y+_);var u=l(x(t),h,!0);if(h){C.end=u;var p=f;f=n(H([C]),r.row,w),f.find("*").css("cursor",a+"-resize"),p&&p.remove(),S(t)}else f&&(E(t),f.remove(),f=null);$(),W(t.start,l(d(u),1))}},o)}})}var v=this;v.renderDaySegs=i,v.resizableDayEvent=g;var y=v.opt,b=v.trigger,_=v.isEventDraggable,w=v.isEventResizable,x=v.eventEnd,C=v.reportEventElement,E=v.showEvents,S=v.hideEvents,k=v.eventResize,I=v.getRowCnt,A=v.getColCnt;v.getColWidth;var N=v.allDayRow,D=v.allDayBounds,M=v.colContentLeft,R=v.colContentRight,F=v.dayOfWeekCol,O=v.dateCell,H=v.compileDaySegs,L=v.getDaySegmentContainer,B=v.bindDaySeg,q=v.calendar.formatDates,W=v.renderDayOverlay,$=v.clearOverlays,Q=v.clearSelection}function ht(){function t(e,t,r){i(),t||(t=l(e,r)),c(e,t,r),n(e,t,r)}function i(e){h&&(h=!1,u(),o("unselect",null,e))}function n(e,t,i,n){h=!0,o("select",null,e,t,i,n)}function r(t){var r=s.cellDate,o=s.cellIsAllDay,l=s.getHoverListener(),h=s.reportDayClick;if(1==t.which&&a("selectable")){i(t);var d;l.start(function(e,t){u(),e&&o(e)?(d=[r(t),r(e)].sort(q),c(d[0],d[1],!0)):d=null},t),e(document).one("mouseup",function(e){l.stop(),d&&(+d[0]==+d[1]&&h(d[0],!0,e),n(d[0],d[1],!0,e))})}}var s=this;s.select=t,s.unselect=i,s.reportSelection=n,s.daySelectionMousedown=r;var a=s.opt,o=s.trigger,l=s.defaultSelectionEnd,c=s.renderSelection,u=s.clearSelection,h=!1;a("selectable")&&a("unselectAuto")&&e(document).mousedown(function(t){var n=a("unselectCancel");n&&e(t.target).parents(n).length||i(t)})}function dt(){function t(t,i){var n=s.shift();return n||(n=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),r.push(n.css(t).show()),n}function i(){for(var e;e=r.shift();)s.push(e.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=i;var r=[],s=[]}function ft(e){var t,i,n=this;n.build=function(){t=[],i=[],e(t,i)},n.cell=function(e,n){var r,s=t.length,a=i.length,o=-1,l=-1;for(r=0;s>r;r++)if(n>=t[r][0]&&t[r][1]>n){o=r;break}for(r=0;a>r;r++)if(e>=i[r][0]&&i[r][1]>e){l=r;break}return o>=0&&l>=0?{row:o,col:l}:null},n.rect=function(e,n,r,s,a){var o=a.offset();return{top:t[e][0]-o.top,left:i[n][0]-o.left,width:i[s][1]-i[n][0],height:t[r][1]-t[e][0]}}}function pt(t){function i(e){mt(e);var i=t.cell(e.pageX,e.pageY);(!i!=!a||i&&(i.row!=a.row||i.col!=a.col))&&(i?(s||(s=i),r(i,s,i.row-s.row,i.col-s.col)):r(i,s),a=i)}var n,r,s,a,o=this;o.start=function(o,l,c){r=o,s=a=null,t.build(),i(l),n=c||"mousemove",e(document).bind(n,i)},o.stop=function(){return e(document).unbind(n,i),a}}function mt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function gt(e){function i(t){return r[t]=r[t]||e(t)}var n=this,r={},s={},a={};n.left=function(e){return s[e]=s[e]===t?i(e).position().left:s[e]},n.right=function(e){return a[e]=a[e]===t?n.left(e)+i(e).width():a[e]},n.clear=function(){r={},s={},a={}}}var vt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},yt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},bt=e.fullCalendar={version:"1.5.4"},_t=bt.views={};e.fn.fullCalendar=function(i){if("string"==typeof i){var r,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var a=n[i].apply(n,s);r===t&&(r=a),"destroy"==i&&e.removeData(this,"fullCalendar")}}),r!==t?r:this}var a=i.eventSources||[];return delete i.eventSources,i.events&&(a.push(i.events),delete i.events),i=e.extend(!0,{},vt,i.isRTL||i.isRTL===t&&vt.isRTL?yt:{},i),this.each(function(t,r){var s=e(r),o=new n(s,i,a);s.data("fullCalendar",o),o.render()}),this},bt.sourceNormalizers=[],bt.sourceFetchers=[];var wt={dataType:"json",cache:!1},xt=1;bt.addDays=l,bt.cloneDate=d,bt.parseDate=v,bt.parseISO8601=y,bt.parseTime=b,bt.formatDate=_,bt.formatDates=w;var Ct=["sun","mon","tue","wed","thu","fri","sat"],Et=864e5,St=36e5,kt=6e4,It={s:function(e){return e.getSeconds()},ss:function(e){return W(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return W(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return W(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return W(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return W(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return W(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return _(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"}};bt.applyAll=K,_t.month=J,_t.basicWeek=et,_t.basicDay=tt,i({weekMode:"fixed"}),_t.agendaWeek=rt,_t.agendaDay=st,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);var Scheduler=Scheduler||{};Scheduler.form={},Scheduler.form.init=function(e,t){if(Scheduler.form.current=e,Scheduler.form.showFrequency(e.find("select.scheduler-frequency").val()),e.on("change","select.scheduler-frequency",function(){Scheduler.form.showFrequency($(this).val())}),t){var i=(t.getDay()+6)%7,n=Math.floor((t.getDate()-t.getDay()+6)/7);n>3&&(n=-1),e.find("#event_week_days_"+i).attr("checked","checked"),e.find("#event_week_day_order").val(n),e.find("#event_week_day").val(i)}},Scheduler.form.showFrequency=function(e){form=Scheduler.form.current,form.find("#scheduler-options").children("div").hide(),form.find("#scheduler-options").find("select,input").attr("disabled","disabled"),form.find("#scheduler-frequency-"+e).show(),form.find("#scheduler-frequency-"+e).find("select,input").removeAttr("disabled")},SocialStream.Events=SocialStream.Events||{},SocialStream.Events.current=SocialStream.Events.current||{},SocialStream.Calendar=function(e,t){var i,n=function(){return t("#sidebar_calendar")},r=new RegExp("sidebar_day_(..?)_(..?)_(..?.?.?)"),s=function(e){return r.exec(e.id)},a=function(e){var t=s(e);if(null!=t)return new Date(t[3],t[2]-1,t[1],23,59,59)},o=function(e){return t("#sidebar_day_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear())},l=function(e){i=e.eventsPath;var n=new Date;o(n).addClass("today"),t("#sidebar_calendar td").each(function(e,i){var r=a(i);n>r&&t(i).addClass("past"),r.getMonth()!=n.getMonth()&&r>n&&t(i).addClass("next_month")}),t.ajax({dataType:"json",cache:!1,url:i,data:{start:e.start,end:e.end},success:c})},c=function(e){t.map(e,function(e){var t=new Date(e.start),i=new Date(e.end);for(loopTime=t.getTime();i.getTime()>=loopTime;loopTime+=864e5){var n=new Date(loopTime),r=o(n);r.addClass("busy"),r.tipsy({title:u,html:!0,fade:!0,hoverable:!0,gravity:"ne",opacity:.95})}})},u=function(){var e=a(this);e.setHours(0),e.setMinutes(0),e.setSeconds(0);var n=a(this);return t.ajax({dataType:"script",url:i,data:{start:Math.round(e.getTime()/1e3),end:Math.round(n.getTime()/1e3),tipsy:this.id}}),'<div id="tipsy-'+this.id+'" class="tipsy-sidebar_calendar"><img src="/assets/loading-b7ff30d20adcf2b850f420d17048930c.gif"></div>'};return{init:l,element:n,eventElement:o}}(SocialStream,jQuery),SocialStream.Event=function(e,t){var i=[],n=function(e){i.push(e)},r=function(){t.each(i,function(e,t){t()})},s=function(){SocialStream.Events.current.eventColor},a=function(){t(".event").each(function(){dateString=t(this).find("time").attr("datetime"),date=new Date(dateString);var e=t(this).find(".event_day");e.length&&e.text(t.datepicker.formatDate("d",date));var i=t(this).find(".event_month");i.length&&i.text(t.datepicker.formatDate("M",date));var n=t(this).find(".event_hour");if(n.length){var r=date.getMinutes();10>r&&(r="0"+r),n.text(date.getHours()+":"+r)}})};return n(a),SocialStream.Timeline.addInitCallback(r),{addIndexCallback:n,color:s,index:r}}(SocialStream,jQuery),SocialStream.Events.Action=function(e){var t=function(t){if("Event"==t.activity_object.type&&t.follow){var i=e.Action.followForms(t).closest(".event").find("time"),n=new Date(i.attr("datetime")),r=e.Calendar.eventElement(n)||e.Calendar.element;t.follow.following?(i.effect("transfer",{to:r},1e3),r.addClass("busy")):r.effect("pulsate")}};return SocialStream.Action.addUpdateCallback(t),{}}(SocialStream,jQuery),SocialStream.Events.Poster=function(e,t){var i=function(){t(".event_poster_update").hide(),t(".event_poster").hover(function(){t(this).find(".event_poster_update").fadeIn("slow")},function(){t(this).find(".event_poster_update").fadeOut("slow")})};return e.Timeline.addInitCallback(i),e.Event.addIndexCallback(i),{init:i}}(SocialStream,jQuery),SocialStream.Linkser=SocialStream.Linkser||{},SocialStream.Linkser.Wall=function(e,t){var i=/^(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&;:\/~+#-]*[\w@?^=%&;\/~+#-])?$/,n=function(){if(this.currentValue=t("#input_activities").val(),null==this.lastValue&&(this.lastValue=""),i.test(t("#input_activities").val())){if(t("#link_url").val(t("#input_activities").val()),t("#link_loaded").val(!1),t("#new_post").attr("action","/links"),this.currentValue!=this.lastValue){t("#link_preview").html(t("<img>").attr("src","/assets/loading-b7ff30d20adcf2b850f420d17048930c.gif").addClass("loading")),this.lastValue=this.currentValue;var e=this.currentValue;t.ajax({type:"GET",url:"/linkser_parse?url="+e,dataType:"html",success:function(i){t("#input_activities").val()==e&&(t("#link_preview").html(i),t("#link_loaded").val(!0))},error:function(){t("#input_activities").val()==e&&t("#link_preview").html(t("<div>").addClass("loading").html(I18n.t("link.errors.loading")+" "+e))}})}t("#link_preview").show()}else t("#new_post").attr("action","/posts"),t("#link_preview").hide(),t("#link_preview").html(""),t("#link_url").val("")},r=function(){t.preloadImages("/assets/loading-b7ff30d20adcf2b850f420d17048930c.gif"),t("#new_post").length&&(t("#input_activities").change(n).keyup(n),t("#new_post").append(t("<input>").attr("type","hidden").attr("name","link[owner_id]").attr("id","link_owner_id").val(t("#post_owner_id").val())),t("#new_post").append(t("<input>").attr("type","hidden").attr("name","link[url]").attr("id","link_url")),t("#new_post").append(t("<input>").attr("type","hidden").attr("name","link[loaded]").attr("id","link_loaded").val(!1)),t("#new_post").append(t("<div>").attr("id","link_preview").css("display","none")))},s=function(e,i,n,r){var s="353";n>0&&r>0&&(s=470*r/n),t("#"+e).html(t("<iframe>").attr("src",i).attr("width","470").attr("height",s))};return SocialStream.Wall.addInitCallback(r),{openCallback:s}}(SocialStream,jQuery);var Base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={encode:function(t){var i,n,r,s,a,o,l,c="",u=0;do i=t.charCodeAt(u++),n=t.charCodeAt(u++),r=t.charCodeAt(u++),s=i>>2,a=(3&i)<<4|n>>4,o=(15&n)<<2|r>>6,l=63&r,isNaN(n)?o=l=64:isNaN(r)&&(l=64),c=c+e.charAt(s)+e.charAt(a)+e.charAt(o)+e.charAt(l);while(t.length>u);return c},decode:function(t){var i,n,r,s,a,o,l,c="",u=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do s=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),i=s<<2|a>>4,n=(15&a)<<4|o>>2,r=(3&o)<<6|l,c+=String.fromCharCode(i),64!=o&&(c+=String.fromCharCode(n)),64!=l&&(c+=String.fromCharCode(r));while(t.length>u);return c}};return t}(),MD5=function(){var e=0,t="",i=8,n=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},r=function(e,t){return e<<t|e>>>32-t},s=function(e){for(var t=[],n=(1<<i)-1,r=0;e.length*i>r;r+=i)t[r>>5]|=(e.charCodeAt(r/i)&n)<<r%32;return t},a=function(e){for(var t="",n=(1<<i)-1,r=0;32*e.length>r;r+=i)t+=String.fromCharCode(e[r>>5]>>>r%32&n);return t},o=function(t){for(var i=e?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;4*t.length>r;r++)n+=i.charAt(15&t[r>>2]>>8*(r%4)+4)+i.charAt(15&t[r>>2]>>8*(r%4));return n},l=function(e){for(var i,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="",a=0;4*e.length>a;a+=3)for(i=(255&e[a>>2]>>8*(a%4))<<16|(255&e[a+1>>2]>>8*((a+1)%4))<<8|255&e[a+2>>2]>>8*((a+2)%4),n=0;4>n;n++)s+=8*a+6*n>32*e.length?t:r.charAt(63&i>>6*(3-n));return s},c=function(e,t,i,s,a,o){return n(r(n(n(t,e),n(s,o)),a),i)},u=function(e,t,i,n,r,s,a){return c(t&i|~t&n,e,t,r,s,a)},h=function(e,t,i,n,r,s,a){return c(t&n|i&~n,e,t,r,s,a)},d=function(e,t,i,n,r,s,a){return c(t^i^n,e,t,r,s,a)},f=function(e,t,i,n,r,s,a){return c(i^(t|~n),e,t,r,s,a)},p=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i,r,s,a,o=1732584193,l=-271733879,c=-1732584194,p=271733878,m=0;e.length>m;m+=16)i=o,r=l,s=c,a=p,o=u(o,l,c,p,e[m+0],7,-680876936),p=u(p,o,l,c,e[m+1],12,-389564586),c=u(c,p,o,l,e[m+2],17,606105819),l=u(l,c,p,o,e[m+3],22,-1044525330),o=u(o,l,c,p,e[m+4],7,-176418897),p=u(p,o,l,c,e[m+5],12,1200080426),c=u(c,p,o,l,e[m+6],17,-1473231341),l=u(l,c,p,o,e[m+7],22,-45705983),o=u(o,l,c,p,e[m+8],7,1770035416),p=u(p,o,l,c,e[m+9],12,-1958414417),c=u(c,p,o,l,e[m+10],17,-42063),l=u(l,c,p,o,e[m+11],22,-1990404162),o=u(o,l,c,p,e[m+12],7,1804603682),p=u(p,o,l,c,e[m+13],12,-40341101),c=u(c,p,o,l,e[m+14],17,-1502002290),l=u(l,c,p,o,e[m+15],22,1236535329),o=h(o,l,c,p,e[m+1],5,-165796510),p=h(p,o,l,c,e[m+6],9,-1069501632),c=h(c,p,o,l,e[m+11],14,643717713),l=h(l,c,p,o,e[m+0],20,-373897302),o=h(o,l,c,p,e[m+5],5,-701558691),p=h(p,o,l,c,e[m+10],9,38016083),c=h(c,p,o,l,e[m+15],14,-660478335),l=h(l,c,p,o,e[m+4],20,-405537848),o=h(o,l,c,p,e[m+9],5,568446438),p=h(p,o,l,c,e[m+14],9,-1019803690),c=h(c,p,o,l,e[m+3],14,-187363961),l=h(l,c,p,o,e[m+8],20,1163531501),o=h(o,l,c,p,e[m+13],5,-1444681467),p=h(p,o,l,c,e[m+2],9,-51403784),c=h(c,p,o,l,e[m+7],14,1735328473),l=h(l,c,p,o,e[m+12],20,-1926607734),o=d(o,l,c,p,e[m+5],4,-378558),p=d(p,o,l,c,e[m+8],11,-2022574463),c=d(c,p,o,l,e[m+11],16,1839030562),l=d(l,c,p,o,e[m+14],23,-35309556),o=d(o,l,c,p,e[m+1],4,-1530992060),p=d(p,o,l,c,e[m+4],11,1272893353),c=d(c,p,o,l,e[m+7],16,-155497632),l=d(l,c,p,o,e[m+10],23,-1094730640),o=d(o,l,c,p,e[m+13],4,681279174),p=d(p,o,l,c,e[m+0],11,-358537222),c=d(c,p,o,l,e[m+3],16,-722521979),l=d(l,c,p,o,e[m+6],23,76029189),o=d(o,l,c,p,e[m+9],4,-640364487),p=d(p,o,l,c,e[m+12],11,-421815835),c=d(c,p,o,l,e[m+15],16,530742520),l=d(l,c,p,o,e[m+2],23,-995338651),o=f(o,l,c,p,e[m+0],6,-198630844),p=f(p,o,l,c,e[m+7],10,1126891415),c=f(c,p,o,l,e[m+14],15,-1416354905),l=f(l,c,p,o,e[m+5],21,-57434055),o=f(o,l,c,p,e[m+12],6,1700485571),p=f(p,o,l,c,e[m+3],10,-1894986606),c=f(c,p,o,l,e[m+10],15,-1051523),l=f(l,c,p,o,e[m+1],21,-2054922799),o=f(o,l,c,p,e[m+8],6,1873313359),p=f(p,o,l,c,e[m+15],10,-30611744),c=f(c,p,o,l,e[m+6],15,-1560198380),l=f(l,c,p,o,e[m+13],21,1309151649),o=f(o,l,c,p,e[m+4],6,-145523070),p=f(p,o,l,c,e[m+11],10,-1120210379),c=f(c,p,o,l,e[m+2],15,718787259),l=f(l,c,p,o,e[m+9],21,-343485551),o=n(o,i),l=n(l,r),c=n(c,s),p=n(p,a);return[o,l,c,p]},m=function(e,t){var n=s(e);n.length>16&&(n=p(n,e.length*i));for(var r=new Array(16),a=new Array(16),o=0;16>o;o++)r[o]=909522486^n[o],a[o]=1549556828^n[o];var l=p(r.concat(s(t)),512+t.length*i);return p(a.concat(l),640)},g={hexdigest:function(e){return o(p(s(e),e.length*i))},b64digest:function(e){return l(p(s(e),e.length*i))},hash:function(e){return a(p(s(e),e.length*i))},hmac_hexdigest:function(e,t){return o(m(e,t))},hmac_b64digest:function(e,t){return l(m(e,t))},hmac_hash:function(e,t){return a(m(e,t))},test:function(){return"900150983cd24fb0d6963f7d28e17f72"===MD5.hexdigest("abc")}};return g}();/*
    This program is distributed under the terms of the MIT license.
    Please see the LICENSE file for details.

    Copyright 2006-2008, OGG, LLC
*/
Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,i=Array.prototype.slice,n=Array.prototype.concat,r=i.call(arguments,1);return function(){return t.apply(e?e:this,n.call(r,i.call(arguments,0)))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,i=Number(arguments[1])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=t);t>i;i++)if(i in this&&this[i]===e)return i;return-1}),function(e){function t(e,t){return new s.Builder(e,t)}function i(e){return new s.Builder("message",e)}function n(e){return new s.Builder("iq",e)}function r(e){return new s.Builder("presence",e)}var s;s={VERSION:"1.0.2",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas"},addNamespace:function(e,t){s.NS[e]=t},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,forEachChild:function(e,t,i){var n,r;for(n=0;e.childNodes.length>n;n++)r=e.childNodes[n],r.nodeType!=s.ElementType.NORMAL||t&&!this.isTagEqual(r,t)||i(r)},isTagEqual:function(e,t){return e.tagName.toLowerCase()==t.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return s._xmlGenerator||(s._xmlGenerator=s._makeGenerator()),s._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],i=0;t.length>i&&null===e;i++)try{e=new ActiveXObject(t[i])}catch(n){e=null}return e},xmlElement:function(e){if(!e)return null;var t,i,n,r=s.xmlGenerator().createElement(e);for(t=1;arguments.length>t;t++)if(arguments[t])if("string"==typeof arguments[t]||"number"==typeof arguments[t])r.appendChild(s.xmlTextNode(arguments[t]));else if("object"==typeof arguments[t]&&"function"==typeof arguments[t].sort)for(i=0;arguments[t].length>i;i++)"object"==typeof arguments[t][i]&&"function"==typeof arguments[t][i].sort&&r.setAttribute(arguments[t][i][0],arguments[t][i][1]);else if("object"==typeof arguments[t])for(n in arguments[t])arguments[t].hasOwnProperty(n)&&r.setAttribute(n,arguments[t][n]);return r},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;")},xmlTextNode:function(e){return e=s.xmlescape(e),s.xmlGenerator().createTextNode(e)},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType==s.ElementType.TEXT&&(t+=e.nodeValue);for(var i=0;e.childNodes.length>i;i++)e.childNodes[i].nodeType==s.ElementType.TEXT&&(t+=e.childNodes[i].nodeValue);return t},copyElement:function(e){var t,i;if(e.nodeType==s.ElementType.NORMAL){for(i=s.xmlElement(e.tagName),t=0;e.attributes.length>t;t++)i.setAttribute(e.attributes[t].nodeName.toLowerCase(),e.attributes[t].value);for(t=0;e.childNodes.length>t;t++)i.appendChild(s.copyElement(e.childNodes[t]))}else e.nodeType==s.ElementType.TEXT&&(i=s.xmlGenerator().createTextNode(e.nodeValue));return i},escapeNode:function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return 0>e.indexOf("@")?null:e.split("@")[0]},getDomainFromJid:function(e){var t=s.getBareJidFromJid(e);if(0>t.indexOf("@"))return t;var i=t.split("@");return i.splice(0,1),i.join("@")},getResourceFromJid:function(e){var t=e.split("/");return 2>t.length?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},log:function(){},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var i,n,r=e.nodeName;for(e.getAttribute("_realname")&&(r=e.getAttribute("_realname")),t="<"+r,i=0;e.attributes.length>i;i++)"_realname"!=e.attributes[i].nodeName&&(t+=" "+e.attributes[i].nodeName.toLowerCase()+"='"+e.attributes[i].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/</g,"&lt;")+"'");if(e.childNodes.length>0){for(t+=">",i=0;e.childNodes.length>i;i++)switch(n=e.childNodes[i],n.nodeType){case s.ElementType.NORMAL:t+=s.serialize(n);break;case s.ElementType.TEXT:t+=s.xmlescape(n.nodeValue);break;case s.ElementType.CDATA:t+="<![CDATA["+n.nodeValue+"]]>"}t+="</"+r+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){s._connectionPlugins[e]=t}},s.Builder=function(e,t){("presence"==e||"message"==e||"iq"==e)&&(t&&!t.xmlns?t.xmlns=s.NS.CLIENT:t||(t={xmlns:s.NS.CLIENT})),this.nodeTree=s.xmlElement(e,t),this.node=this.nodeTree},s.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return s.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&this.node.setAttribute(t,e[t]);return this},c:function(e,t,i){var n=s.xmlElement(e,t,i);return this.node.appendChild(n),i||(this.node=n),this},cnode:function(e){var t=s.xmlGenerator();try{var i=void 0!==t.importNode}catch(n){var i=!1}var r=i?t.importNode(e,!0):s.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=s.xmlTextNode(e);return this.node.appendChild(t),this}},s.Handler=function(e,t,i,n,r,a,o){this.handler=e,this.ns=t,this.name=i,this.type=n,this.id=r,this.options=o||{matchbare:!1},this.options.matchBare||(this.options.matchBare=!1),this.from=this.options.matchBare?a?s.getBareJidFromJid(a):null:a,this.user=!0},s.Handler.prototype={isMatch:function(e){var t,i=null;if(i=this.options.matchBare?s.getBareJidFromJid(e.getAttribute("from")):e.getAttribute("from"),t=!1,this.ns){var n=this;s.forEachChild(e,null,function(e){e.getAttribute("xmlns")==n.ns&&(t=!0)}),t=t||e.getAttribute("xmlns")==this.ns}else t=!0;return!t||this.name&&!s.isTagEqual(e,this.name)||this.type&&e.getAttribute("type")!=this.type||this.id&&e.getAttribute("id")!=this.id||this.from&&i!=this.from?!1:!0},run:function(e){var t=null;try{t=this.handler(e)}catch(i){throw i.sourceURL?s.fatal("error: "+this.handler+" "+i.sourceURL+":"+i.line+" - "+i.name+": "+i.message):i.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",i,i.message)),s.fatal("error: "+this.handler+" "+i.fileName+":"+i.lineNumber+" - "+i.name+": "+i.message)):s.fatal("error: "+this.handler),i}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},s.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},s.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},s.Request=function(e,t,i,n){this.id=++s._requestId,this.xmlData=e,this.data=s.serialize(e),this.origFunc=t,this.func=t,this.rid=i,this.date=0/0,this.sends=n||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},s.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(e=this.xhr.responseXML.documentElement,"parsererror"==e.tagName)throw s.error("invalid response received"),s.error("responseText: "+this.xhr.responseText),s.error("responseXML: "+s.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(s.error("invalid response received"),s.error("responseText: "+this.xhr.responseText),s.error("responseXML: "+s.serialize(this.xhr.responseXML)));return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},s.Connection=function(e){this.service=e,this.jid="",this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.features=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this.hold=1,this.wait=60,this.window=5,this._data=[],this._requests=[],this._uniqueId=Math.round(1e4*Math.random()),this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var t in s._connectionPlugins)if(s._connectionPlugins.hasOwnProperty(t)){var i=s._connectionPlugins[t],n=function(){};n.prototype=i,this[t]=new n,this[t].init(this)}},s.Connection.prototype={reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=Math.round(1e4*Math.random())},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){return"string"==typeof e||"number"==typeof e?++this._uniqueId+":"+e:++this._uniqueId+""},connect:function(e,t,i,n,r){this.jid=e,this.pass=t,this.connect_callback=i,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.wait=n||this.wait,this.hold=r||this.hold,this.domain=s.getDomainFromJid(this.jid);var a=this._buildBody().attrs({to:this.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":s.NS.BOSH});this._changeConnectStatus(s.Status.CONNECTING,null),this._requests.push(new s.Request(a.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),a.tree().getAttribute("rid"))),this._throttledRequestHandler()},attach:function(e,t,i,n,r,a,o){this.jid=e,this.sid=t,this.rid=i,this.connect_callback=n,this.domain=s.getDomainFromJid(this.jid),this.authenticated=!0,this.connected=!0,this.wait=r||this.wait,this.hold=a||this.hold,this.window=o||this.window,this._changeConnectStatus(s.Status.ATTACHED,null)},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;e.length>t;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(e,t,i,n){var r=null,s=this;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");a||(a=this.getUniqueId("sendIQ"),e.setAttribute("id",a));var o=this.addHandler(function(e){r&&s.deleteTimedHandler(r);var n=e.getAttribute("type");if("result"==n)t&&t(e);else{if("error"!=n)throw{name:"StropheError",message:"Got bad IQ type of "+n};i&&i(e)}},null,"iq",null,a);return n&&(r=this.addTimedHandler(n,function(){return s.deleteHandler(o),i&&i(null),!1})),this.send(e),a},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(e,t){var i=new s.TimedHandler(e,t);return this.addTimeds.push(i),i},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,i,n,r,a,o){var l=new s.Handler(e,t,i,n,r,a,o);return this.addHandlers.push(l),l},deleteHandler:function(e){this.removeHandlers.push(e)},disconnect:function(e){this._changeConnectStatus(s.Status.DISCONNECTING,e),s.info("Disconnect was called because: "+e),this.connected&&(this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._sendTerminate())},_changeConnectStatus:function(e,t){for(var i in s._connectionPlugins)if(s._connectionPlugins.hasOwnProperty(i)){var n=this[i];if(n.statusChanged)try{n.statusChanged(e,t)}catch(r){s.error(""+i+" plugin caused an exception "+"changing status: "+r)}}if(this.connect_callback)try{this.connect_callback(e,t)}catch(a){s.error("User connection callback caused an exception: "+a)}},_buildBody:function(){var e=t("body",{rid:this.rid++,xmlns:s.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),e},_removeRequest:function(e){s.debug("removing request");var t;for(t=this._requests.length-1;t>=0;t--)e==this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_processRequest:function(e){var t=this._requests[e],i=-1;try{4==t.xhr.readyState&&(i=t.xhr.status)}catch(n){s.error("caught an error in _requests["+e+"], reqStatus: "+i)}if("undefined"==typeof i&&(i=-1),t.sends>5)return this._onDisconnectTimeout(),void 0;var r=t.age(),a=!isNaN(r)&&r>Math.floor(s.TIMEOUT*this.wait),o=null!==t.dead&&t.timeDead()>Math.floor(s.SECONDARY_TIMEOUT*this.wait),l=4==t.xhr.readyState&&(1>i||i>=500);if((a||o||l)&&(o&&s.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){},this._requests[e]=new s.Request(t.xmlData,t.origFunc,t.rid,t.sends),t=this._requests[e]),0===t.xhr.readyState){s.debug("request id "+t.id+"."+t.sends+" posting");try{t.xhr.open("POST",this.service,!0)}catch(c){return s.error("XHR open failed."),this.connected||this._changeConnectStatus(s.Status.CONNFAIL,"bad-service"),this.disconnect(),void 0}var u=function(){t.date=new Date,t.xhr.send(t.data)};if(t.sends>1){var h=1e3*Math.min(Math.floor(s.TIMEOUT*this.wait),Math.pow(t.sends,3));setTimeout(u,h)}else u();t.sends++,this.xmlOutput!==s.Connection.prototype.xmlOutput&&this.xmlOutput(t.xmlData),this.rawOutput!==s.Connection.prototype.rawOutput&&this.rawOutput(t.data)}else s.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+t.xhr.readyState)},_throttledRequestHandler:function(){this._requests?s.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):s.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))},_onRequestStateChange:function(e,t){if(s.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)return t.abort=!1,void 0;var i;if(4==t.xhr.readyState){i=0;try{i=t.xhr.status}catch(n){}if("undefined"==typeof i&&(i=0),this.disconnecting&&i>=400)return this._hitError(i),void 0;var r=this._requests[0]==t,a=this._requests[1]==t;(i>0&&500>i||t.sends>5)&&(this._removeRequest(t),s.debug("request id "+t.id+" should now be removed")),200==i?((a||r&&this._requests.length>0&&this._requests[0].age()>Math.floor(s.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),s.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0):(s.error("request id "+t.id+"."+t.sends+" error "+i+" happened"),(0===i||i>=400&&600>i||i>=12e3)&&(this._hitError(i),i>=400&&500>i&&(this._changeConnectStatus(s.Status.DISCONNECTING,null),this._doDisconnect()))),i>0&&500>i||t.sends>5||this._throttledRequestHandler()}},_hitError:function(e){this.errors++,s.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_doDisconnect:function(){s.info("_doDisconnect was called"),this.authenticated=!1,this.disconnecting=!1,this.sid=null,this.streamId=null,this.rid=Math.floor(4294967295*Math.random()),this.connected&&(this._changeConnectStatus(s.Status.DISCONNECTED,null),this.connected=!1),this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[]},_dataRecv:function(e){try{var t=e.getResponse()}catch(i){if("parsererror"!=i)throw i;this.disconnect("strophe-parsererror")}if(null!==t){this.xmlInput!==s.Connection.prototype.xmlInput&&this.xmlInput(t),this.rawInput!==s.Connection.prototype.rawInput&&this.rawInput(s.serialize(t));for(var n,r;this.removeHandlers.length>0;)r=this.removeHandlers.pop(),n=this.handlers.indexOf(r),n>=0&&this.handlers.splice(n,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&0===this._requests.length)return this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null,this._doDisconnect(),void 0;var a,o,l=t.getAttribute("type");if(null!==l&&"terminate"==l){if(this.disconnecting)return;return a=t.getAttribute("condition"),o=t.getElementsByTagName("conflict"),null!==a?("remote-stream-error"==a&&o.length>0&&(a="conflict"),this._changeConnectStatus(s.Status.CONNFAIL,a)):this._changeConnectStatus(s.Status.CONNFAIL,"unknown"),this.disconnect(),void 0}var c=this;s.forEachChild(t,null,function(e){var t,i;for(i=c.handlers,c.handlers=[],t=0;i.length>t;t++){var n=i[t];try{!n.isMatch(e)||!c.authenticated&&n.user?c.handlers.push(n):n.run(e)&&c.handlers.push(n)}catch(r){}}})}},_sendTerminate:function(){s.info("_sendTerminate was called");var e=this._buildBody().attrs({type:"terminate"});this.authenticated&&e.c("presence",{xmlns:s.NS.CLIENT,type:"unavailable"}),this.disconnecting=!0;var t=new s.Request(e.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),e.tree().getAttribute("rid"));this._requests.push(t),this._throttledRequestHandler()},_connect_cb:function(e){s.info("_connect_cb was called"),this.connected=!0;var i=e.getResponse();if(i){this.xmlInput!==s.Connection.prototype.xmlInput&&this.xmlInput(i),this.rawInput!==s.Connection.prototype.rawInput&&this.rawInput(s.serialize(i));var r,a,o=i.getAttribute("type");if(null!==o&&"terminate"==o)return r=i.getAttribute("condition"),a=i.getElementsByTagName("conflict"),null!==r?("remote-stream-error"==r&&a.length>0&&(r="conflict"),this._changeConnectStatus(s.Status.CONNFAIL,r)):this._changeConnectStatus(s.Status.CONNFAIL,"unknown"),void 0;this.sid||(this.sid=i.getAttribute("sid")),this.stream_id||(this.stream_id=i.getAttribute("authid"));var l=i.getAttribute("requests");l&&(this.window=parseInt(l,10));var c=i.getAttribute("hold");c&&(this.hold=parseInt(c,10));var u=i.getAttribute("wait");u&&(this.wait=parseInt(u,10));var h,d,f,p,m=!1,g=!1,v=!1,y=i.getElementsByTagName("mechanism");if(!(y.length>0)){var b=this._buildBody();return this._requests.push(new s.Request(b.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),b.tree().getAttribute("rid"))),this._throttledRequestHandler(),void 0}for(h=0;y.length>h;h++)d=s.getText(y[h]),"DIGEST-MD5"==d?g=!0:"PLAIN"==d?m=!0:"ANONYMOUS"==d&&(v=!0);null===s.getNodeFromJid(this.jid)&&v?(this._changeConnectStatus(s.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("auth",{xmlns:s.NS.SASL,mechanism:"ANONYMOUS"}).tree())):null===s.getNodeFromJid(this.jid)?(this._changeConnectStatus(s.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect()):g?(this._changeConnectStatus(s.Status.AUTHENTICATING,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge1_cb.bind(this),null,"challenge",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("auth",{xmlns:s.NS.SASL,mechanism:"DIGEST-MD5"}).tree())):m?(f=s.getBareJidFromJid(this.jid),f+="\0",f+=s.getNodeFromJid(this.jid),f+="\0",f+=this.pass,this._changeConnectStatus(s.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),p=Base64.encode(f),this.send(t("auth",{xmlns:s.NS.SASL,mechanism:"PLAIN"}).t(p).tree())):(this._changeConnectStatus(s.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(n({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:s.NS.AUTH}).c("username",{}).t(s.getNodeFromJid(this.jid)).tree()))}},_sasl_challenge1_cb:function(e){var i,n=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,r=Base64.decode(s.getText(e)),a=MD5.hexdigest(""+1234567890*Math.random()),o="",l=null,c="",u="";for(this.deleteHandler(this._sasl_failure_handler);r.match(n);)switch(i=r.match(n),r=r.replace(i[0],""),i[2]=i[2].replace(/^"(.+)"$/,"$1"),i[1]){case"realm":o=i[2];break;case"nonce":c=i[2];break;case"qop":u=i[2];break;case"host":l=i[2]}var h="xmpp/"+this.domain;null!==l&&(h=h+"/"+l);var d=MD5.hash(s.getNodeFromJid(this.jid)+":"+o+":"+this.pass)+":"+c+":"+a,f="AUTHENTICATE:"+h,p="";return p+="username="+this._quote(s.getNodeFromJid(this.jid))+",",p+="realm="+this._quote(o)+",",p+="nonce="+this._quote(c)+",",p+="cnonce="+this._quote(a)+",",p+='nc="00000001",',p+='qop="auth",',p+="digest-uri="+this._quote(h)+",",p+="response="+this._quote(MD5.hexdigest(MD5.hexdigest(d)+":"+c+":00000001:"+a+":auth:"+MD5.hexdigest(f)))+",",p+='charset="utf-8"',this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge2_cb.bind(this),null,"challenge",null,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("response",{xmlns:s.NS.SASL}).t(Base64.encode(p)).tree()),!1},_quote:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},_sasl_challenge2_cb:function(){return this.deleteHandler(this._sasl_success_handler),this.deleteHandler(this._sasl_failure_handler),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("response",{xmlns:s.NS.SASL}).tree()),!1},_auth1_cb:function(){var e=n({type:"set",id:"_auth_2"}).c("query",{xmlns:s.NS.AUTH}).c("username",{}).t(s.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return s.getResourceFromJid(this.jid)||(this.jid=s.getBareJidFromJid(this.jid)+"/strophe"),e.up().c("resource",{}).t(s.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(e.tree()),!1},_sasl_success_cb:function(){return s.info("SASL authentication succeeded."),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var t,i;for(t=0;e.childNodes.length>t;t++)i=e.childNodes[t],"bind"==i.nodeName&&(this.do_bind=!0),"session"==i.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(s.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=s.getResourceFromJid(this.jid);return r?this.send(n({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:s.NS.BIND}).c("resource",{}).t(r).tree()):this.send(n({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:s.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"==e.getAttribute("type"))return s.info("SASL binding failed."),this._changeConnectStatus(s.Status.AUTHFAIL,null),!1;var t,i=e.getElementsByTagName("bind");return i.length>0?(t=i[0].getElementsByTagName("jid"),t.length>0&&(this.jid=s.getText(t[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(n({type:"set",id:"_session_auth_2"}).c("session",{xmlns:s.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(s.Status.CONNECTED,null))),void 0):(s.info("SASL binding failed."),this._changeConnectStatus(s.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(e){if("result"==e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(s.Status.CONNECTED,null);else if("error"==e.getAttribute("type"))return s.info("Session creation failed."),this._changeConnectStatus(s.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._changeConnectStatus(s.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return"result"==e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(s.Status.CONNECTED,null)):"error"==e.getAttribute("type")&&(this._changeConnectStatus(s.Status.AUTHFAIL,null),this.disconnect()),!1},_addSysTimedHandler:function(e,t){var i=new s.TimedHandler(e,t);return i.user=!1,this.addTimeds.push(i),i},_addSysHandler:function(e,t,i,n,r){var a=new s.Handler(e,t,i,n,r);return a.user=!1,this.addHandlers.push(a),a},_onDisconnectTimeout:function(){s.info("_onDisconnectTimeout was called");for(var e;this._requests.length>0;)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){};return this._doDisconnect(),!1},_onIdle:function(){for(var e,t,i,n;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)t=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(t),e>=0&&this.timedHandlers.splice(e,1);var r=(new Date).getTime();for(n=[],e=0;this.timedHandlers.length>e;e++)t=this.timedHandlers[e],(this.authenticated||!t.user)&&(i=t.lastCalled+t.period,0>=i-r?t.run()&&n.push(t):n.push(t));this.timedHandlers=n;var a,o;if(this.authenticated&&0===this._requests.length&&0===this._data.length&&!this.disconnecting&&(s.info("no requests during idle cycle, sending blank request"),this._data.push(null)),2>this._requests.length&&this._data.length>0&&!this.paused){for(a=this._buildBody(),e=0;this._data.length>e;e++)null!==this._data[e]&&("restart"===this._data[e]?a.attrs({to:this.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":s.NS.BOSH}):a.cnode(this._data[e]).up());delete this._data,this._data=[],this._requests.push(new s.Request(a.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),a.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}this._requests.length>0&&(o=this._requests[0].age(),null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(s.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),o>Math.floor(s.TIMEOUT*this.wait)&&(s.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(s.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())),clearTimeout(this._idleTimeout),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},e&&e(s,t,i,n,r)}(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]});var Occupant,RoomConfig,XmppRoom,__bind=function(e,t){return function(){return e.apply(t,arguments)}};Strophe.addConnectionPlugin("muc",{_connection:null,rooms:[],init:function(e){return this._connection=e,this._muc_handler=null,Strophe.addNamespace("MUC_OWNER",Strophe.NS.MUC+"#owner"),Strophe.addNamespace("MUC_ADMIN",Strophe.NS.MUC+"#admin"),Strophe.addNamespace("MUC_USER",Strophe.NS.MUC+"#user"),Strophe.addNamespace("MUC_ROOMCONF",Strophe.NS.MUC+"#roomconfig")},join:function(e,t,i,n,r,s){var a,o,l,c=this;return o=this.test_append_nick(e,t),a=$pres({from:this._connection.jid,to:o}).c("x",{xmlns:Strophe.NS.MUC}),null!=s&&a.cnode(Strophe.xmlElement("password",[],s)),null==this._muc_handler&&(this._muc_handler=this._connection.addHandler(function(t){var i,n,r,s,a,o,l,u,h,d;if(i=t.getAttribute("from"),a=i.split("/")[0],!c.rooms[a])return!0;if(e=c.rooms[a],r={},"message"===t.nodeName)r=e._message_handlers;else if("presence"===t.nodeName&&(u=t.getElementsByTagName("x"),u.length>0))for(h=0,d=u.length;d>h;h++)if(o=u[h],l=o.getAttribute("xmlns"),l&&l.match(Strophe.NS.MUC)){r=e._presence_handlers;break}for(s in r)n=r[s],n(t,e)||delete r[s];return!0})),null==(l=this.rooms)[e]&&(l[e]=new XmppRoom(this,e,t,s)),n&&this.rooms[e].addHandler("presence",n),i&&this.rooms[e].addHandler("message",i),r&&this.rooms[e].addHandler("roster",r),this._connection.send(a)},leave:function(e,t,i,n){var r,s,a;return delete this.rooms[e],0===this.rooms.length&&(this._connection.deleteHandler(this._muc_handler),this._muc_handler=null),a=this.test_append_nick(e,t),s=this._connection.getUniqueId(),r=$pres({type:"unavailable",id:s,from:this._connection.jid,to:a}),null!=n&&r.c("status",n),null!=i&&this._connection.addHandler(i,null,"presence",null,s),this._connection.send(r),s},message:function(e,t,i,n,r){var s,a,o,l;return l=this.test_append_nick(e,t),r=r||(null!=t?"chat":"groupchat"),a=this._connection.getUniqueId(),s=$msg({to:l,from:this._connection.jid,type:r,id:a}).c("body",{xmlns:Strophe.NS.CLIENT}).t(i),s.up(),null!=n&&(s.c("html",{xmlns:Strophe.NS.XHTML_IM}).c("body",{xmlns:Strophe.NS.XHTML}).h(n),0===s.node.childNodes.length?(o=s.node.parentNode,s.up().up(),s.node.removeChild(o)):s.up().up()),s.c("x",{xmlns:"jabber:x:event"}).c("composing"),this._connection.send(s),a},groupchat:function(e,t,i){return this.message(e,null,t,i)},invite:function(e,t,i){var n,r;return r=this._connection.getUniqueId(),n=$msg({from:this._connection.jid,to:e,id:r}).c("x",{xmlns:Strophe.NS.MUC_USER}).c("invite",{to:t}),null!=i&&n.c("reason",i),this._connection.send(n),r},directInvite:function(e,t,i,n){var r,s,a;return a=this._connection.getUniqueId(),r={xmlns:"jabber:x:conference",jid:e},null!=i&&(r.reason=i),null!=n&&(r.password=n),s=$msg({from:this._connection.jid,to:t,id:a}).c("x",r),this._connection.send(s),a},queryOccupants:function(e,t,i){var n,r;return n={xmlns:Strophe.NS.DISCO_ITEMS},r=$iq({from:this._connection.jid,to:e,type:"get"}).c("query",n),this._connection.sendIQ(r,t,i)},configure:function(e,t){var i,n,r;return i=$iq({to:e,type:"get"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}),r=i.tree(),n=this._connection.sendIQ(r),null!=t&&this._connection.addHandler(function(e){return t(e),!1},Strophe.NS.MUC_OWNER,"iq",null,n),n},cancelConfigure:function(e){var t,i;return t=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}),i=t.tree(),this._connection.sendIQ(i)},saveConfiguration:function(e,t){var i,n,r,s,a;for(n=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),s=0,a=t.length;a>s;s++)i=t[s],n.cnode(i).up();return r=n.tree(),this._connection.sendIQ(r)},createInstantRoom:function(e){var t;return t=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this._connection.sendIQ(t.tree())
},setTopic:function(e,t){var i;return i=$msg({to:e,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(t),this._connection.send(i.tree())},_modifyPrivilege:function(e,t,i,n,r){var s;return s=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_ADMIN}).cnode(t.node),null!=i&&s.c("reason",i),this._connection.sendIQ(s.tree(),n,r)},modifyRole:function(e,t,i,n,r,s){var a;return a=$build("item",{nick:t,role:i}),this._modifyPrivilege(e,a,n,r,s)},kick:function(e,t,i,n,r){return this.modifyRole(e,t,"none",i,n,r)},voice:function(e,t,i,n,r){return this.modifyRole(e,t,"participant",i,n,r)},mute:function(e,t,i,n,r){return this.modifyRole(e,t,"visitor",i,n,r)},op:function(e,t,i,n,r){return this.modifyRole(e,t,"moderator",i,n,r)},deop:function(e,t,i,n,r){return this.modifyRole(e,t,"participant",i,n,r)},modifyAffiliation:function(e,t,i,n,r,s){var a;return a=$build("item",{jid:t,affiliation:i}),this._modifyPrivilege(e,a,n,r,s)},ban:function(e,t,i,n,r){return this.modifyAffiliation(e,t,"outcast",i,n,r)},member:function(e,t,i,n,r){return this.modifyAffiliation(e,t,"member",i,n,r)},revoke:function(e,t,i,n,r){return this.modifyAffiliation(e,t,"none",i,n,r)},owner:function(e,t,i,n,r){return this.modifyAffiliation(e,t,"owner",i,n,r)},admin:function(e,t,i,n,r){return this.modifyAffiliation(e,t,"admin",i,n,r)},changeNick:function(e,t){var i,n;return n=this.test_append_nick(e,t),i=$pres({from:this._connection.jid,to:n,id:this._connection.getUniqueId()}),this._connection.send(i.tree())},setStatus:function(e,t,i,n){var r,s;return s=this.test_append_nick(e,t),r=$pres({from:this._connection.jid,to:s}),null!=i&&r.c("show",i).up(),null!=n&&r.c("status",n),this._connection.send(r.tree())},listRooms:function(e,t){var i;return i=$iq({to:e,from:this._connection.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS}),this._connection.sendIQ(i,t)},test_append_nick:function(e,t){return e+(null!=t?"/"+Strophe.escapeNode(t):"")}}),XmppRoom=function(){function e(e,t,i,n){this.client=e,this.name=t,this.nick=i,this.password=n,this._roomRosterHandler=__bind(this._roomRosterHandler,this),this._addOccupant=__bind(this._addOccupant,this),e.muc&&(this.client=e.muc),this.name=Strophe.getBareJidFromJid(t),this.client.rooms[this.name]=this,this.addHandler("presence",this._roomRosterHandler)}return e.prototype.roster={},e.prototype._message_handlers={},e.prototype._presence_handlers={},e.prototype._roster_handlers={},e.prototype._handler_ids=0,e.prototype.join=function(e,t){return this.client.rooms[this.name]?void 0:this.client.join(this.name,this.nick,e,t,this.password)},e.prototype.leave=function(e,t){return this.client.leave(this.name,this.nick,e,t),delete this.client.rooms[this.name]},e.prototype.message=function(e,t,i,n){return this.client.message(this.name,e,t,i,n)},e.prototype.groupchat=function(e,t){return this.client.groupchat(this.name,e,t)},e.prototype.invite=function(e,t){return this.client.invite(this.name,e,t)},e.prototype.directInvite=function(e,t){return this.client.directInvite(this.name,e,t,this.password)},e.prototype.configure=function(e){return this.client.configure(this.name,e)},e.prototype.cancelConfigure=function(){return this.client.cancelConfigure(this.name)},e.prototype.saveConfiguration=function(e){return this.client.saveConfiguration(this.name,e)},e.prototype.queryOccupants=function(e,t){return this.client.queryOccupants(this.name,e,t)},e.prototype.setTopic=function(e){return this.client.setTopic(this.name,e)},e.prototype.modifyRole=function(e,t,i,n,r){return this.client.modifyRole(this.name,e,t,i,n,r)},e.prototype.kick=function(e,t,i,n){return this.client.kick(this.name,e,t,i,n)},e.prototype.voice=function(e,t,i,n){return this.client.voice(this.name,e,t,i,n)},e.prototype.mute=function(e,t,i,n){return this.client.mute(this.name,e,t,i,n)},e.prototype.op=function(e,t,i,n){return this.client.op(this.name,e,t,i,n)},e.prototype.deop=function(e,t,i,n){return this.client.deop(this.name,e,t,i,n)},e.prototype.modifyAffiliation=function(e,t,i,n,r){return this.client.modifyAffiliation(this.name,e,t,i,n,r)},e.prototype.ban=function(e,t,i,n){return this.client.ban(this.name,e,t,i,n)},e.prototype.member=function(e,t,i,n){return this.client.member(this.name,e,t,i,n)},e.prototype.revoke=function(e,t,i,n){return this.client.revoke(this.name,e,t,i,n)},e.prototype.owner=function(e,t,i,n){return this.client.owner(this.name,e,t,i,n)},e.prototype.admin=function(e,t,i,n){return this.client.admin(this.name,e,t,i,n)},e.prototype.changeNick=function(e){return this.nick=e,this.client.changeNick(this.name,e)},e.prototype.setStatus=function(e,t){return this.client.setStatus(this.name,this.nick,e,t)},e.prototype.addHandler=function(e,t){var i;switch(i=this._handler_ids++,e){case"presence":this._presence_handlers[i]=t;break;case"message":this._message_handlers[i]=t;break;case"roster":this._roster_handlers[i]=t;break;default:return this._handler_ids--,null}return i},e.prototype.removeHandler=function(e){return delete this._presence_handlers[e],delete this._message_handlers[e],delete this._roster_handlers[e]},e.prototype._addOccupant=function(e){var t;return t=new Occupant(e,this),this.roster[t.nick]=t,t},e.prototype._roomRosterHandler=function(t){var i,n,r,s,a,o;switch(i=e._parsePresence(t),a=i.nick,s=i.newnick||null,i.type){case"error":return;case"unavailable":s&&(i.nick=s,this.roster[a]&&this.roster[s]&&(this.roster[a].update(this.roster[s]),this.roster[s]=this.roster[a]),this.roster[a]&&!this.roster[s]&&(this.roster[s]=this.roster[a].update(i))),delete this.roster[a];break;default:this.roster[a]?this.roster[a].update(i):this._addOccupant(i)}o=this._roster_handlers;for(r in o)n=o[r],n(this.roster,this)||delete this._roster_handlers[r];return!0},e._parsePresence=function(e){var t,i,n,r,s,a,o,l,c,u,h,d,f,p,m,g;for(r={},t=e.attributes,r.nick=Strophe.getResourceFromJid(t.from.textContent),r.type=(null!=(c=t.type)?c.textContent:void 0)||null,r.states=[],u=e.children,s=0,o=u.length;o>s;s++)switch(i=u[s],i.nodeName){case"status":r.status=i.textContent||null;break;case"show":r.show=i.textContent||null;break;case"x":if(t=i.attributes,(null!=(h=t.xmlns)?h.textContent:void 0)===Strophe.NS.MUC_USER)for(d=i.children,a=0,l=d.length;l>a;a++)switch(n=d[a],n.nodeName){case"item":t=n.attributes,r.affiliation=(null!=(f=t.affiliation)?f.textContent:void 0)||null,r.role=(null!=(p=t.role)?p.textContent:void 0)||null,r.jid=(null!=(m=t.jid)?m.textContent:void 0)||null,r.newnick=(null!=(g=t.nick)?g.textContent:void 0)||null;break;case"status":n.attributes.code&&r.states.push(n.attributes.code.textContent)}}return r},e}(),RoomConfig=function(){function e(e){this.parse=__bind(this.parse,this),null!=e&&this.parse(e)}return e.prototype.parse=function(e){var t,i,n,r,s,a,o,l,c,u,h,d,f;for(a=e.getElementsByTagName("query")[0].children,this.identities=[],this.features=[],this.x=[],o=0,u=a.length;u>o;o++)switch(n=a[o],i=n.attributes,n.nodeName){case"identity":for(s={},l=0,h=i.length;h>l;l++)t=i[l],s[t.name]=t.textContent;this.identities.push(s);break;case"feature":this.features.push(i["var"].textContent);break;case"x":if(i=n.children[0].attributes,"FORM_TYPE"===!i["var"].textContent||"hidden"===!i.type.textContent)break;for(f=n.children,c=0,d=f.length;d>c;c++)r=f[c],r.attributes.type||(i=r.attributes,this.x.push({"var":i["var"].textContent,label:i.label.textContent||"",value:r.firstChild.textContent||""}))}return{identities:this.identities,features:this.features,x:this.x}},e}(),Occupant=function(){function e(e,t){this.room=t,this.update=__bind(this.update,this),this.admin=__bind(this.admin,this),this.owner=__bind(this.owner,this),this.revoke=__bind(this.revoke,this),this.member=__bind(this.member,this),this.ban=__bind(this.ban,this),this.modifyAffiliation=__bind(this.modifyAffiliation,this),this.deop=__bind(this.deop,this),this.op=__bind(this.op,this),this.mute=__bind(this.mute,this),this.voice=__bind(this.voice,this),this.kick=__bind(this.kick,this),this.modifyRole=__bind(this.modifyRole,this),this.update(e)}return e.prototype.modifyRole=function(e,t,i,n){return this.room.modifyRole(this.nick,e,t,i,n)},e.prototype.kick=function(e,t,i){return this.room.kick(this.nick,e,t,i)},e.prototype.voice=function(e,t,i){return this.room.voice(this.nick,e,t,i)},e.prototype.mute=function(e,t,i){return this.room.mute(this.nick,e,t,i)},e.prototype.op=function(e,t,i){return this.room.op(this.nick,e,t,i)},e.prototype.deop=function(e,t,i){return this.room.deop(this.nick,e,t,i)},e.prototype.modifyAffiliation=function(e,t,i,n){return this.room.modifyAffiliation(this.jid,e,t,i,n)},e.prototype.ban=function(e,t,i){return this.room.ban(this.jid,e,t,i)},e.prototype.member=function(e,t,i){return this.room.member(this.jid,e,t,i)},e.prototype.revoke=function(e,t,i){return this.room.revoke(this.jid,e,t,i)},e.prototype.owner=function(e,t,i){return this.room.owner(this.jid,e,t,i)},e.prototype.admin=function(e,t,i){return this.room.admin(this.jid,e,t,i)},e.prototype.update=function(e){return this.nick=e.nick||null,this.affiliation=e.affiliation||null,this.role=e.role||null,this.jid=e.jid||null,this.status=e.status||null,this.show=e.show||null,this},e}(),/*!
 * jQuery Tools v1.2.5 - The missing UI library for the Web
 * 
 * tooltip/tooltip.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
function(e){function t(t,i,n){var r=n.relative?t.position().top:t.offset().top,s=n.relative?t.position().left:t.offset().left,a=n.position[0];r-=i.outerHeight()-n.offset[0],s+=t.outerWidth()+n.offset[1],/iPad/i.test(navigator.userAgent)&&(r-=e(window).scrollTop());var o=i.outerHeight()+t.outerHeight();"center"==a&&(r+=o/2),"bottom"==a&&(r+=o),a=n.position[1];var l=i.outerWidth()+t.outerWidth();return"center"==a&&(s-=l/2),"left"==a&&(s-=l),{top:r,left:s}}function i(i,r){var s,a,o=this,l=i.add(o),c=0,u=0,h=i.attr("title"),d=i.attr("data-tooltip"),f=n[r.effect],p=i.is(":input"),m=p&&i.is(":checkbox, :radio, select, :button, :submit"),g=i.attr("type"),v=r.events[g]||r.events[p?m?"widget":"input":"def"];if(!f)throw'Nonexistent effect "'+r.effect+'"';if(v=v.split(/,\s*/),2!=v.length)throw"Tooltip: bad events configuration for "+g;i.bind(v[0],function(e){clearTimeout(c),r.predelay?u=setTimeout(function(){o.show(e)},r.predelay):o.show(e)}).bind(v[1],function(e){clearTimeout(u),r.delay?c=setTimeout(function(){o.hide(e)},r.delay):o.hide(e)}),h&&r.cancelDefault&&(i.removeAttr("title"),i.data("title",h)),e.extend(o,{show:function(n){if(!s&&(d?s=e(d):r.tip?s=e(r.tip).eq(0):h?s=e(r.layout).addClass(r.tipClass).appendTo(document.body).hide().append(h):(s=i.next(),s.length||(s=i.parent().next())),!s.length))throw"Cannot find tooltip for "+i;if(o.isShown())return o;s.stop(!0,!0);var p=t(i,s,r);if(r.tip&&s.html(i.data("title")),n=n||e.Event(),n.type="onBeforeShow",l.trigger(n,[p]),n.isDefaultPrevented())return o;p=t(i,s,r),s.css({position:"absolute",top:p.top,left:p.left}),a=!0,f[0].call(o,function(){n.type="onShow",a="full",l.trigger(n)});var m=r.events.tooltip.split(/,\s*/);return s.data("__set")||(s.bind(m[0],function(){clearTimeout(c),clearTimeout(u)}),m[1]&&!i.is("input:not(:checkbox, :radio), textarea")&&s.bind(m[1],function(e){e.relatedTarget!=i[0]&&i.trigger(v[1].split(" ")[0])}),s.data("__set",!0)),o},hide:function(t){return s&&o.isShown()?(t=t||e.Event(),t.type="onBeforeHide",l.trigger(t),t.isDefaultPrevented()?void 0:(a=!1,n[r.effect][1].call(o,function(){t.type="onHide",l.trigger(t)}),o)):o},isShown:function(e){return e?"full"==a:a},getConf:function(){return r},getTip:function(){return s},getTrigger:function(){return i}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,i){e.isFunction(r[i])&&e(o).bind(i,r[i]),o[i]=function(t){return t&&e(o).bind(i,t),o}})}e.tools=e.tools||{version:"v1.2.5"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,i){n[e]=[t,i]}};var n={toggle:[function(e){var t=this.getConf(),i=this.getTip(),n=t.opacity;1>n&&i.css({opacity:n}),i.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};e.fn.tooltip=function(t){var n=this.data("tooltip");return n?n:(t=e.extend(!0,{},e.tools.tooltip.conf,t),"string"==typeof t.position&&(t.position=t.position.split(/,?\s/)),this.each(function(){n=new i(e(this),t),e(this).data("tooltip",n)}),t.api?n:this)}}(jQuery);/**
 * LiquidMetal, version: 1.0 (2011-12-17)
 *
 * A mimetic poly-alloy of Quicksilver's scoring algorithm, essentially
 * LiquidMetal.
 *
 * For usage and examples, visit:
 * http://github.com/rmm5t/liquidmetal
 *
 * Licensed under the MIT:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Copyright (c) 2009-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
var LiquidMetal=function(){function e(e,t){var i=e.charAt(t);return i>="A"&&"Z">=i}function t(e,t){var i=e.charAt(t-1);return" "==i||"	"==i}function i(e,t,i,n){for(var r=i;n>r;r++)e[r]=t;return e}var n=0,r=1,s=.8,a=.9,o=.85;return{score:function(e,t){if(0===t.length)return s;if(t.length>e.length)return n;var i=this.buildScoreArray(e,t);if(i===!1)return 0;for(var r=0,a=0;i.length>a;a++)r+=i[a];return r/i.length},buildScoreArray:function(l,c){for(var u=new Array(l.length),h=l.toLowerCase(),d=c.toLowerCase(),f=-1,p=!1,m=0;d.length>m;m++){var g=d[m],v=h.indexOf(g,f+1);if(-1===v)return!1;0===v&&(p=!0),t(l,v)?(u[v-1]=1,i(u,o,f+1,v-1)):e(l,v)?i(u,o,f+1,v):i(u,n,f+1,v),u[v]=r,f=v}var y=p?a:s;return i(u,y,f+1,u.length),u}}}();TB=function(){function e(){this._listeners={},this.addEventListener=function(e,t){if(!e)throw new Error("EventDispatcher.addEventListener :: No type specified");if(!t)throw new Error("EventDispatcher.addEventListener :: No listener function specified");this._listeners.hasOwnProperty(e)||(this._listeners[e]=new Array),this.removeEventListener(e,t),W("TB.addEventListener("+e+")"),this._listeners[e].push(t)},this.removeEventListener=function(e,t){if(!e)throw new Error("EventDispatcher.removeEventListener :: No type specified");if(!t)throw new Error("EventDispatcher.removeEventListener :: No listener function specified");if(W("TB.removeEventListener("+e+")"),this._listeners.hasOwnProperty(e))for(var i=0;this._listeners[e].length>i;i++)if(this._listeners[e][i]==t){this._listeners[e].splice(i,1);break}},this.dispatchEvent=function(e){if(!e)throw new Error("EventDispatcher.dispatchEvent :: No event specified");if(!e.type)throw new Error("EventDispatcher.dispatchEvent :: Event has no type");if(e.target||(e.target=this),this._listeners.hasOwnProperty(e.type)){var t=this._listeners[e.type];if(!(t instanceof Array))throw new Error("EventDispatcher.dispatchEvent :: Invalid object type in listeners");for(var i=0;t.length>i;i++){var n=q(t[i],e);setTimeout(n,1)}}}}function t(e,t){this.type=e,this.cancelable=t?t:!1,this.target;var i=!1;this.preventDefault=function(){this.cancelable?i=!0:$("Event.preventDefault :: Trying to preventDefault on an Event that isn't cancelable")},this.isDefaultPrevented=function(){return i}}function i(e,i,n,r){this.superClass=t,this.superClass(e),this.message=i,this.title=n,this.code=r}function n(e,i,n){this.superClass=t,this.superClass(e),this.connections=i,this.reason=n}function r(e,i,n,r){this.superClass=t,this.superClass(e,r),this.streams=i,this.reason=n}function s(e,i,n,r,s){this.superClass=t,this.superClass(e),this.connections=i,this.streams=n,this.groups=r,this.archives=s}function a(e,i,n){this.superClass=t,this.superClass(e,n),this.reason=i}function o(e,i){this.superClass=t,this.superClass(e),this.fromConnection=i}function l(e,i,n){this.superClass=t,this.superClass(e),this.streamId=i,this.volume=n}function c(e,i,n){this.superClass=t,this.superClass(e),this.camera=i,this.microphone=n}function u(e,i,n,r,s){this.superClass=t,this.superClass(e),this.cameras=i,this.microphones=n,this.selectedCamera=r,this.selectedMicrophone=s}function h(e,i,n,r,s){this.superClass=t,this.superClass(e),this.widthFrom=i,this.widthTo=n,this.heightFrom=r,this.heightTo=s}function d(e,i,n,r,s){this.superClass=t,this.superClass(e),this.type=e,this.stream=i,this.changedProperty=n,this.oldValue=r,this.newValue=s}function f(e,i){this.superClass=t,this.superClass(e),this.archives=i}function p(e,i){this.superClass=t,this.superClass(e),this.changedValues=i}function m(e,i,n,r){this.superClass=t,this.superClass(e),this.reasonCode=i,this.reason=n,this.failedValues=r}function g(e,t,i){this.connectionId=e,this.creationTime=Number(t),this.data=i,this.quality}function v(e,t,i,n,r,s,a,o,l,c,u,h){this.streamId=e,this.connection=t,this.name=i,this.data=n,this.type=r,this.creationTime=s,this.hasAudio=a,this.hasVideo=o,this.orientation=l,this.peerId=u,this.quality=h,this.startRecording=function(e){W("Stream.startRecording()");var t="controller_"+c;if(e=Et[c][e.archiveId],!e){var i="Stream.startRecording :: Archive not created.";throw U(i),new Error(i)}if(e.type!=TB.PER_STREAM)throw i="Stream.startRecording :: Trying to record per stream on a "+e.type+" archive",U(i),new Error(i);if(!(t&&this.connection&&this.connection.connectionId))throw i="Stream.startRecording :: Connection required to record an archive.",U(i),new Error(i);try{var n=document.getElementById(t);n.startRecordingStream(this.streamId,e.archiveId),e.recording=!0}catch(r){throw i="Stream.startRecording :: "+r,U(i),new Error(i)}},this.stopRecording=function(e){if(W("Stream.stopRecording()"),e=Et[c][e.archiveId],!e){var t="Stream.stopRecording :: Archive not created.";throw U(t),new Error(t)}if(e.type!=TB.PER_STREAM)throw t="Stream.stopRecording :: Trying to stop recording per stream on a "+e.type+" archive",U(t),new Error(t);var i="controller_"+c;if(!(i&&this.connection&&this.connection.connectionId))throw t="Stream.stopRecording :: Connection required to record an archive.",U(t),new Error(t);try{var n=document.getElementById(i);n.stopRecordingStream(this.streamId,e.archiveId)}catch(r){throw t="Stream.stopRecording :: "+r,U(t),new Error(t)}}}function y(t,i){this.id=t,this.replacedDivId=i,this.parentClass=e,this.parentClass()}function b(e,t){this.uberClass=y,this.uberClass(e,t);var i=["showMicButton","showSpeakerButton","showSettingsButton","showCameraToggleButton","nameDisplayMode","buttonDisplayMode","showSaveButton","showRecordButton","showRecordStopButton","showReRecordButton","showPauseButton","showPlayButton","showPlayStopButton","showStopButton","backgroundImageURI","showControlPanel","showRecordCounter","showPlayCounter","showControlBar"];this.getStyle=function(e){var t=document.getElementById(this.id);if(!this.loaded)return e?this._style[e]:this._style;if(!t)throw a="Publisher.getStyle:: Publisher "+this.id+" does not exist.",U(a),new Error(a);try{var n=t.getStyle(e);if("string"==typeof n)return n;for(var r in n)"false"==n[r]&&(n[r]=!1),"true"==n[r]&&(n[r]=!0),0>i.indexOf(r)&&delete n[r];return n}catch(s){var a="Publisher.getStyle:: Failed to call getStyle. "+s;throw U(a),new Error(a)}},this._style={};var n={buttonDisplayMode:["auto","off","on"],nameDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showMicButton:[!0,!1],showCameraToggleButton:[!0,!1],showSaveButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showPlayCounter:[!0,!1],showRecordCounter:[!0,!1]};this.setStyle=function(e,t){W("Publisher.setStyle: "+e.toString());var i=document.getElementById(this.id);if(this.loaded){if(!i)throw s="Publisher.setStyle:: Publisher "+this.id+" does not exist.",U(s),new Error(s);try{i.setStyle(e,t)}catch(r){var s="Publisher.setStyle:: Failed to call setStyle. "+r;throw U(s),new Error(s)}}else{if("string"==typeof e&&null!=t)this._style.hasOwnProperty(e)&&("backgroundImageURI"==e||n[e].indexOf(t)>-1)?(W("setStyle::Setting "+e+" to "+t),this._style[e]=t):$("setStyle::Invalid style property passed "+e+" : "+t);else for(var a in e)this.setStyle(a,e[a]);this.modified=!0}return this}}function _(e,t){this.supClass=b,this.supClass(e,t),this.getImgData=function(){W("VideoComponent.getImgData");var e=document.getElementById(this.id);if(!e)throw i="VideoComponent.getImgData:: Component "+this.id+" does not exist.",U(i),new Error(i);try{return e.getImgData()}catch(t){var i="VideoComponent.getImgData:: Failed to call getImgData. "+t;throw U(i),new Error(i)}}}function w(e,t,i){this.superClass=_,this.superClass(e,t),this._style={showMicButton:!0,showSettingsButton:!0,showCameraToggleButton:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null},this.modified=!1,i&&i.hasOwnProperty("style")&&(this.setStyle(i.style),this.modified=!0),this.properties=i,this.loaded=!1,this.panelId=null,this.gain=50,i&&i.hasOwnProperty("microphoneGain")&&(this.gain=parseInt(i.microphoneGain,10)),this.enableMicrophone=function(){this.publishAudio(!0)},this.disableMicrophone=function(){this.publishAudio(!1)},this.setMicrophoneGain=function(e){var t=document.getElementById(this.id);if(this.loaded){if(!t)throw n="Publisher "+this.id+" does not exist.",U(n),new Error(n);try{t.setMicGain(e)}catch(i){var n="Microphone gain adjustment on publisher "+this.id+" failed";throw U(n),new Error(n)}}else this.gain=e,this.modified=!0;return this},this.getMicrophoneGain=function(){var e=document.getElementById(this.id);if(!this.loaded)return this.gain;if(!e)throw i="Publisher "+this.id+" does not exist.",U(i),new Error(i);try{return e.getMicGain()}catch(t){var i="Microphone gain adjustment on publisher "+this.id+" failed";throw U(i),new Error(i)}},this.getEchoCancellationMode=function(){W("Publisher.getEchoCancellationMode()");var e="",t=document.getElementById(this.id);if(!this.loaded)return"unknown";if(!t)throw n="Publisher "+this.id+" does not exist.",U(n),new Error(n);try{e=t.getEchoCancellationMode()}catch(i){var n="Getting echo cancellation mode for publisher "+this.id+" failed. "+i;throw U(n),new Error(n)}return e},this.publishAudio=function(e){W("Publisher.publishAudio()"),this.loaded?rt(this.id,"publishAudio",e):(this.audioPublished=e,this.modified=!0)},this.publishVideo=function(e){W("Publisher.publishVideo()"),this.loaded?rt(this.id,"publishVideo",e):(this.videoPublished=e,this.modified=!0)},this.setCamera=function(e){W("Publisher.setCamera("+e+")"),st(this.id,e,!0)},this.setMicrophone=function(e){W("Publisher.setMicrophone("+e+")"),st(this.id,e,!1)}}function x(e,t,i,n){this.superClass=_,this.superClass(t,i),this._style={nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null},this.modified=!1,n&&n.hasOwnProperty("style")&&(this.setStyle(n.style),this.modified=!0),this.stream=e,this.properties=n,this.loaded=!1,this.audioVolume=50;var r=!0,s=!0;n&&(!n.hasOwnProperty("subscribeToAudio")||"false"!=n.subscribeToAudio&&0!=n.subscribeToAudio||(r=!1),!n.hasOwnProperty("subscribeToVideo")||"false"!=n.subscribeToVideo&&0!=n.subscribeToVideo||(s=!1),n.hasOwnProperty("audioVolume")&&(this.audioVolume=parseInt(n.audioVolume,10))),this.enableAudio=function(){this.subscribeToAudio(!0)},this.disableAudio=function(){this.subscribeToAudio(!1)},this.setAudioVolume=function(e){var t=document.getElementById(this.id);if(this.loaded){if(!t)throw n="Subscriber "+this.id+" does not exist.",U(n),new Error(n);try{t.setAudioVolume(e)}catch(i){var n="Volume adjustment on subscriber "+this.id+" failed";throw U(n),new Error(n)}}else this.audioVolume=e;return this},this.getAudioVolume=function(){var e=document.getElementById(this.id);if(!this.loaded)return this.audioVolume;if(!e)throw i="Subscriber "+this.id+" does not exist.",U(i),new Error(i);try{return e.getAudioVolume()}catch(t){var i="Volume adjustment on subscriber "+this.id+" failed";throw U(i),new Error(i)}return this},this._subscribeToAudio=function(e,t){W("Subscriber.subscribeToAudio()"),(!t||r)&&(this.loaded?rt(this.id,"subscribeToAudio",e):(this.audioSubscribed=e,this.modified=!0))},this.subscribeToAudio=function(e){r=e,this._subscribeToAudio(r,!1)},this._subscribeToVideo=function(e,t){W("Subscriber.subscribeToVideo()"),(!t||s)&&(this.loaded?rt(this.id,"subscribeToVideo",e):(this.videoSubscribed=e,this.modified=!0))},this.subscribeToVideo=function(e){s=e,this._subscribeToVideo(s,!1)},this.changeOrientation=function(e){W("Subscriber.changeOrientation()"),rt(this.id,"changeOrientation",e)}}function C(e,t,i,n){this.superClass=y,this.superClass(e,t),i?(this.publisher=i,this.component=i):(this.publisher=null,this.component=i),this.parentCreated=!1,this.properties=n}function E(e,t){this.name=e,this.status=t}function S(e,t){this.name=e,this.status=t}function k(t,i){this.superClass=e,this.superClass(),this.groupId=i,this.sessionId=t,this.enableEchoSuppression=function(){W("Group.enableEchoSuppresion()"),j(this.sessionId,this.groupId,!0)},this.disableEchoSuppression=function(){W("Group.disableEchoSuppression()"),j(this.sessionId,this.groupId,!1)},this.getGroupProperties=function(){return W("Group.getGroupProperties()"),H(this.sessionId,this.groupId)}}function I(e){this.isEnabled=e}function T(e,t,i){this.numOutputStreams=e,this.switchType=t,this.switchTimeout=i}function A(e){this.echoSuppression=new I(e.echoSuppressionEnabled),this.multiplexer=new T(e.multiplexerNumOutputStreams,e.multiplexerSwitchType,e.multiplexerSwitchTimeout)}function N(e,t,i,n,r){this.archiveId=e,this.type=t,this.title=i,this.sessionId=n;var s;"sessionRecordingInProgress"==r?(this.recording=!0,this.status="open"):(this.recording=!1,this.status=r),this.startPlayback=function(e){e||(e=!1),W("Archive.startPlayback() : "+e);var t="controller_"+n,i=TB.sessions[n].connection;if(!St[n][this.archiveId]){var r="Archive.startPlayback :: Archive not loaded.";throw U(r),new Error(r)}if(!(t&&i&&i.connectionId))throw r="Archive.startPlayback :: Connection required to play back an archive.",U(r),new Error(r);try{var s=document.getElementById(t);s.startPlayback(this.archiveId,e)}catch(a){throw r="Archive.startPlayback :: "+a,U(r),new Error(r)}},this.stopPlayback=function(){W("Archive.stopPlayback()");var e="controller_"+n,t=TB.sessions[n].connection;if(!(e&&t&&t.connectionId))throw s="Archive.stopPlayback :: Connection required to stop playing back an archive.",U(s),new Error(s);try{var i=document.getElementById(e);i.stopPlayback(this.archiveId)}catch(r){var s="Archive.stopPlayback :: "+r;throw U(s),new Error(s)}},this.getStateManager=function(){if(W("Archive.getStateManager() "+e),s)return s;var t="controller_"+n,i=TB.sessions[n].connection;if(t&&i&&i.connectionId)return s=new O(t,e);var r="Archive.getStateManager :: Connection required to getStateManager. Make sure that this archive was loaded in a Session.";throw U(r),new Error(r)}}function P(e,t,i){this.superClass=_,this.superClass(e,t),this._style={buttonDisplayMode:"auto",showCameraToggleButton:!0,showControlBar:!0,showMicButton:!0,showPlayCounter:!0,showRecordCounter:!0,showSaveButton:!0,showSettingsButton:!0},this.id=e,this.properties=i,this.saveArchive=function(){var e=document.getElementById(this.id);e.save()},this.setCamera=function(e){W("Recorder.setCamera("+e+")"),st(this.id,e,!0)},this.setMicrophone=function(e){W("Recorder.setMicrophone("+e+")"),st(this.id,e,!1)},this.stopRecording=function(){recorderElement=document.getElementById(this.id),recorderElement.stopRecording()},this.startRecording=function(e){recorderElement=document.getElementById(this.id),recorderElement.startRecording(e)},this.startPlaying=function(){W("Recorder.startPlaying()");try{var e=document.getElementById(this.id);e.startPlaying()}catch(t){var i="Recorder.startPlaying :: "+t;throw U(i),new Error(i)}},this.stopPlaying=function(){W("Recorder.stopPlaying()");try{var e=document.getElementById(this.id);e.stopPlaying()}catch(t){var i="Recorder.stopPlaying :: "+t;throw U(i),new Error(i)}},this.setTitle=function(e){var t=document.getElementById(this.id);if(this.loaded){if(!t)throw n="Recorder "+this.id+" does not exist.",U(n),new Error(n);try{t.setTitle(e)}catch(i){var n="Setting archive title on Recorder "+this.id+" failed.";throw U(n),new Error(n)}}else this._title=e,this.modified=!0}}function D(e,t,i){this.superClass=_,this.superClass(e,t),this._style={showPlayButton:!0,showStopButton:!0,showSpeakerButton:!0},this.id=e,this.properties=i,this.archiveId,this.loadArchive=function(e){if(!e)throw n="Player.loadArchive :: Archive id required to load an archive.",U(n),new Error(n);if(this.loaded)try{var t=document.getElementById(this.id);t.loadArchive(e),this.archiveId=e}catch(i){var n="Player.loadArchive :: "+i;throw U(n),new Error(n)}else this._archiveId=e},this.play=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.startPlayback()}catch(t){var i="Player.play :: "+t;throw U(i),new Error(i)}else this._play=!0},this.stop=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.stopPlayback()}catch(t){var i="Player.stop :: "+t;throw U(i),new Error(i)}else this._play=!1},this.pause=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.pausePlayback()}catch(t){var i="Player.pause :: "+t;throw U(i),new Error(i)}else this._play=!1}}function M(t){this.superClass=e,this.superClass(),this.apiKey=t,this.panels={},this.showMicSettings=!0,this.showCamSettings=!0;var i=360,n=270,r=340,s=230;this.detectDevices=function(){if(W("DeviceManager.detectDevices()"),pt)try{var e=document.getElementById(pt);e.detectDevices()}catch(i){throw U(i),new Error("DeviceManager.detectDevices() :: Failed to locate existing device detector "+i)}else{var n={};n.allowscriptaccess="always",pt="opentok_deviceDetector";var r={};r.id=pt;var s={};swfobject.addDomLoadEvent(function(){var e=document.createElement("div");e.setAttribute("id",pt),e.style.display="none",document.body.appendChild(e),swfobject.embedSWF(xt+"/v0.91.46.b5f48f1/flash/f_devicedetectorwidget.swf?partnerId="+t,pt,1,1,"10.0.0",!1,s,n,r)})}},this.displayPanel=function(e,t,a){W("DeviceManager.displayPanel("+e+")");var o;if(o=t?"displayPanel_"+t.id:"displayPanel_global",t&&TB.sessions)for(var l in TB.sessions)TB.sessions[l].hasOwnProperty("publishers")&&TB.sessions[l].publishers[t.id]&&(TB.sessions[l].publishers[t.id].panelId=o);var c=document.getElementById(o);if(c)return $("DeviceManager.displayPanel :: there is already a device panel"+(t?" for this component":"")),this.panels[o];var u=!1,h=a?ht(a):{},d={};d.allowscriptaccess="always";var f=i,p=n;if("showCloseButton"in h?0==h.showCloseButton&&(f=r,p=s):h.showCloseButton=!0,"showMicSettings"in h||(h.showMicSettings=this.showMicSettings),"showCamSettings"in h||(h.showCamSettings=this.showCamSettings),!e){e="devicePanel_replace_div";var m=document.createElement("div");m.setAttribute("id",e);var g=document.createElement("div");g.setAttribute("id","devicePanel_parent_"+(t?t.id:"global")),g.style.position="absolute";var v="pageYOffset"in window&&"number"==typeof window.pageYOffset?window.pageYOffset:document.body&&document.body.scrollTop?document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:0,y="innerHeight"in window?window.innerHeight:document.documentElement&&document.documentElement.offsetHeight?document.documentElement.offsetHeight:n;v+=.2*y,g.style.top=v+"px",g.style.left="50%",g.style.width=f+"px",g.style.height=p+"px",g.style.marginLeft=0-f/2+"px",g.style.marginTop=0-p/4+"px","zIndex"in h?(g.style.zIndex=h.zIndex,delete h.zIndex):g.style.zIndex=at()+1,document.body.appendChild(g),u=!0,g.appendChild(m)}var b=document.getElementById(e);if(!b){var _="DeviceManager.displayPanel :: replaceElementId does not exist in DOM.";throw U(_),new Error(_)}var w;this.panels[o]&&this.removePanel(this.panels[o]),w=t?new C(o,e,t,h):new C(o,e,null,h),w.parentCreated=u,this.panels[o]=w;var x={};return x.id=w.id,x.style="outline:none;",h.devicePanelId=o,h.wmode?(d.wmode=h.wmode,delete h.wmode):d.wmode="transparent",B(xt+"/v0.91.46.b5f48f1/flash/f_devicewidget.swf?partnerId="+this.apiKey,e,f,p,mt,!1,h,d,x),w},this.removePanel=function(e){if(!e.hasOwnProperty("id")){var t="DeviceManager.removePanel :: invalid DevicePanel object";throw U(t),new Error(t)}W("DeviceManager.removePanel("+e.id+")");var i=document.getElementById(e.id);if(!i)throw t="DeviceManager.removePanel :: DevicePanel does not exist in DOM",U(t),new Error(t);var n=i.parentNode,r=e.parentCreated;for(var s in this.panels)if(this.panels[s].hasOwnProperty("id")&&s==e.id){var a=this.panels[s];it(this.panels[s]),delete this.panels[s];var o=function(){if(a.publisher&&TB.sessions)for(var e in TB.sessions)TB.sessions[e].hasOwnProperty("disconnect")&&TB.sessions[e].publishers[a.publisher.id]&&(TB.sessions[e].publishers[a.publisher.id].panelId=null)};setTimeout(o,2)}if(r)try{var l=n.parentNode;l.removeChild(n)}catch(c){throw t="Failed to clean up the parent of the device panel "+c,U(t),new Error(t)}}}function R(e){var t=1,i=1;this.recorders={},this.players={},this.apiKey=e;var n=320,r=271,s=31;this.displayRecorder=function(i,a,o){if(!i)throw errorMsg="RecorderManager.displayRecorder :: Token required to displayRecorder",U(errorMsg),new Error(errorMsg);var l="recorder_"+e+"_"+t++,c=o?ht(o):{};if(c.token=i,c.partnerId=e,c.recorderId=l,c.hasOwnProperty("style")){var u=c.style.showControlBar;c.style=encodeURIComponent(ut(c.style))}var h={};h.allowscriptaccess="always",c.wmode?(h.wmode=c.wmode,delete c.wmode):h.wmode="transparent";var d={};d.id=l,d.style="outline:none;",(!c.width||isNaN(c.width))&&(c.width=n),(!c.height||isNaN(c.height))&&(c.height=r,0==u&&(c.height-=s));var f=!1;return a||(a="recorder_replace_"+t,f=!0),swfobject.addDomLoadEvent(function(){if(f){var t=document.createElement("div");t.setAttribute("id",a),document.body.appendChild(t)}B(xt+"/v0.91.46.b5f48f1/flash/f_recordwidget.swf?partnerId="+e,a,c.width,c.height,mt,!1,c,h,d)}),this.recorders[l]=new P(l,a,c),this.recorders[l]},this.removeRecorder=function(e){if(!e){var t="Session.removeRecorder :: recorder cannot be null";throw U(t),new Error(t)}W("Session.removeRecorder("+e.id+")"),it(e),delete this.recorders[e.id]},this.displayPlayer=function(t,a,o,l){if(!t)throw errorMsg="RecorderManager.displayPlayer :: Valid ArchiveId required",U(errorMsg),new Error(errorMsg);var c="player_"+e+"_"+i++,u=l?ht(l):{};if(u.token=a,u.archiveId=t,u.partnerId=e,u.playerId=c,u.hasOwnProperty("style")){var h=u.style.showControlBar;u.style=encodeURIComponent(ut(u.style))}var d={};d.allowscriptaccess="always",u.wmode?(d.wmode=u.wmode,delete u.wmode):d.wmode="transparent";var f={};f.id=c,f.style="outline:none;",(!u.width||isNaN(u.width))&&(u.width=n),(!u.height||isNaN(u.height))&&(u.height=r,0==h&&(u.height-=s)),u.autoPlay||(u.autoPlay=!1);var p=!1;return o||(o="player_replace_"+i,p=!0),swfobject.addDomLoadEvent(function(){if(p){var t=document.createElement("div");t.setAttribute("id",o),document.body.appendChild(t)}B(xt+"/v0.91.46.b5f48f1/flash/f_playerwidget.swf?partnerId="+e,o,u.width,u.height,mt,!1,u,d,f)}),this.players[c]=new D(c,o,u),this.players[c]},this.removePlayer=function(e){if(!e){var t="Session.removePlayer :: player cannot be null";throw U(t),new Error(t)}W("Session.removePlayer("+e.id+")"),it(e),delete this.players[e.id]}}function F(t){this.superClass=e,this.superClass(),this.sessionId=t,this.connection,this.subscribers={},this.publishers={},this.apiKey,this.capabilities,this.connected=!1,this.connecting=!1;var i,n,r=1,s=1,a=264,o=198;this.connect=function(e,t,n){if(this.connecting)return $("Session.connect :: Patience, please."),void 0;if(W("Session.connect("+e+")"),!TB.checkSystemRequirements()){var r="Session.connect :: Flash Player Version 10+ required";throw U(r),new Error(r)}if(!e)throw r="Session.connect :: API key required to connect",U(r),new Error(r);if(!t)throw r="Session.connect :: Token required to connect",U(r),new Error(r);if(this.connected)return $("Session.connect :: Session already connected"),void 0;this.connecting=!0;var s=n?ht(n):{};this.apiKey=e,this.token=t,this.properties=n;var a={};a.allowscriptaccess="always",s.wmode&&(a.wmode=s.wmode,delete s.wmode),s.connectionData&&(s.connectionData=encodeURIComponent(s.connectionData)),i="controller_"+this.sessionId;var o={};o.id=i,s.sessionId=this.sessionId,s.token=this.token;var l="replace_"+this.sessionId;swfobject.addDomLoadEvent(function(){var t=document.createElement("div");t.setAttribute("id",l),t.style.display="none",document.body.appendChild(t);var i=new Date;s.startTime=i.getTime(),swfobject.embedSWF(xt+"/v0.91.46.b5f48f1/flash/f_controllerwidget.swf?partnerId="+e,l,1,1,mt,!1,s,a,o)}),"file:"==window.location.protocol&&setTimeout("TB.controllerLoadCheck()",8e3)},this.disconnect=function(){if(W("Session.disconnect()"),!i||this.connecting)return $("Session.disconnect :: No connection to disconnect"),void 0;var e=document.getElementById(i);if(e){if(!isUnloading)try{e.cleanupView()}catch(t){var n="Session.disconnect :: Failed to disconnect - "+t;throw U(n),new Error(n)}}else $("Session.disconnect :: No connection to disconnect")},this.disconnectComponents=function(){W("Session.disconnectComponents() - disconnecting publishers and subscribers");for(var e in this.publishers)this.publishers[e].hasOwnProperty("id")&&tt(this.publishers[e]);for(var t in this.subscribers)this.subscribers[t].hasOwnProperty("id")&&tt(this.subscribers[t])},this.cleanup=function(){W("Session.cleanup()");for(var e in this.publishers)this.publishers[e].hasOwnProperty("id")&&this.unpublish(this.publishers[e]);for(var t in this.subscribers)this.subscribers[t].hasOwnProperty("id")&&this.unsubscribe(this.subscribers[t])},this.cleanupConnection=function(){return W("Session.cleanupConnection() - removing controller"),this.connection=null,i?(document.getElementById(i)?setTimeout(function(){nt(i,"TB.sessionDisconnected :: "),i=null},0):$("Session.cleanup :: No connection to clean up"),void 0):($("Session.cleanup :: No connection to clean up"),void 0)},this.publish=function(e,t){if(W("Session.publish("+e+"):"+t),!this.connection||!this.connection.connectionId){var i="Session.publish :: Connection required to publish";throw U(i),new Error(i)}if(!e){var n=document.createElement("div");e="publisher_replace_"+this.sessionId+"_"+r,n.setAttribute("id",e),document.body.appendChild(n)}var s=t?ht(t):{};if(void 0!=s.name&&s.name.length>1e3)throw i="Session.publish :: name property longer than 1000 chars.",U(i),new Error(i);if(void 0!=s.data&&s.data.length>1e3)throw i="Session.publish :: data property longer than 1000 chars.",U(i),new Error(i);var a="publisher_"+this.sessionId+"_"+r++,o=new w(a,e,s);return this._embedPublisher(o)},this._embedPublisher=function(e){var t=document.getElementById(e.replacedDivId);if(!t)throw errorMsg="Session.publish :: replaceElementId does not exist in DOM.",U(errorMsg),new Error(errorMsg);var i={};i.allowscriptaccess="always",i.cameraSelected=yt,e.properties.wmode?(i.wmode=e.properties.wmode,delete e.properties.wmode):i.wmode="transparent",e.properties.hasOwnProperty("style")&&(e.properties.style=encodeURIComponent(ut(e.properties.style)));var n={};n.id=e.id,n.style="outline:none;",e.properties.publisherId=e.id,e.properties.connectionId=this.connection.connectionId,e.properties.sessionId=this.sessionId,e.properties.token=this.token,e.properties.cameraSelected=yt,e.properties.simulateMobile=TB.simulateMobile,e.properties.publishCapability=this.capabilities.publish,(!e.properties.width||isNaN(e.properties.width))&&(e.properties.width=a),(!e.properties.height||isNaN(e.properties.height))&&(e.properties.height=o),this.publishers[e.id]=e;var r=new Date;return e.properties.startTime=r.getTime(),B(xt+"/v0.91.46.b5f48f1/flash/f_publishwidget.swf?partnerId="+this.apiKey,e.replacedDivId,e.properties.width,e.properties.height,mt,!1,e.properties,i,n),e},this.unpublish=function(e){if(!e){var t="Session.unpublish :: publisher cannot be null";throw U(t),new Error(t)}W("Session.unpublish("+e.id+")"),e.panelId&&dt&&dt.panels[e.panelId]&&dt.removePanel(dt.panels[e.panelId]),it(e),delete this.publishers[e.id]},this.forceUnpublish=function(e){var t;if(e&&"string"==typeof e)t=e;else{if(!e||"object"!=typeof e||!e.hasOwnProperty("streamId")){var n="Session.forceUnpublish :: Invalid stream type";throw U(n),new Error(n)}t=e.streamId}if(W("Session.forceUnpublish("+t+")"),!t)throw n="Session.forceUnpublish :: Stream does not exist.",U(n),new Error(n);try{var r=document.getElementById(i);r.forceUnpublish(t)}catch(s){throw n="Session.forceUnpublish :: "+s,U(n),new Error(n)}},this.subscribe=function(e,t,i){if(!this.connection||!this.connection.connectionId){var n="Session.subscribe :: Connection required to subscribe";throw U(n),new Error(n)}if(!e)throw n="Session.subscribe :: stream cannot be null",U(n),new Error(n);if(!e.hasOwnProperty("streamId"))throw n="Session.subscribe :: invalid stream object",U(n),new Error(n);if(W("Session.subscribe("+e.streamId+")"),!t){var r=document.createElement("div");t="subscriber_replace_"+this.sessionId+"_"+s,r.setAttribute("id",t),document.body.appendChild(r)}var l=document.getElementById(t);if(!l)throw n="Session.subscribe :: replaceElementId does not exist in DOM.",U(n),new Error(n);var c=i?ht(i):{};e&&e.hasOwnProperty("type")&&"multiplexed"==e.type&&(c.mixedStreamURI="live-lowlatency");var u="subscriber_"+e.streamId+"_"+s++,h=new x(e,u,t,c),d={};d.allowscriptaccess="always",c.wmode?(d.wmode=c.wmode,delete c.wmode):d.wmode="transparent",c.hasOwnProperty("style")&&(c.style=encodeURIComponent(ut(c.style)));var f={};f.id=h.id,f.style="outline:none;",c.subscriberId=u,c.connectionId=this.connection.connectionId,c.sessionId=this.sessionId,c.streamId=e.streamId,c.streamType=e.type,c.name=e.name,c.token=this.token,c.simulateMobile=TB.simulateMobile,c.isPublishing=Object.keys(this.publishers).length>0,e.hasAudio||(c.subscribeToAudio="false"),e.hasVideo||(c.subscribeToVideo="false"),c.orientation=e.orientation,c.peerId=e.peerId,(!c.width||isNaN(c.width))&&(c.width=a),(!c.height||isNaN(c.height))&&(c.height=o),this.subscribers[h.id]=h;var p=new Date;return c.startTime=p.getTime(),B(xt+"/v0.91.46.b5f48f1/flash/f_subscribewidget.swf?partnerId="+this.apiKey,t,c.width,c.height,mt,!1,c,d,f),h},this.unsubscribe=function(e){if(!e){var t="Subscribe.unsubscribe :: subscriber cannot be null";throw U(t),new Error(t)}W("Session.unsubscribe("+e.id+")"),it(e),delete this.subscribers[e.id]},this.signal=function(){if(W("Session.signal()"),!(i&&this.connection&&this.connection.connectionId))throw n="Session.signal :: Connection required to signal.",U(n),new Error(n);try{var e=document.getElementById(i);e.sendSignal()}catch(t){var n="Session.signal :: "+t;throw U(n),new Error(n)}},this.forceDisconnect=function(e){e&&W("Session.forceDisconnect("+e.connectionId+")");var t;if(e&&"string"==typeof e)t=e;else{if(!e||"object"!=typeof e||!e.hasOwnProperty("connectionId")){var n="Session.forceDisconnect :: Invalid connection type";throw U(n),new Error(n)}t=e.connectionId}if(!(i&&this.connection&&this.connection.connectionId))throw n="Session.forceDisconnect :: Connection required to forceDisconnect.",U(n),new Error(n);try{var r=document.getElementById(i);r.forceDisconnect(t)}catch(s){throw n="Session.forceDisconnect :: "+s,U(n),new Error(n)}},this.getSubscribersForStream=function(e){var t=null;if(!e){var i="Session.getSubscribersForStream :: stream cannot be null";throw U(i),new Error(i)}var n;if("string"==typeof e)n=e;else{if("object"!=typeof e||!e.hasOwnProperty("streamId"))throw i="Session.getSubscribersForStream :: Invalid stream type",U(i),new Error(i);n=e.streamId}t=[];for(var r in this.subscribers)this.subscribers[r].hasOwnProperty("stream")&&this.subscribers[r].stream.streamId==n&&t.push(this.subscribers[r]);return t},this.getPublisherForStream=function(e){if(!e){var t="Session.getPublisherForStream :: stream cannot be null";throw U(t),new Error(t)}var i;if("string"==typeof e)i=e;else{if("object"!=typeof e||!e.hasOwnProperty("streamId"))throw t="Session.getPublisherForStream :: Invalid stream type",U(t),new Error(t);i=e.streamId}for(var n in this.publishers){var r=document.getElementById(this.publishers[n].id);if(r)try{if(r.getStreamId()==i)return this.publishers[n]}catch(s){$("Failed to get streamId for publisher: "+this.publishers[n].id)}}return null},this.createArchive=function(e,t,n){if(W("Session.createArchive()"),!(i&&this.connection&&this.connection.connectionId))throw errorMsg="Session.createArchive :: Connection required to create an archive.",U(errorMsg),new Error(errorMsg);if(t!=TB.PER_SESSION&&t!=TB.PER_STREAM)throw errorMsg="Session.createArchive :: Invalid type specfied.",U(errorMsg),new Error(errorMsg);try{var r=document.getElementById(i);r.createArchive(e,t,n)}catch(s){throw errorMsg="Session.createArchive :: "+s,U(errorMsg),new Error(errorMsg)}},this.loadArchive=function(e){if(W("Session.loadArchive()"),!(i&&this.connection&&this.connection.connectionId))throw r="Session.loadArchive :: Connection required to load an archive.",U(r),new Error(r);try{var t=document.getElementById(i);t.loadArchive(e)}catch(n){var r="Session.loadArchive :: "+n;throw U(r),new Error(r)}},this.startRecording=function(e){if(W("Session.startRecording()"),e=Et[this.sessionId][e.archiveId],!e){var t="Session.startRecording :: Archive not created.";throw U(t),new Error(t)}if(e.type!=TB.PER_SESSION)throw t="Session.startRecording :: Trying to record per session on a "+e.type+" archive",U(t),new Error(t);if(e.recording)return $("Session.startRecording :: Trying to start recording when the archive is already recording"),void 0;if(!(i&&this.connection&&this.connection.connectionId))throw t="Session.startRecording :: Connection required to record an archive.",U(t),new Error(t);try{var n=document.getElementById(i);n.startRecordingSession(e.archiveId),e.recording=!0}catch(r){throw t="Session.startRecording :: "+r,U(t),new Error(t)
}},this.stopRecording=function(e){if(W("Session.stopRecording()"),e=Et[this.sessionId][e.archiveId],!e){var t="Session.stopRecording :: Archive not created.";throw U(t),new Error(t)}if(e.type!=TB.PER_SESSION)throw t="Session.stopRecording :: Trying to stop recording per session on a "+e.type+" archive",U(t),new Error(t);if(!(i&&this.connection&&this.connection.connectionId))throw t="Session.stopRecording :: Connection required to record an archive.",U(t),new Error(t);try{var n=document.getElementById(i);n.stopRecordingSession(e.archiveId),e.recording=!1}catch(r){throw t="Session.stopRecording :: "+r,U(t),new Error(t)}},this.closeArchive=function(e){if(W("Session.closeArchive()"),!(i&&this.connection&&this.connection.connectionId))throw r="Session.closeArchive :: Connection required to close an archive.",U(r),new Error(r);try{var t=document.getElementById(i);t.closeArchive(e.archiveId)}catch(n){var r="Session.closeArchive :: "+n;throw U(r),new Error(r)}},this.getStateManager=function(){if(W("Session.getStateManager()"),n)return n;if(i&&this.connection&&this.connection.connectionId)return n=new O(i);var e="Session.getStateManager :: Connection required to getState. Wait for sessionConnected before you getStateManager.";throw U(e),new Error(e)}}function O(t,i){this.superClass=e,this.superClass();var n=20;this.archiveId=i,this.set=function(e,r){var s=e;if(i){var a="StateManager.set :: not allowed on StateManager objects for archives.";throw U(a),new Error(a)}if("string"!=typeof e||"string"!=typeof r&&null!=r){if("object"!=typeof e||null!=r)throw a="StateManager.set :: Invalid parameters passed. set() takes either two string parameters or one object of key value pairs.",U(a),new Error(a);if(Object.keys(s).length>n)return U("StateManager.set :: Maximum number of keys exceeded"),this.dispatchEvent(new m("changeFailed",405,"Maximum number of keys exceeded",s)),void 0}else s={},s[e]=r;for(var o in s)if("string"!=typeof s[o]&&null!=s[o])return U("StateManager.set :: Invalid value "+s[o].toString()+" is not a string"),this.dispatchEvent(new m("changeFailed",403," Invalid value, value must be a string",s)),void 0;if(t)try{var l=document.getElementById(t);l.setState(s)}catch(c){throw a="StateManager.set :: "+c,U(a),new Error(a)}},this.superAddEventListener=this.addEventListener,this.addEventListener=function(e,n){var r=!1;if("changed"==e?r=null:0==e.indexOf("changed:")&&(r=e.split(":")[1]),r!==!1&&(i&&(r="TB_archive_"+i+"_"),t))try{var s=document.getElementById(t);s.subscribeToKeyChange(r)}catch(a){var o="StateManager.addEventListener :: "+a;throw U(o),new Error(o)}this.superAddEventListener(e,n)}}function j(e,t,i){try{var n=document.getElementById("controller_"+e);n.setEchoSuppressionEnabled(t,i)}catch(r){var s="Group :: "+r;throw U(s),new Error(s)}}function H(e,t){var i=null;try{var n=document.getElementById("controller_"+e),r=n.getGroupProperties(t);i=new A(r)}catch(s){var a="Group :: "+s;throw U(a),new Error(a)}return i}function L(e){e.success||(U("Failed to embed SWF "+e.id),TB.exceptionHandler("Failed to embed SWF "+e.id,"Embed Failed",2001))}function B(e,t,i,n,r,s,a,o,l){return swfobject.hasFlashPlayerVersion(r)?(swfobject.embedSWF(e,t,i,n,r,s,a,o,l,L),void 0):(U("Flash Player "+r+" or higher required"),TB.exceptionHandler("Flash Player "+r+" or higher required","Embed Failed",2001),void 0)}function q(e,t){return function(){null!=e?e(t):U("Event handler is null")}}function z(e){window.opentokdebug.debug("[FLASHDEBUG] opentok: "+e)}function W(e){window.opentokdebug.debug("[DEBUG] opentok: "+e)}function $(e){window.opentokdebug.warn("[WARN] opentok: "+e)}function U(e){window.opentokdebug.error("[ERROR] opentok: "+e)}function G(e,t){var i=document.getElementById("opentok_console");i&&(i.innerHTML+=t+"<br>")}function V(e){if(_t.hasOwnProperty(e))var t=_t[e];else t=new g(e,0/0,null);return t}function Q(e,t){return new v(e.streamId,V(e.connectionId),e.name,e.streamData,e.type,e.creationTime,e.hasAudio,e.hasVideo,e.orientation,t,e.peerId,e.quality)}function Y(e,t){for(var i=[],n=0;e.length>n;n++)i.push(Q(e[n],t));return i}function X(e,t){var i=new N(e.id,e.type,e.title,t,e.status);return Et.hasOwnProperty(t)||(Et[t]={}),Et[t][e.id]=i,i}function K(e){for(var t=[],i=0;e.length>i;i++){var n=new g(e[i].connectionId,e[i].creationTime,e[i].data);t.push(n),_t[n.connectionId]=n}return t}function Z(e,t){var i=[];for(var n in t)t[n].hasOwnProperty("groupId")&&i.push(new k(e,t[n].groupId));return i}function J(e){for(var t=new Array,i=0;e.length>i;i++)t.push(new E(e[i].name,e[i].status));return t}function et(e){for(var t=new Array,i=0;e.length>i;i++)t.push(new S(e[i].name,e[i].status));return t}function tt(e){if(e.hasOwnProperty("id")){var t=document.getElementById(e.id);if(t)try{t.cleanupView()}catch(i){$("Disconnecting "+e.id+" failed")}else $("Disconnecting "+e.id+" failed")}}function it(e){var t=document.getElementById(e.id);if(t)try{t.cleanupView();var i=t.parentNode;i.removeChild(t)}catch(n){$("Removing "+e.id+" failed "+n)}else $("Element "+e.id+" does not exist")}function nt(e,t){try{e&&(swfobject.removeSWF(e),e=null)}catch(i){var n=t+i;U(n),TB.exceptionHandler(n,"Internal Error",2e3)}}function rt(e,t,i){var n=document.getElementById(e);if(!n)throw s="Component "+e+" does not exist.",U(s),new Error(s);try{n.setStreamProperty(t,i)}catch(r){var s="Changing settings on component "+e+" failed.";throw U(s),new Error(s)}}function st(e,t,i){var n=document.getElementById(e);if(!n)throw s="Publisher "+e+" does not exist.",U(s),new Error(s);try{i?n.setCamera(t.name):n.setMicrophone(t.name)}catch(r){var s="Changing hardware settings on publisher "+e+" failed.";throw U(s),new Error(s)}}function at(e,t){t=t||1/0,e=e||document.body;for(var i,n,r=1,s=0,a=e.childNodes,o=a.length;o>s;)i=a[s++],1==i.nodeType&&("static"!==ot(i,"position")?(n=ot(i,"z-index"),n="auto"==n?at(i):parseInt(n,10)||0):n=at(i),n>r&&t>=n&&(r=n));return r}function ot(e,t){var i,n,r=document.defaultView||window;return 1==e.nodeType&&(i=t.replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()}),n=e.style[i],n||(e.currentStyle?n=e.currentStyle[i]:r.getComputedStyle&&(n=r.getComputedStyle(e,"").getPropertyValue(t)))),n||""}function lt(e,t,i){var n=document.createElement("input");n.setAttribute("name",t),n.setAttribute("value",i),n.setAttribute("type","hidden"),e.appendChild(n)}function ct(e){try{var t=document.getElementById(e);if(t)return t.fetchData()}catch(i){return $("Failed to get logs for "+e+" "+i),""}}function ut(e){var t="{ ";for(var i in e)t+="boolean"==typeof e[i]?'"'+i+'":'+e[i]+", ":'"'+i+'":"'+e[i].toString()+'", ';return t=t.length>1?t.substring(0,t.length-2)+" }":"{}"}function ht(e){var t=e instanceof Array?[]:{};for(var i in e)"clone"!=i&&(t[i]=e[i]&&"object"==typeof e[i]?ht(e[i]):e[i]);return t}this.isUnloading=!1,window.onunload=function(){isUnloading=!0;for(var e in TB.sessions)TB.sessions[e].hasOwnProperty("disconnect")&&(TB.sessionDisconnectedHandler=function(){},TB.sessions[e].disconnect(),TB.sessions[e].cleanupConnection(),TB.sessions[e].cleanup())};var dt,ft,pt,mt="10.0.0",gt=215,vt=138,yt=!1,bt=!1,_t={},wt="true",xt="http://staging.tokbox.com";"true"==wt&&"https:"==window.location.protocol&&(xt="https://staging.tokbox.com");var Ct=new e,Et={},St={},kt=!1;return{sessions:{},groups:{},LOG:5,DEBUG:4,INFO:3,WARN:2,ERROR:1,NONE:0,ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",SESSION_CONNECTED:"sessionConnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL_RECEIVED:"signalReceived",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",ARCHIVE_CREATED:"archiveCreated",ARCHIVE_CLOSED:"archiveClosed",ARCHIVE_LOADED:"archiveLoaded",ARCHIVE_SAVED:"archiveSaved",SESSION_RECORDING_STARTED:"sessionRecordingStarted",SESSION_RECORDING_STOPPED:"sessionRecordingStopped",SESSION_RECORDING_IN_PROGRESS:"sessionRecordingInProgress",STREAM_RECORDING_IN_PROGRESS:"streamRecordingInProgress",SESSION_NOT_RECORDING:"sessionNotRecording",STREAM_RECORDING_STARTED:"streamRecordingStarted",STREAM_RECORDING_STOPPED:"streamRecordingStopped",PLAYBACK_STARTED:"playbackStarted",PLAYBACK_STOPPED:"playbackStopped",RECORDING_STARTED:"recordingStarted",RECORDING_STOPPED:"recordingStopped",GROUP_PROPERTIES_UPDATED:"groupPropertiesUpdated",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",HAS_REQUIREMENTS:1,OLD_FLASH_VERSION:0,BASIC_STREAM:"basic",MULTIPLEXED_STREAM:"multiplexed",ARCHIVED:"archive",GLOBAL_GROUP:"global",MULTIPLEXER_TIMEOUT_BASED_SWITCH:0,MULTIPLEXER_ACTIVITY_BASED_SWITCH:1,simulateMobile:!1,setLogLevel:function(e){window.opentokdebug.setLevel(e),e==this.NONE?window.opentokdebug.setCallback(null):window.opentokdebug.setCallback(G,!0),W("TB.setLogLevel("+e+")")},log:function(e){window.opentokdebug.log("[LOG] opentok: "+e)},initSession:function(e){if(W("TB.initSession("+e+")"),null==e||""==e){var t="TB.initSession :: sessionId cannot be null";throw U(t),new Error(t)}return this.sessions.hasOwnProperty(e)||(this.sessions[e]=new F(e)),this.sessions[e]},initDeviceManager:function(e){if(W("TB.initDeviceManager("+e+")"),!e){var t="TB.initDeviceManager :: apiKey cannot be null";throw U(t),new Error(t)}return dt||(dt=new M(e)),dt},initRecorderManager:function(e){if(W("TB.initRecorderManager("+e+")"),!e){var t="TB.initRecorderManager :: apiKey cannot be null";throw U(t),new Error(t)}return ft||(ft=new R(e)),ft},addEventListener:function(e,t){W("TB.addEventListener("+e+")"),Ct.addEventListener(e,t)},removeEventListener:function(e,t){W("TB.removeEventListener("+e+")"),Ct.removeEventListener(e,t)},dispatchEvent:function(e){W("TB.dispatchEvent()"),e.target=this,Ct.dispatchEvent(e)},checkSystemRequirements:function(){return W("TB.checkSystemRequirements()"),swfobject.hasFlashPlayerVersion(mt)?this.HAS_REQUIREMENTS:this.OLD_FLASH_VERSION},exceptionHandler:function(e,t,n){U("TB.exception :: title: "+t+" msg: "+e+" errorCode: "+n);try{this.dispatchEvent(new i(this.EXCEPTION,e,t,n))}catch(r){var s="TB.exception :: Failed to dispatch exception - "+r;U(s)}},controllerLoadedHandler:function(){kt=!0},controllerLoadCheck:function(){if(!kt){var e="The connection timed out. Make sure that you have allowed this page in theFlash Player Global Settings Manager. Go to:";adobeURL="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",prompt(e,adobeURL)}},flashLogger:function(e){z(e)},destroyStreamHandler:function(e,t){W("TB.destroyStream");try{var i=this.sessions[e],n=Y(t,e),r=function(){for(var e=0;n.length>e;e++){var t=i.getPublisherForStream(n[e]);t&&i.unpublish(t)}};setTimeout(r,2)}catch(s){var a="TB.destroyStream :: "+s;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},sessionConnectedHandler:function(e,t,i,n,r,a,o,l){W("TB.sessionConnected");try{for(var c=this.sessions[e],u=0,h=i.length;h>u;u++)if(connection=i[u],connection.connectionId==t){c.connection=new g(t,connection.creationTime,connection.data);break}c.connected=!0,c.connecting=!1,c.connection.quality=o,c.capabilities=a;for(var d=K(i),f=Y(n,c.sessionId),p=Z(e,r),u=0;p.length>u;u++)this.groups[e+"_"+p[u].groupId]=p[u];for(var m=[],u=0;l.length>u;u++){var v=X(l[u],e);m.push(v)}c.dispatchEvent(new s(this.SESSION_CONNECTED,d,f,p,m))}catch(y){var b="TB.sessionConnected :: "+y;U(b),TB.exceptionHandler(b,"Internal Error",2e3)}},sessionDisconnectedHandler:function(e,t){W("TB.sessionDisconnected("+t+")");try{var i=this.sessions[e];i.disconnectComponents(),i.cleanupConnection(),i.connected=!1;var n=new a(this.SESSION_DISCONNECTED,t,!0);i.dispatchEvent(n);var r=function(){n.isDefaultPrevented()||i.cleanup()};setTimeout(r,2)}catch(s){var o="TB.sessionDisconnected :: "+s;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},streamCreatedHandler:function(e,t,i){W("TB.streamCreated");try{var n=this.sessions[e],s=Y(t,e);n.dispatchEvent(new r(this.STREAM_CREATED,s,i));var a=Et[e];for(var o in a)for(var l=0;s.length>l;l++)if(s[l].connection.connectionId==connection.connectionId)for(var c in n.publishers)if(n.publishers[c].hasOwnProperty("id")){var u=document.getElementById(n.publishers[c].id);o&&a[o]&&a[o].type==TB.PER_SESSION&&1==a[o].recording&&u.signalRecordingStarted()}}catch(h){var d="TB.streamCreated :: "+h;U(d),TB.exceptionHandler(d,"Internal Error",2e3)}},streamDestroyedHandler:function(e,t,i){W("TB.streamDestroyed");try{var n=this.sessions[e],s=Y(t,e),a=new r(this.STREAM_DESTROYED,s,i,!0);n.dispatchEvent(a);var o=function(){if(!a.isDefaultPrevented())for(var e=0;a.streams.length>e;e++){for(var t=n.getSubscribersForStream(a.streams[e]),i=0;t.length>i;i++)n.unsubscribe(t[i]);var r=n.getPublisherForStream(a.streams[e]);r&&n.unpublish(r)}};setTimeout(o,2)}catch(l){var c="TB.streamDestroyed :: "+l;U(c),TB.exceptionHandler(c,"Internal Error",2e3)}},streamPropertyChangedHandler:function(e,t,i,n,r){W("TB.streamPropertyChangedHandler");var s=this.sessions[e],a=Q(t,e),o=new d(this.STREAM_PROPERTY_CHANGED,a,i,n,r);s.dispatchEvent(o);try{var l;if("hasAudio"==i){for(var c in s.subscribers)if(l=s.subscribers[c],l.hasOwnProperty("stream")&&l.stream.streamId==a.streamId){l._subscribeToAudio(r,!0);break}}else if("hasVideo"==i){for(c in s.subscribers)if(l=s.subscribers[c],l.hasOwnProperty("stream")&&l.stream.streamId==a.streamId){l._subscribeToVideo(r,!0);break}}else if("orientation"==i){for(c in s.subscribers)if(l=s.subscribers[c],l.hasOwnProperty("stream")&&l.stream.streamId==a.streamId){l.changeOrientation(r);break}}else"quality"==i||W("Unknown property changed")}catch(u){var h="TB.streamPropertyChangedHandler :: "+u;U(h),TB.exceptionHandler(h,"Internal Error",2e3)}},microphoneLevelChangedHandler:function(e,t,i,n){try{var r=this.sessions[e];if(!r){var s="TB.microphoneLevelChangedHandler :: Invalid session ID: "+e;return U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0}r.subscribers[t];var a=new l(this.MICROPHONE_LEVEL_CHANGED,i,n);r.dispatchEvent(a)}catch(o){s="microphoneLevelChanged :: "+o,U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},connectionCreatedHandler:function(e,t,i){W("TB.connectionCreated");try{var r=this.sessions[e],s=K(t);r.dispatchEvent(new n(this.CONNECTION_CREATED,s,i))}catch(a){var o="TB.connectionCreated :: "+a;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},connectionDestroyedHandler:function(e,t,i){W("TB.connectionDestroyed");try{var r=this.sessions[e],s=K(t);r.dispatchEvent(new n(this.CONNECTION_DESTROYED,s,i))}catch(a){var o="TB.connectionDestroyed :: "+a;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},signalHandler:function(e,t){W("TB.signal");try{var i=this.sessions[e];i.dispatchEvent(new o(this.SIGNAL_RECEIVED,V(t)))}catch(n){var r="TB.signal ::"+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},archiveCreatedHandler:function(e,t){W("TB.archiveCreatedHandler:"+e+" - "+t);try{var i=this.sessions[e],n=X(t,e);i.dispatchEvent(new f(this.ARCHIVE_CREATED,[n]))}catch(r){var s="TB.archiveCreatedHandler :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},archiveClosedHandler:function(e,t){W("TB.archiveClosedHandler:"+e+" - "+t.id);try{var i=this.sessions[e];i.dispatchEvent(new f(this.ARCHIVE_CLOSED,[Et[e][t.id]])),delete Et[e][t.id]}catch(n){var r="TB.archiveClosedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},archiveLoadedHandler:function(e,t){W("TB.archiveLoadedHandler:"+e+" - "+t.archiveId);try{var i=this.sessions[e],n=new N(t.id,t.type,t.title,e);St.hasOwnProperty(e)||(St[e]={}),St[e][t.id]=n,i.dispatchEvent(new f(this.ARCHIVE_LOADED,[n]))}catch(r){var s="TB.archiveLoadedHandler :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},sessionRecordingStartedHandler:function(e,t){W("TB.sessionRecordingStartedHandler:"+e+" - "+t.id);try{var i=this.sessions[e];i.dispatchEvent(new f(this.SESSION_RECORDING_STARTED,[Et[t.id]]))}catch(n){var r="TB.sessionRecordingStartedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},sessionRecordingStoppedHandler:function(e,t){W("TB.sessionRecordingStoppedHandler:"+e+" - "+t);try{var i=this.sessions[e];i.dispatchEvent(new f(this.SESSION_RECORDING_STOPPED,[Et[t.id]]));for(var n in i.publishers)if(i.publishers[n].hasOwnProperty("id")){var r=document.getElementById(i.publishers[n].id);r.signalRecordingStopped()}}catch(s){var a="TB.sessionRecordingStoppedHandler :: "+s;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},sessionRecordingInProgressHandler:function(e){W("TB.sessionRecordingInProgressHandler");try{var i=this.sessions[e];i.dispatchEvent(new t(this.SESSION_RECORDING_IN_PROGRESS,!1))}catch(n){var r="TB.sessionRecordingStartedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},sessionNotRecordingHandler:function(e){W("TB.sessionNotRecordingHandler");try{var i=this.sessions[e];i.dispatchEvent(new t(this.SESSION_NOT_RECORDING,!1))}catch(n){var r="TB.sessionNotRecordingHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},streamRecordingStartedHandler:function(e,t){W("TB.streamRecordingStartedHandler:"+e);try{var i=this.sessions[e],n=Y(t,e);i.dispatchEvent(new r(this.STREAM_RECORDING_STARTED,n,"",!1));for(var s in i.publishers)if(i.publishers[s].hasOwnProperty("id"))for(var a=document.getElementById(i.publishers[s].id),o=0;t.length>o;o++)if(a.getStreamId()==t[o].streamId){a.signalRecordingStarted(),W("TB.streamRecordingStartedHandler: signal: "+t[o].streamId);break}}catch(l){var c="TB.streamRecordingStartedHandler :: "+l;U(c),TB.exceptionHandler(c,"Internal Error",2e3)}},streamRecordingStoppedHandler:function(e,t){W("TB.streamRecordingStoppedHandler");try{var i=this.sessions[e],n=Y(t,e);i.dispatchEvent(new r(this.STREAM_RECORDING_STOPPED,n,"",!1));for(var s in i.publishers)if(i.publishers[s].hasOwnProperty("id"))for(var a=document.getElementById(i.publishers[s].id),o=0;t.length>o;o++)if(a.getStreamId()==t[o].streamId){a.signalRecordingStopped(),W("TB.streamRecordingStoppedHandler: signal: "+t[o].streamId);break}}catch(l){var c="TB.streamRecordingStoppedHandler :: "+l;U(c),TB.exceptionHandler(c,"Internal Error",2e3)}},streamRecordingInProgressHandler:function(e,t){W("TB.streamRecordingInProgressHandler");try{var i=this.sessions[e],n=Y(t,e);i.dispatchEvent(new r(this.STREAM_RECORDING_IN_PROGRESS,n,"",!1))}catch(s){var a="TB.streamRecordingInProgressHandler :: "+s;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},playbackStartedHandler:function(e,t){W("TB.playbackStartedHandler");try{var i=this.sessions[e];archiveObj=new N(t.id,t.type,t.title,e),i.dispatchEvent(new f(this.PLAYBACK_STARTED,[archiveObj]))}catch(n){var r="TB.playbackStartedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},playbackStoppedHandler:function(e,t){W("TB.playbackStoppedHandler");try{var i=this.sessions[e];archiveObj=new N(t.id,t.type,t.title,e),i.dispatchEvent(new f(this.PLAYBACK_STOPPED,[archiveObj]))}catch(n){var r="TB.playbackStoppedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},groupPropertiesUpdatedHandler:function(e,i){W("TB.groupPropertiesUpdated");try{var n=this.groups[e+"_"+i.groupId];if(!n)return U("TB.groupPropertiesUpdated :: Invalid group ID: "+e+"_"+i.groupId),void 0;n.dispatchEvent(new t(this.GROUP_PROPERTIES_UPDATED))}catch(r){var s="TB.groupPropertiesUpdated :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},videoComponentLoadedHandler:function(e,i){try{if(e){var n=this.sessions[e];if(!n)return;var r=n.publishers[i],s=n.subscribers[i];r&&!r.loaded&&(r.loaded=!0,r.modified&&(null!=r.audioPublished&&r.publishAudio(r.audioPublished),null!=r.videoPublished&&r.publishVideo(r.videoPublished),r.setMicrophoneGain(r.gain),r.setStyle(r._style),r.modified=!1),r.dispatchEvent(new t("loaded"))),s&&!s.loaded&&(s.loaded=!0,s.modified&&(null!=s.audioSubscribed&&s.subscribeToAudio(s.audioSubscribed),null!=s.videoSubscribed&&s.subscribeToVideo(s.videoSubscribed),s.setAudioVolume(s.audioVolume),s.setStyle(s._style),s.modified=!1),s.dispatchEvent(new t("loaded")))}else{var a=ft.players[i];a&&a._archiveId&&(a.loadArchive(a._archiveId),a._archiveId=null),a&&a._play&&(a.play(),a._play=!1);var o=ft.recorders[i],l=a?a:o;l&&!l.loaded&&(l.loaded=!0,l.modified&&(l.setStyle(l._style),l==o&&l._title&&(l.setTitle(_title),_title=""),l.modified=!1),l.dispatchEvent(new t("loaded")))}}catch(c){var u="videoComponentLoaded:: initialize component "+i+" - "+c;U(u),TB.exceptionHandler(u,"Internal Error",2e3)}},pubWidgetStyleHeightFrom:null,pubWidgetStyleWidthFrom:null,resizePublisherToTarget:function(e,t){W("TB.resize");try{var i=this.sessions[e];if(!i){var n="TB.resize :: Invalid session ID: "+e;return U(n),TB.exceptionHandler(n,"Internal Error",2e3),void 0}var r=i.publishers[t];if(!r)return n="TB.resize :: Invalid publisher ID: "+t,U(n),TB.exceptionHandler(n,"Internal Error",2e3),void 0;var s=document.getElementById(t);if(!s)return n="TB.resize :: Publisher "+t+" does not exist in the DOM",U(n),TB.exceptionHandler(n,"Internal Error",2e3),void 0;var a=s.width,o=s.height;s.width!=r.properties.width&&(s.width=r.properties.width),s.height!=r.properties.height&&(s.height=r.properties.height),s.style.height!=pubWidgetStyleHeightFrom&&(s.style.height=pubWidgetStyleHeightFrom),s.style.width!=pubWidgetStyleWidthFrom&&(s.style.width=pubWidgetStyleWidthFrom);var l=s.width,c=s.height;(a!=l||o!=c)&&r.dispatchEvent(new h(this.RESIZE,a,l,o,c))}catch(u){n="resizePublisherToTarget :: Error resizing publisher - "+u,U(n),TB.exceptionHandler(n,"Internal Error",2e3)}},resizePublisherToShowSecurity:function(e,t,i){W("TB.resize");var n=this.sessions[e];if(!n){var r="TB.resize :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=n.publishers[t];if(!s)return r="TB.resize :: Invalid publisher ID: "+t,U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0;var a=document.getElementById(t);if(!a)return r="TB.resize :: Publisher "+t+" does not exist in the DOM",U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0;var o=s.properties.width=a.width,l=s.properties.height=a.height;pubWidgetStyleHeightFrom=a.style.height,pubWidgetStyleWidthFrom=a.style.width;var c=gt*i,u=vt*i;c>a.width&&(a.width=c,a.style.width=c+"px"),u>a.height&&(a.height=u,a.style.height=u+"px");var d=a.width,f=a.height,p=a.style;(o!=d||l!=f||pubWidgetStyleWidthFrom!=p.width||pubWidgetStyleHeightFrom!=p.height)&&s.dispatchEvent(new h(this.RESIZE,o,d,l,f))},settingsButtonClickHandler:function(e,i){W("TB.settingsButtonClick");try{var n=this.sessions[e];if(!n){var r="TB.settingsButtonClick :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=n.publishers[i];if(!s)return r="TB.settingsButtonClick :: Invalid publisher ID: "+i,U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0;var a=new t(this.SETTINGS_BUTTON_CLICK,!0);s.dispatchEvent(a);var o=function(){if(!a.isDefaultPrevented()){var e=TB.initDeviceManager(n.apiKey);e.displayPanel(null,s,{})}};setTimeout(o,2)}catch(l){r="settingsButtonClick :: "+l,U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},recorderSettingsButtonClickHandler:function(e){W("TB.recorderSettingsButtonClick");try{var i=ft.recorders[e];if(!i)return errorMsg="TB.recorderSettingsButtonClick :: Invalid recorder ID: "+e,U(errorMsg),TB.exceptionHandler(errorMsg,"Internal Error",2e3),void 0;var n=new t(this.SETTINGS_BUTTON_CLICK,!0);i.dispatchEvent(n);var r=function(){if(!n.isDefaultPrevented()){var e=TB.initDeviceManager(ft.apiKey);e.displayPanel(null,i,{})}};setTimeout(r,2)}catch(s){errorMsg="recorderSettingsButtonClick :: "+s,U(errorMsg),TB.exceptionHandler(errorMsg,"Internal Error",2e3)}},deviceAccessHandler:function(e,i,n){W("TB.deviceAccessHandler: "+n);try{var r=this.sessions[e];if(!r){var s="TB.deviceAccessHandler :: Invalid session ID: "+e;return U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0}var a=r.publishers[i];if(!a)return s="TB.deviceAccessHandler :: Invalid publisher ID: "+i,U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0;var o=new t(n,!0);if(a.dispatchEvent(o),n==TB.ACCESS_DENIED){var l=function(){var e=document.getElementById(a.id);if(e){var t=e.parentNode;r.unpublish(a);var i=document.createElement("div");i.setAttribute("id",a.replacedDivId),t.appendChild(i),r._embedPublisher(a)}};setTimeout(l,2)}}catch(c){s=n+" :: "+c,U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},deviceInactiveHandler:function(e,t,i,n){W("TB.deviceInactiveHandler");try{var r=this.sessions[e];if(!r){var s="TB.deviceInactiveHandler :: Invalid session ID: "+e;return U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0}var a=r.publishers[t];if(!a)return U("TB.deviceInactiveHandler :: Invalid publisher ID: "+t),void 0;var o=new c(this.DEVICE_INACTIVE,i,n);a.dispatchEvent(o)}catch(l){s="deviceInactive :: "+l,U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},echoCancellationModeChangedHandler:function(e,t,i,n){W("TB.echoCancellationModeChangedHandler");try{var r=this.sessions[e];if(!r){var s="TB.echoCancellationModeChangedHandler :: Invalid session ID: "+e;return U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0}var a=r.publishers[t];if(!a)return U("TB.echoCancellationModeChangedHandler :: Invalid publisher ID: "+t),void 0;var o=new c(this.ECHO_CANCELLATION_MODE_CHANGED,i,n);a.dispatchEvent(o)}catch(l){s="echoCancellationModeChanged :: "+l,U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},devicesDetectedHandler:function(e,t,i,n){W("TB.devicesDetected");try{var r=J(e),s=et(t);dt.dispatchEvent(new u(this.DEVICES_DETECTED,r,s,r[i],s[n])),setTimeout(function(){nt(pt,"devicesDetectedHandler :: "),pt=null},0)}catch(a){var o="devicesDetectedHandler :: "+a;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},devicesSelectedHandler:function(e,t,i){W("TB.devicesSelected");try{yt=!0;var n=dt.panels[e];if(!n)return U("TB.devicesSelected :: Invalid DevicePanel ID: "+e),void 0;n.component&&(n.component.setCamera(t),n.component.setMicrophone(i)),n.dispatchEvent(new c(this.DEVICES_SELECTED,t,i))}catch(r){var s="devicesSelected :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},closeButtonClickHandler:function(e){W("TB.closeButtonClick");try{var i=dt.panels[e];if(!i){var n="TB.devicesSelected :: Invalid DevicePanel ID: "+e;return U(n),TB.exceptionHandler(n,"Internal Error",2e3),void 0}var r=new t(this.CLOSE_BUTTON_CLICK,!0);i.dispatchEvent(r);var s=function(){r.isDefaultPrevented()||dt.removePanel(i)};setTimeout(s,2)}catch(a){n="closeButtonClick :: "+a,U(n),TB.exceptionHandler(n,"Internal Error",2e3)}},playerArchiveLoadedHandler:function(e){W("Player.archiveLoadedHandler");try{var i=ft.players[e];i.dispatchEvent(new t(this.ARCHIVE_LOADED))}catch(n){var r="Player.archiveLoadedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},playingStartedHandler:function(e){W("Player.playingHandler");try{var i=ft.players[e];i.dispatchEvent(new t(this.PLAYBACK_STARTED))}catch(n){var r="Player.playingStartedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},playingStoppedHandler:function(e){W("Player.playingStoppedHandler");try{var i=ft.players[e];i.dispatchEvent(new t(this.PLAYBACK_STOPPED))}catch(n){var r="Player.playingStoppedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},recordingStartedHandler:function(e){W("Recorder.recordingStartedHandler");try{var i=ft.recorders[e];i.dispatchEvent(new t(this.RECORDING_STARTED))}catch(n){var r="Recorder.recordingStartedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},recordingStoppedHandler:function(e){W("Recorder.recordingStoppedHandler");try{var i=ft.recorders[e];i.dispatchEvent(new t(this.RECORDING_STOPPED))}catch(n){var r="Recorder.recordingStoppedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},recorderPlaybackStartedHandler:function(e){W("Recorder.playbackStartedddHandler");try{var i=ft.recorders[e];i.dispatchEvent(new t(this.PLAYBACK_STARTED))}catch(n){var r="Recorder.playbackStartedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},recorderPlaybackStoppedHandler:function(e){W("Recorder.playbackStoppedHandler");try{var i=ft.recorders[e];i.dispatchEvent(new t(this.PLAYBACK_STOPPED))}catch(n){var r="Recorder.playbackStoppedHandler :: "+n;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},archiveSavedHandler:function(e,t){W("Recorder.archiveSavedHandler");try{var i=ft.recorders[e],n=new N(t.id,t.type,t.title);i.dispatchEvent(new f(this.ARCHIVE_SAVED,[n]))}catch(r){var s="Recorder.archiveSavedHandler :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},stateChangedHandler:function(e,t){function i(t){t=t.replace(/"/g,"");var i=t.match(/TB_archive_([^_]+)_(.*)/);if(i){archiveId=i[1],t=i[2];var r=St[e][archiveId];if(!r){var s="Archive.startPlayback :: Archive not loaded.";return U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0}return r.getStateManager()}return n.getStateManager()}W("TB.stateChangeHandler");var n=this.sessions[e];if(!n){var r="TB.stateChangedHandler :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=!1;for(var a in t){var o=i(a);s||(o.dispatchEvent(new p("changed",t)),s=!0);var l={};l[a]=t[a],o.dispatchEvent(new p("changed:"+a,l))}s||n.getStateManager().dispatchEvent(new p("changed",t))},stateChangedFailedHandler:function(e,t,i,n){W("TB.stateChangedFailedHandler");var r=this.sessions[e];if(!r){var s="TB.stateChangedFailedHandler :: Invalid session ID: "+e;return U(s),TB.exceptionHandler(s,"Internal Error",2e3),void 0}var a=r.getStateManager();a.dispatchEvent(new m("changeFailed",t,i,n))},reportIssueHandler:function(e,t){if(W("TB.reportIssue"),null==t&&(t=!1),!bt){var i=document.createElement("form");i.setAttribute("action","http://staging.tokbox.com/reportIssue.php"),i.setAttribute("method","post"),i.setAttribute("target","formresult"),lt(i,"issueId",e),lt(i,"userAgent",navigator.userAgent),lt(i,"environment","JS");var n=swfobject.getFlashPlayerVersion();lt(i,"flashVersion",n.major+"."+n.minor+"."+n.release);var r=window.opentokdebug.getLogs();lt(i,"jsLogs",r);var s=!1,a=0;for(var o in TB.sessions){var l=TB.sessions[o];if(l.hasOwnProperty("sessionId")){s||(lt(i,"apiKey",l.apiKey),s=!0);var c=0;lt(i,"session_"+ ++a,l.sessionId);var u="controller_"+l.sessionId,h=ct(u);if(h&&lt(i,"widget_"+l.sessionId+"_"+ ++c,h),l.hasOwnProperty("subscribers"))for(var d in l.subscribers)if(l.subscribers[d].hasOwnProperty("id")){var f=ct(l.subscribers[d].id);lt(i,"widget_"+l.sessionId+"_"+ ++c,f)}if(l.hasOwnProperty("publishers"))for(var p in l.publishers)if(l.publishers[p].hasOwnProperty("id")){var m=ct(l.publishers[p].id);lt(i,"widget_"+l.sessionId+"_"+ ++c,m)}}}if(!t){var g=document.createElement("textarea");g.setAttribute("name","description"),g.setAttribute("rows",8),g.setAttribute("cols",40),g.style.height="110px",g.style.width="300px",g.style.display="block",g.style.visibility="visible",i.appendChild(g);var v=document.createElement("input");v.setAttribute("type","submit"),v.setAttribute("value","Report Issue"),v.style.display="inline",v.style.visibility="visible",i.appendChild(v);var y=document.createElement("input");y.setAttribute("type","button"),y.setAttribute("value","Cancel"),y.style.display="inline",y.style.visibility="visible",i.appendChild(y);var b=390,_=242,w=document.createElement("div");w.setAttribute("id","opentokReportIssue"),w.style.position="absolute",w.style.top="25%",w.style.left="50%",w.style.width=b+"px",w.style.height=_+"px",w.style.marginLeft=0-b/2+"px",w.style.marginTop=0-_/4+"px",w.style.paddingLeft="32px",w.style.paddingRight="15px",w.style.paddingTop="15px",w.style.display="block",w.style.visibility="visible",w.style.lineHeight="15px",w.style.zIndex=at()+1,w.innerHTML='<span style="color:#4c4c4c;font-size:18px;display:inline;visibility:visible;">We\'re sorry to hear that something went wrong.</span><br/><br/>Please help us to debug your issue by providing a description of what happened.',w.style.backgroundColor="#F7F7F7",w.style.border="1px solid #CCC",w.style.fontWeight="normal",w.style.fontFamily="'Lucida Grande', 'Trebuchet MS', sans-serif",w.style.color="#4c4c4c",w.style.fontSize="13px",w.appendChild(i),document.body.appendChild(w),bt=!0,closeForm=function(){document.body.removeChild(w),bt=!1},y.onclick=closeForm}i.onsubmit=function(){window.open("#","formresult","scrollbars=no,menubar=no,height=200,width=400,resizable=yes,toolbar=no,status=no"),setTimeout(function(){closeForm()},1e3)},t&&(lt(i,"showReport",!0),document.body.appendChild(i),i.submit())
}}}}();/*!
 *	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
 * 	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
 * 	
 * 	Permission is hereby granted, free of charge, to any person obtaining a copy
 * 	of this software and associated documentation files (the "Software"), to deal
 * 	in the Software without restriction, including without limitation the rights
 * 	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * 	copies of the Software, and to permit persons to whom the Software is
 * 	furnished to do so, subject to the following conditions:
 * 	
 * 	The above copyright notice and this permission notice shall be included in
 * 	all copies or substantial portions of the Software
 */
var swfobject=function(){function e(){if(!W){try{var e=O.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}W=!0;for(var i=L.length,n=0;i>n;n++)L[n]()}}function t(e){W?e():L[L.length]=e}function i(e){if(typeof F.addEventListener!=T)F.addEventListener("load",e,!1);else if(typeof O.addEventListener!=T)O.addEventListener("load",e,!1);else if(typeof F.attachEvent!=T)v(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function n(){H?r():s()}function r(){var e=O.getElementsByTagName("body")[0],t=g(A);t.setAttribute("type",D);var i=e.appendChild(t);if(i){var n=0;(function(){if(typeof i.GetVariable!=T){var r=i.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),G.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>n)return n++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),i=null,s()})()}else s()}function s(){var e=B.length;if(e>0)for(var t=0;e>t;t++){var i=B[t].id,n=B[t].callbackFn,r={success:!1,id:i};if(G.pv[0]>0){var s=m(i);if(s)if(!y(B[t].swfVersion)||G.wk&&312>G.wk)if(B[t].expressInstall&&o()){var u={};u.data=B[t].expressInstall,u.width=s.getAttribute("width")||"0",u.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(u.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(u.align=s.getAttribute("align"));for(var h={},d=s.getElementsByTagName("param"),f=d.length,p=0;f>p;p++)"movie"!=d[p].getAttribute("name").toLowerCase()&&(h[d[p].getAttribute("name")]=d[p].getAttribute("value"));l(u,h,i,n)}else c(s),n&&n(r);else _(i,!0),n&&(r.success=!0,r.ref=a(i),n(r))}else if(_(i,!0),n){var g=a(i);g&&typeof g.SetVariable!=T&&(r.success=!0,r.ref=g),n(r)}}}function a(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=T)t=i;else{var n=i.getElementsByTagName(A)[0];n&&(t=n)}return t}function o(){return!$&&y("6.0.65")&&(G.win||G.mac)&&!(G.wk&&312>G.wk)}function l(e,t,i,n){$=!0,E=n||null,S={success:!1,id:i};var r=m(i);if(r){"OBJECT"==r.nodeName?(x=u(r),C=null):(x=r,C=i),e.id=M,(typeof e.width==T||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==T||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),O.title=O.title.slice(0,47)+" - Flash Player Installation";var s=G.ie&&G.win?"ActiveX":"PlugIn",a="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+O.title;if(typeof t.flashvars!=T?t.flashvars+="&"+a:t.flashvars=a,G.ie&&G.win&&4!=r.readyState){var o=g("div");i+="SWFObjectNew",o.setAttribute("id",i),r.parentNode.insertBefore(o,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function c(e){if(G.ie&&G.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=g("div");if(G.win&&G.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(A)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,s=0;r>s;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||t.appendChild(n[s].cloneNode(!0))}}return t}function h(e,t,i){var n,r=m(i);if(G.wk&&312>G.wk)return n;if(r)if(typeof e.id==T&&(e.id=i),G.ie&&G.win){var s="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?s+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(s+=" "+a+'="'+e[a]+'"'));var o="";for(var l in t)t[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+t[l]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+o+"</object>",q[q.length]=e.id,n=m(e.id)}else{var c=g(A);c.setAttribute("type",D);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&d(c,h,t[h]);r.parentNode.replaceChild(c,r),n=c}return n}function d(e,t,i){var n=g("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function f(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(G.ie&&G.win?(t.style.display="none",function(){4==t.readyState?p(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=O.getElementById(e)}catch(i){}return t}function g(e){return O.createElement(e)}function v(e,t,i){e.attachEvent(t,i),z[z.length]=[e,t,i]}function y(e){var t=G.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function b(e,t,i,n){if(!G.ie||!G.mac){var r=O.getElementsByTagName("head")[0];if(r){var s=i&&"string"==typeof i?i:"screen";if(n&&(k=null,I=null),!k||I!=s){var a=g("style");a.setAttribute("type","text/css"),a.setAttribute("media",s),k=r.appendChild(a),G.ie&&G.win&&typeof O.styleSheets!=T&&O.styleSheets.length>0&&(k=O.styleSheets[O.styleSheets.length-1]),I=s}G.ie&&G.win?k&&typeof k.addRule==A&&k.addRule(e,t):k&&typeof O.createTextNode!=T&&k.appendChild(O.createTextNode(e+" {"+t+"}"))}}}function _(e,t){if(U){var i=t?"visible":"hidden";W&&m(e)?m(e).style.visibility=i:b("#"+e,"visibility:"+i)}}function w(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=T?encodeURIComponent(e):e}var x,C,E,S,k,I,T="undefined",A="object",N="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",D="application/x-shockwave-flash",M="SWFObjectExprInst",R="onreadystatechange",F=window,O=document,j=navigator,H=!1,L=[n],B=[],q=[],z=[],W=!1,$=!1,U=!0,G=function(){var e=typeof O.getElementById!=T&&typeof O.getElementsByTagName!=T&&typeof O.createElement!=T,t=j.userAgent.toLowerCase(),i=j.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),r=i?/mac/.test(i):/mac/.test(t),s=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,o=[0,0,0],l=null;if(typeof j.plugins!=T&&typeof j.plugins[N]==A)l=j.plugins[N].description,!l||typeof j.mimeTypes!=T&&j.mimeTypes[D]&&!j.mimeTypes[D].enabledPlugin||(H=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=T)try{var c=new ActiveXObject(P);c&&(l=c.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),o=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(u){}return{w3:e,pv:o,wk:s,ie:a,win:n,mac:r}}();return function(){G.w3&&((typeof O.readyState!=T&&"complete"==O.readyState||typeof O.readyState==T&&(O.getElementsByTagName("body")[0]||O.body))&&e(),W||(typeof O.addEventListener!=T&&O.addEventListener("DOMContentLoaded",e,!1),G.ie&&G.win&&(O.attachEvent(R,function(){"complete"==O.readyState&&(O.detachEvent(R,arguments.callee),e())}),F==top&&function(){if(!W){try{O.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),G.wk&&function(){return W?void 0:/loaded|complete/.test(O.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),i(e)))}(),function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var i=q.length,n=0;i>n;n++)f(q[n]);for(var r in G)G[r]=null;G=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}(),{registerObject:function(e,t,i,n){if(G.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=i,r.callbackFn=n,B[B.length]=r,_(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return G.w3?a(e):void 0},embedSWF:function(e,i,n,r,s,a,c,u,d,f){var p={success:!1,id:i};G.w3&&!(G.wk&&312>G.wk)&&e&&i&&n&&r&&s?(_(i,!1),t(function(){n+="",r+="";var t={};if(d&&typeof d===A)for(var m in d)t[m]=d[m];t.data=e,t.width=n,t.height=r;var g={};if(u&&typeof u===A)for(var v in u)g[v]=u[v];if(c&&typeof c===A)for(var b in c)typeof g.flashvars!=T?g.flashvars+="&"+b+"="+c[b]:g.flashvars=b+"="+c[b];if(y(s)){var w=h(t,g,i);t.id==i&&_(i,!0),p.success=!0,p.ref=w}else{if(a&&o())return t.data=a,l(t,g,i,f),void 0;_(i,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){U=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,i){return G.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,n){G.w3&&o()&&l(e,t,i,n)},removeSWF:function(e){G.w3&&f(e)},createCSS:function(e,t,i,n){G.w3&&b(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=O.location.search||O.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var i=t.split("&"),n=0;i.length>n;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return w(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if($){var e=m(M);e&&x&&(e.parentNode.replaceChild(x,e),C&&(_(C,!0),G.ie&&G.win&&(x.style.display="block")),E&&E(S)),$=!1}}}}();/*!
 * JavaScript Debug - v0.4 - 6/22/2010
 * http://benalman.com/projects/javascript-debug-console-log/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 */
// Copyright (c) 2010 "Cowboy" Ben Alman,
window.opentokdebug=function(){function e(e){!i||!n&&a&&a.log||i.apply(r,e)}function t(e){return l>0?l>e:e>=c.length+l}for(var i,n,r=this,s=Array.prototype.slice,a=r.console,o={},l=0,c=["error","warn","info","debug","log"],u="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),h=u.length,d=[];--h>=0;)(function(e){o[e]=function(){0!==l&&a&&a[e]&&a[e].apply(a,arguments)}})(u[h]);for(h=c.length;--h>=0;)(function(i,n){o[n]=function(){var o=s.call(arguments),l=[n].concat(o);d.push(l),a&&t(i)&&(e(l),a.firebug||r.Firebug?a[n].apply(a,o):a[n]?a[n](o):a.log(o))}})(h,c[h]);return o.setLevel=function(e){l="number"==typeof e?e:9},o.setCallback=function(){var t=s.call(arguments),r=d.length,a=r;for(i=t.shift()||null,n="boolean"==typeof t[0]?t.shift():!1,a-="number"==typeof t[0]?t.shift():r;r>a;)e(d[a++])},o.getLogs=function(){return d.join("\n")},o}(),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);i>r;r++)if(r in t&&t[r]===e)return r;return-1}),/**
 * flexselect: a jQuery plugin, version: 0.3 (2011-12-17)
 * @requires jQuery v1.3 or later
 *
 * FlexSelect is a jQuery plugin that makes it easy to convert a select box into
 * a Quicksilver-style, autocompleting, flex matching selection tool.
 *
 * For usage and examples, visit:
 * http://rmm5t.github.com/jquery-flexselect/
 *
 * Licensed under the MIT:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Copyright (c) 2009-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function(e){e.flexselect=function(e,t){this.init(e,t)},e.extend(e.flexselect.prototype,{settings:{allowMismatch:!1,selectedClass:"flexselect_selected",dropdownClass:"flexselect_dropdown",defaultmessage:"No results",inputIdTransform:function(e){return e+"_flexselect"},inputNameTransform:function(){},dropdownIdTransform:function(e){return e+"_flexselect_dropdown"}},select:null,input:null,hidden:null,dropdown:null,dropdownList:null,cache:[],results:[],lastAbbreviation:null,abbreviationBeforeFocus:null,selectedIndex:0,picked:!1,dropdownMouseover:!1,init:function(t,i){this.settings=e.extend({},this.settings,i),this.select=e(t),this.preloadCache(),this.renderControls(),this.wire()},preloadCache:function(){this.cache=this.select.children("option").map(function(){return{name:e.trim(e(this).text()),value:e(this).val(),score:0}})},renderControls:function(){var t=this.select.children("option:selected");this.hidden=e("<input type='hidden'/>").attr({id:this.select.attr("id"),name:this.select.attr("name")}).val(t.val()),this.input=e("<input type='text' autocomplete='off' />").attr({id:this.settings.inputIdTransform(this.select.attr("id")),name:this.settings.inputNameTransform(this.select.attr("name")),accesskey:this.select.attr("accesskey"),tabindex:this.select.attr("tabindex"),placeholder:this.select.attr("placeholder"),style:this.select.attr("style")}).addClass(this.select.attr("class")).val(e.trim(t.text())),this.dropdown=e("<div></div>").attr({id:this.settings.dropdownIdTransform(this.select.attr("id"))}).addClass(this.settings.dropdownClass),this.dropdownList=e("<ul></ul>"),this.dropdown.append(this.dropdownList),this.select.after(this.input).after(this.hidden).remove(),e("body").append(this.dropdown)},wire:function(){var t=this;this.input.click(function(){t.lastAbbreviation=null,t.focus(),t.picked||t.filterResults()}),this.input.mouseup(function(e){e.preventDefault()}),this.input.focus(function(){t.abbreviationBeforeFocus=t.input.val(),t.input.select()}),this.input.blur(function(){t.dropdownMouseover||(t.hide(),t.settings.allowMismatch||t.picked||t.reset())}),this.dropdownList.mouseover(function(i){if("LI"==i.target.tagName){var n=t.dropdown.find("li");t.markSelected(n.index(e(i.target)))}}),this.dropdownList.mouseleave(function(){t.markSelected(-1)}),this.dropdownList.mouseup(function(){t.pickSelected(),t.focusAndHide()}),this.dropdown.mouseover(function(){t.dropdownMouseover=!0}),this.dropdown.mouseleave(function(){t.dropdownMouseover=!1}),this.dropdown.mousedown(function(e){e.preventDefault()}),this.input.keyup(function(e){switch(e.keyCode){case 13:e.preventDefault(),t.pickSelected(),t.focusAndHide();break;case 27:e.preventDefault(),t.reset(),t.focusAndHide();break;default:t.filterResults()}}),this.input.keydown(function(e){switch(e.keyCode){case 9:t.pickSelected(),t.hide();break;case 33:e.preventDefault(),t.markFirst();break;case 34:e.preventDefault(),t.markLast();break;case 38:e.preventDefault(),t.moveSelected(-1);break;case 40:e.preventDefault(),t.moveSelected(1);break;case 13:case 27:e.preventDefault(),e.stopPropagation()}})},filterResults:function(){var t=this.input.val();if(t!=this.lastAbbreviation){var i=[];if(e.each(this.cache,function(){this.score=LiquidMetal.score(this.name,t),this.score>0&&i.push(this)}),0==i.length){var n={name:this.settings.defaultmessage,value:"ZERO_CONTACTS",score:9.9};i.push(n)}this.results=i,this.sortResults(),this.renderDropdown(),this.markFirst(),this.lastAbbreviation=t,this.picked=!1}},sortResults:function(){this.results.sort(function(e,t){return t.score-e.score})},renderDropdown:function(){var t=this.dropdown.outerWidth()-this.dropdown.innerWidth(),i=this.input.offset();this.dropdown.css({width:this.input.outerWidth()-t+"px",top:i.top+this.input.outerHeight()+"px",left:i.left+"px"});var n=this.dropdownList.html("");this.results.length>0&&e.each(this.results,function(){n.append(e("<li/>").html(this.name))}),this.dropdown.show()},markSelected:function(t){if(!(t>this.results.length)){var i=this.dropdown.find("li");i.removeClass(this.settings.selectedClass),this.selectedIndex=t,t>=0&&e(i[t]).addClass(this.settings.selectedClass)}},pickSelected:function(){var e=this.results[this.selectedIndex];if(e){if(this.hidden.val(e.value),this.input.val(""),"function"==typeof PRESENCE.UIMANAGER.changeSelectContactValue)return PRESENCE.UIMANAGER.changeSelectContactValue(e.name,e.value)}else this.settings.allowMismatch?this.hidden.val(""):this.reset()},hide:function(){this.dropdown.hide(),this.lastAbbreviation=null},moveSelected:function(e){this.markSelected(this.selectedIndex+e)},markFirst:function(){this.markSelected(0)},markLast:function(){this.markSelected(this.results.length-1)},reset:function(){this.input.val(this.abbreviationBeforeFocus)},focus:function(){this.input.focus()},focusAndHide:function(){this.hide()}}),e.fn.flexselect=function(t){return this.each(function(){"SELECT"==this.tagName&&new e.flexselect(this,t)}),this}}(jQuery),/*
 * Copyright 2010, Wen Pu (dexterpu at gmail dot com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Check out http://www.cs.illinois.edu/homes/wenpu1/chatbox.html for document
 *
 * Depends on jquery.ui.core, jquery.ui.widiget, jquery.ui.effect
 * 
 * Also uses some styles for jquery.ui.dialog
 * 
 */
function(e){e.widget("ui.chatbox",{options:{id:null,title:null,user:null,hidden:!1,offset:0,width:230,height:400,groupBox:!1,video:0,messageSent:function(e,t,i){this.boxManager.addMsg(t.first_name,i)},boxClosed:function(){},boxManager:{init:function(e){this.elem=e},addMsg:function(t,i){var n=this,r=n.elem.uiChatboxLog,s=document.createElement("div");if(null==t||""==e(t).html())var a=i;else var a="<b>"+t+":</b> "+i;e(s).html(a).addClass("ui-chatbox-msg"),r.append(s),n._scrollToBottom(),n.elem.uiChatboxTitlebar.hasClass("ui-state-focus")||n.highlightLock||(n.highlightLock=!0,n.highlightBox())},highlightBox:function(){this.elem.uiChatbox.addClass("ui-state-highlight");var t=this,i=e('<p class="chatWindowhighlighted"></div>'),n={color:e(i).css("color")};t.elem.uiChatboxTitlebar.effect("highlight",n,300),"function"==typeof PRESENCE.UTILITIES.mustBounceBoxForChatWindow&&PRESENCE.UTILITIES.mustBounceBoxForChatWindow(t)||"function"!=typeof PRESENCE.UTILITIES.mustBounceBoxForChatWindow?t.elem.uiChatbox.effect("bounce",{times:3},300,function(){t.highlightLock=!1,t._scrollToBottom()}):t.highlightLock=!1},toggleBox:function(e){this.elem.uiChatbox.toggle(e)},_scrollToBottom:function(){var e=this.elem.uiChatboxLog;e.scrollTop(e.get(0).scrollHeight)}}},toggleContent:function(){this.uiChatboxContent.toggle(),this.uiChatboxContent.is(":visible")&&this.uiChatboxInputBox.focus()},widget:function(){return this.uiChatbox},_create:function(){var t=this,i=t.options,n=i.title||"No Title",r=(t.uiChatbox=e("<div></div>")).appendTo(document.body).addClass("ui-widget ui-corner-top ui-chatbox").attr("outline",0).focusin(function(){t.uiChatbox.removeClass("ui-state-highlight"),t.uiChatboxTitlebar.addClass("ui-state-focus")}).focusout(function(){t.uiChatboxTitlebar.removeClass("ui-state-focus")}),s=(t.uiChatboxTitlebar=e("<div></div>")).addClass("ui-widget-header ui-corner-top ui-chatbox-titlebar ui-dialog-header").click(function(e){t.toggleContent(e)}).appendTo(r),a=((t.uiChatboxTitle=e("<span></span>")).html(n).appendTo(s),(t.uiChatboxTitlebarClose=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ").attr("role","button").hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")}).click(function(){return r.hide(),t.options.boxClosed(t.options.id),!1}).appendTo(s)),o=(e("<span></span>").addClass("ui-icon-closethick chat-thick chat-closethick").text("close").appendTo(a),(t.uiChatboxTitlebarMinimize=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).click(function(e){return t.toggleContent(e),!1}).appendTo(s)),l=(e("<span></span>").addClass("ui-icon-minusthick chat-thick  chat-minusthick").text("minimize").appendTo(o),(t.uiChatboxTitlebarVideo=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-videobox-icon").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).click(function(){return PRESENCE.WINDOW.toggleVideoBox(t),!1}).appendTo(s)),c=(e("<span></span>").addClass("ui-icon-circle-triangle-e chat-thick  chat-videothick").text("     ").appendTo(l),(t.uiChatboxTitlebarVideoChange=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-videobox-icon-change").attr("role","button").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).click(function(){return PRESENCE.WINDOW.toggleVideoBoxChange(t),!1}).appendTo(s)),u=(e("<span></span>").addClass("ui-icon-newwin chat-thick  chat-videoPublisherthick").text("").appendTo(c),(t.uiChatboxTitlebarGames=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-games-icon").attr("role","button").hover(function(){u.addClass("ui-state-hover")},function(){u.removeClass("ui-state-hover")}).click(function(){return PRESENCE.GAME.INTERFACE.pickGamesButton(t),!1}).appendTo(s)),h=(e("<span></span>").addClass("ui-icon-star chat-thick  chat-gamesthick").text("").appendTo(u),(t.uiChatboxContent=e("<div></div>")).addClass("ui-widget-content ui-chatbox-content ").appendTo(r)),d=((t.uiChatboxNotify=e("<div></div>")).addClass("ui-widget-content ui-chatbox-notify").click(function(){PRESENCE.NOTIFICATIONS.onClickChatNotification(t.uiChatboxNotify)}).appendTo(h),(t.uiVideobox=e("<div></div>")).addClass("ui-widget-content ui-videobox").click(function(){}).appendTo(h),(t.uiChatboxLog=t.element).addClass("ui-widget-content ui-chatbox-log").appendTo(h),(t.uiChatboxInput=e("<div></div>")).addClass("ui-widget-content ui-chatbox-input").click(function(){}).appendTo(h)),f=(t.uiChatboxInputBox=e("<textarea></textarea>")).addClass("ui-widget-content ui-chatbox-input-box ui-corner-all").appendTo(d).keydown(function(i){if(i.keyCode&&i.keyCode==e.ui.keyCode.ENTER){var n="function"==typeof PRESENCE.UTILITIES.userChatDataInputControl&&PRESENCE.UTILITIES.userChatDataInputControl()||"function"!=typeof PRESENCE.UTILITIES.userChatDataInputControl;return n&&(msg=e.trim(e(this).val()),msg.length>0&&t.options.messageSent(t.options.id,t.options.user,msg),e(this).val("")),!1}}).focusin(function(){f.addClass("ui-chatbox-input-focus");var t=e(this).parent().prev();t.scrollTop(t.get(0).scrollHeight)}).focusout(function(){f.removeClass("ui-chatbox-input-focus")});s.find("*").add(s).disableSelection(),h.children().click(function(){t.uiChatboxInputBox.focus()}),t._setWidth(t.options.width),t._setHeight(t.options.height),t._setVideo(t.options.video),t._position(t.options.offset),t.options.boxManager.init(t),t.options.hidden||r.show()},_setOption:function(t,i){if(null!=i)switch(t){case"hidden":i?this.uiChatbox.hide():this.uiChatbox.show();break;case"offset":this._position(i);break;case"width":this._setWidth(i);break;case"height":this._setHeight(i);break;case"video":this._setVideo(i);break;case"groupBox":this._setGroupBox(i)}e.Widget.prototype._setOption.apply(this,arguments)},_setWidth:function(e){this.uiChatboxTitlebar.width(e+"px"),this.uiChatboxLog.width(e+"px"),this.uiChatboxInputBox.css("width",e-14+"px")},_setHeight:function(e){this.uiChatboxLog.height(e+"px")},_setGroupBox:function(e){this.uiChatboxLog.groupBox(e)},_setVideo:function(e){this.uiVideobox.height(e+"px"),0==e?this.uiVideobox.hide():this.uiVideobox.show()},_position:function(e){this.uiChatbox.css("right",e)}})}(jQuery);var PRESENCE=PRESENCE||{};PRESENCE.VERSION="1.1.0",PRESENCE.AUTHORS="Aldo Gordillo",PRESENCE.CORE=function(){var e=function(){PRESENCE.UIMANAGER.init(),PRESENCE.UTILITIES.init(),PRESENCE.XMPPClient.init(),PRESENCE.VIDEOCHAT.init(),PRESENCE.GAME.init(),PRESENCE.AUDIO.init()};return{init:e}}(PRESENCE,jQuery);var contactsInfo=new Array;PRESENCE.XMPPClient=function(e,t,i){function n(e,t,i,n){this.domain=e,this.resource=t,this.client=i,this.version=n,this.videoChatStatus="disconnected",this.session_id=null,this.user_token=null,this.guest_token=null,this.session=null,this.publisher=null,this.gameStatus="disconnected",this.game=null}function r(){this.occupants=[],this.joined=!1,this.affiliation="none",this.role="none",this.nick=yt(),this.lastMessageId=null}var s="localhost",a=new Array;a.available="chat",a.away="away",a.autoaway="away",a.dnd="dnd";var o=new Array;o[""]="",o.chat="",o.away="Away",o.xa="Away",o.dnd="Busy";var l=new Array,c=new Array;c.cinfo="versionID",c.videochatRequest="videochatRequestID",c.videochatRequestCancel="videochatRequestCancelID";var u,h,d,f=function(){Rt()},p=function(e,t){return g()?!0:(b()?0==v(e,t)&&PRESENCE.UIMANAGER.updateChatWindow():0==y(e,t)&&PRESENCE.UIMANAGER.updateChatWindow(),void 0)},m=function(){return null!=E&&E.connected?!0:!1},g=function(){return m()&&"offline"!=u&&!S},v=function(e,t){try{E=Rt(),E.connect(e,t,T)}catch(i){return!1}return!0},y=function(e,t){if(null!=t&&""!=t)var i=t;else{if(!window.sessionStorage||null==sessionStorage.getItem("ss_user_pass"))return!1;var i=sessionStorage.getItem("ss_user_pass")}try{E=Rt(),E.connect(e,i,T)}catch(n){return!1}return!0},b=function(){var e="cookie";return"cookie"==e},_=function(){var e="cookie";return"password"==e},w=6e4,x=6e5,C=0,E=null,S=!1,k=!1,I=!0,T=function(e){return PRESENCE.UTILITIES.log("Strophe onConnect callback call with status "+e),e==Strophe.Status.ERROR?(PRESENCE.UTILITIES.log("Strophe connection error"),void 0):e==Strophe.Status.ATTACHED?(PRESENCE.UTILITIES.log("Strophe connection attached"),void 0):e==Strophe.Status.AUTHENTICATING?(PRESENCE.UTILITIES.log("Strophe connection AUTHENTICATING"),void 0):e==Strophe.Status.CONNECTING?(PRESENCE.UTILITIES.log("Strophe is connecting."),void 0):e==Strophe.Status.DISCONNECTING?(PRESENCE.UTILITIES.log("Strophe is disconnecting."),void 0):("undefined"!=typeof initialTimer&&clearTimeout(initialTimer),e==Strophe.Status.CONNFAIL?(PRESENCE.UTILITIES.log("Strophe failed to connect."),d=setTimeout("PRESENCE.XMPPClient.onReconnect()",5e3),S=!0):e==Strophe.Status.AUTHFAIL?(PRESENCE.UTILITIES.log("Strophe authentication fail."),window.sessionStorage&&null!=sessionStorage.getItem("ss_user_pass")&&sessionStorage.setItem("ss_user_pass",null),S=!0):e==Strophe.Status.ERROR?(PRESENCE.UTILITIES.log("Strophe error."),S=!0):e==Strophe.Status.DISCONNECTED?(PRESENCE.UTILITIES.log("Strophe is disconnected."),S=!0,clearTimeout(h),PRESENCE.UIMANAGER.updateInterfaceAfterUserDisconnect(),mt(),d=setTimeout("PRESENCE.XMPPClient.onReconnect()",5e3)):e==Strophe.Status.CONNECTED&&(PRESENCE.UTILITIES.log("Strophe is connected."),clearTimeout(d),E.addHandler(R,null,"message","chat",null,null),E.addHandler(_t,null,"message","groupchat",null,null),E.addHandler(F,null,"presence",null,null,null),E.addHandler(q,null,"iq",null,null),S=!1,k=!0,u||(u=PRESENCE.PERSISTENCE.getRestoreUserChatStatus()),"offline"==u&&(u="chat"),rt(u),h=setInterval("PRESENCE.XMPPClient.awayTimerFunction()",w)),PRESENCE.UIMANAGER.updateChatWindow(),void 0)},A=function(){},N=function(){if(u="offline",PRESENCE.UIMANAGER.setStatusWidgetTitle("offline"),m()){if(l)for(var e in l)l[e].joined&&ot(e);E.send($pres({type:"unavailable"}).tree()),E.disconnect()}},P=function(){C++,C>x/w&&("dnd"!=u&&"away"!=u&&(u="autoaway",rt(u)),clearTimeout(h))},D=function(){"autoaway"==u&&(u="available",rt(u))},M=function(){C>x/w&&(h=setInterval("PRESENCE.XMPPClient.awayTimerFunction()",w),D()),C=0},R=function(e){var t=e.getAttribute("from"),i=e.getAttribute("type"),n=e.getElementsByTagName("body");if("chat"==i&&n.length>0){var r=n[0],e=Strophe.getText(r),s=It(t);if(At(t))return!0;var s=It(t);PRESENCE.UIMANAGER.afterReceivedChatMessage(s,e,null)}return!0},F=function(e){return At(t(e).attr("from"))?wt(e):O(e)},O=function(e){var n=t(e).attr("type");switch(n){case i:j(e);break;case"available":j(e);break;case"unavailable":H(e);break;default:j(e)}return!0},j=function(e){var i=t(e).attr("from"),n=i.split("@")[0];if(n!=user_slug)if(L(e),null!=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(n)){var r=t(e).find("show").text();PRESENCE.UIMANAGER.setUserIconStatus(n,r),PRESENCE.UIMANAGER.updateInterfaceAfterPresenceStanza(n,!0)}else PRESENCE.UTILITIES.isAdminSlug(n)||PRESENCE.UIMANAGER.updateChatWindow()},H=function(e){var i=t(e).attr("from"),n=i.split("@")[0];n!=user_slug&&null!=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(n)&&(PRESENCE.UIMANAGER.updateInterfaceAfterPresenceStanza(n,!1),PRESENCE.GAME.userDisconnected(n))},L=function(e){var i=t(e).attr("from"),r=i.split("@"),s=r[0],a=r[1].split("/")[0],o=r[1].split("/")[1];if(s in contactsInfo)contactsInfo[s].domain=a,contactsInfo[s].resource=o;else{var l=new n(a,o,null,null);contactsInfo[s]=l}},B=function(e){if(!(e in l)){var t=new r;l[e]=t}},q=function(e){var t=e.getAttribute("type"),i=e.getAttribute("from"),n=i.split("@")[0];return n==user_slug?!0:"get"==t?z(e,i,n):(t="result")?$(e,i,n):!0},z=function(e,t,i){var n=e.getAttribute("id"),r=e.getElementsByTagName("query");if(r.length>0){var s=r[0],a=s.getAttribute("xmlns");if("jabber:iq:version"==a)return X(t,n),!0;if("jabber:iq:last"==a)return Z(t,n),!0}return n==c.videochatRequest?(W(t,n,e,i),!0):n==PRESENCE.GAME.COMUNICATION.getIQStanzaID().gameRequest?!0:(J(t,n),!0)},W=function(e,i,n,r){L(n);var s=n.getElementsByTagName("query");if(s.length>0){var a=s[0],o=a.getElementsByTagName("session_id"),l=a.getElementsByTagName("token");if(1==o.length&&1==l.length)return contactsInfo[r].session_id=t(o).text(),contactsInfo[r].user_token=t(l).text(),PRESENCE.VIDEOCHAT.updateInterfaceAfterVideoRequestReceived(r),void 0}J(e,i)},$=function(e,t,i){var n=e.getAttribute("id");return n==c.cinfo?U(e,i):n==c.videochatRequest?G(e,i):n==c.videochatRequestCancel?V(e,i):!0},U=function(e,i){var r=e.getElementsByTagName("query");if(r.length>0){var s=r[0],a=s.getElementsByTagName("name"),o=s.getElementsByTagName("version");if(1==a.length&&1==o.length){var l=t(a).text(),c=t(o).text();if(i in contactsInfo)contactsInfo[i].client=l,contactsInfo[i].version=c;else{var u=new n(null,null,l,c);contactsInfo[i]=u}PRESENCE.VIDEOCHAT.clientInfoReceivedTrigger(i)}}return!0},G=function(e,i){var n=e.getElementsByTagName("query");if(n.length>0){var r=n[0],s=r.getElementsByTagName("response");if(1==s.length)return PRESENCE.VIDEOCHAT.receiveVideoChatResponseFromUser(i,t(s).text()),!0}return PRESENCE.VIDEOCHAT.receiveVideoChatResponseFromUser(i,"Bad response"),!0},V=function(e,t){var i=e.getElementsByTagName("query");if(i.length>0){var n=i[0],r=n.getElementsByTagName("response");if(1==r.length)return PRESENCE.VIDEOCHAT.receiveVideoChatCancelationFromUser(t),!0}return!0},Q=function(e){if(e in contactsInfo){var t=contactsInfo[e].domain,i=contactsInfo[e].resource,n=e+"@"+t+"/"+i,r=$iq({to:n,type:"get",id:c.cinfo,xmlns:"jabber:iq:version"}).c("query",{xmlns:"jabber:iq:version"});E.sendIQ(r)}},Y=function(e){if(e in contactsInfo){var t=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,i=$iq({to:t,type:"get",id:c.videochatRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("session_id").t(contactsInfo[e].session_id).up().c("token").t(contactsInfo[e].guest_token);E.sendIQ(i)}},X=function(e,t){var i="Social Stream XMPP Client",n=K(),r=$iq({to:e,type:"result",id:t}).c("query",{xmlns:"jabber:iq:version"}).c("name").t(i).up().c("version").t(n);E.sendIQ(r)},K=function(){return"1.1.0"},Z=function(e,t){var i=$iq({to:e,type:"result",id:t}).c("query",{xmlns:"jabber:iq:last",seconds:"0"});E.sendIQ(i)},J=function(e,t){var i=$iq({to:e,type:"result",id:t});E.sendIQ(i)},et=function(e,t){if(e in contactsInfo){var i=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,n=$iq({to:i,type:"result",id:c.videochatRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t(t);E.sendIQ(n)}},tt=function(e){if(e in contactsInfo){var t=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,i=$iq({to:t,type:"result",id:c.videochatRequestCancel}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t("cancel");E.sendIQ(i)}},it=function(e,t){if(PRESENCE.WINDOW.rotatePriority(e),PRESENCE.WINDOW.isSlugGroup(e)){var i=gt(e);return lt(i,t)}var n=PRESENCE.PARSER.getParsedName(user_name,!0);PRESENCE.WINDOW.getChatBoxForSlug(e).chatbox("option","boxManager").addMsg(n,PRESENCE.PARSER.getParsedContent(t,!0));var i=Pt(e);return nt(i,t)},nt=function(e,t){var i=user_jid,n=$build("body");n.t(t);var r=$msg({to:e,from:i,type:"chat"}).cnode(n.tree());return E.send(r.tree()),M(),!0},rt=function(e){if(e||(e=u),e in a&&(e=a[e]),e in o){var t=$pres().c("status").t(o[e]).up().c("show").t(e);E.send(t.tree()),PRESENCE.UIMANAGER.setStatusWidgetTitle(e)}},st="conference",at=function(e){return E.muc.join(gt(e),vt(e),null,null,null,null)},ot=function(e){return E.muc.leave(gt(e),vt(e),null,null)},lt=function(e,t){return E.muc.message(e,null,t,null,"groupchat")},ct=function(e){return E.muc.queryOccupants(gt(e),ut,ht)},ut=function(e){return dt(e),!0},ht=function(){return!0},dt=function(e){var i=t(e).attr("from"),n=It(i),r=e.getElementsByTagName("query");if(r.length>0){var s=r[0],a=s.getElementsByTagName("item");t.each(a,function(e,i){var r=t(i).attr("name");-1==l[n].occupants.indexOf(r)&&(l[n].occupants.push(r),PRESENCE.NOTIFICATIONS.addNickToNotificationInGroup(n,r))})}},ft=function(e,t){return B(e),0==l[e].joined&&(at(e),ct(e)),PRESENCE.UIMANAGER.existsSlugChatBox(e)||PRESENCE.WINDOW.createGroupChatBox(e,t),!0},pt=function(e){B(e);var t=new r;l[e]=t},mt=function(){t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleGroupBoxes(),function(e,t){pt(t),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(t,I18n.t("chat.muc.offline"))})},gt=function(e){return e+"@"+st+"."+s},vt=function(e){return e in l?l[e].nick:yt()},yt=function(){return user_name.split(" ")[0]},bt=function(e){var t=vt(e);return t.split("_").length>4?!1:(B(e),l[e].nick=t+"_",at(e),!0)},_t=function(e){var t=e.getAttribute("from"),i=e.getAttribute("type"),n=e.getElementsByTagName("body");if("groupchat"==i&&n.length>0){var r=n[0];Dt(t);var s=Strophe.getText(r),a=It(t),o=e.getAttribute("id");if(a in l&&null!=l[a].lastMessageId&&l[a].lastMessageId==o)return!0;l[a].lastMessageId=o,PRESENCE.UIMANAGER.afterReceivedGroupChatMessage(t,s)}return!0},wt=function(e){var n=t(e).attr("from"),r=t(e).attr("to"),s=It(n),a=Dt(n),o=t(e).attr("type");if(a==vt(s)&&It(r)==user_slug){switch(o){case i:xt(e);break;case"available":xt(e);break;case"unavailable":Ct(e);break;case"error":Et(e)}return!0}switch(o){case i:St(e);break;case"available":St(e);break;case"unavailable":kt(e);break;default:return!0}return!0},xt=function(e){var i=t(e).attr("from"),n=It(i);B(n);var r=e.getElementsByTagName("x");if(1==r.length){var s=r[0],a=s.getElementsByTagName("item");t.each(a,function(e,i){var r=t(i).attr("role"),s=t(i).attr("affiliation");l[n].affiliation=s,l[n].role=r,0==l[n].joined&&(l[n].joined=!0,PRESENCE.NOTIFICATIONS.changeInitialNotificationInGroup(n,I18n.t("chat.muc.occupants")))})}},Ct=function(e){var i=t(e).attr("from"),n=It(i);pt(n),PRESENCE.NOTIFICATIONS.changeInitialNotificationInGroup(n,"")},Et=function(e){var i=t(e).attr("from"),n=It(i),r="Error",s=e.getElementsByTagName("error");if(1==s.length){var a=s[0],o=t(a).attr("code"),l=t(a).attr("type");r=r+" with code:"+o+" and type:"+l;var c=a.getElementsByTagName("text");if(1==c.length){var u=t(c[0]).text();r=r+"\n"+u}if(409==o&&bt(n))return}pt(n),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(n,I18n.t("chat.muc.joinError",{errorMsg:r}))},St=function(e){var i=t(e).attr("from"),n=Dt(i),r=It(i);B(r),-1==l[r].occupants.indexOf(n)&&(l[r].occupants.push(n),PRESENCE.NOTIFICATIONS.addNickToNotificationInGroup(r,n),PRESENCE.UIMANAGER.writeReceivedMessageOnChatWindow("",r,I18n.t("chat.muc.join",{nick:n})))},kt=function(e){var i=t(e).attr("from"),n=Dt(i),r=It(i);B(r),-1!=l[r].occupants.indexOf(n)&&(l[r].occupants.splice(l[r].occupants.indexOf(n),1),PRESENCE.NOTIFICATIONS.removeNickFromNotificationInGroup(r,n),PRESENCE.UIMANAGER.writeReceivedMessageOnChatWindow("",r,I18n.t("chat.muc.leave",{nick:n})))},It=function(e){return e.split("@")[0]},Tt=function(e){return e.split("@")[1].split("/")[0]},At=function(e){return Tt(e).split(".")[0]==st?!0:!1},Nt=function(e){var i=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(e);if(null!=i)return t(i).attr("name");var n=PRESENCE.WINDOW.getChatBoxForSlug(e);return null!=n?n.attr("name"):e},Pt=function(e){return e+"@"+s},Dt=function(e){return e.split("/")[1]},Mt=function(){return a},Rt=function(){return E||(E=new Strophe.Connection(BOSH_SERVICE)),E},Ft=function(){return k},Ot=function(e){k=e},jt=function(){return I},Ht=function(e){I=e},Lt=function(){return u},Bt=function(e){u=e},qt=function(){return S},zt=function(){return l};return{init:f,connectToChat:p,onReconnect:A,isStropheConnected:m,isUserConnected:g,authByCookie:b,authByPassword:_,disconnect:N,awayTimerFunction:P,restartAwayTimer:M,sendIQStanzaForRequestClientInfo:Q,sendIQStanzaToRequestVideochat:Y,sendIQStanzaToResponseVideochat:et,sendIQStanzaToCancelVideochat:tt,getJavascriptXMPPClientName:K,sendChatMessage:it,sendStatus:rt,accessRoom:ft,joinRoom:at,leaveRoom:ot,getSlugFromJid:It,getJidFromSlug:Pt,getNameFromSlug:Nt,getNickFromChatRoomJid:Dt,getConnection:Rt,isNewConnection:Ft,setNewConnection:Ot,isFirstConnection:jt,setFirstConnection:Ht,getUserStatus:Lt,setUserStatus:Bt,getDisconnectionFlag:qt,getRoomsInfo:zt,getSStreamChatStatus:Mt}}(PRESENCE,jQuery),PRESENCE.AUDIO=function(e,t){function n(){}function r(e){null!=window[e]?window[e].play():t("body").append('<embed src="'+a+"/"+e+'.mp3" autostart="true" hidden="true" loop="false">')}function s(){return"dnd"==PRESENCE.XMPPClient.getUserStatus()?!1:PRESENCE.UTILITIES.getChatFocus()?!1:!0}var a="/assets/chat",o=[["mp3","audio/mpeg"],["wav","audio/wav"]],l=function(){c("onMessageAudio")},c=function(e){var t=document.createElement("audio");if(t.canPlayType)for(path=a+"/"+e,window[e]=new Audio,i=0;o.length>i;i++)if(window[e].canPlayType(o[i][1])){var r=document.createElement("source");r.type=o[i][1],r.src=path+"."+o[i][0],window[e].addEventListener("ended",n),window[e].appendChild(r)}};return{init:l,mustPlaySoundForChatWindow:s,playSound:r}}(PRESENCE,jQuery),PRESENCE.GAME=function(e,t){function i(e,t,i,n){this.id=e,this.name=t,this.players=i,this.options=n,this.handler=null}function n(e,t){this.id=e,this.name=t}function r(e,t){this.pass=e,this.reason=t}var s=function(e,t){return new r(e,t)},a=function(){var t="false";"true"==t&&(e.GAME.INTERFACE.enableGameFeature(!0),e.GAME.COMUNICATION.init(PRESENCE.XMPPClient.getConnection()))},o=function(t,i){if(null!=i){if(t in contactsInfo)var n=contactsInfo[t].gameStatus;else var n=null;if(!PRESENCE.XMPPClient.isUserConnected())return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.offline")),null!=n&&(contactsInfo[t].gameStatus="disconnected"),void 0;if(!PRESENCE.UIMANAGER.isSlugChatConnected(t))return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),null!=n&&(contactsInfo[t].gameStatus="disconnected"),void 0;if(null==n)return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.unable")),void 0;if("disconnected"!=n)return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,"Esta ocupado en otro estado!=desconectado..."),void 0;contactsInfo[t].gameStatus="waiting",e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.waiting")),contactsInfo[t].game=i;var r=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;return e.GAME.COMUNICATION.sendIQStanzaToRequestGame(r,i)}},l=function(t,i){if(!(!t in contactsInfo)){var n=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(n,i),"yes"==i?(contactsInfo[t].gameStatus="playing",PRESENCE.GAME.INTERFACE.updateInterfaceBeforeStartGame(t)):(contactsInfo[t].gameStatus="disconnected",PRESENCE.GAME.INTERFACE.updateInterfaceAfterFinishGame(t))}},c=function(i,n){t.each(i.players,function(t,r){var s=r.id;if(s!=user_slug&&s in contactsInfo){var a=s+"@"+contactsInfo[s].domain+"/"+contactsInfo[s].resource;e.GAME.COMUNICATION.sendIQStanzaWithAction(a,i.id,n)}})},u=function(t,n,r,s,a){if(!(!t in contactsInfo)){if(contactsInfo[t].game=new i(n,r,s,a),"disconnected"!=contactsInfo[t].gameStatus)return e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(t,"busy"),!0;contactsInfo[t].gameStatus="pending",e.GAME.INTERFACE.updateInterfaceAfterGameRequestReceived(t,contactsInfo[t].game)}},h=function(t,i){return"waiting"!=contactsInfo[t].gameStatus?!0:("yes"==i?(contactsInfo[t].gameStatus="playing",e.GAME.INTERFACE.updateInterfaceBeforeStartGame(t,contactsInfo[t].game)):"no"==i?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.rejected",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):"busy"==i?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.rejectedBusy",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.unknown",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"),void 0)},d=function(t,i){t in contactsInfo?"finish"==i&&("pending"==contactsInfo[t].gameStatus?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.cancel",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):"playing"==contactsInfo[t].gameStatus&&(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.finish",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected")):y(t)},f=function(t){return"waiting"!=contactsInfo[t].gameStatus?!0:(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected",void 0)},p=function(e){if(!e in contactsInfo){var i=contactsInfo[e].game;null!=i&&null!=i.players&&t.each(i.players,function(t,i){return i[0]==e?i[1]:void 0})}return null},m=function(e,t,i){var n;return n=g(t),n[0]?"undefined"==typeof e||"undefined"==typeof i?new r(!1,"myPlayer or myDivID undefined"):-1==t.players.constructor.toString().indexOf("Array")?new r(!1,"Game.Players is not an array"):-1==t.options.constructor.toString().indexOf("Array")?new r(!1,"Game.options is not an array"):-1==t.players.indexOf(e)?new r(!1,"myPlayer is not contained in players array"):new r(!0,"Ok"):n},g=function(e){return"undefined"==typeof e||"undefined"==typeof e.id||"undefined"==typeof e.name||"undefined"==typeof e.players||"undefined"==typeof e.options?new r(!1,"Some game field (game/game.id/game.name/game.players/game.options) is undefined"):""==e.id||""==e.name?new r(!1,"game.id or game.name is empty"):e.id.split(" ").length>2?new r(!1,"Invalid game.id. No whitespaces allowd in this field"):new r(!0,"Ok")},v=function(t,i){var r=contactsInfo[t].game,s=new n(user_slug,p(user_slug)),a=m(s,r,i);if(!a.pass){var o="StartPlay error with reason: "+a.reason;return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,o),void 0}if("function"==typeof PRESENCE.GAME[r.id].validateParams){if(a=PRESENCE.GAME[r.id].validateParams(s,r,i),!a.pass){var o="StartPlay error with reason: "+a.reason;return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,o),void 0}}else PRESENCE.UTILITIES.log("Warning: Missed "+r.name+" validateParams method");"function"==typeof PRESENCE.GAME[r.id].minimumRequirements||PRESENCE.UTILITIES.log("Warning: Missed "+r.name+" minRequirements method"),null!=r.handler&&PRESENCE.GAME.COMUNICATION.removeHandler(r.handler),r.handler=PRESENCE.GAME.COMUNICATION.addHandler(r.id);var s=new n(user_slug,user_name);PRESENCE.GAME[r.id].init(s,r,i)},y=function(t){var i=null;if(t in contactsInfo){var n=contactsInfo[t].gameStatus;if("playing"==n){var r=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToFinishGame(r),null!=contactsInfo[t].game.handler&&(e.GAME.COMUNICATION.removeHandler(contactsInfo[t].game.handler),null==contactsInfo[t].game.handler)}else if("waiting"==n){var r=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToFinishGame(r)}else"pending"==n&&e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(t,"no");contactsInfo[t].gameStatus="disconnected",i=contactsInfo[t].game}PRESENCE.GAME.INTERFACE.updateInterfaceAfterFinishGame(t,i)},b=function(e){y(e)};return{init:a,game:i,player:n,startGame:v,finishGame:y,createValidationResult:s,requestUserToPlay:o,responseUserToPlay:l,updateLogicAfterReceivedGameRequest:u,updateLogicAfterReceivedGameRequestCancelation:d,updateLogicAfterReceivedGameRequestResponse:h,updateLogicAfterReceivedGameRequestError:f,sendAction:c,userDisconnected:b}}(PRESENCE,jQuery),PRESENCE.GAME.COMUNICATION=function(e,t){function i(){}var n=null,r=new Array;r.gameRequest="gameRequestID",r.gameRequestFinish="gameRequestFinishID",r.gameAction="gameActionID";var s=function(){return r},a=function(e){n=e,n&&(n.addHandler(l,null,"iq","get",r.gameRequest,null),n.addHandler(u,null,"iq","result",r.gameRequest,null),n.addHandler(h,null,"iq","error",r.gameRequest,null),n.addHandler(f,null,"iq","result",r.gameRequestFinish,null),n.addHandler(v,null,"iq","result",m("gameId"),null))},o=function(e,i){var s=0,a=Object.keys(i.options).length,o=$iq({to:e,type:"get",id:r.gameRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("game",{id:i.id,name:i.name}).c("players",{});t.each(i.players,function(e,t){e==i.players.length-1?o.c("player",{id:t.id}).t(t.name).up().up():o.c("player",{id:t.id}).t(t.name).up()}),o.c("options",{});for(var l in i.options)s==a-1?o.c("option",{name:l}).t(i.options[l]).up().up():o.c("option",{name:l}).t(i.options[l]).up(),s+=1;n.sendIQ(o)},l=function(i){var n=i.getAttribute("from"),r=n.split("@")[0],s="",a="",o=[],l=new Array,c=i.getElementsByTagName("game");if(1==c.length){var u=c[0];a=t(u).attr("name"),s=t(u).attr("id");var h=i.getElementsByTagName("players");h.length>0&&t.each(t(h).children(),function(i,n){o.push(new e.GAME.player(t(n).attr("id"),t(n).text()))});var d=i.getElementsByTagName("options");d.length>0&&t.each(t(d).children(),function(e,i){l[t(i).attr("name")]=t(i).text()})}return e.GAME.updateLogicAfterReceivedGameRequest(r,s,a,o,l),!0},c=function(e,t){var i=$iq({to:e,type:"result",id:r.gameRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t(t);n.sendIQ(i)},u=function(i){var n=i.getAttribute("from"),r=n.split("@")[0],s=i.getElementsByTagName("query");if(s.length>0){var a=s[0],o=a.getElementsByTagName("response");if(1==o.length)return e.GAME.updateLogicAfterReceivedGameRequestResponse(r,t(o).text()),!0}return!0},h=function(t){var i=t.getAttribute("from"),n=i.split("@")[0];return e.GAME.updateLogicAfterReceivedGameRequestError(n),!0},d=function(e){var t=$iq({to:e,type:"result",id:r.gameRequestFinish}).c("game",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("status").t("finish");n.sendIQ(t)},f=function(i){var n=i.getAttribute("from"),r=n.split("@")[0],s=i.getElementsByTagName("game");if(s.length>0){var a=s[0],o=a.getElementsByTagName("status");if(1==o.length){var l=t(o).text();return e.GAME.updateLogicAfterReceivedGameRequestCancelation(r,l),!0}}return!0},p=function(e,t,i){var r=m(t),s=$iq({to:e,type:"result",id:r}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("game",{id:t}).c("action",{type:i.type});return i.type=null,s=g(s,i),n.sendIQ(s)},m=function(e){return r.gameAction+"_"+e},g=function(e,i){if("object"!=typeof i)return e;var n=Object.keys(i).length,r=0;return t.each(i,function(t,i){if(null!=i){if("object"==typeof i){var s="object";-1!=i.constructor.toString().indexOf("Array")&&(s="array"),e.c(t,{type:s}),e=g(e,i)}else{var a=typeof i,o=typeof t;switch(a){case"number":i+="";break;case"boolean":i=i.toString();break;case"string":break;default:}switch(o){case"number":t="item";break;case"string":break;default:}r==n-1?e.c(t,{type:a}).t(i).up().up():e.c(t,{type:a}).t(i).up()}r++}}),e},v=function(e){var i=e.getAttribute("from");i.split("@")[0];var n=e.getElementsByTagName("query");if(1==n.length){var r=n[0],s=r.getElementsByTagName("game");if(1==s.length){var a=s[0],o=t(a).attr("id"),l=a.getElementsByTagName("action");t.each(l,function(e,t){var i=y(t);PRESENCE.GAME[o].onActionReceived(i)})}}return!0},y=function(e){var n=new i,r=t(e).attr("type");return n.type=r,n=b(n,e)},b=function(e,i){return t.each(t(i).children(),function(i,n){if(t(n).children().length>0)e[n.tagName]="array"==t(n).attr("type")?new Array:new Object,e[n.tagName]=b(e[n.tagName],t(n));else{var r=null,s=t(n).text(),a=t(n).attr("type");switch(a){case"number":isNaN(+s)||(r=+s);break;case"boolean":("true"==s||"false"==s)&&(r="true"===s);break;case"string":r=s;break;default:}-1!=e.constructor.toString().indexOf("Array")&&"item"==n.tagName?e.push(r):e[n.tagName]=r}}),e},_=function(e){n.deleteHandler(e)},w=function(e){return n.addHandler(v,null,"iq","result",m(e),null)};return{init:a,sendIQStanzaToRequestGame:o,handleRequestGameIQStanza:l,sendIQStanzaToResponseGameRequest:c,handleIQResultFromGameRequest:u,sendIQStanzaToFinishGame:d,handleIQResultFromGameRequestFinish:f,sendIQStanzaWithAction:p,handleActionIQStanza:v,addHandler:w,removeHandler:_,getIQStanzaID:s}}(PRESENCE,jQuery),PRESENCE.GAME.FACTORY=function(){var e=function(e,i){switch(i){case"Modern-TER":var n=new Array;return n.theme="Modern",t(e,"TER",n);case"Classic-TER":var n=new Array;return n.theme="Classic",t(e,"TER",n);default:return null}},t=function(e,t,n){var r=new PRESENCE.GAME.player(user_slug,user_name),s=new PRESENCE.GAME.player(e,PRESENCE.XMPPClient.getNameFromSlug(e)),a=[r,s],o=new PRESENCE.GAME.game(t,i(t),a,n);return o},i=function(e){return"function"==typeof PRESENCE.GAME[e].getName?PRESENCE.GAME[e].getName():e};return{getGame:e}
}(PRESENCE,jQuery),PRESENCE.GAME.INTERFACE=function(e,t,i){function n(e,t,i){this.name=e,this.choice=t,this.thumbnail=i}updateInterfaceAfterGameRequestReceived=function(e,t){PRESENCE.WINDOW.createBuddyChatBox(e),PRESENCE.WINDOW.getChatBoxForSlug(e),m(e,t),v(e),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!0)};var r=function(e){var i=document.createElement("div"),n="game_"+e+contactsInfo[e].game.id;i.setAttribute("id",n),t(i).css("width","100%"),t(i).css("height","100%"),PRESENCE.WINDOW.setVideoBoxContent(e,i),PRESENCE.GAME.startGame(e,n)},s=function(e){PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1),y(e)},a=function(e,t){PRESENCE.WINDOW.setVideoBoxContent(e,'<p class="game-info"> '+t+" </p>")},o=function(e){var i=t(e.element).attr("id"),n=PRESENCE.WINDOW.toggleVideoBoxForSlug(i);n?(v(i),c(i)):(y(i),PRESENCE.GAME.finishGame(i))},l=[];l.push(new n("Modern Tic Tac Toe","Modern-TER","/assets/games/ter/modern_thumbnail.png")),l.push(new n("Classic Tic Tac Toe","Classic-TER","/assets/games/ter/classic_thumbnail.png"));var c=function(e,t){("undefined"==typeof t||null==t)&&(t=l.length>0?l[0]:new t("No games available","None",""));var i=h(e,t);PRESENCE.WINDOW.setVideoBoxContent(e,i),d()},u=function(e,t){PRESENCE.GAME.requestUserToPlay(e,t)},h=function(e,t){var i='<div class="game-choices"><div class="game-choice-buttonLeft"><a class="game-choice-linkLeft"><img class="game-button-img" src="/assets/btn/group_left.png" ></a></div><div class="game-choice"><a class="game-choice-link" slug='+e+' choice="'+t.choice+'" >'+'<img class="game-choice-img" src="'+t.thumbnail+'" >'+'<p class="game-name">'+t.name+" </p>"+"</a>"+"</div>"+'<div class="game-choice-buttonRight">'+'<a class="game-choice-linkRight">'+'<img class="game-button-img" src="/assets/btn/group_right.png" >'+"</a>"+"</div>"+"</div>";return i},d=function(){t(".game-choice-link").click(function(){var i=t(this).attr("choice"),n=t(this).attr("slug"),r=e.GAME.FACTORY.getGame(n,i);u(n,r)}),t(".game-choice-linkLeft").click(function(e){var i=t(e.target).parent().parent().parent().find(".game-choice-link"),n=i.attr("slug"),r=i.attr("choice"),s=p(r);c(n,s)}),t(".game-choice-linkRight").click(function(e){var i=t(e.target).parent().parent().parent().find(".game-choice-link"),n=i.attr("slug"),r=i.attr("choice"),s=f(r);c(n,s)})},f=function(e){var i=null;return t.each(l,function(t,n){n.choice==e&&(i=t==l.length-1?l[0]:l[t+1])}),i},p=function(e){var i=null;return t.each(l,function(t,n){n.choice==e&&(i=0==t?l[l.length-1]:l[t-1])}),i},m=function(e,t){var i='<p class="game-info">'+I18n.t("chat.game.call",{name:PRESENCE.XMPPClient.getNameFromSlug(e),game:t.name})+" </p>",n=i+'<p class="game-request"> <a class="gameButton" slug="'+e+'" value="yes">'+I18n.t("chat.game.accept")+"</a> -"+' <a class="gameButton" slug="'+e+'" value="no">'+I18n.t("chat.game.deny")+"</a> </p>";PRESENCE.WINDOW.setVideoBoxContent(e,n),g()},g=function(){t(".gameButton").click(function(e){e.preventDefault();var i=t(this).attr("value"),n=t(this).attr("slug");PRESENCE.GAME.responseUserToPlay(n,i)})},v=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"video")).hide()},y=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"video")).show()},b=function(){t(".chat-gamesthick").css("display","block")},_=function(e){for(var t=document.styleSheets,n=0;t.length>n;n++){var r=t[n].cssRules||t[n].rules;if(r!=i)for(var s=0;r.length>s;s++)".chat-gamesthick"===r[s].selectorText&&(r[s].style.display=e?"block":"none")}};return{pickGamesButton:o,updateInterfaceAfterGameRequestReceived:updateInterfaceAfterGameRequestReceived,updateInterfaceBeforeStartGame:r,updateInterfaceAfterFinishGame:s,updateInterfaceOnInformationMessage:a,play:b,enableGameFeature:_}}(PRESENCE,jQuery),PRESENCE.GAME.SFIGTHER=function(e,t,i){function n(e,t){this.player=e,this.move=t,this.type="movement"}function r(){t.playground().registerCallback(function(){var e=t("#cvs"),i=e.data("fighter"),n=e.position().left,r=t("#abobo"),s=r.data("fighter"),a=r.position().left;n+i.animations[i.currentState].width-2>a&&(i.currentState!=E&&i.currentState!=C||s.currentState==k?s.currentState!=E&&s.currentState!=C||i.currentState==k||i.currentState!=S&&c(e):s.currentState==E||s.currentState==C?(c(r),c(e)):s.currentState!=S&&c(r)),i.currentState==w?a>n+i.animations[i.currentState].width+2&&e.css("left",n+2):n>50&&i.currentState==x&&e.css("left",n-2),s.currentState==w?a>n+i.animations[i.currentState].width+2&&r.css("left",a-2):650>a&&s.currentState==x&&r.css("left",a+2);var o=r.position().left-s.animations[s.currentState].deltaX,l=e.position().left-i.animations[i.currentState].deltaX,u=(o-l)/2+l;return L(.5*-(u-400)),!1},30)}function s(){t(window).keydown(function(e){if("undefined"!=typeof F[e.which]){if(j==e.which)return F[j]=!0,void 0;O=j,j=e.which,null!=O&&(F[O]=!1),F[j]=!0}}).keyup(function(e){"undefined"!=typeof F[e.which]})}function a(e,t){if(e.data("fighter").currentState==I)return I;for(var i in F)if(F[i]){F[i]=!1;var n=e.position().left-t.position().left>0;switch(i){case"37":return n?w:x;case"39":return n?x:w;case"65":return C;case"83":return E;case"90":return S}}return _}function o(){d={id:v,health:100,currentState:_,position:250,adversary:"#abobo",animations:[{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_idle_59x106x6.png",numberOfFrame:6,delta:59,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:59,height:106},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_walk_forward_58x106x5.png",numberOfFrame:5,delta:58,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:58,height:106},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_walk_backward_58x106x5.png",numberOfFrame:5,delta:58,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:58,height:106},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_punch_120x104x6.png",numberOfFrame:6,delta:120,rate:120,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:2,width:120,height:104},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_kick_156x106x9.png",numberOfFrame:9,delta:156,rate:90,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:-20,deltaY:0,width:156,height:106},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_block_69x99x2.png",numberOfFrame:2,delta:69,rate:480,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:7,width:69,height:99},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_hit_59x103x1.png",rate:720,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:3,width:59,height:103},{animation:new t.gameQuery.Animation({imageURL:N+"/cvs/cvs_die_150x110x1.png",numberOfFrame:1,rate:720,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:3,width:150,height:110}]},t("#fighters").addSprite("cvs",{posx:250,posy:70,height:106,width:58,animation:d.animations[0].animation,geometry:t.gameQuery.GEOMETRY_RECTANGLE,callback:l}),t("#cvs").data("fighter",d),h={id:y,health:100,currentState:_,position:500,adversary:"#cvs",animations:[{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_idle_100x121x3.png",numberOfFrame:3,delta:100,rate:190,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:49,width:100,height:121},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_walk_forward_94x126x6.png",numberOfFrame:6,delta:94,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:44,width:94,height:126},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_walk_backward_94x126x6.png",numberOfFrame:6,delta:94,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:44,width:94,height:126},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_punch_131x170x4.png",numberOfFrame:4,delta:131,rate:150,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:-30,deltaY:0,width:131,height:170},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_kick_137x130x2.png",numberOfFrame:2,delta:137,rate:500,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:20,deltaY:40,width:137,height:130},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_block_81x130x1.png",rate:700,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:40,width:81,height:130},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_hit_108x120x3.png",numberOfFrame:3,delta:108,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:50,width:108,height:120},{animation:new t.gameQuery.Animation({imageURL:N+"/abobo/abobo_die_156x119x1.png",numberOfFrame:1,delta:0,rate:500,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:50,width:156,height:120}]},t("#fighters").addSprite("abobo",{posx:550,posy:60,height:121,width:100,animation:h.animations[0].animation,geometry:t.gameQuery.GEOMETRY_RECTANGLE,callback:l}),t("#abobo").data("fighter",h)}function l(e){e=t(e),fighter=e.data("fighter"),adversary=t(fighter.adversary),adversaryFighter=adversary.data("fighter");var r=_;if(fighter.id==b){r=a(e,adversary);var s=new n(r);W(s)}else null!=P&&(r=P.move);B(e,fighter.animations,r,fighter.currentState),r==C||r==E?e.css("z-index",20):(fighter.currentState==C||fighter.currentState==E)&&e.css("z-index",i),fighter.currentState=r}function c(e){var t=e.data("fighter");t.health=t.health-45,0>t.health?(B(e,t.animations,I,t.currentState),t.currentState=I,g=!1):(B(e,t.animations,k,t.currentState),t.currentState=k)}var u,h,d,f=e.GAME,p="Street Fighter",m=null,g=!0,v="cvs",y="abobo",b=null,_=0,w=1,x=2,C=3,E=4,S=5,k=6,I=7,T=800,A=200,N="/assets/games/sfighter/",P=null,D=null,M=function(e,i){m=e,u=i,D="playground",b=i.players[0].id==e.id?y:v,u.options=R(i.options),g=!0,H(),s(),o(),r(),t().setLoadBar("loadingBar",600),t.playground().startGame(function(){t("#welcomMessage").fadeOut(2e3,function(){t(this).remove()})})},R=function(e){return e},F=new Array;F[37]=!1,F[39]=!1,F[65]=!1,F[83]=!1,F[90]=!1;var O=null,j=null,H=function(){var e=document.createElement("div");e.setAttribute("id",D),e.setAttribute("style","width: 800px; height: 200px;"),t("#wrapper_body").prepend(e);var i=document.createElement("div");i.setAttribute("id","welcomMessage"),i.setAttribute("style","position: absolute; top: 0px; width: 800px; height: 200px; color: white; z-index: 1000; background: #333;"),t("#"+D).prepend(i),t("#"+D).playground({height:A,width:T,refreshRate:30,keyTracker:!0});var n=new t.gameQuery.Animation({imageURL:N+"/stage/foreground.png",type:t.gameQuery.ANIMATION_VERTICAL}),r=new t.gameQuery.Animation({imageURL:N+"/stage/ground.png"}),s=new t.gameQuery.Animation({imageURL:N+"/stage/background1.png"}),a=new t.gameQuery.Animation({imageURL:N+"/stage/background2.png"}),o=new t.gameQuery.Animation({imageURL:N+"/stage/background3.png"});t.playground().addSprite("background3",{posx:90,posy:0,height:200,width:534,animation:o}).addSprite("background2",{posx:30,posy:-50,height:180,width:432,animation:a}).addSprite("background1",{posx:50,posy:-150,height:317,width:749,animation:s}).addSprite("ground",{posx:-300,posy:0,height:200,width:1493,animation:r}).addGroup("fighters").end().addSprite("foreground",{posx:-800,posy:165,height:44,width:2e3,animation:n}),t("#sceengraph").css("background-color","#121423")},L=function(e){e>50?e=50:-50>e&&(e=-50),t("#foreground").css("left",""+(-800+e/.5)+"px"),t("#ground").css("left",""+(-300+e)+"px"),t("#fighters").css("left",""+e+"px"),t("#background1").css("left",""+(50+e/2)+"px"),t("#background2").css("left",""+(30+e/4)+"px"),t("#background3").css("left",""+(90+e/5)+"px")},B=function(e,t,i,n){e.setAnimation(t[i].animation).width(t[i].width).height(t[i].height).css("top",e.position().top+t[i].deltaY-t[n].deltaY).css("left",e.position().left+t[i].deltaX-t[n].deltaX)},q=function(e,t){return 2!=t.players.length?new f.createValidationResult(!1,"This game needs two players"):new f.createValidationResult(!0,"Ok")},z=function(){var e=new Array;return e},W=function(e){f.sendAction(u,e)},$=function(e){P=e},U=function(){return p};return{init:M,getName:U,validateParams:q,minimumRequirements:z,onActionReceived:$}}(PRESENCE,jQuery),PRESENCE.GAME.TER=function(e,t){function i(e,t){this.player=e,this.square=t,this.type="general"}var n,r=e.GAME,s="Tic Tac Toe",a=null,o=null,l=!0,c=null,u="tresEnRayaContainerDivID",h="tresEnRayaMessageDivID",d=[],f=null,p=null,m=null,g=function(e,t,i){a=e,n=t,c=i,n.options=v(t.options),S(),k(),I(),o=n.players[0],l=!0,a.id==o.id?A("You start!"):A(o.name+" starts!")},v=function(e){return"theme"in e||(e.theme="Modern"),"rounds"in e||(e.rounds="1"),e},y=function(e,t){return 2!=t.players.length?new r.createValidationResult(!1,"This game needs two players"):new r.createValidationResult(!0,"Ok")},b=function(){var e=new Array;return e},_=function(e){r.sendAction(n,e)},w=function(e){x(e)},x=function(e){if(0!=l){if(!C(e))return A("Ilegal action"),!1;a.id==e.player.id&&_(e),P(e),D(e);var t=M();return null!=t?(R(t),N(),void 0):(E(),void 0)}},C=function(e){return o.id!=e.player.id?!1:0!=d[e.square][2]?!1:!0},E=function(){var e=n.players.length,t=n.players.indexOf(o);o=t==e-1?n.players[0]:n.players[t+1],a.id==o.id?A("Is your turn!"):A(o.name+" turn")},S=function(){var e=document.createElement("div");e.setAttribute("id",u),e.setAttribute("class","tresEnRayaContainerDivClass"),t("#"+c).append(e);var i=document.createElement("div");i.setAttribute("id",h),t(i).addClass("tresEnRayaMessageDivClass"),t(i).addClass("tresEnRayaMessageTheme"+n.options.theme),t("#"+c).append(i);var r=document.createElement("p");r.setAttribute("id",h+"p"),t(r).addClass("tresEnRayaMessagePTheme"+n.options.theme),t("#"+h).append(r);var s=12,a=t("#"+c).width(),o=t("#"+c).height(),l=300,d=100,p=Math.max(Math.min(a,o,l),d);f=p-s,t("#"+u).height(f),t("#"+u).width(f),t("#"+h).width(f),t("#"+u).addClass("tresEnRayaContainerTheme"+n.options.theme)},k=function(){p=f/3,m=p/2,d[0]=[m,m,0],d[1]=[m+p,m,0],d[2]=[f-m,m,0],d[3]=[m,m+p,0],d[4]=[m+p,m+p,0],d[5]=[f-m,m+p,0],d[6]=[m,f-m,0],d[7]=[m+p,f-m,0],d[8]=[f-m,f-m,0]},I=function(){t("#"+u).click(function(e){var n=e.pageX-t("#"+u).offset().left,r=e.pageY-t("#"+u).offset().top;if(!t(e.target).is("img")&&o.id==a.id){square=T(n,r);var s=new i(o,square);x(s)}})},T=function(e,t){for(var i=0;d.length>i;i++)if(m>Math.abs(e-d[i][0])&&m>Math.abs(t-d[i][1]))return i;return 0},A=function(e){t("#"+h+"p").html(e)},N=function(){l=!1},P=function(e){if(e.player.id==n.players[0].id)var t=1;else var t=2;d[e.square][2]=t},D=function(e){var i=document.createElement("img");if(e.player.id==n.players[0].id)var r="circle";else var r="aspa";t(i).attr("src","/assets/games/ter/"+n.options.theme.toLowerCase()+"_"+r+".png"),t("#"+u).append(i),t(i).addClass("tresEnRayaImgTheme"+n.options.theme);var s=.8,a=.7*(-p*s/2),o=13;t(i).width(p*s),t(i).height(p*s),t(i).css("top",d[e.square][1]+o),t(i).css("left",d[e.square][0]+a)},M=function(){for(var e=!0,t=0;d.length>t;t++)if(0==d[t][2]){e=!1;break}return e?"finish":d[0][2]==d[1][2]&&d[1][2]==d[2][2]&&0!=d[2][2]?n.players[d[0][2]-1]:d[3][2]==d[4][2]&&d[4][2]==d[5][2]&&0!=d[5][2]?n.players[d[3][2]-1]:d[6][2]==d[7][2]&&d[7][2]==d[8][2]&&0!=d[8][2]?n.players[d[6][2]-1]:d[0][2]==d[3][2]&&d[3][2]==d[6][2]&&0!=d[6][2]?n.players[d[0][2]-1]:d[1][2]==d[4][2]&&d[4][2]==d[7][2]&&0!=d[7][2]?n.players[d[1][2]-1]:d[2][2]==d[5][2]&&d[5][2]==d[8][2]&&0!=d[8][2]?n.players[d[2][2]-1]:d[0][2]==d[4][2]&&d[4][2]==d[8][2]&&0!=d[8][2]?n.players[d[0][2]-1]:d[6][2]==d[4][2]&&d[4][2]==d[2][2]&&0!=d[2][2]?n.players[d[6][2]-1]:null},R=function(e){"finish"!=e?a.id==e.id?A("You have won the game"):A(e.name+" has won the game"):A("Finished game")},F=function(){return s};return{init:g,getName:F,validateParams:y,minimumRequirements:b,onActionReceived:w}}(PRESENCE,jQuery),PRESENCE.NOTIFICATIONS=function(e,t){var i=function(){},n=function(e){null!=e&&(e.css("display","block"),e.css("visibility","visible"),e.fadeIn())},r=function(e,t,i){e.html('<p notification_type="'+t+'" class="ui-chatbox-notify-text">'+i+"</p>"),n(e)},s=function(e,i,n){var s=t("#"+e).parent().find("div.ui-chatbox-notify");1==s.length&&r(s,i,n)},a=function(e){var t=I18n.t("chat.notify.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)});s(e,"guestOffline",t)},o=function(e){null!=e&&(e.fadeOut(),e.css("display","none"),e.css("visibility","hidden"))},l=function(e){var t=d(e);o(t)},c=function(){var e=t("div.ui-chatbox-notify"),i=I18n.t("chat.notify.offline");r(e,"userOffline",i)},u=function(){var e=t("div.ui-chatbox-notify");o(e)},h=function(){u(),PRESENCE.XMPPClient.getDisconnectionFlag()?c():t.each(PRESENCE.WINDOW.getAllDisconnectedSlugsWithChatBoxes(),function(e,t){PRESENCE.WINDOW.isSlugGroup(t)||a(t)})},d=function(e){var t=PRESENCE.WINDOW.getChatBoxForSlug(e);if(null!=t){var i=t.parent().find("div.ui-chatbox-notify");if(1==i.length)return i}return null},f=function(e){return t(e).find("p").attr("notification_type")},p=function(e,i,r,s){var a=document.createElement("p");t(a).attr("class","ui-chatbox-notify-text"),t(a).attr("notification_type",r),t(a).html(i),null!=s&&t(a).attr("name",s),t(e).append(a),n(e)},m=function(e,i){var n=t(e).find("p.ui-chatbox-notify-text[name="+i+"]");if(null!=n){n.remove();var r=0==t(e).find("p").length;r&&o(e)}},g=function(e){var i=t(e).find("p.ui-chatbox-notify-text");if(null!=i){i.remove();var n=0==t(e).find("p").length;n&&o(e)}},v=function(e,t,i,n){var r=d(e);null!=r&&p(r,t,i,n)},y=function(e,t){var i=d(e);null!=i&&m(i,t)},b=function(e){var t=d(e);null!=t&&g(t)},_=function(e,t){PRESENCE.WINDOW.isSlugGroup(e)&&v(e,t,"roomNotification",t)},w=function(e,t){PRESENCE.WINDOW.isSlugGroup(e)&&y(e,t)},x=function(e,t){b(e),v(e,t,"roomNotification","Initial_Notification")},C=function(e,i){var n=d(e);null!=n&&t(n).find("p.ui-chatbox-notify-text[name=Initial_Notification]").html(i)},E=function(e){"roomNotification"!=f(e)&&o(e)};return{init:i,showOfflineChatNotificationForSlug:a,hideChatNotificationForSlug:l,updateNotificationsAfterUserDisconnect:c,updateAllNotifications:h,addNickToNotificationInGroup:_,removeNickFromNotificationInGroup:w,initialNotificationInGroup:x,changeInitialNotificationInGroup:C,onClickChatNotification:E}}(PRESENCE,jQuery),PRESENCE.PARSER=function(e,t){function n(e,t){if(t)var i="ownChatText";else var i="guestChatText";return'<span class="'+i+'">'+r(e)+"</span>"}function r(e){if(null!=e.match(b))return e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),"<pre>"+e+"</pre>";var t=e.split(" ");for(i=0;t.length>i;i++)t[i]=s(t[i]);return t.join(" ")}function s(e){if(""==e.trim()||null!=e.match(_))return e;var t=e.match(w);if(null!=t){var i=t[0],n=p(i);switch(n){case"link":var r=l(i,i),f=a(e,i);return s(f[0])+r+s(f[1]);case"image":var m=c(i),f=a(e,i);return s(f[0])+m+s(f[1]);case"video-youtube":var v=u(i),f=a(e,i);return s(f[0])+v+s(f[1]);default:return e}}var y=e.match(x);if(null!=y){var i=y[0],n=p(i);switch(n){case"link":var r=l("http://"+i,i),f=a(e,i);return s(f[0])+r+s(f[1]);case"image":var m=c("http://"+i),f=a(e,i);return s(f[0])+m+s(f[1]);case"video-youtube":var v=u("http://"+i),f=a(e,i);return s(f[0])+v+s(f[1]);default:return e}}var b=e.match(C);if(null!=b)for(g=0;b.length>g;g++)e=e.replace(d(b[g]),o(b[g]));var S=e.match(E);if(null!=S)for(h=0;S.length>h;h++)e=e.replace(d(S[h]),o(S[h]));return e}function a(e,t){var i=[],n=e.split(t);i[0]=n[0],n.shift();var r=n.join(t);return i[1]=r,i}function o(e){if(e in v){var t=v[e];return'<img class="chatEmoticon" src="/assets/emoticons/'+t+'"/>'}return e}function l(e,t){return'<a target="_blank" class="chatLink" href="'+e+'">'+t+"</a>"}function c(e){return'<a target="_blank" class="chatImageLink" href="'+e+'">'+'<img class="chatImage" src="'+e+'"/>'+"</a>"}function u(e){var i=e.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],n="http://gdata.youtube.com/feeds/api/videos/"+i;return t.ajax({type:"GET",url:n,cache:!1,dataType:"jsonp",success:function(n){var r=e,s="",a=t(n).find("media\\:title");a.length>0&&(r=t(a).text());var o=t(n).find("media\\:thumbnail");if(o.length>0){var c=t(o[0]).attr("url");null!=c&&(s='<p><img class="chatVideoImage" src="'+c+'"/></p>')}t("a[youtube_id="+i+"]").html(l(e,r)+s)},error:function(){}}),'<a target="_blank" youtube_id="'+i+'" class="chatLink" href="'+e+'">'+e+"</a>"}function d(e){e=e.replace(")","\\)"),e=e.replace("(","\\(");var t="("+e+")";return t=f(t),new RegExp(t,"g")}function f(e){return e=e.replace("+","\\+"),e=e.replace("?","\\?")}function p(e){if(null!=e.match(S))return"video-youtube";var t=e.split(".");if(null!=t&&t.length>0)var i=t[t.length-1];else var i=null;switch(i){case"jpg":return"image";case"png":return"image";case"gif":return"image";default:return"link"}}function m(e,t){if(t)var i="ownName";else var i="guestName";return'<span class="'+i+'">'+e+"</span>"}var v=new Array;v[":)"]="face-smile.png",v[":("]="face-sad.png",v["(B)"]="beer.png",v["(C)"]="clock.png",v["(P)"]="present.png",v[":P"]="face-raspberry.png",v[":Z"]="face-tired.png",v["(R)"]="rain.png",v["(S)"]="sun.png",v[";)"]="face-wink.png";var y=function(){},b=/.*\<[^>]+>.*/g,_=/^[aA-zZ0-9]+$/g,w=/(http(s)?:\/\/)([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,x=/(www[.])([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,C=/\([A-Z]\)/g,E=/((:|;)([()A-Z]))/g,S=/(http(s)?:\/\/)?(((youtu.be\/)([aA-zZ0-9]+))|((www.youtube.com\/watch\?v=)([aA-z0-9Z&=.])+))/g;return{init:y,getParsedContent:n,getParsedName:m}}(PRESENCE,jQuery),PRESENCE.PERSISTENCE=function(e,t){var i=function(){},n=function(){window.sessionStorage&&(r(),a(),s())},r=function(){var e=PRESENCE.WINDOW.getMainChatBox();null!=e?sessionStorage.setItem("chat_mainChatBox_status",t(e).is(":visible")):sessionStorage.setItem("chat_mainChatBox_status",null)},s=function(){for(var e=PRESENCE.WINDOW.getAllChatBoxes(),i=PRESENCE.WINDOW.getVisibleChatBoxes(),n=[],r=[],s=[],a=[],o=0;e.length>o;o++){var l=e[o].id;if(PRESENCE.WINDOW.isSlugGroup(l))-1!=i.indexOf(PRESENCE.WINDOW.getChatBoxForSlug(l))&&r.push(l);else{var c=t(e[o]).html();sessionStorage.setItem("chat_log_"+l,c),n.push(l)}}n.length>0?sessionStorage.setItem("slugs_with_stored_log",n.join(",")):sessionStorage.setItem("slugs_with_stored_log",null),r.length>0?sessionStorage.setItem("open_group_slugs",r.join(",")):sessionStorage.setItem("open_group_slugs",null);for(var u=0;i.length>u;u++)i[u].is(":visible")?s.push(t(i[u]).attr("id")):a.push(t(i[u]).attr("id"));s.length>0?sessionStorage.setItem("slugs_with_visible_max_chatbox",s.join(",")):sessionStorage.setItem("slugs_with_visible_max_chatbox",null),a.length>0?sessionStorage.setItem("slugs_with_visible_min_chatbox",a.join(",")):sessionStorage.setItem("slugs_with_visible_min_chatbox",null)},a=function(){sessionStorage.setItem("chat_user_status",PRESENCE.XMPPClient.getUserStatus())},o=function(){if(!window.sessionStorage)return"available";var e=sessionStorage.getItem("chat_user_status");return null!=e&&(e in PRESENCE.XMPPClient.getSStreamChatStatus()||"offline"==e)?e:"available"},l=function(){window.sessionStorage&&u()},c=function(){return window.sessionStorage?"true"==sessionStorage.getItem("chat_mainChatBox_status")?!0:!1:!1},u=function(){var e=sessionStorage.getItem("slugs_with_visible_max_chatbox"),t=sessionStorage.getItem("slugs_with_visible_min_chatbox");if(null!=e)var i=e.split(",");else var i=[];if(null!=t)var n=t.split(",");else var n=[];d(i,n),h(i,n)},h=function(e,t){var i=sessionStorage.getItem("open_group_slugs");if(null!=i&&"null"!=i)for(var n=i.split(","),r=0;n.length>r;r++){var s=n[r];PRESENCE.XMPPClient.getNameFromSlug(s);var a=-1==t.indexOf(s);PRESENCE.XMPPClient.accessRoom(s,a)}},d=function(e,t){var i=sessionStorage.getItem("slugs_with_stored_log");if(null!=i)for(var n=i.split(","),r=0;n.length>r;r++){var s=sessionStorage.getItem("chat_log_"+n[r]);if(null!=s){var a=n[r];PRESENCE.XMPPClient.getNameFromSlug(a),PRESENCE.XMPPClient.getJidFromSlug(a),PRESENCE.WINDOW.createBuddyChatBox(a),-1!=t.indexOf(a)&&PRESENCE.WINDOW.getChatBoxForSlug(a).parent().toggle(!1),-1==e.indexOf(a)&&-1==t.indexOf(a)&&PRESENCE.WINDOW.closeChatBox(a),PRESENCE.WINDOW.getChatBoxForSlug(a).html(s),PRESENCE.UIMANAGER.isSlugChatConnected(a)||PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(a)}}};return{init:i,storeChatData:n,restoreChatData:l,getRestoreUserChatStatus:o,getRestoreMainChatBoxStatus:c}}(PRESENCE,jQuery),PRESENCE.STORE=function(e,t){var i=function(){},n=function(){PRESENCE.XMPPClient.authByCookie()||window.sessionStorage&&(1==t("#user_password").length&&""!=t("#user_password").val()?sessionStorage.setItem("ss_user_pass",t("#user_password").val()):1==t("#password").length&&""!=t("#password").val()&&sessionStorage.setItem("ss_user_pass",t("#password").val()))};return{init:i,storePassword:n}}(PRESENCE,jQuery),PRESENCE.UIMANAGER=function(e,t){var i=new Array;i[""]="available",i.chat="available",i.away="away",i.xa="away",i.dnd="dnd";var n,r=function(){t(window).unload(function(){PRESENCE.PERSISTENCE.storeChatData(),PRESENCE.XMPPClient.disconnect()})},s=15,a=s+1,o=function(){a++,a>s-1&&(clearTimeout(n),PRESENCE.XMPPClient.isUserConnected()||c(I18n.t("chat.disconnected")))},l=function(){return a>s-1?(a=0,n=setInterval("PRESENCE.UIMANAGER.connectButtonTimerFunction()",1e3),c(I18n.t("chat.connecting")),!0):!1},c=function(e){null==PRESENCE.WINDOW.getMainChatBox()?t("#chat_header_title").html(e):PRESENCE.WINDOW.changeMainChatBoxHeaderTitle(e)},u=!1,h=function(){t(".dropdown dt a").click(function(e){e.preventDefault(),t(".dropdown dd ul").toggle(),t(".dropdown dd ul").is(":visible")?y("default"):y(PRESENCE.XMPPClient.getUserStatus()),PRESENCE.XMPPClient.restartAwayTimer()}),t(".dropdown dd ul li a.option").click(function(e){e.preventDefault(),PRESENCE.XMPPClient.setUserStatus(t(this).find("span.value").html()),"offline"==PRESENCE.XMPPClient.getUserStatus()?PRESENCE.XMPPClient.disconnect():PRESENCE.XMPPClient.sendStatus(),t(".dropdown dd ul").hide()}),t(document).bind("click",function(e){var i=t(e.target);i.parents().hasClass("dropdown")||(t(".dropdown dd ul").hide(),y(PRESENCE.XMPPClient.getUserStatus()))})},d=function(){t("div.user_presence").click(function(){var e=t(this).attr("slug");PRESENCE.WINDOW.createBuddyChatBox(e)}),t("div.user_presence").mouseleave(function(){var e=t(this);t.each(t(".tooltip:visible"),function(i){t(t(".tooltip:visible")[0]).html()==t(e).attr("name")&&t(t(".tooltip:visible")[i]).hide()})})},f=function(){if(null==PRESENCE.WINDOW.getMainChatBox())t(".user_presence a[title]").tooltip();else{for(var e=document.styleSheets,i=0;e.length>i;i++)for(var n=e[i].cssRules||e[i].rules,r=0;n.length>r;r++)".tooltip"===n[r].selectorText&&(n[r].style.background='url("black_arrow9.png") repeat scroll 0% 0% transparent');t(".user_presence a[title]").tooltip({opacity:.95,relative:!1,position:"top left",offset:[0,31]})}},p=function(){t("#chat_partial select.flexselect").flexselect({allowMismatch:!0,defaultmessage:I18n.t("chat.zerocontacts")}),t("#chat_partial #search_chat_contact_flexselect").watermark(I18n.t("chat.search"),"#666"),t("#chat_partial #search_chat_contact_flexselect").focus(function(){v(!0)}),t("#chat_partial #search_chat_contact_flexselect").blur(function(){v(!1)})},m=function(){h(),d(),f()},g=function(e,i){if("ZERO_CONTACTS"!=i&&""!=i){var n=i;PRESENCE.WINDOW.createBuddyChatBox(n),P(n)||PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(n)}t("#chat_partial #search_chat_contact_flexselect").blur(),v(!1)},v=function(e){var i=R();if(e){if(u=!0,i>9){var n=PRESENCE.WINDOW.getMainchatBoxParams()[1];PRESENCE.WINDOW.changeMainChatBoxHeight(n)}else{var r=PRESENCE.WINDOW.getMainchatBoxParams()[0],s=r+20+19*i;PRESENCE.WINDOW.changeMainChatBoxHeight(s)}t(".users_connected").hide()}else PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes()),t(".users_connected").show()},y=function(e){if(e in PRESENCE.XMPPClient.getSStreamChatStatus()&&(e=PRESENCE.XMPPClient.getSStreamChatStatus()[e]),0!=t(".dropdown dt a span").length){if("default"==e){var n=I18n.t("chat.status.choose");return t(".dropdown dt a span").html(n),void 0}if("offline"==e){var r=t("#"+e).html();return t(".dropdown dt a span").html(r),void 0}if(e in i&&t("#"+i[e]).length>0){var r=t("#"+i[e]).html();t(".dropdown dt a span").html(r)}}},b=function(){return timerCounter=0,PRESENCE.UTILITIES.log("updateChatWindow()"),PRESENCE.UTILITIES.log("Connected "+PRESENCE.XMPPClient.isUserConnected()),PRESENCE.XMPPClient.isUserConnected()?(t.post("/chatWindow",{},function(e){t(".tooltip").hide(),w(e),E(),m(),q(),T(),PRESENCE.XMPPClient.isStropheConnected()&&PRESENCE.XMPPClient.isNewConnection()&&(PRESENCE.XMPPClient.setNewConnection(!1),PRESENCE.XMPPClient.isFirstConnection()?(PRESENCE.PERSISTENCE.restoreChatData(),"undefined"!=typeof current_group_slug&&PRESENCE.XMPPClient.accessRoom(current_group_slug,!1),PRESENCE.XMPPClient.setFirstConnection(!1)):(PRESENCE.NOTIFICATIONS.updateAllNotifications(),t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleGroupBoxes(),function(e,i){PRESENCE.XMPPClient.accessRoom(i,t(i).is(":visible"))})))},"html"),void 0):(_(),q(),void 0)},_=function(){t("#chat_partial").html(PRESENCE.WINDOW.modifyChatPartialIfMainBox(t("#chat_connection_off").html())),t(".connectChatButton").bind("click",function(){l()&&(PRESENCE.XMPPClient.authByCookie()?PRESENCE.XMPPClient.connectToChat(user_jid,cookie):PRESENCE.XMPPClient.connectToChat(user_jid,t("#user_password").val()))}),PRESENCE.XMPPClient.authByCookie()?t("#chat_partial #passwordFormChat").hide():(t(".storePass").bind("click",function(){PRESENCE.STORE.storePassword()}),window.sessionStorage&&null!=sessionStorage.getItem("ss_user_pass")?t("#chat_partial #passwordFormChat").hide():t("#chat_partial #passwordFormChat").show())},w=function(e){t("#chat_partial").html(PRESENCE.WINDOW.modifyChatPartialIfMainBox(t("#chat_widgets").html())),t("#chat_partial").append(e),x(),p()},x=function(){t("#chat_partial #search_chat_contact").children().remove(),t("#chat_partial #search_chat_contact").append('<option value=""></option>'),t.each(F(),function(e,i){t("#chat_partial #search_chat_contact").append("<option value="+i+">"+PRESENCE.XMPPClient.getNameFromSlug(i)+"</option>")})},C=function(){PRESENCE.NOTIFICATIONS.updateNotificationsAfterUserDisconnect(),t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleVideoBoxes(),function(e,t){PRESENCE.VIDEOCHAT.closeVideoSession(t)})},E=function(){t('div.user_presence[slug][connected="false"]').hide()},S=function(e){t("div.user_presence[slug="+e+"]").attr("connected","false"),t("div.user_presence[slug="+e+"]").hide()},k=function(e){t("div.user_presence[slug="+e+"]").attr("connected","true"),t("div.user_presence[slug="+e+"]").show()},I=function(e,t){t?(k(e),PRESENCE.NOTIFICATIONS.hideChatNotificationForSlug(e)):(S(e),PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(e),PRESENCE.VIDEOCHAT.closeVideoSession(e)),z(),T()},T=function(){if(0==M())if(t(".users_connected p.zero_users_connected").length>0)t(".users_connected p.zero_users_connected").show();else{var e=I18n.t("chat.zerousers");t(".users_connected").append('<p class="zero_users_connected">'+e+"</p>")}else t(".users_connected p.zero_users_connected").hide()},A=function(e,n){if(n in i){var r=i[n],s=t("img.presence_status"),a="/assets/status",o=N(e);t(o).find(s).attr("src",a+"/"+r+".png")}},N=function(e){return t("div.user_presence[slug="+e+"]").length>0?t("div.user_presence[slug="+e+"]")[0]:null},P=function(e){return"true"==t("div.user_presence[slug="+e+"]").attr("connected")},D=function(e){return null!=PRESENCE.WINDOW.getChatBoxForSlug(e)},M=function(){return t('div.user_presence[slug][connected="true"]').length},R=function(){return t("div.user_presence[slug]").length},F=function(){return j()[2]},O=function(){return j()[0]},j=function(){var e=[],i=[],n=[],r=t("div.user_presence[slug]");return t.each(r,function(r,s){"true"==t(s).attr("connected")?e.push(t(s).attr("slug")):i.push(t(s).attr("slug")),n.push(t(s).attr("slug"))}),[e,i,n]},H=function(e,t,i){if(!PRESENCE.UTILITIES.antifloodControl(e,t,i)){var n=PRESENCE.XMPPClient.getNameFromSlug(e);PRESENCE.WINDOW.createBuddyChatBox(e),B(n,e,t)}},L=function(e,t){var i=PRESENCE.XMPPClient.getSlugFromJid(e),n=PRESENCE.XMPPClient.getNickFromChatRoomJid(e);D(i)||PRESENCE.WINDOW.createGroupChatBox(i,!0),B(n,i,t)},B=function(e,t,i){var n=PRESENCE.PARSER.getParsedContent(i,!1),r=PRESENCE.PARSER.getParsedName(e,!1);PRESENCE.WINDOW.getChatBoxForSlug(t).chatbox("option","boxManager").addMsg(r,n),PRESENCE.WINDOW.rotatePriority(t),PRESENCE.UTILITIES.blinkTitleOnMessage(e),PRESENCE.AUDIO.mustPlaySoundForChatWindow(PRESENCE.WINDOW.getChatBoxForSlug(t))&&PRESENCE.AUDIO.playSound("onMessageAudio")
},q=function(){if(null!=PRESENCE.WINDOW.getMainChatBox())if(PRESENCE.XMPPClient.isUserConnected()){var e=M();PRESENCE.WINDOW.changeMainChatBoxHeaderTitle(I18n.t("chat.title")+" ("+e+")"),PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes())}else PRESENCE.XMPPClient.isFirstConnection()?c(I18n.t("chat.connecting")):c(I18n.t("chat.disconnected"))},z=function(){PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes()),q()};return{init:r,changeChatHeaderTitle:c,changeSelectContactValue:g,setStatusWidgetTitle:y,updateChatWindow:b,updateInterfaceAfterUserDisconnect:C,updateInterfaceAfterPresenceStanza:I,setUserIconStatus:A,connectButtonTimerFunction:o,getConnectionBoxFromSlug:N,isSlugChatConnected:P,existsSlugChatBox:D,getAllConnectedSlugs:O,afterReceivedChatMessage:H,afterReceivedGroupChatMessage:L,writeReceivedMessageOnChatWindow:B,updateConnectedUsersOfMainChatBox:q}}(PRESENCE,jQuery),PRESENCE.UTILITIES=function(e,t){var i,n,r=function(){c()},s=!1,a=function(e){s&&console.log(e)},o=function(){i=!1},l=function(){f(),h=[],i=!0},c=function(){window.onfocus=PRESENCE.UTILITIES.onChatFocus,window.onblur=PRESENCE.UTILITIES.onChatBlur},u=function(){return i},h=[],d=function(e,i){t(document).attr("title",e[i]),i=(i+1)%e.length,n=setTimeout(function(){PRESENCE.UTILITIES.blinkTitle(e,i)},2e3)},f=function(){clearTimeout(n),h.length>0&&t(document).attr("title",h[0])},p=function(e){i||(0==h.length&&h.push(t(document).attr("title")),-1==h.indexOf(e)&&h.push(e+" says..."),f(),d(h,h.length-1))},m=function(){var e=E(),t=T();return e&&t},g=new Array,v=500,y=function(e,t,i){e in g||(g[e]=[,[]]),null==i&&(i=_());var n=g[e][0],r=(new Date).getTime();if(v>r-n)return w(e,t,i);if(g[e][1].length>0){if(g[e][1][0]!=i)return w(e,t,i);g[e][1].splice(0,1)}return g[e][0]=r,!1},b=1,_=function(){return++b},w=function(e,t,i){return-1==g[e][1].indexOf(i)&&g[e][1].push(i),setTimeout(function(){PRESENCE.UIMANAGER.afterReceivedChatMessage(e,t,i)},v),!0},x=500,C=null,E=function(){var e=(new Date).getTime();return null==C?(C=e,!0):x>e-C?!1:(C=e,!0)},S=new Array,k=5e3,I=function(e){var t=e.elem.uiChatbox.find(".ui-chatbox-content").find(".ui-chatbox-log").attr("id");if("undefined"==typeof t)return!1;if(t in contactsInfo&&"disconnected"!=contactsInfo[t].videoChatStatus)return!1;var i=(new Date).getTime();if(!(t in S))return S[t]=i,!0;var n=S[t];return k>i-n?!1:(S[t]=i,!0)},T=function(){return!PRESENCE.XMPPClient.getDisconnectionFlag()&&PRESENCE.XMPPClient.isStropheConnected()},A=function(e){return"<%=SocialStream::Presence.social_stream_presence_username%>"==e};return{init:r,log:a,onChatFocus:l,onChatBlur:o,blinkTitleOnMessage:p,blinkTitle:d,userChatDataInputControl:m,antifloodControl:y,mustBounceBoxForChatWindow:I,isAdminSlug:A,getChatFocus:u}}(PRESENCE,jQuery),PRESENCE.VIDEOCHAT=function(e,t,i){var n=function(){E()},r="default",s=new Array,a=function(e){var t=PRESENCE.WINDOW.toggleVideoBoxForSlug(e);t?c(e):o(e)},o=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"games")).show(),g(e)},l=1,c=function(e){if(t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"games")).hide(),e in contactsInfo)var i=contactsInfo[e].videoChatStatus;else var i=null;return TB.checkSystemRequirements()!=TB.HAS_REQUIREMENTS?(y(e,I18n.t("chat.videochat.requirements")),null!=i&&(contactsInfo[e].videoChatStatus="disconnected"),void 0):PRESENCE.XMPPClient.isUserConnected()?PRESENCE.UIMANAGER.isSlugChatConnected(e)?null==i?(l>0?(l--,y(e,I18n.t("chat.videochat.connectingWait")),setTimeout(function(){c(e)},5e3)):y(e,I18n.t("chat.videochat.unable")),void 0):(l=1,"disconnected"==i&&u(e),void 0):(y(e,I18n.t("chat.videochat.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),null!=i&&(contactsInfo[e].videoChatStatus="disconnected"),void 0):(y(e,I18n.t("chat.videochat.offline")),null!=i&&(contactsInfo[e].videoChatStatus="disconnected"),void 0)},u=function(e){return y(e,I18n.t("chat.videochat.negotiating")),contactsInfo[e].videoChatStatus="negotiating",null!=contactsInfo[e].version?(h(e),void 0):(PRESENCE.XMPPClient.sendIQStanzaForRequestClientInfo(e),void 0)},h=function(e){contactsInfo[e].version==PRESENCE.XMPPClient.getJavascriptXMPPClientName()?(contactsInfo[e].videoChatStatus="connecting",y(e,I18n.t("chat.videochat.connecting")),d(e)):(y(e,I18n.t("chat.videochat.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected")},d=function(e){t.post("/requestVideoChat.xml",{},function(i){var n=t(i).find("session");return 1==n.length&&1==t(n).find("id").length&&1==t(n).find("user_token").length&&1==t(n).find("guest_token").length?(contactsInfo[e].session_id=t(n).find("id").text(),contactsInfo[e].user_token=t(n).find("user_token").text(),contactsInfo[e].guest_token=t(n).find("guest_token").text(),f(e),void 0):(y(e,I18n.t("chat.videochat.serverIssue")),contactsInfo[e].videoChatStatus="disconnected",void 0)})},f=function(e){contactsInfo[e].videoChatStatus="waiting",y(e,I18n.t("chat.videochat.waiting")),PRESENCE.XMPPClient.sendIQStanzaToRequestVideochat(e)},p=function(e,t){"waiting"==contactsInfo[e].videoChatStatus&&("yes"==t?(y(e,I18n.t("chat.videochat.establishing")),contactsInfo[e].videoChatStatus="establishing",N(e)):"no"==t?(y(e,I18n.t("chat.videochat.rejected",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"):(y(e,I18n.t("chat.videochat.rejectedBusy",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"))},m=function(e){e in contactsInfo?"pending"==contactsInfo[e].videoChatStatus&&(y(e,I18n.t("chat.videochat.cancel",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"):g(e)},g=function(e){if(e in contactsInfo){var t=contactsInfo[e].videoChatStatus;"connected"==t?(y(e,I18n.t("chat.videochat.disconnecting")),contactsInfo[e].session.connected&&contactsInfo[e].session.disconnect(),C(e)):"waiting"==t?PRESENCE.XMPPClient.sendIQStanzaToCancelVideochat(e):"pending"==t&&PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(e,"no"),contactsInfo[e].videoChatStatus="disconnected"}PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1)},v=function(e){e in contactsInfo&&(contactsInfo[e].videoChatStatus="negotiating")&&h(e)},y=function(e,t){PRESENCE.WINDOW.setVideoBoxContent(e,'<p class="video-info"> '+t+" </p>")},b=function(e){return"disconnected"!=contactsInfo[e].videoChatStatus?(PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(e,"busy"),void 0):(contactsInfo[e].videoChatStatus="pending",PRESENCE.WINDOW.createBuddyChatBox(e),PRESENCE.WINDOW.getChatBoxForSlug(e),_(e),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!0),void 0)},_=function(e){var t='<p class="video-info">'+I18n.t("chat.videochat.call",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})+" </p>",i=t+'<p class="video-request"> <a class="videoChatButton" slug="'+e+'" value="yes">'+I18n.t("chat.videochat.accept")+"</a> -"+' <a class="videoChatButton" slug="'+e+'" value="no">'+I18n.t("chat.videochat.deny")+"</a> </p>";PRESENCE.WINDOW.setVideoBoxContent(e,i),w()},w=function(){t(".videoChatButton").click(function(e){e.preventDefault();var i=t(this).attr("value"),n=t(this).attr("slug");PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(n,i),"yes"==i?(y(n,I18n.t("chat.videochat.establishing")),contactsInfo[n].videoChatStatus="establishing",N(n)):(contactsInfo[n].videoChatStatus="disconnected",g(n))})},x=function(e){var i=PRESENCE.WINDOW.getPublisherVideoBoxForSlug(e),n=PRESENCE.WINDOW.getChatBoxForSlug(e),r=PRESENCE.WINDOW.getVideoBoxForSlug(e);if(null!=n&&null!=r&&null!=i){var s="-1"!=i.css("z-index"),a=I+1,o=t(n)[0].scrollHeight,l=n.outerHeight(),c=o-n.scrollTop()-l,u=145;s?(i.css("z-index","-1"),n.css("height",n.height()+a),r.css("height",r.height()-a),a>c?n.scrollTop(n.scrollTop()-c):n.scrollTop(n.scrollTop()-u)):(i.css("z-index","100"),n.css("height",n.height()-a),r.css("height",r.height()+a),n.scrollTop(n.scrollTop()+u))}},C=function(e){y(e,I18n.t("chat.videochat.disconnected")),t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"videoChange")).find("span").hide(),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1);var i=PRESENCE.WINDOW.getChatBoxForSlug(e);i.height(PRESENCE.WINDOW.getChatBoxHeight())},E=function(){if("default"==r)for(var e=document.styleSheets,t=0;e.length>t;t++){var n=e[t].cssRules||e[t].rules;if(n!=i)for(var s=0;n.length>s;s++)".chat-videothick"===n[s].selectorText&&(n[s].style.display="none")}},S=function(e){x(e)},k=235,I=145,T=235,A=145,N=function(e){TB.checkSystemRequirements()!=TB.HAS_REQUIREMENTS?(y(e,I18n.t("chat.videochat.requirements")),contactsInfo[e].videoChatStatus="disconnected"):(contactsInfo[e].session=TB.initSession(contactsInfo[e].session_id),contactsInfo[e].session.addEventListener("sessionConnected",PRESENCE.VIDEOCHAT.sessionConnectedHandler),contactsInfo[e].session.addEventListener("sessionDisconnected",PRESENCE.VIDEOCHAT.sessionDisconnectedHandler),contactsInfo[e].session.addEventListener("streamCreated",PRESENCE.VIDEOCHAT.streamCreatedHandler),contactsInfo[e].session.addEventListener("streamDestroyed",PRESENCE.VIDEOCHAT.streamDestroyedHandler),contactsInfo[e].session.connect(r,contactsInfo[e].user_token),s[contactsInfo[e].session_id]=e)},P=function(e){if(e.target.sessionId in s){var i=s[e.target.sessionId];contactsInfo[i].videoChatStatus="connected",t(PRESENCE.WINDOW.getChatBoxButtonForSlug(i,"videoChange")).find("span").show();var n=document.createElement("div"),r="stream_publish_videochat_"+i;n.setAttribute("id",r),n.setAttribute("class","stream_publish_videochat");var a=document.createElement("div");a.id="opentok_publisher&"+i,n.appendChild(a),PRESENCE.WINDOW.setVideoBoxContent(i,n);var o={width:k,height:I};contactsInfo[i].publisher=contactsInfo[i].session.publish(a.id,o),contactsInfo[i].publisher.addEventListener("accessAllowed",O),F(e.streams,i),x(i)}},D=function(e){var t=s[e.target.sessionId];contactsInfo[t].publisher=null,contactsInfo[t].videoChatStatus="disconnected"},M=function(e){var t=s[e.target.sessionId];F(e.streams,t)},R=function(e){var t=s[e.target.sessionId];g(t)},F=function(e,t){for(var i=contactsInfo[t].session,n=0;e.length>n;n++){if(e[n].connection.connectionId==i.connection.connectionId)return;var r=document.createElement("div");r.setAttribute("class","stream_videochat");var s=document.createElement("div");s.id="stream"+e[n].streamId,r.appendChild(s),PRESENCE.WINDOW.addVideoBoxContent(t,r);var a={width:T,height:A};i.subscribe(e[n],s.id,a)}},O=function(e){var t=e.target.replacedDivId.split("&")[1];x(t)};return{init:n,clickVideoChatButton:a,clientInfoReceivedTrigger:v,closeVideoSession:g,updateInterfaceAfterVideoRequestReceived:b,receiveVideoChatResponseFromUser:p,receiveVideoChatCancelationFromUser:m,clickVideoChangeChatButton:S,sessionConnectedHandler:P,sessionDisconnectedHandler:D,streamCreatedHandler:M,streamDestroyedHandler:R}}(PRESENCE,jQuery),PRESENCE.WINDOW=function(e,t){var n,r=function(){},s=0,a=5,o=230,l=180,c=145,u=new Array,h=0,d=o+12,f=function(e,i){var n=PRESENCE.XMPPClient.getNameFromSlug(e);if(i)var r=I18n.t("chat.muc.group",{group:n});else var r=n;if("undefined"==typeof window[Q(e)]){t("#chat_divs").append("<div id="+e+" name="+n+" class=chatbox ></div>"),boxParams=m();var s=boxParams[0],a=boxParams[1];return window[Q(e)]=t("#"+e).chatbox({id:user_name,user:{key:"value"},hidden:!1,offset:s,width:o,height:l,video:0,title:r,position:a,priority:u.length+1,groupBox:i,boxClosed:function(){PRESENCE.WINDOW.closeChatBox(e)},messageSent:function(t,i,n){PRESENCE.XMPPClient.sendChatMessage(e,n)}}),u[a-1]=window[Q(e)],!0}if(-1==u.indexOf(window[Q(e)])){boxParams=m();var s=boxParams[0],a=boxParams[1];window[Q(e)].chatbox("option","offset",s),window[Q(e)].chatbox("option","position",a),u[a-1]=window[Q(e)]}return window[Q(e)].chatbox("option","hidden",!1),window[Q(e)].parent().toggle(!0),!1},m=function(){var e=new Array(2);return s==a?(replaced=u[j()],replaced.chatbox("option","hidden",!0),index=u.indexOf(replaced),e[0]=replaced.chatbox("option","offset"),e[1]=replaced.chatbox("option","position")):(s++,e[0]=(s-1)*d,1!=s&&null!=n&&(e[0]=e[0]-h),e[1]=s),e},g=function(e){var n=K(e).chatbox("option","position");for(i=n+1;u.length+1>i;i++)u[i-1].chatbox("option","offset",u[i-1].chatbox("option","offset")-d),u[i-1].chatbox("option","position",u[i-1].chatbox("option","position")-1);u.splice(n-1,1),t("#"+e).chatbox("option","hidden",!0),s--,st(e)&&PRESENCE.XMPPClient.leaveRoom(e)},v=function(e){return f(e,!1)},y=function(e,i){if(f(e,!0)){var n=K(e);return t(et(e,"games")).remove(),t(et(e,"video")).remove(),t(n.parent()).find(".ui-videobox").remove(),n.parent().toggle(i),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(e,I18n.t("chat.muc.joining")),!0}return!1},b=5,_=11,w=150,x=50,C=30,E=260,S=136,k=x+C*_,I="SocialStream_MainChat",T=[x,E],A=function(){null==n&&(f(I,!1),n=window[Q(I)],t(n.parent().parent()).find(".ui-chatbox-titlebar").find(".ui-icon-closethick").remove(),t(n.parent().parent()).find(".ui-videobox-icon").remove(),t(n.parent().parent()).find(".chat-gamesthick").remove(),n.parent().parent().find(".ui-chatbox-titlebar").find(".chat-minusthick").parent().css("margin-right","5px"),t(n.parent()).find(".ui-chatbox-notify").remove(),t(n.parent()).find(".ui-videobox").remove(),t(n.parent()).find(".ui-chatbox-input").remove(),t(n).css("background-color",t(n.parent().parent()).find(".ui-chatbox-titlebar").css("background-color")),F(O()),window[Q(I)].parent().parent().css("width",w),t(n.parent().parent()).find(".ui-chatbox-titlebar").css("width",w-6),t(n).css("width",w-6),h=235-w,t("#chat_partial").css("margin-top",-3),t("#chat_partial").css("margin-left",-3),t(".dropdown dd ul").css("min-width",147),t(n).css("overflow-x","hidden"),t(n).css("overflow-y","hidden"),n.parent().toggle(PRESENCE.PERSISTENCE.getRestoreMainChatBoxStatus()),PRESENCE.UIMANAGER.updateConnectedUsersOfMainChatBox())},N=function(){return n},P=function(){return T},D=function(e){null!=n&&t(n.parent()).find("#"+I).html(e)},M=function(e){return null!=n?(p=t(e),t(p).find(".header").remove(),t(p).find(".dropdown dd ul").css("min-width",147),t(p)):e},R=function(e){null!=n&&t(t(n.parent().parent()).find(".ui-chatbox-titlebar").find("span")[0]).html(e)},F=function(e){if(null!=n){if(t("#chat_partial #search_chat_contact_flexselect").is(":focus")&&!focusSearchContactsFlag)return;focusSearchContactsFlag=!1,e>k?(e=k,t(n).css("overflow-y","visible"),n.chatbox("option","offset","5px"),n.chatbox("option","width",w+5)):(t(n).css("overflow-y","hidden"),n.chatbox("option","offset","0px"),n.chatbox("option","width",w),e=Math.max(e,S)),window[Q(I)].css("height",e)}},O=function(){if(null!=n){var e=x+Math.ceil(PRESENCE.UIMANAGER.getAllConnectedSlugs().length/b)*C;return e}return null},j=function(){for(tmp=u[0],i=0;u.length>i;i++)u[i].chatbox("option","priority")>tmp.chatbox("option","priority")&&(tmp=u[i]);return u.indexOf(tmp)},H=function(e){if(priority=t("#"+e).chatbox("option","priority"),priority>1){for(i=0;u.length>i;i++)priority>u[i].chatbox("option","priority")&&u[i].chatbox("option","priority",u[i].chatbox("option","priority")+1);t("#"+e).chatbox("option","priority",1)}},L=function(e){var i=t("#"+e).parent().find("div.ui-videobox");return 1==i.length?i:null},B=function(e){var i=t("#stream_publish_videochat_"+e);return i.length>0?i:null},q=function(e,t){var i=L(e);null!=i&&i.html(t)},z=function(e,t){var i=L(e);null!=i&&i.append(t)},W=function(e){e.chatbox("option","video",c)},$=function(e){e.chatbox("option","video",0)},U=function(e){var i=t(e.element).attr("id");PRESENCE.VIDEOCHAT.clickVideoChatButton(i)},G=function(e){var i=t(e.element).attr("id");PRESENCE.VIDEOCHAT.clickVideoChangeChatButton(i)},V=function(e,t){var i,n=K(e);return null==n?null:(i="undefined"!=typeof t?t:0==n.chatbox("option","video")?!0:!1,i?(W(n),!0):($(n),!1))},Q=function(e){return"Slug_"+e},Y=function(){var e=new Array;for(i=0;u.length>i;i++)u[i][0].id!=I&&e.push(u[i]);return e},X=function(){return t(".chatbox").not(document.getElementById(I))},K=function(e){return"undefined"==typeof window[Q(e)]?null:window[Q(e)]},Z=function(e){var t=K(e);return null!=t?t.parent().parent().find(".ui-chatbox-titlebar"):null},J=function(e){var t=Z(e);return null!=t?t.find(".ui-chatbox-icon"):null},et=function(e,t){var i=J(e);if(null==i)return null;switch(t){case"close":return i[0];case"min":return i[1];case"video":return i[2];case"videoChange":return i[3];case"games":return i[4];default:return null}},tt=function(){var e=[],i=[];return t.each(X(),function(n,r){t(r).parent().find(".ui-videobox").is(":visible")&&i.push(t(r).attr("id")),e.push(t(r).attr("id"))}),[e,i]},it=function(){return tt()[0]},nt=function(){return tt()[1]},rt=function(){var e=it(),i=PRESENCE.UIMANAGER.getAllConnectedSlugs(),n=[];return t.each(e,function(e,t){-1==i.indexOf(t)&&n.push(t)}),n},st=function(e){var t=K(e);return null!=t?t.chatbox("option","groupBox"):!1},at=function(){var e=[];return t.each(Y(),function(i,n){t(n).chatbox("option","groupBox")&&e.push(t(n).attr("id"))}),e},ot=function(){return l};return{init:r,createMainChatBox:A,createBuddyChatBox:v,createGroupChatBox:y,closeChatBox:g,rotatePriority:H,addContentToMainChatBox:D,modifyChatPartialIfMainBox:M,changeMainChatBoxHeaderTitle:R,changeMainChatBoxHeight:F,getChatBoxHeightRequiredForConnectionBoxes:O,getVideoBoxForSlug:L,getPublisherVideoBoxForSlug:B,setVideoBoxContent:q,addVideoBoxContent:z,toggleVideoBox:U,toggleVideoBoxChange:G,toggleVideoBoxForSlug:V,getVisibleChatBoxes:Y,getAllChatBoxes:X,getChatBoxForSlug:K,getChatBoxHeaderForSlug:Z,getChatBoxButtonForSlug:et,getAllSlugsWithVisibleVideoBoxes:nt,getAllDisconnectedSlugsWithChatBoxes:rt,isSlugGroup:st,getAllSlugsWithVisibleGroupBoxes:at,getMainChatBox:N,getMainchatBoxParams:P,getChatBoxHeight:ot}}(PRESENCE,jQuery);